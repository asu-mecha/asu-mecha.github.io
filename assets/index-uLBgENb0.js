function _mergeNamespaces(i,e){for(var s=0;s<e.length;s++){const o=e[s];if(typeof o!="string"&&!Array.isArray(o)){for(const a in o)if(a!=="default"&&!(a in i)){const c=Object.getOwnPropertyDescriptor(o,a);c&&Object.defineProperty(i,a,c.get?c:{enumerable:!0,get:()=>o[a]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const c of a)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&o(h)}).observe(document,{childList:!0,subtree:!0});function s(a){const c={};return a.integrity&&(c.integrity=a.integrity),a.referrerPolicy&&(c.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?c.credentials="include":a.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function o(a){if(a.ep)return;a.ep=!0;const c=s(a);fetch(a.href,c)}})();var commonjsGlobal$1=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function getDefaultExportFromCjs(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}function getAugmentedNamespace(i){if(i.__esModule)return i;var e=i.default;if(typeof e=="function"){var s=function o(){return this instanceof o?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(i).forEach(function(o){var a=Object.getOwnPropertyDescriptor(i,o);Object.defineProperty(s,o,a.get?a:{enumerable:!0,get:function(){return i[o]}})}),s}var jsxRuntime={exports:{}},reactJsxRuntime_production_min={},react={exports:{}},react_production_min={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l$2=Symbol.for("react.element"),n$1=Symbol.for("react.portal"),p$3=Symbol.for("react.fragment"),q$2=Symbol.for("react.strict_mode"),r$2=Symbol.for("react.profiler"),t=Symbol.for("react.provider"),u=Symbol.for("react.context"),v$3=Symbol.for("react.forward_ref"),w$2=Symbol.for("react.suspense"),x$1=Symbol.for("react.memo"),y$1=Symbol.for("react.lazy"),z$2=Symbol.iterator;function A$2(i){return i===null||typeof i!="object"?null:(i=z$2&&i[z$2]||i["@@iterator"],typeof i=="function"?i:null)}var B$2={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C$3=Object.assign,D$3={};function E$2(i,e,s){this.props=i,this.context=e,this.refs=D$3,this.updater=s||B$2}E$2.prototype.isReactComponent={};E$2.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};E$2.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function F$2(){}F$2.prototype=E$2.prototype;function G$2(i,e,s){this.props=i,this.context=e,this.refs=D$3,this.updater=s||B$2}var H$2=G$2.prototype=new F$2;H$2.constructor=G$2;C$3(H$2,E$2.prototype);H$2.isPureReactComponent=!0;var I$2=Array.isArray,J$1=Object.prototype.hasOwnProperty,K$2={current:null},L$1={key:!0,ref:!0,__self:!0,__source:!0};function M$2(i,e,s){var o,a={},c=null,h=null;if(e!=null)for(o in e.ref!==void 0&&(h=e.ref),e.key!==void 0&&(c=""+e.key),e)J$1.call(e,o)&&!L$1.hasOwnProperty(o)&&(a[o]=e[o]);var _=arguments.length-2;if(_===1)a.children=s;else if(1<_){for(var $=Array(_),g=0;g<_;g++)$[g]=arguments[g+2];a.children=$}if(i&&i.defaultProps)for(o in _=i.defaultProps,_)a[o]===void 0&&(a[o]=_[o]);return{$$typeof:l$2,type:i,key:c,ref:h,props:a,_owner:K$2.current}}function N$2(i,e){return{$$typeof:l$2,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function O$2(i){return typeof i=="object"&&i!==null&&i.$$typeof===l$2}function escape$1(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(s){return e[s]})}var P$2=/\/+/g;function Q$2(i,e){return typeof i=="object"&&i!==null&&i.key!=null?escape$1(""+i.key):e.toString(36)}function R$2(i,e,s,o,a){var c=typeof i;(c==="undefined"||c==="boolean")&&(i=null);var h=!1;if(i===null)h=!0;else switch(c){case"string":case"number":h=!0;break;case"object":switch(i.$$typeof){case l$2:case n$1:h=!0}}if(h)return h=i,a=a(h),i=o===""?"."+Q$2(h,0):o,I$2(a)?(s="",i!=null&&(s=i.replace(P$2,"$&/")+"/"),R$2(a,e,s,"",function(g){return g})):a!=null&&(O$2(a)&&(a=N$2(a,s+(!a.key||h&&h.key===a.key?"":(""+a.key).replace(P$2,"$&/")+"/")+i)),e.push(a)),1;if(h=0,o=o===""?".":o+":",I$2(i))for(var _=0;_<i.length;_++){c=i[_];var $=o+Q$2(c,_);h+=R$2(c,e,s,$,a)}else if($=A$2(i),typeof $=="function")for(i=$.call(i),_=0;!(c=i.next()).done;)c=c.value,$=o+Q$2(c,_++),h+=R$2(c,e,s,$,a);else if(c==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return h}function S$3(i,e,s){if(i==null)return i;var o=[],a=0;return R$2(i,o,"","",function(c){return e.call(s,c,a++)}),o}function T$2(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(s){(i._status===0||i._status===-1)&&(i._status=1,i._result=s)},function(s){(i._status===0||i._status===-1)&&(i._status=2,i._result=s)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var U$2={current:null},V$2={transition:null},W$2={ReactCurrentDispatcher:U$2,ReactCurrentBatchConfig:V$2,ReactCurrentOwner:K$2};react_production_min.Children={map:S$3,forEach:function(i,e,s){S$3(i,function(){e.apply(this,arguments)},s)},count:function(i){var e=0;return S$3(i,function(){e++}),e},toArray:function(i){return S$3(i,function(e){return e})||[]},only:function(i){if(!O$2(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};react_production_min.Component=E$2;react_production_min.Fragment=p$3;react_production_min.Profiler=r$2;react_production_min.PureComponent=G$2;react_production_min.StrictMode=q$2;react_production_min.Suspense=w$2;react_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W$2;react_production_min.cloneElement=function(i,e,s){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var o=C$3({},i.props),a=i.key,c=i.ref,h=i._owner;if(e!=null){if(e.ref!==void 0&&(c=e.ref,h=K$2.current),e.key!==void 0&&(a=""+e.key),i.type&&i.type.defaultProps)var _=i.type.defaultProps;for($ in e)J$1.call(e,$)&&!L$1.hasOwnProperty($)&&(o[$]=e[$]===void 0&&_!==void 0?_[$]:e[$])}var $=arguments.length-2;if($===1)o.children=s;else if(1<$){_=Array($);for(var g=0;g<$;g++)_[g]=arguments[g+2];o.children=_}return{$$typeof:l$2,type:i.type,key:a,ref:c,props:o,_owner:h}};react_production_min.createContext=function(i){return i={$$typeof:u,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:t,_context:i},i.Consumer=i};react_production_min.createElement=M$2;react_production_min.createFactory=function(i){var e=M$2.bind(null,i);return e.type=i,e};react_production_min.createRef=function(){return{current:null}};react_production_min.forwardRef=function(i){return{$$typeof:v$3,render:i}};react_production_min.isValidElement=O$2;react_production_min.lazy=function(i){return{$$typeof:y$1,_payload:{_status:-1,_result:i},_init:T$2}};react_production_min.memo=function(i,e){return{$$typeof:x$1,type:i,compare:e===void 0?null:e}};react_production_min.startTransition=function(i){var e=V$2.transition;V$2.transition={};try{i()}finally{V$2.transition=e}};react_production_min.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};react_production_min.useCallback=function(i,e){return U$2.current.useCallback(i,e)};react_production_min.useContext=function(i){return U$2.current.useContext(i)};react_production_min.useDebugValue=function(){};react_production_min.useDeferredValue=function(i){return U$2.current.useDeferredValue(i)};react_production_min.useEffect=function(i,e){return U$2.current.useEffect(i,e)};react_production_min.useId=function(){return U$2.current.useId()};react_production_min.useImperativeHandle=function(i,e,s){return U$2.current.useImperativeHandle(i,e,s)};react_production_min.useInsertionEffect=function(i,e){return U$2.current.useInsertionEffect(i,e)};react_production_min.useLayoutEffect=function(i,e){return U$2.current.useLayoutEffect(i,e)};react_production_min.useMemo=function(i,e){return U$2.current.useMemo(i,e)};react_production_min.useReducer=function(i,e,s){return U$2.current.useReducer(i,e,s)};react_production_min.useRef=function(i){return U$2.current.useRef(i)};react_production_min.useState=function(i){return U$2.current.useState(i)};react_production_min.useSyncExternalStore=function(i,e,s){return U$2.current.useSyncExternalStore(i,e,s)};react_production_min.useTransition=function(){return U$2.current.useTransition()};react_production_min.version="18.2.0";react.exports=react_production_min;var reactExports=react.exports;const React=getDefaultExportFromCjs(reactExports),React$1=_mergeNamespaces({__proto__:null,default:React},[reactExports]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var f=reactExports,k$1=Symbol.for("react.element"),l$1=Symbol.for("react.fragment"),m$1=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p$2={key:!0,ref:!0,__self:!0,__source:!0};function q$1(i,e,s){var o,a={},c=null,h=null;s!==void 0&&(c=""+s),e.key!==void 0&&(c=""+e.key),e.ref!==void 0&&(h=e.ref);for(o in e)m$1.call(e,o)&&!p$2.hasOwnProperty(o)&&(a[o]=e[o]);if(i&&i.defaultProps)for(o in e=i.defaultProps,e)a[o]===void 0&&(a[o]=e[o]);return{$$typeof:k$1,type:i,key:c,ref:h,props:a,_owner:n.current}}reactJsxRuntime_production_min.Fragment=l$1;reactJsxRuntime_production_min.jsx=q$1;reactJsxRuntime_production_min.jsxs=q$1;jsxRuntime.exports=reactJsxRuntime_production_min;var jsxRuntimeExports=jsxRuntime.exports,client={},reactDom={exports:{}},reactDom_production_min={},scheduler={exports:{}},scheduler_production_min={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(ft,ct){var dt=ft.length;ft.push(ct);e:for(;0<dt;){var gt=dt-1>>>1,Tt=ft[gt];if(0<a(Tt,ct))ft[gt]=ct,ft[dt]=Tt,dt=gt;else break e}}function s(ft){return ft.length===0?null:ft[0]}function o(ft){if(ft.length===0)return null;var ct=ft[0],dt=ft.pop();if(dt!==ct){ft[0]=dt;e:for(var gt=0,Tt=ft.length,wt=Tt>>>1;gt<wt;){var xt=2*(gt+1)-1,At=ft[xt],at=xt+1,mt=ft[at];if(0>a(At,dt))at<Tt&&0>a(mt,At)?(ft[gt]=mt,ft[at]=dt,gt=at):(ft[gt]=At,ft[xt]=dt,gt=xt);else if(at<Tt&&0>a(mt,dt))ft[gt]=mt,ft[at]=dt,gt=at;else break e}}return ct}function a(ft,ct){var dt=ft.sortIndex-ct.sortIndex;return dt!==0?dt:ft.id-ct.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var h=Date,_=h.now();i.unstable_now=function(){return h.now()-_}}var $=[],g=[],d=1,j=null,tt=3,rt=!1,et=!1,it=!1,st=typeof setTimeout=="function"?setTimeout:null,nt=typeof clearTimeout=="function"?clearTimeout:null,ot=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function ht(ft){for(var ct=s(g);ct!==null;){if(ct.callback===null)o(g);else if(ct.startTime<=ft)o(g),ct.sortIndex=ct.expirationTime,e($,ct);else break;ct=s(g)}}function pt(ft){if(it=!1,ht(ft),!et)if(s($)!==null)et=!0,Ht(lt);else{var ct=s(g);ct!==null&&St(pt,ct.startTime-ft)}}function lt(ft,ct){et=!1,it&&(it=!1,nt(Pt),Pt=-1),rt=!0;var dt=tt;try{for(ht(ct),j=s($);j!==null&&(!(j.expirationTime>ct)||ft&&!Dt());){var gt=j.callback;if(typeof gt=="function"){j.callback=null,tt=j.priorityLevel;var Tt=gt(j.expirationTime<=ct);ct=i.unstable_now(),typeof Tt=="function"?j.callback=Tt:j===s($)&&o($),ht(ct)}else o($);j=s($)}if(j!==null)var wt=!0;else{var xt=s(g);xt!==null&&St(pt,xt.startTime-ct),wt=!1}return wt}finally{j=null,tt=dt,rt=!1}}var ut=!1,yt=null,Pt=-1,vt=5,Vt=-1;function Dt(){return!(i.unstable_now()-Vt<vt)}function Qt(){if(yt!==null){var ft=i.unstable_now();Vt=ft;var ct=!0;try{ct=yt(!0,ft)}finally{ct?Wt():(ut=!1,yt=null)}}else ut=!1}var Wt;if(typeof ot=="function")Wt=function(){ot(Qt)};else if(typeof MessageChannel<"u"){var Kt=new MessageChannel,tn=Kt.port2;Kt.port1.onmessage=Qt,Wt=function(){tn.postMessage(null)}}else Wt=function(){st(Qt,0)};function Ht(ft){yt=ft,ut||(ut=!0,Wt())}function St(ft,ct){Pt=st(function(){ft(i.unstable_now())},ct)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(ft){ft.callback=null},i.unstable_continueExecution=function(){et||rt||(et=!0,Ht(lt))},i.unstable_forceFrameRate=function(ft){0>ft||125<ft?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):vt=0<ft?Math.floor(1e3/ft):5},i.unstable_getCurrentPriorityLevel=function(){return tt},i.unstable_getFirstCallbackNode=function(){return s($)},i.unstable_next=function(ft){switch(tt){case 1:case 2:case 3:var ct=3;break;default:ct=tt}var dt=tt;tt=ct;try{return ft()}finally{tt=dt}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(ft,ct){switch(ft){case 1:case 2:case 3:case 4:case 5:break;default:ft=3}var dt=tt;tt=ft;try{return ct()}finally{tt=dt}},i.unstable_scheduleCallback=function(ft,ct,dt){var gt=i.unstable_now();switch(typeof dt=="object"&&dt!==null?(dt=dt.delay,dt=typeof dt=="number"&&0<dt?gt+dt:gt):dt=gt,ft){case 1:var Tt=-1;break;case 2:Tt=250;break;case 5:Tt=1073741823;break;case 4:Tt=1e4;break;default:Tt=5e3}return Tt=dt+Tt,ft={id:d++,callback:ct,priorityLevel:ft,startTime:dt,expirationTime:Tt,sortIndex:-1},dt>gt?(ft.sortIndex=dt,e(g,ft),s($)===null&&ft===s(g)&&(it?(nt(Pt),Pt=-1):it=!0,St(pt,dt-gt))):(ft.sortIndex=Tt,e($,ft),et||rt||(et=!0,Ht(lt))),ft},i.unstable_shouldYield=Dt,i.unstable_wrapCallback=function(ft){var ct=tt;return function(){var dt=tt;tt=ct;try{return ft.apply(this,arguments)}finally{tt=dt}}}})(scheduler_production_min);scheduler.exports=scheduler_production_min;var schedulerExports=scheduler.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aa$1=reactExports,ca$1=schedulerExports;function p$1(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var da$1=new Set,ea$1={};function fa$1(i,e){ha$1(i,e),ha$1(i+"Capture",e)}function ha$1(i,e){for(ea$1[i]=e,i=0;i<e.length;i++)da$1.add(e[i])}var ia$1=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ja=Object.prototype.hasOwnProperty,ka$1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,la={},ma$1={};function oa$1(i){return ja.call(ma$1,i)?!0:ja.call(la,i)?!1:ka$1.test(i)?ma$1[i]=!0:(la[i]=!0,!1)}function pa$1(i,e,s,o){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:s!==null?!s.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function qa$1(i,e,s,o){if(e===null||typeof e>"u"||pa$1(i,e,s,o))return!0;if(o)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function v$2(i,e,s,o,a,c,h){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=a,this.mustUseProperty=s,this.propertyName=i,this.type=e,this.sanitizeURL=c,this.removeEmptyString=h}var z$1={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){z$1[i]=new v$2(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];z$1[e]=new v$2(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){z$1[i]=new v$2(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){z$1[i]=new v$2(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){z$1[i]=new v$2(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){z$1[i]=new v$2(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){z$1[i]=new v$2(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){z$1[i]=new v$2(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){z$1[i]=new v$2(i,5,!1,i.toLowerCase(),null,!1,!1)});var ra$1=/[\-:]([a-z])/g;function sa$1(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(ra$1,sa$1);z$1[e]=new v$2(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(ra$1,sa$1);z$1[e]=new v$2(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(ra$1,sa$1);z$1[e]=new v$2(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){z$1[i]=new v$2(i,1,!1,i.toLowerCase(),null,!1,!1)});z$1.xlinkHref=new v$2("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){z$1[i]=new v$2(i,1,!1,i.toLowerCase(),null,!0,!0)});function ta$1(i,e,s,o){var a=z$1.hasOwnProperty(e)?z$1[e]:null;(a!==null?a.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(qa$1(e,s,a,o)&&(s=null),o||a===null?oa$1(e)&&(s===null?i.removeAttribute(e):i.setAttribute(e,""+s)):a.mustUseProperty?i[a.propertyName]=s===null?a.type===3?!1:"":s:(e=a.attributeName,o=a.attributeNamespace,s===null?i.removeAttribute(e):(a=a.type,s=a===3||a===4&&s===!0?"":""+s,o?i.setAttributeNS(o,e,s):i.setAttribute(e,s))))}var ua$1=aa$1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va$1=Symbol.for("react.element"),wa$1=Symbol.for("react.portal"),ya$1=Symbol.for("react.fragment"),za$1=Symbol.for("react.strict_mode"),Aa$1=Symbol.for("react.profiler"),Ba$1=Symbol.for("react.provider"),Ca$1=Symbol.for("react.context"),Da$1=Symbol.for("react.forward_ref"),Ea$1=Symbol.for("react.suspense"),Fa$1=Symbol.for("react.suspense_list"),Ga$1=Symbol.for("react.memo"),Ha$1=Symbol.for("react.lazy"),Ia$1=Symbol.for("react.offscreen"),Ja$1=Symbol.iterator;function Ka(i){return i===null||typeof i!="object"?null:(i=Ja$1&&i[Ja$1]||i["@@iterator"],typeof i=="function"?i:null)}var A$1=Object.assign,La;function Ma$1(i){if(La===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);La=e&&e[1]||""}return`
`+La+i}var Na$1=!1;function Oa$1(i,e){if(!i||Na$1)return"";Na$1=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(g){var o=g}Reflect.construct(i,[],e)}else{try{e.call()}catch(g){o=g}i.call(e.prototype)}else{try{throw Error()}catch(g){o=g}i()}}catch(g){if(g&&o&&typeof g.stack=="string"){for(var a=g.stack.split(`
`),c=o.stack.split(`
`),h=a.length-1,_=c.length-1;1<=h&&0<=_&&a[h]!==c[_];)_--;for(;1<=h&&0<=_;h--,_--)if(a[h]!==c[_]){if(h!==1||_!==1)do if(h--,_--,0>_||a[h]!==c[_]){var $=`
`+a[h].replace(" at new "," at ");return i.displayName&&$.includes("<anonymous>")&&($=$.replace("<anonymous>",i.displayName)),$}while(1<=h&&0<=_);break}}}finally{Na$1=!1,Error.prepareStackTrace=s}return(i=i?i.displayName||i.name:"")?Ma$1(i):""}function Pa$1(i){switch(i.tag){case 5:return Ma$1(i.type);case 16:return Ma$1("Lazy");case 13:return Ma$1("Suspense");case 19:return Ma$1("SuspenseList");case 0:case 2:case 15:return i=Oa$1(i.type,!1),i;case 11:return i=Oa$1(i.type.render,!1),i;case 1:return i=Oa$1(i.type,!0),i;default:return""}}function Qa$1(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case ya$1:return"Fragment";case wa$1:return"Portal";case Aa$1:return"Profiler";case za$1:return"StrictMode";case Ea$1:return"Suspense";case Fa$1:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case Ca$1:return(i.displayName||"Context")+".Consumer";case Ba$1:return(i._context.displayName||"Context")+".Provider";case Da$1:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case Ga$1:return e=i.displayName||null,e!==null?e:Qa$1(i.type)||"Memo";case Ha$1:e=i._payload,i=i._init;try{return Qa$1(i(e))}catch{}}return null}function Ra$1(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Qa$1(e);case 8:return e===za$1?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Sa$1(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ta$1(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ua$1(i){var e=Ta$1(i)?"checked":"value",s=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),o=""+i[e];if(!i.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var a=s.get,c=s.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return a.call(this)},set:function(h){o=""+h,c.call(this,h)}}),Object.defineProperty(i,e,{enumerable:s.enumerable}),{getValue:function(){return o},setValue:function(h){o=""+h},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function Va$1(i){i._valueTracker||(i._valueTracker=Ua$1(i))}function Wa$1(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var s=e.getValue(),o="";return i&&(o=Ta$1(i)?i.checked?"true":"false":i.value),i=o,i!==s?(e.setValue(i),!0):!1}function Xa(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ya$1(i,e){var s=e.checked;return A$1({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??i._wrapperState.initialChecked})}function Za$1(i,e){var s=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;s=Sa$1(e.value!=null?e.value:s),i._wrapperState={initialChecked:o,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ab$1(i,e){e=e.checked,e!=null&&ta$1(i,"checked",e,!1)}function bb$1(i,e){ab$1(i,e);var s=Sa$1(e.value),o=e.type;if(s!=null)o==="number"?(s===0&&i.value===""||i.value!=s)&&(i.value=""+s):i.value!==""+s&&(i.value=""+s);else if(o==="submit"||o==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?cb$1(i,e.type,s):e.hasOwnProperty("defaultValue")&&cb$1(i,e.type,Sa$1(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function db$2(i,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,s||e===i.value||(i.value=e),i.defaultValue=e}s=i.name,s!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,s!==""&&(i.name=s)}function cb$1(i,e,s){(e!=="number"||Xa(i.ownerDocument)!==i)&&(s==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+s&&(i.defaultValue=""+s))}var eb$1=Array.isArray;function fb$1(i,e,s,o){if(i=i.options,e){e={};for(var a=0;a<s.length;a++)e["$"+s[a]]=!0;for(s=0;s<i.length;s++)a=e.hasOwnProperty("$"+i[s].value),i[s].selected!==a&&(i[s].selected=a),a&&o&&(i[s].defaultSelected=!0)}else{for(s=""+Sa$1(s),e=null,a=0;a<i.length;a++){if(i[a].value===s){i[a].selected=!0,o&&(i[a].defaultSelected=!0);return}e!==null||i[a].disabled||(e=i[a])}e!==null&&(e.selected=!0)}}function gb$1(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(p$1(91));return A$1({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function hb$1(i,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(p$1(92));if(eb$1(s)){if(1<s.length)throw Error(p$1(93));s=s[0]}e=s}e==null&&(e=""),s=e}i._wrapperState={initialValue:Sa$1(s)}}function ib$1(i,e){var s=Sa$1(e.value),o=Sa$1(e.defaultValue);s!=null&&(s=""+s,s!==i.value&&(i.value=s),e.defaultValue==null&&i.defaultValue!==s&&(i.defaultValue=s)),o!=null&&(i.defaultValue=""+o)}function jb$1(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function kb$1(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function lb$1(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?kb$1(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var mb$1,nb$1=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,o,a){MSApp.execUnsafeLocalFunction(function(){return i(e,s,o,a)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(mb$1=mb$1||document.createElement("div"),mb$1.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=mb$1.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function ob$1(i,e){if(e){var s=i.firstChild;if(s&&s===i.lastChild&&s.nodeType===3){s.nodeValue=e;return}}i.textContent=e}var pb$1={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qb$1=["Webkit","ms","Moz","O"];Object.keys(pb$1).forEach(function(i){qb$1.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),pb$1[e]=pb$1[i]})});function rb$1(i,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||pb$1.hasOwnProperty(i)&&pb$1[i]?(""+e).trim():e+"px"}function sb$1(i,e){i=i.style;for(var s in e)if(e.hasOwnProperty(s)){var o=s.indexOf("--")===0,a=rb$1(s,e[s],o);s==="float"&&(s="cssFloat"),o?i.setProperty(s,a):i[s]=a}}var tb$1=A$1({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ub$1(i,e){if(e){if(tb$1[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(p$1(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(p$1(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(p$1(61))}if(e.style!=null&&typeof e.style!="object")throw Error(p$1(62))}}function vb$1(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wb$1=null;function xb$1(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var yb$1=null,zb$1=null,Ab$1=null;function Bb$1(i){if(i=Cb$1(i)){if(typeof yb$1!="function")throw Error(p$1(280));var e=i.stateNode;e&&(e=Db(e),yb$1(i.stateNode,i.type,e))}}function Eb$1(i){zb$1?Ab$1?Ab$1.push(i):Ab$1=[i]:zb$1=i}function Fb$1(){if(zb$1){var i=zb$1,e=Ab$1;if(Ab$1=zb$1=null,Bb$1(i),e)for(i=0;i<e.length;i++)Bb$1(e[i])}}function Gb$1(i,e){return i(e)}function Hb$1(){}var Ib$1=!1;function Jb$1(i,e,s){if(Ib$1)return i(e,s);Ib$1=!0;try{return Gb$1(i,e,s)}finally{Ib$1=!1,(zb$1!==null||Ab$1!==null)&&(Hb$1(),Fb$1())}}function Kb$1(i,e){var s=i.stateNode;if(s===null)return null;var o=Db(s);if(o===null)return null;s=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(i=i.type,o=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!o;break e;default:i=!1}if(i)return null;if(s&&typeof s!="function")throw Error(p$1(231,e,typeof s));return s}var Lb$1=!1;if(ia$1)try{var Mb$1={};Object.defineProperty(Mb$1,"passive",{get:function(){Lb$1=!0}}),window.addEventListener("test",Mb$1,Mb$1),window.removeEventListener("test",Mb$1,Mb$1)}catch{Lb$1=!1}function Nb$1(i,e,s,o,a,c,h,_,$){var g=Array.prototype.slice.call(arguments,3);try{e.apply(s,g)}catch(d){this.onError(d)}}var Ob$1=!1,Pb$1=null,Qb$1=!1,Rb$1=null,Sb$1={onError:function(i){Ob$1=!0,Pb$1=i}};function Tb$1(i,e,s,o,a,c,h,_,$){Ob$1=!1,Pb$1=null,Nb$1.apply(Sb$1,arguments)}function Ub$1(i,e,s,o,a,c,h,_,$){if(Tb$1.apply(this,arguments),Ob$1){if(Ob$1){var g=Pb$1;Ob$1=!1,Pb$1=null}else throw Error(p$1(198));Qb$1||(Qb$1=!0,Rb$1=g)}}function Vb$1(i){var e=i,s=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(s=e.return),i=e.return;while(i)}return e.tag===3?s:null}function Wb$1(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function Xb$1(i){if(Vb$1(i)!==i)throw Error(p$1(188))}function Yb$1(i){var e=i.alternate;if(!e){if(e=Vb$1(i),e===null)throw Error(p$1(188));return e!==i?null:i}for(var s=i,o=e;;){var a=s.return;if(a===null)break;var c=a.alternate;if(c===null){if(o=a.return,o!==null){s=o;continue}break}if(a.child===c.child){for(c=a.child;c;){if(c===s)return Xb$1(a),i;if(c===o)return Xb$1(a),e;c=c.sibling}throw Error(p$1(188))}if(s.return!==o.return)s=a,o=c;else{for(var h=!1,_=a.child;_;){if(_===s){h=!0,s=a,o=c;break}if(_===o){h=!0,o=a,s=c;break}_=_.sibling}if(!h){for(_=c.child;_;){if(_===s){h=!0,s=c,o=a;break}if(_===o){h=!0,o=c,s=a;break}_=_.sibling}if(!h)throw Error(p$1(189))}}if(s.alternate!==o)throw Error(p$1(190))}if(s.tag!==3)throw Error(p$1(188));return s.stateNode.current===s?i:e}function Zb$1(i){return i=Yb$1(i),i!==null?$b$1(i):null}function $b$1(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=$b$1(i);if(e!==null)return e;i=i.sibling}return null}var ac$1=ca$1.unstable_scheduleCallback,bc$1=ca$1.unstable_cancelCallback,cc$1=ca$1.unstable_shouldYield,dc$1=ca$1.unstable_requestPaint,B$1=ca$1.unstable_now,ec$1=ca$1.unstable_getCurrentPriorityLevel,fc$1=ca$1.unstable_ImmediatePriority,gc$1=ca$1.unstable_UserBlockingPriority,hc$1=ca$1.unstable_NormalPriority,ic$1=ca$1.unstable_LowPriority,jc$1=ca$1.unstable_IdlePriority,kc$1=null,lc$1=null;function mc$1(i){if(lc$1&&typeof lc$1.onCommitFiberRoot=="function")try{lc$1.onCommitFiberRoot(kc$1,i,void 0,(i.current.flags&128)===128)}catch{}}var oc$1=Math.clz32?Math.clz32:nc$1,pc$1=Math.log,qc$1=Math.LN2;function nc$1(i){return i>>>=0,i===0?32:31-(pc$1(i)/qc$1|0)|0}var rc$1=64,sc$1=4194304;function tc$1(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function uc$1(i,e){var s=i.pendingLanes;if(s===0)return 0;var o=0,a=i.suspendedLanes,c=i.pingedLanes,h=s&268435455;if(h!==0){var _=h&~a;_!==0?o=tc$1(_):(c&=h,c!==0&&(o=tc$1(c)))}else h=s&~a,h!==0?o=tc$1(h):c!==0&&(o=tc$1(c));if(o===0)return 0;if(e!==0&&e!==o&&!(e&a)&&(a=o&-o,c=e&-e,a>=c||a===16&&(c&4194240)!==0))return e;if(o&4&&(o|=s&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=o;0<e;)s=31-oc$1(e),a=1<<s,o|=i[s],e&=~a;return o}function vc$1(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wc$1(i,e){for(var s=i.suspendedLanes,o=i.pingedLanes,a=i.expirationTimes,c=i.pendingLanes;0<c;){var h=31-oc$1(c),_=1<<h,$=a[h];$===-1?(!(_&s)||_&o)&&(a[h]=vc$1(_,e)):$<=e&&(i.expiredLanes|=_),c&=~_}}function xc$1(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function yc$1(){var i=rc$1;return rc$1<<=1,!(rc$1&4194240)&&(rc$1=64),i}function zc$1(i){for(var e=[],s=0;31>s;s++)e.push(i);return e}function Ac$1(i,e,s){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-oc$1(e),i[e]=s}function Bc$1(i,e){var s=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var o=i.eventTimes;for(i=i.expirationTimes;0<s;){var a=31-oc$1(s),c=1<<a;e[a]=0,o[a]=-1,i[a]=-1,s&=~c}}function Cc$1(i,e){var s=i.entangledLanes|=e;for(i=i.entanglements;s;){var o=31-oc$1(s),a=1<<o;a&e|i[o]&e&&(i[o]|=e),s&=~a}}var C$2=0;function Dc$1(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Ec$1,Fc$1,Gc$1,Hc$1,Ic$1,Jc$1=!1,Kc$1=[],Lc$1=null,Mc$1=null,Nc$1=null,Oc$1=new Map,Pc$1=new Map,Qc$1=[],Rc$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Sc$1(i,e){switch(i){case"focusin":case"focusout":Lc$1=null;break;case"dragenter":case"dragleave":Mc$1=null;break;case"mouseover":case"mouseout":Nc$1=null;break;case"pointerover":case"pointerout":Oc$1.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Pc$1.delete(e.pointerId)}}function Tc$1(i,e,s,o,a,c){return i===null||i.nativeEvent!==c?(i={blockedOn:e,domEventName:s,eventSystemFlags:o,nativeEvent:c,targetContainers:[a]},e!==null&&(e=Cb$1(e),e!==null&&Fc$1(e)),i):(i.eventSystemFlags|=o,e=i.targetContainers,a!==null&&e.indexOf(a)===-1&&e.push(a),i)}function Uc$1(i,e,s,o,a){switch(e){case"focusin":return Lc$1=Tc$1(Lc$1,i,e,s,o,a),!0;case"dragenter":return Mc$1=Tc$1(Mc$1,i,e,s,o,a),!0;case"mouseover":return Nc$1=Tc$1(Nc$1,i,e,s,o,a),!0;case"pointerover":var c=a.pointerId;return Oc$1.set(c,Tc$1(Oc$1.get(c)||null,i,e,s,o,a)),!0;case"gotpointercapture":return c=a.pointerId,Pc$1.set(c,Tc$1(Pc$1.get(c)||null,i,e,s,o,a)),!0}return!1}function Vc$1(i){var e=Wc$1(i.target);if(e!==null){var s=Vb$1(e);if(s!==null){if(e=s.tag,e===13){if(e=Wb$1(s),e!==null){i.blockedOn=e,Ic$1(i.priority,function(){Gc$1(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){i.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Xc$1(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var s=Yc$1(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(s===null){s=i.nativeEvent;var o=new s.constructor(s.type,s);wb$1=o,s.target.dispatchEvent(o),wb$1=null}else return e=Cb$1(s),e!==null&&Fc$1(e),i.blockedOn=s,!1;e.shift()}return!0}function Zc$1(i,e,s){Xc$1(i)&&s.delete(e)}function $c$1(){Jc$1=!1,Lc$1!==null&&Xc$1(Lc$1)&&(Lc$1=null),Mc$1!==null&&Xc$1(Mc$1)&&(Mc$1=null),Nc$1!==null&&Xc$1(Nc$1)&&(Nc$1=null),Oc$1.forEach(Zc$1),Pc$1.forEach(Zc$1)}function ad$1(i,e){i.blockedOn===e&&(i.blockedOn=null,Jc$1||(Jc$1=!0,ca$1.unstable_scheduleCallback(ca$1.unstable_NormalPriority,$c$1)))}function bd$1(i){function e(a){return ad$1(a,i)}if(0<Kc$1.length){ad$1(Kc$1[0],i);for(var s=1;s<Kc$1.length;s++){var o=Kc$1[s];o.blockedOn===i&&(o.blockedOn=null)}}for(Lc$1!==null&&ad$1(Lc$1,i),Mc$1!==null&&ad$1(Mc$1,i),Nc$1!==null&&ad$1(Nc$1,i),Oc$1.forEach(e),Pc$1.forEach(e),s=0;s<Qc$1.length;s++)o=Qc$1[s],o.blockedOn===i&&(o.blockedOn=null);for(;0<Qc$1.length&&(s=Qc$1[0],s.blockedOn===null);)Vc$1(s),s.blockedOn===null&&Qc$1.shift()}var cd$1=ua$1.ReactCurrentBatchConfig,dd$1=!0;function ed$1(i,e,s,o){var a=C$2,c=cd$1.transition;cd$1.transition=null;try{C$2=1,fd$1(i,e,s,o)}finally{C$2=a,cd$1.transition=c}}function gd$1(i,e,s,o){var a=C$2,c=cd$1.transition;cd$1.transition=null;try{C$2=4,fd$1(i,e,s,o)}finally{C$2=a,cd$1.transition=c}}function fd$1(i,e,s,o){if(dd$1){var a=Yc$1(i,e,s,o);if(a===null)hd$1(i,e,o,id$1,s),Sc$1(i,o);else if(Uc$1(a,i,e,s,o))o.stopPropagation();else if(Sc$1(i,o),e&4&&-1<Rc$1.indexOf(i)){for(;a!==null;){var c=Cb$1(a);if(c!==null&&Ec$1(c),c=Yc$1(i,e,s,o),c===null&&hd$1(i,e,o,id$1,s),c===a)break;a=c}a!==null&&o.stopPropagation()}else hd$1(i,e,o,null,s)}}var id$1=null;function Yc$1(i,e,s,o){if(id$1=null,i=xb$1(o),i=Wc$1(i),i!==null)if(e=Vb$1(i),e===null)i=null;else if(s=e.tag,s===13){if(i=Wb$1(e),i!==null)return i;i=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return id$1=i,null}function jd$1(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(ec$1()){case fc$1:return 1;case gc$1:return 4;case hc$1:case ic$1:return 16;case jc$1:return 536870912;default:return 16}default:return 16}}var kd$1=null,ld$1=null,md$1=null;function nd$1(){if(md$1)return md$1;var i,e=ld$1,s=e.length,o,a="value"in kd$1?kd$1.value:kd$1.textContent,c=a.length;for(i=0;i<s&&e[i]===a[i];i++);var h=s-i;for(o=1;o<=h&&e[s-o]===a[c-o];o++);return md$1=a.slice(i,1<o?1-o:void 0)}function od$1(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function pd$1(){return!0}function qd$1(){return!1}function rd$1(i){function e(s,o,a,c,h){this._reactName=s,this._targetInst=a,this.type=o,this.nativeEvent=c,this.target=h,this.currentTarget=null;for(var _ in i)i.hasOwnProperty(_)&&(s=i[_],this[_]=s?s(c):c[_]);return this.isDefaultPrevented=(c.defaultPrevented!=null?c.defaultPrevented:c.returnValue===!1)?pd$1:qd$1,this.isPropagationStopped=qd$1,this}return A$1(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=pd$1)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=pd$1)},persist:function(){},isPersistent:pd$1}),e}var sd$1={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},td$1=rd$1(sd$1),ud$1=A$1({},sd$1,{view:0,detail:0}),vd$1=rd$1(ud$1),wd$1,xd$1,yd$1,Ad$1=A$1({},ud$1,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd$1,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==yd$1&&(yd$1&&i.type==="mousemove"?(wd$1=i.screenX-yd$1.screenX,xd$1=i.screenY-yd$1.screenY):xd$1=wd$1=0,yd$1=i),wd$1)},movementY:function(i){return"movementY"in i?i.movementY:xd$1}}),Bd$1=rd$1(Ad$1),Cd$1=A$1({},Ad$1,{dataTransfer:0}),Dd$1=rd$1(Cd$1),Ed$1=A$1({},ud$1,{relatedTarget:0}),Fd$1=rd$1(Ed$1),Gd$1=A$1({},sd$1,{animationName:0,elapsedTime:0,pseudoElement:0}),Hd$1=rd$1(Gd$1),Id$1=A$1({},sd$1,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Jd$1=rd$1(Id$1),Kd$1=A$1({},sd$1,{data:0}),Ld$1=rd$1(Kd$1),Md$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Nd$1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Od$1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Pd$1(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=Od$1[i])?!!e[i]:!1}function zd$1(){return Pd$1}var Qd$1=A$1({},ud$1,{key:function(i){if(i.key){var e=Md$1[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=od$1(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Nd$1[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd$1,charCode:function(i){return i.type==="keypress"?od$1(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?od$1(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Rd$1=rd$1(Qd$1),Sd$1=A$1({},Ad$1,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Td$1=rd$1(Sd$1),Ud$1=A$1({},ud$1,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd$1}),Vd$1=rd$1(Ud$1),Wd$1=A$1({},sd$1,{propertyName:0,elapsedTime:0,pseudoElement:0}),Xd$1=rd$1(Wd$1),Yd$1=A$1({},Ad$1,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Zd$1=rd$1(Yd$1),$d$1=[9,13,27,32],ae$2=ia$1&&"CompositionEvent"in window,be$1=null;ia$1&&"documentMode"in document&&(be$1=document.documentMode);var ce=ia$1&&"TextEvent"in window&&!be$1,de=ia$1&&(!ae$2||be$1&&8<be$1&&11>=be$1),ee$1=" ",fe=!1;function ge$1(i,e){switch(i){case"keyup":return $d$1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function he$1(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var ie$1=!1;function je(i,e){switch(i){case"compositionend":return he$1(e);case"keypress":return e.which!==32?null:(fe=!0,ee$1);case"textInput":return i=e.data,i===ee$1&&fe?null:i;default:return null}}function ke(i,e){if(ie$1)return i==="compositionend"||!ae$2&&ge$1(i,e)?(i=nd$1(),md$1=ld$1=kd$1=null,ie$1=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return de&&e.locale!=="ko"?null:e.data;default:return null}}var le$1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function me$1(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!le$1[i.type]:e==="textarea"}function ne(i,e,s,o){Eb$1(o),e=oe$1(e,"onChange"),0<e.length&&(s=new td$1("onChange","change",null,s,o),i.push({event:s,listeners:e}))}var pe$1=null,qe=null;function re$1(i){se$1(i,0)}function te$1(i){var e=ue$1(i);if(Wa$1(e))return i}function ve(i,e){if(i==="change")return e}var we=!1;if(ia$1){var xe;if(ia$1){var ye="oninput"in document;if(!ye){var ze=document.createElement("div");ze.setAttribute("oninput","return;"),ye=typeof ze.oninput=="function"}xe=ye}else xe=!1;we=xe&&(!document.documentMode||9<document.documentMode)}function Ae$1(){pe$1&&(pe$1.detachEvent("onpropertychange",Be),qe=pe$1=null)}function Be(i){if(i.propertyName==="value"&&te$1(qe)){var e=[];ne(e,qe,i,xb$1(i)),Jb$1(re$1,e)}}function Ce(i,e,s){i==="focusin"?(Ae$1(),pe$1=e,qe=s,pe$1.attachEvent("onpropertychange",Be)):i==="focusout"&&Ae$1()}function De(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return te$1(qe)}function Ee(i,e){if(i==="click")return te$1(e)}function Fe(i,e){if(i==="input"||i==="change")return te$1(e)}function Ge(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var He=typeof Object.is=="function"?Object.is:Ge;function Ie$1(i,e){if(He(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var s=Object.keys(i),o=Object.keys(e);if(s.length!==o.length)return!1;for(o=0;o<s.length;o++){var a=s[o];if(!ja.call(e,a)||!He(i[a],e[a]))return!1}return!0}function Je(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Ke(i,e){var s=Je(i);i=0;for(var o;s;){if(s.nodeType===3){if(o=i+s.textContent.length,i<=e&&o>=e)return{node:s,offset:e-i};i=o}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Je(s)}}function Le(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?Le(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Me(){for(var i=window,e=Xa();e instanceof i.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)i=e.contentWindow;else break;e=Xa(i.document)}return e}function Ne(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function Oe(i){var e=Me(),s=i.focusedElem,o=i.selectionRange;if(e!==s&&s&&s.ownerDocument&&Le(s.ownerDocument.documentElement,s)){if(o!==null&&Ne(s)){if(e=o.start,i=o.end,i===void 0&&(i=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(i,s.value.length);else if(i=(e=s.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var a=s.textContent.length,c=Math.min(o.start,a);o=o.end===void 0?c:Math.min(o.end,a),!i.extend&&c>o&&(a=o,o=c,c=a),a=Ke(s,c);var h=Ke(s,o);a&&h&&(i.rangeCount!==1||i.anchorNode!==a.node||i.anchorOffset!==a.offset||i.focusNode!==h.node||i.focusOffset!==h.offset)&&(e=e.createRange(),e.setStart(a.node,a.offset),i.removeAllRanges(),c>o?(i.addRange(e),i.extend(h.node,h.offset)):(e.setEnd(h.node,h.offset),i.addRange(e)))}}for(e=[],i=s;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)i=e[s],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Pe$1=ia$1&&"documentMode"in document&&11>=document.documentMode,Qe=null,Re$1=null,Se=null,Te=!1;function Ue(i,e,s){var o=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Te||Qe==null||Qe!==Xa(o)||(o=Qe,"selectionStart"in o&&Ne(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),Se&&Ie$1(Se,o)||(Se=o,o=oe$1(Re$1,"onSelect"),0<o.length&&(e=new td$1("onSelect","select",null,e,s),i.push({event:e,listeners:o}),e.target=Qe)))}function Ve$1(i,e){var s={};return s[i.toLowerCase()]=e.toLowerCase(),s["Webkit"+i]="webkit"+e,s["Moz"+i]="moz"+e,s}var We={animationend:Ve$1("Animation","AnimationEnd"),animationiteration:Ve$1("Animation","AnimationIteration"),animationstart:Ve$1("Animation","AnimationStart"),transitionend:Ve$1("Transition","TransitionEnd")},Xe={},Ye={};ia$1&&(Ye=document.createElement("div").style,"AnimationEvent"in window||(delete We.animationend.animation,delete We.animationiteration.animation,delete We.animationstart.animation),"TransitionEvent"in window||delete We.transitionend.transition);function Ze(i){if(Xe[i])return Xe[i];if(!We[i])return i;var e=We[i],s;for(s in e)if(e.hasOwnProperty(s)&&s in Ye)return Xe[i]=e[s];return i}var $e=Ze("animationend"),af=Ze("animationiteration"),bf=Ze("animationstart"),cf=Ze("transitionend"),df=new Map,ef="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ff(i,e){df.set(i,e),fa$1(e,[i])}for(var gf=0;gf<ef.length;gf++){var hf=ef[gf],jf=hf.toLowerCase(),kf=hf[0].toUpperCase()+hf.slice(1);ff(jf,"on"+kf)}ff($e,"onAnimationEnd");ff(af,"onAnimationIteration");ff(bf,"onAnimationStart");ff("dblclick","onDoubleClick");ff("focusin","onFocus");ff("focusout","onBlur");ff(cf,"onTransitionEnd");ha$1("onMouseEnter",["mouseout","mouseover"]);ha$1("onMouseLeave",["mouseout","mouseover"]);ha$1("onPointerEnter",["pointerout","pointerover"]);ha$1("onPointerLeave",["pointerout","pointerover"]);fa$1("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));fa$1("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));fa$1("onBeforeInput",["compositionend","keypress","textInput","paste"]);fa$1("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));fa$1("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(lf));function nf(i,e,s){var o=i.type||"unknown-event";i.currentTarget=s,Ub$1(o,e,void 0,i),i.currentTarget=null}function se$1(i,e){e=(e&4)!==0;for(var s=0;s<i.length;s++){var o=i[s],a=o.event;o=o.listeners;e:{var c=void 0;if(e)for(var h=o.length-1;0<=h;h--){var _=o[h],$=_.instance,g=_.currentTarget;if(_=_.listener,$!==c&&a.isPropagationStopped())break e;nf(a,_,g),c=$}else for(h=0;h<o.length;h++){if(_=o[h],$=_.instance,g=_.currentTarget,_=_.listener,$!==c&&a.isPropagationStopped())break e;nf(a,_,g),c=$}}}if(Qb$1)throw i=Rb$1,Qb$1=!1,Rb$1=null,i}function D$2(i,e){var s=e[of];s===void 0&&(s=e[of]=new Set);var o=i+"__bubble";s.has(o)||(pf(e,i,2,!1),s.add(o))}function qf(i,e,s){var o=0;e&&(o|=4),pf(s,i,o,e)}var rf="_reactListening"+Math.random().toString(36).slice(2);function sf(i){if(!i[rf]){i[rf]=!0,da$1.forEach(function(s){s!=="selectionchange"&&(mf.has(s)||qf(s,!1,i),qf(s,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[rf]||(e[rf]=!0,qf("selectionchange",!1,e))}}function pf(i,e,s,o){switch(jd$1(e)){case 1:var a=ed$1;break;case 4:a=gd$1;break;default:a=fd$1}s=a.bind(null,e,s,i),a=void 0,!Lb$1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(a=!0),o?a!==void 0?i.addEventListener(e,s,{capture:!0,passive:a}):i.addEventListener(e,s,!0):a!==void 0?i.addEventListener(e,s,{passive:a}):i.addEventListener(e,s,!1)}function hd$1(i,e,s,o,a){var c=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var h=o.tag;if(h===3||h===4){var _=o.stateNode.containerInfo;if(_===a||_.nodeType===8&&_.parentNode===a)break;if(h===4)for(h=o.return;h!==null;){var $=h.tag;if(($===3||$===4)&&($=h.stateNode.containerInfo,$===a||$.nodeType===8&&$.parentNode===a))return;h=h.return}for(;_!==null;){if(h=Wc$1(_),h===null)return;if($=h.tag,$===5||$===6){o=c=h;continue e}_=_.parentNode}}o=o.return}Jb$1(function(){var g=c,d=xb$1(s),j=[];e:{var tt=df.get(i);if(tt!==void 0){var rt=td$1,et=i;switch(i){case"keypress":if(od$1(s)===0)break e;case"keydown":case"keyup":rt=Rd$1;break;case"focusin":et="focus",rt=Fd$1;break;case"focusout":et="blur",rt=Fd$1;break;case"beforeblur":case"afterblur":rt=Fd$1;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":rt=Bd$1;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":rt=Dd$1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":rt=Vd$1;break;case $e:case af:case bf:rt=Hd$1;break;case cf:rt=Xd$1;break;case"scroll":rt=vd$1;break;case"wheel":rt=Zd$1;break;case"copy":case"cut":case"paste":rt=Jd$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":rt=Td$1}var it=(e&4)!==0,st=!it&&i==="scroll",nt=it?tt!==null?tt+"Capture":null:tt;it=[];for(var ot=g,ht;ot!==null;){ht=ot;var pt=ht.stateNode;if(ht.tag===5&&pt!==null&&(ht=pt,nt!==null&&(pt=Kb$1(ot,nt),pt!=null&&it.push(tf(ot,pt,ht)))),st)break;ot=ot.return}0<it.length&&(tt=new rt(tt,et,null,s,d),j.push({event:tt,listeners:it}))}}if(!(e&7)){e:{if(tt=i==="mouseover"||i==="pointerover",rt=i==="mouseout"||i==="pointerout",tt&&s!==wb$1&&(et=s.relatedTarget||s.fromElement)&&(Wc$1(et)||et[uf]))break e;if((rt||tt)&&(tt=d.window===d?d:(tt=d.ownerDocument)?tt.defaultView||tt.parentWindow:window,rt?(et=s.relatedTarget||s.toElement,rt=g,et=et?Wc$1(et):null,et!==null&&(st=Vb$1(et),et!==st||et.tag!==5&&et.tag!==6)&&(et=null)):(rt=null,et=g),rt!==et)){if(it=Bd$1,pt="onMouseLeave",nt="onMouseEnter",ot="mouse",(i==="pointerout"||i==="pointerover")&&(it=Td$1,pt="onPointerLeave",nt="onPointerEnter",ot="pointer"),st=rt==null?tt:ue$1(rt),ht=et==null?tt:ue$1(et),tt=new it(pt,ot+"leave",rt,s,d),tt.target=st,tt.relatedTarget=ht,pt=null,Wc$1(d)===g&&(it=new it(nt,ot+"enter",et,s,d),it.target=ht,it.relatedTarget=st,pt=it),st=pt,rt&&et)t:{for(it=rt,nt=et,ot=0,ht=it;ht;ht=vf(ht))ot++;for(ht=0,pt=nt;pt;pt=vf(pt))ht++;for(;0<ot-ht;)it=vf(it),ot--;for(;0<ht-ot;)nt=vf(nt),ht--;for(;ot--;){if(it===nt||nt!==null&&it===nt.alternate)break t;it=vf(it),nt=vf(nt)}it=null}else it=null;rt!==null&&wf(j,tt,rt,it,!1),et!==null&&st!==null&&wf(j,st,et,it,!0)}}e:{if(tt=g?ue$1(g):window,rt=tt.nodeName&&tt.nodeName.toLowerCase(),rt==="select"||rt==="input"&&tt.type==="file")var lt=ve;else if(me$1(tt))if(we)lt=Fe;else{lt=De;var ut=Ce}else(rt=tt.nodeName)&&rt.toLowerCase()==="input"&&(tt.type==="checkbox"||tt.type==="radio")&&(lt=Ee);if(lt&&(lt=lt(i,g))){ne(j,lt,s,d);break e}ut&&ut(i,tt,g),i==="focusout"&&(ut=tt._wrapperState)&&ut.controlled&&tt.type==="number"&&cb$1(tt,"number",tt.value)}switch(ut=g?ue$1(g):window,i){case"focusin":(me$1(ut)||ut.contentEditable==="true")&&(Qe=ut,Re$1=g,Se=null);break;case"focusout":Se=Re$1=Qe=null;break;case"mousedown":Te=!0;break;case"contextmenu":case"mouseup":case"dragend":Te=!1,Ue(j,s,d);break;case"selectionchange":if(Pe$1)break;case"keydown":case"keyup":Ue(j,s,d)}var yt;if(ae$2)e:{switch(i){case"compositionstart":var Pt="onCompositionStart";break e;case"compositionend":Pt="onCompositionEnd";break e;case"compositionupdate":Pt="onCompositionUpdate";break e}Pt=void 0}else ie$1?ge$1(i,s)&&(Pt="onCompositionEnd"):i==="keydown"&&s.keyCode===229&&(Pt="onCompositionStart");Pt&&(de&&s.locale!=="ko"&&(ie$1||Pt!=="onCompositionStart"?Pt==="onCompositionEnd"&&ie$1&&(yt=nd$1()):(kd$1=d,ld$1="value"in kd$1?kd$1.value:kd$1.textContent,ie$1=!0)),ut=oe$1(g,Pt),0<ut.length&&(Pt=new Ld$1(Pt,i,null,s,d),j.push({event:Pt,listeners:ut}),yt?Pt.data=yt:(yt=he$1(s),yt!==null&&(Pt.data=yt)))),(yt=ce?je(i,s):ke(i,s))&&(g=oe$1(g,"onBeforeInput"),0<g.length&&(d=new Ld$1("onBeforeInput","beforeinput",null,s,d),j.push({event:d,listeners:g}),d.data=yt))}se$1(j,e)})}function tf(i,e,s){return{instance:i,listener:e,currentTarget:s}}function oe$1(i,e){for(var s=e+"Capture",o=[];i!==null;){var a=i,c=a.stateNode;a.tag===5&&c!==null&&(a=c,c=Kb$1(i,s),c!=null&&o.unshift(tf(i,c,a)),c=Kb$1(i,e),c!=null&&o.push(tf(i,c,a))),i=i.return}return o}function vf(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function wf(i,e,s,o,a){for(var c=e._reactName,h=[];s!==null&&s!==o;){var _=s,$=_.alternate,g=_.stateNode;if($!==null&&$===o)break;_.tag===5&&g!==null&&(_=g,a?($=Kb$1(s,c),$!=null&&h.unshift(tf(s,$,_))):a||($=Kb$1(s,c),$!=null&&h.push(tf(s,$,_)))),s=s.return}h.length!==0&&i.push({event:e,listeners:h})}var xf=/\r\n?/g,yf=/\u0000|\uFFFD/g;function zf(i){return(typeof i=="string"?i:""+i).replace(xf,`
`).replace(yf,"")}function Af(i,e,s){if(e=zf(e),zf(i)!==e&&s)throw Error(p$1(425))}function Bf(){}var Cf=null,Df=null;function Ef(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ff=typeof setTimeout=="function"?setTimeout:void 0,Gf=typeof clearTimeout=="function"?clearTimeout:void 0,Hf=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof Hf<"u"?function(i){return Hf.resolve(null).then(i).catch(If)}:Ff;function If(i){setTimeout(function(){throw i})}function Kf(i,e){var s=e,o=0;do{var a=s.nextSibling;if(i.removeChild(s),a&&a.nodeType===8)if(s=a.data,s==="/$"){if(o===0){i.removeChild(a),bd$1(e);return}o--}else s!=="$"&&s!=="$?"&&s!=="$!"||o++;s=a}while(s);bd$1(e)}function Lf(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function Mf(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return i;e--}else s==="/$"&&e++}i=i.previousSibling}return null}var Nf=Math.random().toString(36).slice(2),Of="__reactFiber$"+Nf,Pf="__reactProps$"+Nf,uf="__reactContainer$"+Nf,of="__reactEvents$"+Nf,Qf="__reactListeners$"+Nf,Rf="__reactHandles$"+Nf;function Wc$1(i){var e=i[Of];if(e)return e;for(var s=i.parentNode;s;){if(e=s[uf]||s[Of]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(i=Mf(i);i!==null;){if(s=i[Of])return s;i=Mf(i)}return e}i=s,s=i.parentNode}return null}function Cb$1(i){return i=i[Of]||i[uf],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function ue$1(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(p$1(33))}function Db(i){return i[Pf]||null}var Sf=[],Tf=-1;function Uf(i){return{current:i}}function E$1(i){0>Tf||(i.current=Sf[Tf],Sf[Tf]=null,Tf--)}function G$1(i,e){Tf++,Sf[Tf]=i.current,i.current=e}var Vf={},H$1=Uf(Vf),Wf=Uf(!1),Xf=Vf;function Yf(i,e){var s=i.type.contextTypes;if(!s)return Vf;var o=i.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var a={},c;for(c in s)a[c]=e[c];return o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=a),a}function Zf(i){return i=i.childContextTypes,i!=null}function $f(){E$1(Wf),E$1(H$1)}function ag(i,e,s){if(H$1.current!==Vf)throw Error(p$1(168));G$1(H$1,e),G$1(Wf,s)}function bg(i,e,s){var o=i.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return s;o=o.getChildContext();for(var a in o)if(!(a in e))throw Error(p$1(108,Ra$1(i)||"Unknown",a));return A$1({},s,o)}function cg(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vf,Xf=H$1.current,G$1(H$1,i),G$1(Wf,Wf.current),!0}function dg(i,e,s){var o=i.stateNode;if(!o)throw Error(p$1(169));s?(i=bg(i,e,Xf),o.__reactInternalMemoizedMergedChildContext=i,E$1(Wf),E$1(H$1),G$1(H$1,i)):E$1(Wf),G$1(Wf,s)}var eg=null,fg=!1,gg=!1;function hg(i){eg===null?eg=[i]:eg.push(i)}function ig(i){fg=!0,hg(i)}function jg(){if(!gg&&eg!==null){gg=!0;var i=0,e=C$2;try{var s=eg;for(C$2=1;i<s.length;i++){var o=s[i];do o=o(!0);while(o!==null)}eg=null,fg=!1}catch(a){throw eg!==null&&(eg=eg.slice(i+1)),ac$1(fc$1,jg),a}finally{C$2=e,gg=!1}}return null}var kg=[],lg=0,mg=null,ng=0,og=[],pg=0,qg=null,rg=1,sg="";function tg(i,e){kg[lg++]=ng,kg[lg++]=mg,mg=i,ng=e}function ug(i,e,s){og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,qg=i;var o=rg;i=sg;var a=32-oc$1(o)-1;o&=~(1<<a),s+=1;var c=32-oc$1(e)+a;if(30<c){var h=a-a%5;c=(o&(1<<h)-1).toString(32),o>>=h,a-=h,rg=1<<32-oc$1(e)+a|s<<a|o,sg=c+i}else rg=1<<c|s<<a|o,sg=i}function vg(i){i.return!==null&&(tg(i,1),ug(i,1,0))}function wg(i){for(;i===mg;)mg=kg[--lg],kg[lg]=null,ng=kg[--lg],kg[lg]=null;for(;i===qg;)qg=og[--pg],og[pg]=null,sg=og[--pg],og[pg]=null,rg=og[--pg],og[pg]=null}var xg=null,yg=null,I$1=!1,zg=null;function Ag(i,e){var s=Bg(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=i,e=i.deletions,e===null?(i.deletions=[s],i.flags|=16):e.push(s)}function Cg(i,e){switch(i.tag){case 5:var s=i.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,xg=i,yg=Lf(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,xg=i,yg=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=qg!==null?{id:rg,overflow:sg}:null,i.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Bg(18,null,null,0),s.stateNode=e,s.return=i,i.child=s,xg=i,yg=null,!0):!1;default:return!1}}function Dg(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Eg(i){if(I$1){var e=yg;if(e){var s=e;if(!Cg(i,e)){if(Dg(i))throw Error(p$1(418));e=Lf(s.nextSibling);var o=xg;e&&Cg(i,e)?Ag(o,s):(i.flags=i.flags&-4097|2,I$1=!1,xg=i)}}else{if(Dg(i))throw Error(p$1(418));i.flags=i.flags&-4097|2,I$1=!1,xg=i}}}function Fg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;xg=i}function Gg(i){if(i!==xg)return!1;if(!I$1)return Fg(i),I$1=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!Ef(i.type,i.memoizedProps)),e&&(e=yg)){if(Dg(i))throw Hg(),Error(p$1(418));for(;e;)Ag(i,e),e=Lf(e.nextSibling)}if(Fg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(p$1(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var s=i.data;if(s==="/$"){if(e===0){yg=Lf(i.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}i=i.nextSibling}yg=null}}else yg=xg?Lf(i.stateNode.nextSibling):null;return!0}function Hg(){for(var i=yg;i;)i=Lf(i.nextSibling)}function Ig(){yg=xg=null,I$1=!1}function Jg(i){zg===null?zg=[i]:zg.push(i)}var Kg=ua$1.ReactCurrentBatchConfig;function Lg(i,e){if(i&&i.defaultProps){e=A$1({},e),i=i.defaultProps;for(var s in i)e[s]===void 0&&(e[s]=i[s]);return e}return e}var Mg=Uf(null),Ng=null,Og=null,Pg=null;function Qg(){Pg=Og=Ng=null}function Rg(i){var e=Mg.current;E$1(Mg),i._currentValue=e}function Sg(i,e,s){for(;i!==null;){var o=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),i===s)break;i=i.return}}function Tg(i,e){Ng=i,Pg=Og=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ug=!0),i.firstContext=null)}function Vg(i){var e=i._currentValue;if(Pg!==i)if(i={context:i,memoizedValue:e,next:null},Og===null){if(Ng===null)throw Error(p$1(308));Og=i,Ng.dependencies={lanes:0,firstContext:i}}else Og=Og.next=i;return e}var Wg=null;function Xg(i){Wg===null?Wg=[i]:Wg.push(i)}function Yg(i,e,s,o){var a=e.interleaved;return a===null?(s.next=s,Xg(e)):(s.next=a.next,a.next=s),e.interleaved=s,Zg(i,o)}function Zg(i,e){i.lanes|=e;var s=i.alternate;for(s!==null&&(s.lanes|=e),s=i,i=i.return;i!==null;)i.childLanes|=e,s=i.alternate,s!==null&&(s.childLanes|=e),s=i,i=i.return;return s.tag===3?s.stateNode:null}var $g=!1;function ah(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function bh(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ch(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function dh(i,e,s){var o=i.updateQueue;if(o===null)return null;if(o=o.shared,K$1&2){var a=o.pending;return a===null?e.next=e:(e.next=a.next,a.next=e),o.pending=e,Zg(i,s)}return a=o.interleaved,a===null?(e.next=e,Xg(o)):(e.next=a.next,a.next=e),o.interleaved=e,Zg(i,s)}function eh(i,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc$1(i,s)}}function fh(i,e){var s=i.updateQueue,o=i.alternate;if(o!==null&&(o=o.updateQueue,s===o)){var a=null,c=null;if(s=s.firstBaseUpdate,s!==null){do{var h={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};c===null?a=c=h:c=c.next=h,s=s.next}while(s!==null);c===null?a=c=e:c=c.next=e}else a=c=e;s={baseState:o.baseState,firstBaseUpdate:a,lastBaseUpdate:c,shared:o.shared,effects:o.effects},i.updateQueue=s;return}i=s.lastBaseUpdate,i===null?s.firstBaseUpdate=e:i.next=e,s.lastBaseUpdate=e}function gh(i,e,s,o){var a=i.updateQueue;$g=!1;var c=a.firstBaseUpdate,h=a.lastBaseUpdate,_=a.shared.pending;if(_!==null){a.shared.pending=null;var $=_,g=$.next;$.next=null,h===null?c=g:h.next=g,h=$;var d=i.alternate;d!==null&&(d=d.updateQueue,_=d.lastBaseUpdate,_!==h&&(_===null?d.firstBaseUpdate=g:_.next=g,d.lastBaseUpdate=$))}if(c!==null){var j=a.baseState;h=0,d=g=$=null,_=c;do{var tt=_.lane,rt=_.eventTime;if((o&tt)===tt){d!==null&&(d=d.next={eventTime:rt,lane:0,tag:_.tag,payload:_.payload,callback:_.callback,next:null});e:{var et=i,it=_;switch(tt=e,rt=s,it.tag){case 1:if(et=it.payload,typeof et=="function"){j=et.call(rt,j,tt);break e}j=et;break e;case 3:et.flags=et.flags&-65537|128;case 0:if(et=it.payload,tt=typeof et=="function"?et.call(rt,j,tt):et,tt==null)break e;j=A$1({},j,tt);break e;case 2:$g=!0}}_.callback!==null&&_.lane!==0&&(i.flags|=64,tt=a.effects,tt===null?a.effects=[_]:tt.push(_))}else rt={eventTime:rt,lane:tt,tag:_.tag,payload:_.payload,callback:_.callback,next:null},d===null?(g=d=rt,$=j):d=d.next=rt,h|=tt;if(_=_.next,_===null){if(_=a.shared.pending,_===null)break;tt=_,_=tt.next,tt.next=null,a.lastBaseUpdate=tt,a.shared.pending=null}}while(!0);if(d===null&&($=j),a.baseState=$,a.firstBaseUpdate=g,a.lastBaseUpdate=d,e=a.shared.interleaved,e!==null){a=e;do h|=a.lane,a=a.next;while(a!==e)}else c===null&&(a.shared.lanes=0);hh|=h,i.lanes=h,i.memoizedState=j}}function ih(i,e,s){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var o=i[e],a=o.callback;if(a!==null){if(o.callback=null,o=s,typeof a!="function")throw Error(p$1(191,a));a.call(o)}}}var jh=new aa$1.Component().refs;function kh(i,e,s,o){e=i.memoizedState,s=s(o,e),s=s==null?e:A$1({},e,s),i.memoizedState=s,i.lanes===0&&(i.updateQueue.baseState=s)}var nh={isMounted:function(i){return(i=i._reactInternals)?Vb$1(i)===i:!1},enqueueSetState:function(i,e,s){i=i._reactInternals;var o=L(),a=lh(i),c=ch(o,a);c.payload=e,s!=null&&(c.callback=s),e=dh(i,c,a),e!==null&&(mh(e,i,a,o),eh(e,i,a))},enqueueReplaceState:function(i,e,s){i=i._reactInternals;var o=L(),a=lh(i),c=ch(o,a);c.tag=1,c.payload=e,s!=null&&(c.callback=s),e=dh(i,c,a),e!==null&&(mh(e,i,a,o),eh(e,i,a))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var s=L(),o=lh(i),a=ch(s,o);a.tag=2,e!=null&&(a.callback=e),e=dh(i,a,o),e!==null&&(mh(e,i,o,s),eh(e,i,o))}};function oh(i,e,s,o,a,c,h){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(o,c,h):e.prototype&&e.prototype.isPureReactComponent?!Ie$1(s,o)||!Ie$1(a,c):!0}function ph(i,e,s){var o=!1,a=Vf,c=e.contextType;return typeof c=="object"&&c!==null?c=Vg(c):(a=Zf(e)?Xf:H$1.current,o=e.contextTypes,c=(o=o!=null)?Yf(i,a):Vf),e=new e(s,c),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=nh,i.stateNode=e,e._reactInternals=i,o&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=a,i.__reactInternalMemoizedMaskedChildContext=c),e}function qh(i,e,s,o){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,o),e.state!==i&&nh.enqueueReplaceState(e,e.state,null)}function rh(i,e,s,o){var a=i.stateNode;a.props=s,a.state=i.memoizedState,a.refs=jh,ah(i);var c=e.contextType;typeof c=="object"&&c!==null?a.context=Vg(c):(c=Zf(e)?Xf:H$1.current,a.context=Yf(i,c)),a.state=i.memoizedState,c=e.getDerivedStateFromProps,typeof c=="function"&&(kh(i,e,c,s),a.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(e=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),e!==a.state&&nh.enqueueReplaceState(a,a.state,null),gh(i,s,a,o),a.state=i.memoizedState),typeof a.componentDidMount=="function"&&(i.flags|=4194308)}function sh(i,e,s){if(i=s.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(p$1(309));var o=s.stateNode}if(!o)throw Error(p$1(147,i));var a=o,c=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===c?e.ref:(e=function(h){var _=a.refs;_===jh&&(_=a.refs={}),h===null?delete _[c]:_[c]=h},e._stringRef=c,e)}if(typeof i!="string")throw Error(p$1(284));if(!s._owner)throw Error(p$1(290,i))}return i}function th(i,e){throw i=Object.prototype.toString.call(e),Error(p$1(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function uh(i){var e=i._init;return e(i._payload)}function vh(i){function e(nt,ot){if(i){var ht=nt.deletions;ht===null?(nt.deletions=[ot],nt.flags|=16):ht.push(ot)}}function s(nt,ot){if(!i)return null;for(;ot!==null;)e(nt,ot),ot=ot.sibling;return null}function o(nt,ot){for(nt=new Map;ot!==null;)ot.key!==null?nt.set(ot.key,ot):nt.set(ot.index,ot),ot=ot.sibling;return nt}function a(nt,ot){return nt=wh(nt,ot),nt.index=0,nt.sibling=null,nt}function c(nt,ot,ht){return nt.index=ht,i?(ht=nt.alternate,ht!==null?(ht=ht.index,ht<ot?(nt.flags|=2,ot):ht):(nt.flags|=2,ot)):(nt.flags|=1048576,ot)}function h(nt){return i&&nt.alternate===null&&(nt.flags|=2),nt}function _(nt,ot,ht,pt){return ot===null||ot.tag!==6?(ot=xh(ht,nt.mode,pt),ot.return=nt,ot):(ot=a(ot,ht),ot.return=nt,ot)}function $(nt,ot,ht,pt){var lt=ht.type;return lt===ya$1?d(nt,ot,ht.props.children,pt,ht.key):ot!==null&&(ot.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha$1&&uh(lt)===ot.type)?(pt=a(ot,ht.props),pt.ref=sh(nt,ot,ht),pt.return=nt,pt):(pt=yh(ht.type,ht.key,ht.props,null,nt.mode,pt),pt.ref=sh(nt,ot,ht),pt.return=nt,pt)}function g(nt,ot,ht,pt){return ot===null||ot.tag!==4||ot.stateNode.containerInfo!==ht.containerInfo||ot.stateNode.implementation!==ht.implementation?(ot=zh(ht,nt.mode,pt),ot.return=nt,ot):(ot=a(ot,ht.children||[]),ot.return=nt,ot)}function d(nt,ot,ht,pt,lt){return ot===null||ot.tag!==7?(ot=Ah(ht,nt.mode,pt,lt),ot.return=nt,ot):(ot=a(ot,ht),ot.return=nt,ot)}function j(nt,ot,ht){if(typeof ot=="string"&&ot!==""||typeof ot=="number")return ot=xh(""+ot,nt.mode,ht),ot.return=nt,ot;if(typeof ot=="object"&&ot!==null){switch(ot.$$typeof){case va$1:return ht=yh(ot.type,ot.key,ot.props,null,nt.mode,ht),ht.ref=sh(nt,null,ot),ht.return=nt,ht;case wa$1:return ot=zh(ot,nt.mode,ht),ot.return=nt,ot;case Ha$1:var pt=ot._init;return j(nt,pt(ot._payload),ht)}if(eb$1(ot)||Ka(ot))return ot=Ah(ot,nt.mode,ht,null),ot.return=nt,ot;th(nt,ot)}return null}function tt(nt,ot,ht,pt){var lt=ot!==null?ot.key:null;if(typeof ht=="string"&&ht!==""||typeof ht=="number")return lt!==null?null:_(nt,ot,""+ht,pt);if(typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va$1:return ht.key===lt?$(nt,ot,ht,pt):null;case wa$1:return ht.key===lt?g(nt,ot,ht,pt):null;case Ha$1:return lt=ht._init,tt(nt,ot,lt(ht._payload),pt)}if(eb$1(ht)||Ka(ht))return lt!==null?null:d(nt,ot,ht,pt,null);th(nt,ht)}return null}function rt(nt,ot,ht,pt,lt){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return nt=nt.get(ht)||null,_(ot,nt,""+pt,lt);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case va$1:return nt=nt.get(pt.key===null?ht:pt.key)||null,$(ot,nt,pt,lt);case wa$1:return nt=nt.get(pt.key===null?ht:pt.key)||null,g(ot,nt,pt,lt);case Ha$1:var ut=pt._init;return rt(nt,ot,ht,ut(pt._payload),lt)}if(eb$1(pt)||Ka(pt))return nt=nt.get(ht)||null,d(ot,nt,pt,lt,null);th(ot,pt)}return null}function et(nt,ot,ht,pt){for(var lt=null,ut=null,yt=ot,Pt=ot=0,vt=null;yt!==null&&Pt<ht.length;Pt++){yt.index>Pt?(vt=yt,yt=null):vt=yt.sibling;var Vt=tt(nt,yt,ht[Pt],pt);if(Vt===null){yt===null&&(yt=vt);break}i&&yt&&Vt.alternate===null&&e(nt,yt),ot=c(Vt,ot,Pt),ut===null?lt=Vt:ut.sibling=Vt,ut=Vt,yt=vt}if(Pt===ht.length)return s(nt,yt),I$1&&tg(nt,Pt),lt;if(yt===null){for(;Pt<ht.length;Pt++)yt=j(nt,ht[Pt],pt),yt!==null&&(ot=c(yt,ot,Pt),ut===null?lt=yt:ut.sibling=yt,ut=yt);return I$1&&tg(nt,Pt),lt}for(yt=o(nt,yt);Pt<ht.length;Pt++)vt=rt(yt,nt,Pt,ht[Pt],pt),vt!==null&&(i&&vt.alternate!==null&&yt.delete(vt.key===null?Pt:vt.key),ot=c(vt,ot,Pt),ut===null?lt=vt:ut.sibling=vt,ut=vt);return i&&yt.forEach(function(Dt){return e(nt,Dt)}),I$1&&tg(nt,Pt),lt}function it(nt,ot,ht,pt){var lt=Ka(ht);if(typeof lt!="function")throw Error(p$1(150));if(ht=lt.call(ht),ht==null)throw Error(p$1(151));for(var ut=lt=null,yt=ot,Pt=ot=0,vt=null,Vt=ht.next();yt!==null&&!Vt.done;Pt++,Vt=ht.next()){yt.index>Pt?(vt=yt,yt=null):vt=yt.sibling;var Dt=tt(nt,yt,Vt.value,pt);if(Dt===null){yt===null&&(yt=vt);break}i&&yt&&Dt.alternate===null&&e(nt,yt),ot=c(Dt,ot,Pt),ut===null?lt=Dt:ut.sibling=Dt,ut=Dt,yt=vt}if(Vt.done)return s(nt,yt),I$1&&tg(nt,Pt),lt;if(yt===null){for(;!Vt.done;Pt++,Vt=ht.next())Vt=j(nt,Vt.value,pt),Vt!==null&&(ot=c(Vt,ot,Pt),ut===null?lt=Vt:ut.sibling=Vt,ut=Vt);return I$1&&tg(nt,Pt),lt}for(yt=o(nt,yt);!Vt.done;Pt++,Vt=ht.next())Vt=rt(yt,nt,Pt,Vt.value,pt),Vt!==null&&(i&&Vt.alternate!==null&&yt.delete(Vt.key===null?Pt:Vt.key),ot=c(Vt,ot,Pt),ut===null?lt=Vt:ut.sibling=Vt,ut=Vt);return i&&yt.forEach(function(Qt){return e(nt,Qt)}),I$1&&tg(nt,Pt),lt}function st(nt,ot,ht,pt){if(typeof ht=="object"&&ht!==null&&ht.type===ya$1&&ht.key===null&&(ht=ht.props.children),typeof ht=="object"&&ht!==null){switch(ht.$$typeof){case va$1:e:{for(var lt=ht.key,ut=ot;ut!==null;){if(ut.key===lt){if(lt=ht.type,lt===ya$1){if(ut.tag===7){s(nt,ut.sibling),ot=a(ut,ht.props.children),ot.return=nt,nt=ot;break e}}else if(ut.elementType===lt||typeof lt=="object"&&lt!==null&&lt.$$typeof===Ha$1&&uh(lt)===ut.type){s(nt,ut.sibling),ot=a(ut,ht.props),ot.ref=sh(nt,ut,ht),ot.return=nt,nt=ot;break e}s(nt,ut);break}else e(nt,ut);ut=ut.sibling}ht.type===ya$1?(ot=Ah(ht.props.children,nt.mode,pt,ht.key),ot.return=nt,nt=ot):(pt=yh(ht.type,ht.key,ht.props,null,nt.mode,pt),pt.ref=sh(nt,ot,ht),pt.return=nt,nt=pt)}return h(nt);case wa$1:e:{for(ut=ht.key;ot!==null;){if(ot.key===ut)if(ot.tag===4&&ot.stateNode.containerInfo===ht.containerInfo&&ot.stateNode.implementation===ht.implementation){s(nt,ot.sibling),ot=a(ot,ht.children||[]),ot.return=nt,nt=ot;break e}else{s(nt,ot);break}else e(nt,ot);ot=ot.sibling}ot=zh(ht,nt.mode,pt),ot.return=nt,nt=ot}return h(nt);case Ha$1:return ut=ht._init,st(nt,ot,ut(ht._payload),pt)}if(eb$1(ht))return et(nt,ot,ht,pt);if(Ka(ht))return it(nt,ot,ht,pt);th(nt,ht)}return typeof ht=="string"&&ht!==""||typeof ht=="number"?(ht=""+ht,ot!==null&&ot.tag===6?(s(nt,ot.sibling),ot=a(ot,ht),ot.return=nt,nt=ot):(s(nt,ot),ot=xh(ht,nt.mode,pt),ot.return=nt,nt=ot),h(nt)):s(nt,ot)}return st}var Bh=vh(!0),Ch=vh(!1),Dh={},Eh=Uf(Dh),Fh=Uf(Dh),Gh=Uf(Dh);function Hh(i){if(i===Dh)throw Error(p$1(174));return i}function Ih(i,e){switch(G$1(Gh,e),G$1(Fh,i),G$1(Eh,Dh),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:lb$1(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=lb$1(e,i)}E$1(Eh),G$1(Eh,e)}function Jh(){E$1(Eh),E$1(Fh),E$1(Gh)}function Kh(i){Hh(Gh.current);var e=Hh(Eh.current),s=lb$1(e,i.type);e!==s&&(G$1(Fh,i),G$1(Eh,s))}function Lh(i){Fh.current===i&&(E$1(Eh),E$1(Fh))}var M$1=Uf(0);function Mh(i){for(var e=i;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Nh=[];function Oh(){for(var i=0;i<Nh.length;i++)Nh[i]._workInProgressVersionPrimary=null;Nh.length=0}var Ph=ua$1.ReactCurrentDispatcher,Qh=ua$1.ReactCurrentBatchConfig,Rh=0,N$1=null,O$1=null,P$1=null,Sh=!1,Th=!1,Uh=0,Vh=0;function Q$1(){throw Error(p$1(321))}function Wh(i,e){if(e===null)return!1;for(var s=0;s<e.length&&s<i.length;s++)if(!He(i[s],e[s]))return!1;return!0}function Xh(i,e,s,o,a,c){if(Rh=c,N$1=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ph.current=i===null||i.memoizedState===null?Yh:Zh,i=s(o,a),Th){c=0;do{if(Th=!1,Uh=0,25<=c)throw Error(p$1(301));c+=1,P$1=O$1=null,e.updateQueue=null,Ph.current=$h,i=s(o,a)}while(Th)}if(Ph.current=ai,e=O$1!==null&&O$1.next!==null,Rh=0,P$1=O$1=N$1=null,Sh=!1,e)throw Error(p$1(300));return i}function bi(){var i=Uh!==0;return Uh=0,i}function ci(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return P$1===null?N$1.memoizedState=P$1=i:P$1=P$1.next=i,P$1}function di(){if(O$1===null){var i=N$1.alternate;i=i!==null?i.memoizedState:null}else i=O$1.next;var e=P$1===null?N$1.memoizedState:P$1.next;if(e!==null)P$1=e,O$1=i;else{if(i===null)throw Error(p$1(310));O$1=i,i={memoizedState:O$1.memoizedState,baseState:O$1.baseState,baseQueue:O$1.baseQueue,queue:O$1.queue,next:null},P$1===null?N$1.memoizedState=P$1=i:P$1=P$1.next=i}return P$1}function ei(i,e){return typeof e=="function"?e(i):e}function fi(i){var e=di(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var o=O$1,a=o.baseQueue,c=s.pending;if(c!==null){if(a!==null){var h=a.next;a.next=c.next,c.next=h}o.baseQueue=a=c,s.pending=null}if(a!==null){c=a.next,o=o.baseState;var _=h=null,$=null,g=c;do{var d=g.lane;if((Rh&d)===d)$!==null&&($=$.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),o=g.hasEagerState?g.eagerState:i(o,g.action);else{var j={lane:d,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};$===null?(_=$=j,h=o):$=$.next=j,N$1.lanes|=d,hh|=d}g=g.next}while(g!==null&&g!==c);$===null?h=o:$.next=_,He(o,e.memoizedState)||(Ug=!0),e.memoizedState=o,e.baseState=h,e.baseQueue=$,s.lastRenderedState=o}if(i=s.interleaved,i!==null){a=i;do c=a.lane,N$1.lanes|=c,hh|=c,a=a.next;while(a!==i)}else a===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function gi(i){var e=di(),s=e.queue;if(s===null)throw Error(p$1(311));s.lastRenderedReducer=i;var o=s.dispatch,a=s.pending,c=e.memoizedState;if(a!==null){s.pending=null;var h=a=a.next;do c=i(c,h.action),h=h.next;while(h!==a);He(c,e.memoizedState)||(Ug=!0),e.memoizedState=c,e.baseQueue===null&&(e.baseState=c),s.lastRenderedState=c}return[c,o]}function hi(){}function ii(i,e){var s=N$1,o=di(),a=e(),c=!He(o.memoizedState,a);if(c&&(o.memoizedState=a,Ug=!0),o=o.queue,ji(ki.bind(null,s,o,i),[i]),o.getSnapshot!==e||c||P$1!==null&&P$1.memoizedState.tag&1){if(s.flags|=2048,li(9,mi.bind(null,s,o,a,e),void 0,null),R$1===null)throw Error(p$1(349));Rh&30||ni(s,e,a)}return a}function ni(i,e,s){i.flags|=16384,i={getSnapshot:e,value:s},e=N$1.updateQueue,e===null?(e={lastEffect:null,stores:null},N$1.updateQueue=e,e.stores=[i]):(s=e.stores,s===null?e.stores=[i]:s.push(i))}function mi(i,e,s,o){e.value=s,e.getSnapshot=o,oi(e)&&pi(i)}function ki(i,e,s){return s(function(){oi(e)&&pi(i)})}function oi(i){var e=i.getSnapshot;i=i.value;try{var s=e();return!He(i,s)}catch{return!0}}function pi(i){var e=Zg(i,1);e!==null&&mh(e,i,1,-1)}function qi(i){var e=ci();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ei,lastRenderedState:i},e.queue=i,i=i.dispatch=ri.bind(null,N$1,i),[e.memoizedState,i]}function li(i,e,s,o){return i={tag:i,create:e,destroy:s,deps:o,next:null},e=N$1.updateQueue,e===null?(e={lastEffect:null,stores:null},N$1.updateQueue=e,e.lastEffect=i.next=i):(s=e.lastEffect,s===null?e.lastEffect=i.next=i:(o=s.next,s.next=i,i.next=o,e.lastEffect=i)),i}function si(){return di().memoizedState}function ti(i,e,s,o){var a=ci();N$1.flags|=i,a.memoizedState=li(1|e,s,void 0,o===void 0?null:o)}function ui(i,e,s,o){var a=di();o=o===void 0?null:o;var c=void 0;if(O$1!==null){var h=O$1.memoizedState;if(c=h.destroy,o!==null&&Wh(o,h.deps)){a.memoizedState=li(e,s,c,o);return}}N$1.flags|=i,a.memoizedState=li(1|e,s,c,o)}function vi(i,e){return ti(8390656,8,i,e)}function ji(i,e){return ui(2048,8,i,e)}function wi(i,e){return ui(4,2,i,e)}function xi(i,e){return ui(4,4,i,e)}function yi(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function zi(i,e,s){return s=s!=null?s.concat([i]):null,ui(4,4,yi.bind(null,e,i),s)}function Ai(){}function Bi(i,e){var s=di();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Wh(e,o[1])?o[0]:(s.memoizedState=[i,e],i)}function Ci(i,e){var s=di();e=e===void 0?null:e;var o=s.memoizedState;return o!==null&&e!==null&&Wh(e,o[1])?o[0]:(i=i(),s.memoizedState=[i,e],i)}function Di(i,e,s){return Rh&21?(He(s,e)||(s=yc$1(),N$1.lanes|=s,hh|=s,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ug=!0),i.memoizedState=s)}function Ei(i,e){var s=C$2;C$2=s!==0&&4>s?s:4,i(!0);var o=Qh.transition;Qh.transition={};try{i(!1),e()}finally{C$2=s,Qh.transition=o}}function Fi(){return di().memoizedState}function Gi(i,e,s){var o=lh(i);if(s={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null},Hi(i))Ii(e,s);else if(s=Yg(i,e,s,o),s!==null){var a=L();mh(s,i,o,a),Ji(s,e,o)}}function ri(i,e,s){var o=lh(i),a={lane:o,action:s,hasEagerState:!1,eagerState:null,next:null};if(Hi(i))Ii(e,a);else{var c=i.alternate;if(i.lanes===0&&(c===null||c.lanes===0)&&(c=e.lastRenderedReducer,c!==null))try{var h=e.lastRenderedState,_=c(h,s);if(a.hasEagerState=!0,a.eagerState=_,He(_,h)){var $=e.interleaved;$===null?(a.next=a,Xg(e)):(a.next=$.next,$.next=a),e.interleaved=a;return}}catch{}finally{}s=Yg(i,e,a,o),s!==null&&(a=L(),mh(s,i,o,a),Ji(s,e,o))}}function Hi(i){var e=i.alternate;return i===N$1||e!==null&&e===N$1}function Ii(i,e){Th=Sh=!0;var s=i.pending;s===null?e.next=e:(e.next=s.next,s.next=e),i.pending=e}function Ji(i,e,s){if(s&4194240){var o=e.lanes;o&=i.pendingLanes,s|=o,e.lanes=s,Cc$1(i,s)}}var ai={readContext:Vg,useCallback:Q$1,useContext:Q$1,useEffect:Q$1,useImperativeHandle:Q$1,useInsertionEffect:Q$1,useLayoutEffect:Q$1,useMemo:Q$1,useReducer:Q$1,useRef:Q$1,useState:Q$1,useDebugValue:Q$1,useDeferredValue:Q$1,useTransition:Q$1,useMutableSource:Q$1,useSyncExternalStore:Q$1,useId:Q$1,unstable_isNewReconciler:!1},Yh={readContext:Vg,useCallback:function(i,e){return ci().memoizedState=[i,e===void 0?null:e],i},useContext:Vg,useEffect:vi,useImperativeHandle:function(i,e,s){return s=s!=null?s.concat([i]):null,ti(4194308,4,yi.bind(null,e,i),s)},useLayoutEffect:function(i,e){return ti(4194308,4,i,e)},useInsertionEffect:function(i,e){return ti(4,2,i,e)},useMemo:function(i,e){var s=ci();return e=e===void 0?null:e,i=i(),s.memoizedState=[i,e],i},useReducer:function(i,e,s){var o=ci();return e=s!==void 0?s(e):e,o.memoizedState=o.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},o.queue=i,i=i.dispatch=Gi.bind(null,N$1,i),[o.memoizedState,i]},useRef:function(i){var e=ci();return i={current:i},e.memoizedState=i},useState:qi,useDebugValue:Ai,useDeferredValue:function(i){return ci().memoizedState=i},useTransition:function(){var i=qi(!1),e=i[0];return i=Ei.bind(null,i[1]),ci().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,s){var o=N$1,a=ci();if(I$1){if(s===void 0)throw Error(p$1(407));s=s()}else{if(s=e(),R$1===null)throw Error(p$1(349));Rh&30||ni(o,e,s)}a.memoizedState=s;var c={value:s,getSnapshot:e};return a.queue=c,vi(ki.bind(null,o,c,i),[i]),o.flags|=2048,li(9,mi.bind(null,o,c,s,e),void 0,null),s},useId:function(){var i=ci(),e=R$1.identifierPrefix;if(I$1){var s=sg,o=rg;s=(o&~(1<<32-oc$1(o)-1)).toString(32)+s,e=":"+e+"R"+s,s=Uh++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=Vh++,e=":"+e+"r"+s.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},Zh={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:fi,useRef:si,useState:function(){return fi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return Di(e,O$1.memoizedState,i)},useTransition:function(){var i=fi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1},$h={readContext:Vg,useCallback:Bi,useContext:Vg,useEffect:ji,useImperativeHandle:zi,useInsertionEffect:wi,useLayoutEffect:xi,useMemo:Ci,useReducer:gi,useRef:si,useState:function(){return gi(ei)},useDebugValue:Ai,useDeferredValue:function(i){var e=di();return O$1===null?e.memoizedState=i:Di(e,O$1.memoizedState,i)},useTransition:function(){var i=gi(ei)[0],e=di().memoizedState;return[i,e]},useMutableSource:hi,useSyncExternalStore:ii,useId:Fi,unstable_isNewReconciler:!1};function Ki(i,e){try{var s="",o=e;do s+=Pa$1(o),o=o.return;while(o);var a=s}catch(c){a=`
Error generating stack: `+c.message+`
`+c.stack}return{value:i,source:e,stack:a,digest:null}}function Li(i,e,s){return{value:i,source:null,stack:s??null,digest:e??null}}function Mi(i,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var Ni=typeof WeakMap=="function"?WeakMap:Map;function Oi(i,e,s){s=ch(-1,s),s.tag=3,s.payload={element:null};var o=e.value;return s.callback=function(){Pi||(Pi=!0,Qi=o),Mi(i,e)},s}function Ri(i,e,s){s=ch(-1,s),s.tag=3;var o=i.type.getDerivedStateFromError;if(typeof o=="function"){var a=e.value;s.payload=function(){return o(a)},s.callback=function(){Mi(i,e)}}var c=i.stateNode;return c!==null&&typeof c.componentDidCatch=="function"&&(s.callback=function(){Mi(i,e),typeof o!="function"&&(Si===null?Si=new Set([this]):Si.add(this));var h=e.stack;this.componentDidCatch(e.value,{componentStack:h!==null?h:""})}),s}function Ti(i,e,s){var o=i.pingCache;if(o===null){o=i.pingCache=new Ni;var a=new Set;o.set(e,a)}else a=o.get(e),a===void 0&&(a=new Set,o.set(e,a));a.has(s)||(a.add(s),i=Ui.bind(null,i,e,s),e.then(i,i))}function Vi(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function Wi(i,e,s,o,a){return i.mode&1?(i.flags|=65536,i.lanes=a,i):(i===e?i.flags|=65536:(i.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=ch(-1,1),e.tag=2,dh(s,e,1))),s.lanes|=1),i)}var Xi=ua$1.ReactCurrentOwner,Ug=!1;function Yi(i,e,s,o){e.child=i===null?Ch(e,null,s,o):Bh(e,i.child,s,o)}function Zi(i,e,s,o,a){s=s.render;var c=e.ref;return Tg(e,a),o=Xh(i,e,s,o,c,a),s=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I$1&&s&&vg(e),e.flags|=1,Yi(i,e,o,a),e.child)}function aj(i,e,s,o,a){if(i===null){var c=s.type;return typeof c=="function"&&!bj(c)&&c.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=c,cj(i,e,c,o,a)):(i=yh(s.type,null,o,e,e.mode,a),i.ref=e.ref,i.return=e,e.child=i)}if(c=i.child,!(i.lanes&a)){var h=c.memoizedProps;if(s=s.compare,s=s!==null?s:Ie$1,s(h,o)&&i.ref===e.ref)return $i(i,e,a)}return e.flags|=1,i=wh(c,o),i.ref=e.ref,i.return=e,e.child=i}function cj(i,e,s,o,a){if(i!==null){var c=i.memoizedProps;if(Ie$1(c,o)&&i.ref===e.ref)if(Ug=!1,e.pendingProps=o=c,(i.lanes&a)!==0)i.flags&131072&&(Ug=!0);else return e.lanes=i.lanes,$i(i,e,a)}return dj(i,e,s,o,a)}function ej(i,e,s){var o=e.pendingProps,a=o.children,c=i!==null?i.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},G$1(fj,gj),gj|=s;else{if(!(s&1073741824))return i=c!==null?c.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,G$1(fj,gj),gj|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=c!==null?c.baseLanes:s,G$1(fj,gj),gj|=o}else c!==null?(o=c.baseLanes|s,e.memoizedState=null):o=s,G$1(fj,gj),gj|=o;return Yi(i,e,a,s),e.child}function hj(i,e){var s=e.ref;(i===null&&s!==null||i!==null&&i.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function dj(i,e,s,o,a){var c=Zf(s)?Xf:H$1.current;return c=Yf(e,c),Tg(e,a),s=Xh(i,e,s,o,c,a),o=bi(),i!==null&&!Ug?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~a,$i(i,e,a)):(I$1&&o&&vg(e),e.flags|=1,Yi(i,e,s,a),e.child)}function ij(i,e,s,o,a){if(Zf(s)){var c=!0;cg(e)}else c=!1;if(Tg(e,a),e.stateNode===null)jj(i,e),ph(e,s,o),rh(e,s,o,a),o=!0;else if(i===null){var h=e.stateNode,_=e.memoizedProps;h.props=_;var $=h.context,g=s.contextType;typeof g=="object"&&g!==null?g=Vg(g):(g=Zf(s)?Xf:H$1.current,g=Yf(e,g));var d=s.getDerivedStateFromProps,j=typeof d=="function"||typeof h.getSnapshotBeforeUpdate=="function";j||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==o||$!==g)&&qh(e,h,o,g),$g=!1;var tt=e.memoizedState;h.state=tt,gh(e,o,h,a),$=e.memoizedState,_!==o||tt!==$||Wf.current||$g?(typeof d=="function"&&(kh(e,s,d,o),$=e.memoizedState),(_=$g||oh(e,s,_,o,tt,$,g))?(j||typeof h.UNSAFE_componentWillMount!="function"&&typeof h.componentWillMount!="function"||(typeof h.componentWillMount=="function"&&h.componentWillMount(),typeof h.UNSAFE_componentWillMount=="function"&&h.UNSAFE_componentWillMount()),typeof h.componentDidMount=="function"&&(e.flags|=4194308)):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=$),h.props=o,h.state=$,h.context=g,o=_):(typeof h.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{h=e.stateNode,bh(i,e),_=e.memoizedProps,g=e.type===e.elementType?_:Lg(e.type,_),h.props=g,j=e.pendingProps,tt=h.context,$=s.contextType,typeof $=="object"&&$!==null?$=Vg($):($=Zf(s)?Xf:H$1.current,$=Yf(e,$));var rt=s.getDerivedStateFromProps;(d=typeof rt=="function"||typeof h.getSnapshotBeforeUpdate=="function")||typeof h.UNSAFE_componentWillReceiveProps!="function"&&typeof h.componentWillReceiveProps!="function"||(_!==j||tt!==$)&&qh(e,h,o,$),$g=!1,tt=e.memoizedState,h.state=tt,gh(e,o,h,a);var et=e.memoizedState;_!==j||tt!==et||Wf.current||$g?(typeof rt=="function"&&(kh(e,s,rt,o),et=e.memoizedState),(g=$g||oh(e,s,g,o,tt,et,$)||!1)?(d||typeof h.UNSAFE_componentWillUpdate!="function"&&typeof h.componentWillUpdate!="function"||(typeof h.componentWillUpdate=="function"&&h.componentWillUpdate(o,et,$),typeof h.UNSAFE_componentWillUpdate=="function"&&h.UNSAFE_componentWillUpdate(o,et,$)),typeof h.componentDidUpdate=="function"&&(e.flags|=4),typeof h.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof h.componentDidUpdate!="function"||_===i.memoizedProps&&tt===i.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&tt===i.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=et),h.props=o,h.state=et,h.context=$,o=g):(typeof h.componentDidUpdate!="function"||_===i.memoizedProps&&tt===i.memoizedState||(e.flags|=4),typeof h.getSnapshotBeforeUpdate!="function"||_===i.memoizedProps&&tt===i.memoizedState||(e.flags|=1024),o=!1)}return kj(i,e,s,o,c,a)}function kj(i,e,s,o,a,c){hj(i,e);var h=(e.flags&128)!==0;if(!o&&!h)return a&&dg(e,s,!1),$i(i,e,c);o=e.stateNode,Xi.current=e;var _=h&&typeof s.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,i!==null&&h?(e.child=Bh(e,i.child,null,c),e.child=Bh(e,null,_,c)):Yi(i,e,_,c),e.memoizedState=o.state,a&&dg(e,s,!0),e.child}function lj(i){var e=i.stateNode;e.pendingContext?ag(i,e.pendingContext,e.pendingContext!==e.context):e.context&&ag(i,e.context,!1),Ih(i,e.containerInfo)}function mj(i,e,s,o,a){return Ig(),Jg(a),e.flags|=256,Yi(i,e,s,o),e.child}var nj={dehydrated:null,treeContext:null,retryLane:0};function oj(i){return{baseLanes:i,cachePool:null,transitions:null}}function pj(i,e,s){var o=e.pendingProps,a=M$1.current,c=!1,h=(e.flags&128)!==0,_;if((_=h)||(_=i!==null&&i.memoizedState===null?!1:(a&2)!==0),_?(c=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(a|=1),G$1(M$1,a&1),i===null)return Eg(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(h=o.children,i=o.fallback,c?(o=e.mode,c=e.child,h={mode:"hidden",children:h},!(o&1)&&c!==null?(c.childLanes=0,c.pendingProps=h):c=qj(h,o,0,null),i=Ah(i,o,s,null),c.return=e,i.return=e,c.sibling=i,e.child=c,e.child.memoizedState=oj(s),e.memoizedState=nj,i):rj(e,h));if(a=i.memoizedState,a!==null&&(_=a.dehydrated,_!==null))return sj(i,e,h,o,_,a,s);if(c){c=o.fallback,h=e.mode,a=i.child,_=a.sibling;var $={mode:"hidden",children:o.children};return!(h&1)&&e.child!==a?(o=e.child,o.childLanes=0,o.pendingProps=$,e.deletions=null):(o=wh(a,$),o.subtreeFlags=a.subtreeFlags&14680064),_!==null?c=wh(_,c):(c=Ah(c,h,s,null),c.flags|=2),c.return=e,o.return=e,o.sibling=c,e.child=o,o=c,c=e.child,h=i.child.memoizedState,h=h===null?oj(s):{baseLanes:h.baseLanes|s,cachePool:null,transitions:h.transitions},c.memoizedState=h,c.childLanes=i.childLanes&~s,e.memoizedState=nj,o}return c=i.child,i=c.sibling,o=wh(c,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=s),o.return=e,o.sibling=null,i!==null&&(s=e.deletions,s===null?(e.deletions=[i],e.flags|=16):s.push(i)),e.child=o,e.memoizedState=null,o}function rj(i,e){return e=qj({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function tj(i,e,s,o){return o!==null&&Jg(o),Bh(e,i.child,null,s),i=rj(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function sj(i,e,s,o,a,c,h){if(s)return e.flags&256?(e.flags&=-257,o=Li(Error(p$1(422))),tj(i,e,h,o)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(c=o.fallback,a=e.mode,o=qj({mode:"visible",children:o.children},a,0,null),c=Ah(c,a,h,null),c.flags|=2,o.return=e,c.return=e,o.sibling=c,e.child=o,e.mode&1&&Bh(e,i.child,null,h),e.child.memoizedState=oj(h),e.memoizedState=nj,c);if(!(e.mode&1))return tj(i,e,h,null);if(a.data==="$!"){if(o=a.nextSibling&&a.nextSibling.dataset,o)var _=o.dgst;return o=_,c=Error(p$1(419)),o=Li(c,o,void 0),tj(i,e,h,o)}if(_=(h&i.childLanes)!==0,Ug||_){if(o=R$1,o!==null){switch(h&-h){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(o.suspendedLanes|h)?0:a,a!==0&&a!==c.retryLane&&(c.retryLane=a,Zg(i,a),mh(o,i,a,-1))}return uj(),o=Li(Error(p$1(421))),tj(i,e,h,o)}return a.data==="$?"?(e.flags|=128,e.child=i.child,e=vj.bind(null,i),a._reactRetry=e,null):(i=c.treeContext,yg=Lf(a.nextSibling),xg=e,I$1=!0,zg=null,i!==null&&(og[pg++]=rg,og[pg++]=sg,og[pg++]=qg,rg=i.id,sg=i.overflow,qg=e),e=rj(e,o.children),e.flags|=4096,e)}function wj(i,e,s){i.lanes|=e;var o=i.alternate;o!==null&&(o.lanes|=e),Sg(i.return,e,s)}function xj(i,e,s,o,a){var c=i.memoizedState;c===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:s,tailMode:a}:(c.isBackwards=e,c.rendering=null,c.renderingStartTime=0,c.last=o,c.tail=s,c.tailMode=a)}function yj(i,e,s){var o=e.pendingProps,a=o.revealOrder,c=o.tail;if(Yi(i,e,o.children,s),o=M$1.current,o&2)o=o&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&wj(i,s,e);else if(i.tag===19)wj(i,s,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}o&=1}if(G$1(M$1,o),!(e.mode&1))e.memoizedState=null;else switch(a){case"forwards":for(s=e.child,a=null;s!==null;)i=s.alternate,i!==null&&Mh(i)===null&&(a=s),s=s.sibling;s=a,s===null?(a=e.child,e.child=null):(a=s.sibling,s.sibling=null),xj(e,!1,a,s,c);break;case"backwards":for(s=null,a=e.child,e.child=null;a!==null;){if(i=a.alternate,i!==null&&Mh(i)===null){e.child=a;break}i=a.sibling,a.sibling=s,s=a,a=i}xj(e,!0,s,null,c);break;case"together":xj(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function jj(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function $i(i,e,s){if(i!==null&&(e.dependencies=i.dependencies),hh|=e.lanes,!(s&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(p$1(153));if(e.child!==null){for(i=e.child,s=wh(i,i.pendingProps),e.child=s,s.return=e;i.sibling!==null;)i=i.sibling,s=s.sibling=wh(i,i.pendingProps),s.return=e;s.sibling=null}return e.child}function zj(i,e,s){switch(e.tag){case 3:lj(e),Ig();break;case 5:Kh(e);break;case 1:Zf(e.type)&&cg(e);break;case 4:Ih(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,a=e.memoizedProps.value;G$1(Mg,o._currentValue),o._currentValue=a;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(G$1(M$1,M$1.current&1),e.flags|=128,null):s&e.child.childLanes?pj(i,e,s):(G$1(M$1,M$1.current&1),i=$i(i,e,s),i!==null?i.sibling:null);G$1(M$1,M$1.current&1);break;case 19:if(o=(s&e.childLanes)!==0,i.flags&128){if(o)return yj(i,e,s);e.flags|=128}if(a=e.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),G$1(M$1,M$1.current),o)break;return null;case 22:case 23:return e.lanes=0,ej(i,e,s)}return $i(i,e,s)}var Aj,Bj,Cj,Dj;Aj=function(i,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)i.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};Bj=function(){};Cj=function(i,e,s,o){var a=i.memoizedProps;if(a!==o){i=e.stateNode,Hh(Eh.current);var c=null;switch(s){case"input":a=Ya$1(i,a),o=Ya$1(i,o),c=[];break;case"select":a=A$1({},a,{value:void 0}),o=A$1({},o,{value:void 0}),c=[];break;case"textarea":a=gb$1(i,a),o=gb$1(i,o),c=[];break;default:typeof a.onClick!="function"&&typeof o.onClick=="function"&&(i.onclick=Bf)}ub$1(s,o);var h;s=null;for(g in a)if(!o.hasOwnProperty(g)&&a.hasOwnProperty(g)&&a[g]!=null)if(g==="style"){var _=a[g];for(h in _)_.hasOwnProperty(h)&&(s||(s={}),s[h]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(ea$1.hasOwnProperty(g)?c||(c=[]):(c=c||[]).push(g,null));for(g in o){var $=o[g];if(_=a?.[g],o.hasOwnProperty(g)&&$!==_&&($!=null||_!=null))if(g==="style")if(_){for(h in _)!_.hasOwnProperty(h)||$&&$.hasOwnProperty(h)||(s||(s={}),s[h]="");for(h in $)$.hasOwnProperty(h)&&_[h]!==$[h]&&(s||(s={}),s[h]=$[h])}else s||(c||(c=[]),c.push(g,s)),s=$;else g==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,_=_?_.__html:void 0,$!=null&&_!==$&&(c=c||[]).push(g,$)):g==="children"?typeof $!="string"&&typeof $!="number"||(c=c||[]).push(g,""+$):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(ea$1.hasOwnProperty(g)?($!=null&&g==="onScroll"&&D$2("scroll",i),c||_===$||(c=[])):(c=c||[]).push(g,$))}s&&(c=c||[]).push("style",s);var g=c;(e.updateQueue=g)&&(e.flags|=4)}};Dj=function(i,e,s,o){s!==o&&(e.flags|=4)};function Ej(i,e){if(!I$1)switch(i.tailMode){case"hidden":e=i.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?i.tail=null:s.sibling=null;break;case"collapsed":s=i.tail;for(var o=null;s!==null;)s.alternate!==null&&(o=s),s=s.sibling;o===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:o.sibling=null}}function S$2(i){var e=i.alternate!==null&&i.alternate.child===i.child,s=0,o=0;if(e)for(var a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags&14680064,o|=a.flags&14680064,a.return=i,a=a.sibling;else for(a=i.child;a!==null;)s|=a.lanes|a.childLanes,o|=a.subtreeFlags,o|=a.flags,a.return=i,a=a.sibling;return i.subtreeFlags|=o,i.childLanes=s,e}function Fj(i,e,s){var o=e.pendingProps;switch(wg(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return S$2(e),null;case 1:return Zf(e.type)&&$f(),S$2(e),null;case 3:return o=e.stateNode,Jh(),E$1(Wf),E$1(H$1),Oh(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(i===null||i.child===null)&&(Gg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,zg!==null&&(Gj(zg),zg=null))),Bj(i,e),S$2(e),null;case 5:Lh(e);var a=Hh(Gh.current);if(s=e.type,i!==null&&e.stateNode!=null)Cj(i,e,s,o,a),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(p$1(166));return S$2(e),null}if(i=Hh(Eh.current),Gg(e)){o=e.stateNode,s=e.type;var c=e.memoizedProps;switch(o[Of]=e,o[Pf]=c,i=(e.mode&1)!==0,s){case"dialog":D$2("cancel",o),D$2("close",o);break;case"iframe":case"object":case"embed":D$2("load",o);break;case"video":case"audio":for(a=0;a<lf.length;a++)D$2(lf[a],o);break;case"source":D$2("error",o);break;case"img":case"image":case"link":D$2("error",o),D$2("load",o);break;case"details":D$2("toggle",o);break;case"input":Za$1(o,c),D$2("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!c.multiple},D$2("invalid",o);break;case"textarea":hb$1(o,c),D$2("invalid",o)}ub$1(s,c),a=null;for(var h in c)if(c.hasOwnProperty(h)){var _=c[h];h==="children"?typeof _=="string"?o.textContent!==_&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,_,i),a=["children",_]):typeof _=="number"&&o.textContent!==""+_&&(c.suppressHydrationWarning!==!0&&Af(o.textContent,_,i),a=["children",""+_]):ea$1.hasOwnProperty(h)&&_!=null&&h==="onScroll"&&D$2("scroll",o)}switch(s){case"input":Va$1(o),db$2(o,c,!0);break;case"textarea":Va$1(o),jb$1(o);break;case"select":case"option":break;default:typeof c.onClick=="function"&&(o.onclick=Bf)}o=a,e.updateQueue=o,o!==null&&(e.flags|=4)}else{h=a.nodeType===9?a:a.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=kb$1(s)),i==="http://www.w3.org/1999/xhtml"?s==="script"?(i=h.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof o.is=="string"?i=h.createElement(s,{is:o.is}):(i=h.createElement(s),s==="select"&&(h=i,o.multiple?h.multiple=!0:o.size&&(h.size=o.size))):i=h.createElementNS(i,s),i[Of]=e,i[Pf]=o,Aj(i,e,!1,!1),e.stateNode=i;e:{switch(h=vb$1(s,o),s){case"dialog":D$2("cancel",i),D$2("close",i),a=o;break;case"iframe":case"object":case"embed":D$2("load",i),a=o;break;case"video":case"audio":for(a=0;a<lf.length;a++)D$2(lf[a],i);a=o;break;case"source":D$2("error",i),a=o;break;case"img":case"image":case"link":D$2("error",i),D$2("load",i),a=o;break;case"details":D$2("toggle",i),a=o;break;case"input":Za$1(i,o),a=Ya$1(i,o),D$2("invalid",i);break;case"option":a=o;break;case"select":i._wrapperState={wasMultiple:!!o.multiple},a=A$1({},o,{value:void 0}),D$2("invalid",i);break;case"textarea":hb$1(i,o),a=gb$1(i,o),D$2("invalid",i);break;default:a=o}ub$1(s,a),_=a;for(c in _)if(_.hasOwnProperty(c)){var $=_[c];c==="style"?sb$1(i,$):c==="dangerouslySetInnerHTML"?($=$?$.__html:void 0,$!=null&&nb$1(i,$)):c==="children"?typeof $=="string"?(s!=="textarea"||$!=="")&&ob$1(i,$):typeof $=="number"&&ob$1(i,""+$):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ea$1.hasOwnProperty(c)?$!=null&&c==="onScroll"&&D$2("scroll",i):$!=null&&ta$1(i,c,$,h))}switch(s){case"input":Va$1(i),db$2(i,o,!1);break;case"textarea":Va$1(i),jb$1(i);break;case"option":o.value!=null&&i.setAttribute("value",""+Sa$1(o.value));break;case"select":i.multiple=!!o.multiple,c=o.value,c!=null?fb$1(i,!!o.multiple,c,!1):o.defaultValue!=null&&fb$1(i,!!o.multiple,o.defaultValue,!0);break;default:typeof a.onClick=="function"&&(i.onclick=Bf)}switch(s){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return S$2(e),null;case 6:if(i&&e.stateNode!=null)Dj(i,e,i.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(p$1(166));if(s=Hh(Gh.current),Hh(Eh.current),Gg(e)){if(o=e.stateNode,s=e.memoizedProps,o[Of]=e,(c=o.nodeValue!==s)&&(i=xg,i!==null))switch(i.tag){case 3:Af(o.nodeValue,s,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Af(o.nodeValue,s,(i.mode&1)!==0)}c&&(e.flags|=4)}else o=(s.nodeType===9?s:s.ownerDocument).createTextNode(o),o[Of]=e,e.stateNode=o}return S$2(e),null;case 13:if(E$1(M$1),o=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(I$1&&yg!==null&&e.mode&1&&!(e.flags&128))Hg(),Ig(),e.flags|=98560,c=!1;else if(c=Gg(e),o!==null&&o.dehydrated!==null){if(i===null){if(!c)throw Error(p$1(318));if(c=e.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(p$1(317));c[Of]=e}else Ig(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;S$2(e),c=!1}else zg!==null&&(Gj(zg),zg=null),c=!0;if(!c)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(o=o!==null,o!==(i!==null&&i.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(i===null||M$1.current&1?T$1===0&&(T$1=3):uj())),e.updateQueue!==null&&(e.flags|=4),S$2(e),null);case 4:return Jh(),Bj(i,e),i===null&&sf(e.stateNode.containerInfo),S$2(e),null;case 10:return Rg(e.type._context),S$2(e),null;case 17:return Zf(e.type)&&$f(),S$2(e),null;case 19:if(E$1(M$1),c=e.memoizedState,c===null)return S$2(e),null;if(o=(e.flags&128)!==0,h=c.rendering,h===null)if(o)Ej(c,!1);else{if(T$1!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(h=Mh(i),h!==null){for(e.flags|=128,Ej(c,!1),o=h.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=s,s=e.child;s!==null;)c=s,i=o,c.flags&=14680066,h=c.alternate,h===null?(c.childLanes=0,c.lanes=i,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=h.childLanes,c.lanes=h.lanes,c.child=h.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=h.memoizedProps,c.memoizedState=h.memoizedState,c.updateQueue=h.updateQueue,c.type=h.type,i=h.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s=s.sibling;return G$1(M$1,M$1.current&1|2),e.child}i=i.sibling}c.tail!==null&&B$1()>Hj&&(e.flags|=128,o=!0,Ej(c,!1),e.lanes=4194304)}else{if(!o)if(i=Mh(h),i!==null){if(e.flags|=128,o=!0,s=i.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Ej(c,!0),c.tail===null&&c.tailMode==="hidden"&&!h.alternate&&!I$1)return S$2(e),null}else 2*B$1()-c.renderingStartTime>Hj&&s!==1073741824&&(e.flags|=128,o=!0,Ej(c,!1),e.lanes=4194304);c.isBackwards?(h.sibling=e.child,e.child=h):(s=c.last,s!==null?s.sibling=h:e.child=h,c.last=h)}return c.tail!==null?(e=c.tail,c.rendering=e,c.tail=e.sibling,c.renderingStartTime=B$1(),e.sibling=null,s=M$1.current,G$1(M$1,o?s&1|2:s&1),e):(S$2(e),null);case 22:case 23:return Ij(),o=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?gj&1073741824&&(S$2(e),e.subtreeFlags&6&&(e.flags|=8192)):S$2(e),null;case 24:return null;case 25:return null}throw Error(p$1(156,e.tag))}function Jj(i,e){switch(wg(e),e.tag){case 1:return Zf(e.type)&&$f(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Jh(),E$1(Wf),E$1(H$1),Oh(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Lh(e),null;case 13:if(E$1(M$1),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(p$1(340));Ig()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return E$1(M$1),null;case 4:return Jh(),null;case 10:return Rg(e.type._context),null;case 22:case 23:return Ij(),null;case 24:return null;default:return null}}var Kj=!1,U$1=!1,Lj=typeof WeakSet=="function"?WeakSet:Set,V$1=null;function Mj(i,e){var s=i.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(o){W$1(i,e,o)}else s.current=null}function Nj(i,e,s){try{s()}catch(o){W$1(i,e,o)}}var Oj=!1;function Pj(i,e){if(Cf=dd$1,i=Me(),Ne(i)){if("selectionStart"in i)var s={start:i.selectionStart,end:i.selectionEnd};else e:{s=(s=i.ownerDocument)&&s.defaultView||window;var o=s.getSelection&&s.getSelection();if(o&&o.rangeCount!==0){s=o.anchorNode;var a=o.anchorOffset,c=o.focusNode;o=o.focusOffset;try{s.nodeType,c.nodeType}catch{s=null;break e}var h=0,_=-1,$=-1,g=0,d=0,j=i,tt=null;t:for(;;){for(var rt;j!==s||a!==0&&j.nodeType!==3||(_=h+a),j!==c||o!==0&&j.nodeType!==3||($=h+o),j.nodeType===3&&(h+=j.nodeValue.length),(rt=j.firstChild)!==null;)tt=j,j=rt;for(;;){if(j===i)break t;if(tt===s&&++g===a&&(_=h),tt===c&&++d===o&&($=h),(rt=j.nextSibling)!==null)break;j=tt,tt=j.parentNode}j=rt}s=_===-1||$===-1?null:{start:_,end:$}}else s=null}s=s||{start:0,end:0}}else s=null;for(Df={focusedElem:i,selectionRange:s},dd$1=!1,V$1=e;V$1!==null;)if(e=V$1,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,V$1=i;else for(;V$1!==null;){e=V$1;try{var et=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(et!==null){var it=et.memoizedProps,st=et.memoizedState,nt=e.stateNode,ot=nt.getSnapshotBeforeUpdate(e.elementType===e.type?it:Lg(e.type,it),st);nt.__reactInternalSnapshotBeforeUpdate=ot}break;case 3:var ht=e.stateNode.containerInfo;ht.nodeType===1?ht.textContent="":ht.nodeType===9&&ht.documentElement&&ht.removeChild(ht.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(p$1(163))}}catch(pt){W$1(e,e.return,pt)}if(i=e.sibling,i!==null){i.return=e.return,V$1=i;break}V$1=e.return}return et=Oj,Oj=!1,et}function Qj(i,e,s){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var a=o=o.next;do{if((a.tag&i)===i){var c=a.destroy;a.destroy=void 0,c!==void 0&&Nj(e,s,c)}a=a.next}while(a!==o)}}function Rj(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&i)===i){var o=s.create;s.destroy=o()}s=s.next}while(s!==e)}}function Sj(i){var e=i.ref;if(e!==null){var s=i.stateNode;switch(i.tag){case 5:i=s;break;default:i=s}typeof e=="function"?e(i):e.current=i}}function Tj(i){var e=i.alternate;e!==null&&(i.alternate=null,Tj(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[Of],delete e[Pf],delete e[of],delete e[Qf],delete e[Rf])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Uj(i){return i.tag===5||i.tag===3||i.tag===4}function Vj(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Uj(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Wj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(i,e):s.insertBefore(i,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(i,s)):(e=s,e.appendChild(i)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Bf));else if(o!==4&&(i=i.child,i!==null))for(Wj(i,e,s),i=i.sibling;i!==null;)Wj(i,e,s),i=i.sibling}function Xj(i,e,s){var o=i.tag;if(o===5||o===6)i=i.stateNode,e?s.insertBefore(i,e):s.appendChild(i);else if(o!==4&&(i=i.child,i!==null))for(Xj(i,e,s),i=i.sibling;i!==null;)Xj(i,e,s),i=i.sibling}var X$1=null,Yj=!1;function Zj(i,e,s){for(s=s.child;s!==null;)ak(i,e,s),s=s.sibling}function ak(i,e,s){if(lc$1&&typeof lc$1.onCommitFiberUnmount=="function")try{lc$1.onCommitFiberUnmount(kc$1,s)}catch{}switch(s.tag){case 5:U$1||Mj(s,e);case 6:var o=X$1,a=Yj;X$1=null,Zj(i,e,s),X$1=o,Yj=a,X$1!==null&&(Yj?(i=X$1,s=s.stateNode,i.nodeType===8?i.parentNode.removeChild(s):i.removeChild(s)):X$1.removeChild(s.stateNode));break;case 18:X$1!==null&&(Yj?(i=X$1,s=s.stateNode,i.nodeType===8?Kf(i.parentNode,s):i.nodeType===1&&Kf(i,s),bd$1(i)):Kf(X$1,s.stateNode));break;case 4:o=X$1,a=Yj,X$1=s.stateNode.containerInfo,Yj=!0,Zj(i,e,s),X$1=o,Yj=a;break;case 0:case 11:case 14:case 15:if(!U$1&&(o=s.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){a=o=o.next;do{var c=a,h=c.destroy;c=c.tag,h!==void 0&&(c&2||c&4)&&Nj(s,e,h),a=a.next}while(a!==o)}Zj(i,e,s);break;case 1:if(!U$1&&(Mj(s,e),o=s.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=s.memoizedProps,o.state=s.memoizedState,o.componentWillUnmount()}catch(_){W$1(s,e,_)}Zj(i,e,s);break;case 21:Zj(i,e,s);break;case 22:s.mode&1?(U$1=(o=U$1)||s.memoizedState!==null,Zj(i,e,s),U$1=o):Zj(i,e,s);break;default:Zj(i,e,s)}}function bk(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var s=i.stateNode;s===null&&(s=i.stateNode=new Lj),e.forEach(function(o){var a=ck.bind(null,i,o);s.has(o)||(s.add(o),o.then(a,a))})}}function dk(i,e){var s=e.deletions;if(s!==null)for(var o=0;o<s.length;o++){var a=s[o];try{var c=i,h=e,_=h;e:for(;_!==null;){switch(_.tag){case 5:X$1=_.stateNode,Yj=!1;break e;case 3:X$1=_.stateNode.containerInfo,Yj=!0;break e;case 4:X$1=_.stateNode.containerInfo,Yj=!0;break e}_=_.return}if(X$1===null)throw Error(p$1(160));ak(c,h,a),X$1=null,Yj=!1;var $=a.alternate;$!==null&&($.return=null),a.return=null}catch(g){W$1(a,e,g)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)ek(e,i),e=e.sibling}function ek(i,e){var s=i.alternate,o=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(dk(e,i),fk(i),o&4){try{Qj(3,i,i.return),Rj(3,i)}catch(it){W$1(i,i.return,it)}try{Qj(5,i,i.return)}catch(it){W$1(i,i.return,it)}}break;case 1:dk(e,i),fk(i),o&512&&s!==null&&Mj(s,s.return);break;case 5:if(dk(e,i),fk(i),o&512&&s!==null&&Mj(s,s.return),i.flags&32){var a=i.stateNode;try{ob$1(a,"")}catch(it){W$1(i,i.return,it)}}if(o&4&&(a=i.stateNode,a!=null)){var c=i.memoizedProps,h=s!==null?s.memoizedProps:c,_=i.type,$=i.updateQueue;if(i.updateQueue=null,$!==null)try{_==="input"&&c.type==="radio"&&c.name!=null&&ab$1(a,c),vb$1(_,h);var g=vb$1(_,c);for(h=0;h<$.length;h+=2){var d=$[h],j=$[h+1];d==="style"?sb$1(a,j):d==="dangerouslySetInnerHTML"?nb$1(a,j):d==="children"?ob$1(a,j):ta$1(a,d,j,g)}switch(_){case"input":bb$1(a,c);break;case"textarea":ib$1(a,c);break;case"select":var tt=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!c.multiple;var rt=c.value;rt!=null?fb$1(a,!!c.multiple,rt,!1):tt!==!!c.multiple&&(c.defaultValue!=null?fb$1(a,!!c.multiple,c.defaultValue,!0):fb$1(a,!!c.multiple,c.multiple?[]:"",!1))}a[Pf]=c}catch(it){W$1(i,i.return,it)}}break;case 6:if(dk(e,i),fk(i),o&4){if(i.stateNode===null)throw Error(p$1(162));a=i.stateNode,c=i.memoizedProps;try{a.nodeValue=c}catch(it){W$1(i,i.return,it)}}break;case 3:if(dk(e,i),fk(i),o&4&&s!==null&&s.memoizedState.isDehydrated)try{bd$1(e.containerInfo)}catch(it){W$1(i,i.return,it)}break;case 4:dk(e,i),fk(i);break;case 13:dk(e,i),fk(i),a=i.child,a.flags&8192&&(c=a.memoizedState!==null,a.stateNode.isHidden=c,!c||a.alternate!==null&&a.alternate.memoizedState!==null||(gk=B$1())),o&4&&bk(i);break;case 22:if(d=s!==null&&s.memoizedState!==null,i.mode&1?(U$1=(g=U$1)||d,dk(e,i),U$1=g):dk(e,i),fk(i),o&8192){if(g=i.memoizedState!==null,(i.stateNode.isHidden=g)&&!d&&i.mode&1)for(V$1=i,d=i.child;d!==null;){for(j=V$1=d;V$1!==null;){switch(tt=V$1,rt=tt.child,tt.tag){case 0:case 11:case 14:case 15:Qj(4,tt,tt.return);break;case 1:Mj(tt,tt.return);var et=tt.stateNode;if(typeof et.componentWillUnmount=="function"){o=tt,s=tt.return;try{e=o,et.props=e.memoizedProps,et.state=e.memoizedState,et.componentWillUnmount()}catch(it){W$1(o,s,it)}}break;case 5:Mj(tt,tt.return);break;case 22:if(tt.memoizedState!==null){hk(j);continue}}rt!==null?(rt.return=tt,V$1=rt):hk(j)}d=d.sibling}e:for(d=null,j=i;;){if(j.tag===5){if(d===null){d=j;try{a=j.stateNode,g?(c=a.style,typeof c.setProperty=="function"?c.setProperty("display","none","important"):c.display="none"):(_=j.stateNode,$=j.memoizedProps.style,h=$!=null&&$.hasOwnProperty("display")?$.display:null,_.style.display=rb$1("display",h))}catch(it){W$1(i,i.return,it)}}}else if(j.tag===6){if(d===null)try{j.stateNode.nodeValue=g?"":j.memoizedProps}catch(it){W$1(i,i.return,it)}}else if((j.tag!==22&&j.tag!==23||j.memoizedState===null||j===i)&&j.child!==null){j.child.return=j,j=j.child;continue}if(j===i)break e;for(;j.sibling===null;){if(j.return===null||j.return===i)break e;d===j&&(d=null),j=j.return}d===j&&(d=null),j.sibling.return=j.return,j=j.sibling}}break;case 19:dk(e,i),fk(i),o&4&&bk(i);break;case 21:break;default:dk(e,i),fk(i)}}function fk(i){var e=i.flags;if(e&2){try{e:{for(var s=i.return;s!==null;){if(Uj(s)){var o=s;break e}s=s.return}throw Error(p$1(160))}switch(o.tag){case 5:var a=o.stateNode;o.flags&32&&(ob$1(a,""),o.flags&=-33);var c=Vj(i);Xj(i,c,a);break;case 3:case 4:var h=o.stateNode.containerInfo,_=Vj(i);Wj(i,_,h);break;default:throw Error(p$1(161))}}catch($){W$1(i,i.return,$)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function ik(i,e,s){V$1=i,jk(i)}function jk(i,e,s){for(var o=(i.mode&1)!==0;V$1!==null;){var a=V$1,c=a.child;if(a.tag===22&&o){var h=a.memoizedState!==null||Kj;if(!h){var _=a.alternate,$=_!==null&&_.memoizedState!==null||U$1;_=Kj;var g=U$1;if(Kj=h,(U$1=$)&&!g)for(V$1=a;V$1!==null;)h=V$1,$=h.child,h.tag===22&&h.memoizedState!==null?kk(a):$!==null?($.return=h,V$1=$):kk(a);for(;c!==null;)V$1=c,jk(c),c=c.sibling;V$1=a,Kj=_,U$1=g}lk(i)}else a.subtreeFlags&8772&&c!==null?(c.return=a,V$1=c):lk(i)}}function lk(i){for(;V$1!==null;){var e=V$1;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:U$1||Rj(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!U$1)if(s===null)o.componentDidMount();else{var a=e.elementType===e.type?s.memoizedProps:Lg(e.type,s.memoizedProps);o.componentDidUpdate(a,s.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var c=e.updateQueue;c!==null&&ih(e,c,o);break;case 3:var h=e.updateQueue;if(h!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}ih(e,h,s)}break;case 5:var _=e.stateNode;if(s===null&&e.flags&4){s=_;var $=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":$.autoFocus&&s.focus();break;case"img":$.src&&(s.src=$.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var g=e.alternate;if(g!==null){var d=g.memoizedState;if(d!==null){var j=d.dehydrated;j!==null&&bd$1(j)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(p$1(163))}U$1||e.flags&512&&Sj(e)}catch(tt){W$1(e,e.return,tt)}}if(e===i){V$1=null;break}if(s=e.sibling,s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function hk(i){for(;V$1!==null;){var e=V$1;if(e===i){V$1=null;break}var s=e.sibling;if(s!==null){s.return=e.return,V$1=s;break}V$1=e.return}}function kk(i){for(;V$1!==null;){var e=V$1;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Rj(4,e)}catch($){W$1(e,s,$)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var a=e.return;try{o.componentDidMount()}catch($){W$1(e,a,$)}}var c=e.return;try{Sj(e)}catch($){W$1(e,c,$)}break;case 5:var h=e.return;try{Sj(e)}catch($){W$1(e,h,$)}}}catch($){W$1(e,e.return,$)}if(e===i){V$1=null;break}var _=e.sibling;if(_!==null){_.return=e.return,V$1=_;break}V$1=e.return}}var mk=Math.ceil,nk=ua$1.ReactCurrentDispatcher,ok=ua$1.ReactCurrentOwner,pk=ua$1.ReactCurrentBatchConfig,K$1=0,R$1=null,Y$1=null,Z$1=0,gj=0,fj=Uf(0),T$1=0,qk=null,hh=0,rk=0,sk=0,tk=null,uk=null,gk=0,Hj=1/0,vk=null,Pi=!1,Qi=null,Si=null,wk=!1,xk=null,yk=0,zk=0,Ak=null,Bk=-1,Ck=0;function L(){return K$1&6?B$1():Bk!==-1?Bk:Bk=B$1()}function lh(i){return i.mode&1?K$1&2&&Z$1!==0?Z$1&-Z$1:Kg.transition!==null?(Ck===0&&(Ck=yc$1()),Ck):(i=C$2,i!==0||(i=window.event,i=i===void 0?16:jd$1(i.type)),i):1}function mh(i,e,s,o){if(50<zk)throw zk=0,Ak=null,Error(p$1(185));Ac$1(i,s,o),(!(K$1&2)||i!==R$1)&&(i===R$1&&(!(K$1&2)&&(rk|=s),T$1===4&&Dk(i,Z$1)),Ek(i,o),s===1&&K$1===0&&!(e.mode&1)&&(Hj=B$1()+500,fg&&jg()))}function Ek(i,e){var s=i.callbackNode;wc$1(i,e);var o=uc$1(i,i===R$1?Z$1:0);if(o===0)s!==null&&bc$1(s),i.callbackNode=null,i.callbackPriority=0;else if(e=o&-o,i.callbackPriority!==e){if(s!=null&&bc$1(s),e===1)i.tag===0?ig(Fk.bind(null,i)):hg(Fk.bind(null,i)),Jf(function(){!(K$1&6)&&jg()}),s=null;else{switch(Dc$1(o)){case 1:s=fc$1;break;case 4:s=gc$1;break;case 16:s=hc$1;break;case 536870912:s=jc$1;break;default:s=hc$1}s=Gk(s,Hk.bind(null,i))}i.callbackPriority=e,i.callbackNode=s}}function Hk(i,e){if(Bk=-1,Ck=0,K$1&6)throw Error(p$1(327));var s=i.callbackNode;if(Ik()&&i.callbackNode!==s)return null;var o=uc$1(i,i===R$1?Z$1:0);if(o===0)return null;if(o&30||o&i.expiredLanes||e)e=Jk(i,o);else{e=o;var a=K$1;K$1|=2;var c=Kk();(R$1!==i||Z$1!==e)&&(vk=null,Hj=B$1()+500,Lk(i,e));do try{Mk();break}catch(_){Nk(i,_)}while(!0);Qg(),nk.current=c,K$1=a,Y$1!==null?e=0:(R$1=null,Z$1=0,e=T$1)}if(e!==0){if(e===2&&(a=xc$1(i),a!==0&&(o=a,e=Ok(i,a))),e===1)throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B$1()),s;if(e===6)Dk(i,o);else{if(a=i.current.alternate,!(o&30)&&!Pk(a)&&(e=Jk(i,o),e===2&&(c=xc$1(i),c!==0&&(o=c,e=Ok(i,c))),e===1))throw s=qk,Lk(i,0),Dk(i,o),Ek(i,B$1()),s;switch(i.finishedWork=a,i.finishedLanes=o,e){case 0:case 1:throw Error(p$1(345));case 2:Qk(i,uk,vk);break;case 3:if(Dk(i,o),(o&130023424)===o&&(e=gk+500-B$1(),10<e)){if(uc$1(i,0)!==0)break;if(a=i.suspendedLanes,(a&o)!==o){L(),i.pingedLanes|=i.suspendedLanes&a;break}i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),e);break}Qk(i,uk,vk);break;case 4:if(Dk(i,o),(o&4194240)===o)break;for(e=i.eventTimes,a=-1;0<o;){var h=31-oc$1(o);c=1<<h,h=e[h],h>a&&(a=h),o&=~c}if(o=a,o=B$1()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*mk(o/1960))-o,10<o){i.timeoutHandle=Ff(Qk.bind(null,i,uk,vk),o);break}Qk(i,uk,vk);break;case 5:Qk(i,uk,vk);break;default:throw Error(p$1(329))}}}return Ek(i,B$1()),i.callbackNode===s?Hk.bind(null,i):null}function Ok(i,e){var s=tk;return i.current.memoizedState.isDehydrated&&(Lk(i,e).flags|=256),i=Jk(i,e),i!==2&&(e=uk,uk=s,e!==null&&Gj(e)),i}function Gj(i){uk===null?uk=i:uk.push.apply(uk,i)}function Pk(i){for(var e=i;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var o=0;o<s.length;o++){var a=s[o],c=a.getSnapshot;a=a.value;try{if(!He(c(),a))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Dk(i,e){for(e&=~sk,e&=~rk,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var s=31-oc$1(e),o=1<<s;i[s]=-1,e&=~o}}function Fk(i){if(K$1&6)throw Error(p$1(327));Ik();var e=uc$1(i,0);if(!(e&1))return Ek(i,B$1()),null;var s=Jk(i,e);if(i.tag!==0&&s===2){var o=xc$1(i);o!==0&&(e=o,s=Ok(i,o))}if(s===1)throw s=qk,Lk(i,0),Dk(i,e),Ek(i,B$1()),s;if(s===6)throw Error(p$1(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Qk(i,uk,vk),Ek(i,B$1()),null}function Rk(i,e){var s=K$1;K$1|=1;try{return i(e)}finally{K$1=s,K$1===0&&(Hj=B$1()+500,fg&&jg())}}function Sk(i){xk!==null&&xk.tag===0&&!(K$1&6)&&Ik();var e=K$1;K$1|=1;var s=pk.transition,o=C$2;try{if(pk.transition=null,C$2=1,i)return i()}finally{C$2=o,pk.transition=s,K$1=e,!(K$1&6)&&jg()}}function Ij(){gj=fj.current,E$1(fj)}function Lk(i,e){i.finishedWork=null,i.finishedLanes=0;var s=i.timeoutHandle;if(s!==-1&&(i.timeoutHandle=-1,Gf(s)),Y$1!==null)for(s=Y$1.return;s!==null;){var o=s;switch(wg(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&$f();break;case 3:Jh(),E$1(Wf),E$1(H$1),Oh();break;case 5:Lh(o);break;case 4:Jh();break;case 13:E$1(M$1);break;case 19:E$1(M$1);break;case 10:Rg(o.type._context);break;case 22:case 23:Ij()}s=s.return}if(R$1=i,Y$1=i=wh(i.current,null),Z$1=gj=e,T$1=0,qk=null,sk=rk=hh=0,uk=tk=null,Wg!==null){for(e=0;e<Wg.length;e++)if(s=Wg[e],o=s.interleaved,o!==null){s.interleaved=null;var a=o.next,c=s.pending;if(c!==null){var h=c.next;c.next=a,o.next=h}s.pending=o}Wg=null}return i}function Nk(i,e){do{var s=Y$1;try{if(Qg(),Ph.current=ai,Sh){for(var o=N$1.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}Sh=!1}if(Rh=0,P$1=O$1=N$1=null,Th=!1,Uh=0,ok.current=null,s===null||s.return===null){T$1=1,qk=e,Y$1=null;break}e:{var c=i,h=s.return,_=s,$=e;if(e=Z$1,_.flags|=32768,$!==null&&typeof $=="object"&&typeof $.then=="function"){var g=$,d=_,j=d.tag;if(!(d.mode&1)&&(j===0||j===11||j===15)){var tt=d.alternate;tt?(d.updateQueue=tt.updateQueue,d.memoizedState=tt.memoizedState,d.lanes=tt.lanes):(d.updateQueue=null,d.memoizedState=null)}var rt=Vi(h);if(rt!==null){rt.flags&=-257,Wi(rt,h,_,c,e),rt.mode&1&&Ti(c,g,e),e=rt,$=g;var et=e.updateQueue;if(et===null){var it=new Set;it.add($),e.updateQueue=it}else et.add($);break e}else{if(!(e&1)){Ti(c,g,e),uj();break e}$=Error(p$1(426))}}else if(I$1&&_.mode&1){var st=Vi(h);if(st!==null){!(st.flags&65536)&&(st.flags|=256),Wi(st,h,_,c,e),Jg(Ki($,_));break e}}c=$=Ki($,_),T$1!==4&&(T$1=2),tk===null?tk=[c]:tk.push(c),c=h;do{switch(c.tag){case 3:c.flags|=65536,e&=-e,c.lanes|=e;var nt=Oi(c,$,e);fh(c,nt);break e;case 1:_=$;var ot=c.type,ht=c.stateNode;if(!(c.flags&128)&&(typeof ot.getDerivedStateFromError=="function"||ht!==null&&typeof ht.componentDidCatch=="function"&&(Si===null||!Si.has(ht)))){c.flags|=65536,e&=-e,c.lanes|=e;var pt=Ri(c,_,e);fh(c,pt);break e}}c=c.return}while(c!==null)}Tk(s)}catch(lt){e=lt,Y$1===s&&s!==null&&(Y$1=s=s.return);continue}break}while(!0)}function Kk(){var i=nk.current;return nk.current=ai,i===null?ai:i}function uj(){(T$1===0||T$1===3||T$1===2)&&(T$1=4),R$1===null||!(hh&268435455)&&!(rk&268435455)||Dk(R$1,Z$1)}function Jk(i,e){var s=K$1;K$1|=2;var o=Kk();(R$1!==i||Z$1!==e)&&(vk=null,Lk(i,e));do try{Uk();break}catch(a){Nk(i,a)}while(!0);if(Qg(),K$1=s,nk.current=o,Y$1!==null)throw Error(p$1(261));return R$1=null,Z$1=0,T$1}function Uk(){for(;Y$1!==null;)Vk(Y$1)}function Mk(){for(;Y$1!==null&&!cc$1();)Vk(Y$1)}function Vk(i){var e=Wk(i.alternate,i,gj);i.memoizedProps=i.pendingProps,e===null?Tk(i):Y$1=e,ok.current=null}function Tk(i){var e=i;do{var s=e.alternate;if(i=e.return,e.flags&32768){if(s=Jj(s,e),s!==null){s.flags&=32767,Y$1=s;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{T$1=6,Y$1=null;return}}else if(s=Fj(s,e,gj),s!==null){Y$1=s;return}if(e=e.sibling,e!==null){Y$1=e;return}Y$1=e=i}while(e!==null);T$1===0&&(T$1=5)}function Qk(i,e,s){var o=C$2,a=pk.transition;try{pk.transition=null,C$2=1,Xk(i,e,s,o)}finally{pk.transition=a,C$2=o}return null}function Xk(i,e,s,o){do Ik();while(xk!==null);if(K$1&6)throw Error(p$1(327));s=i.finishedWork;var a=i.finishedLanes;if(s===null)return null;if(i.finishedWork=null,i.finishedLanes=0,s===i.current)throw Error(p$1(177));i.callbackNode=null,i.callbackPriority=0;var c=s.lanes|s.childLanes;if(Bc$1(i,c),i===R$1&&(Y$1=R$1=null,Z$1=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||wk||(wk=!0,Gk(hc$1,function(){return Ik(),null})),c=(s.flags&15990)!==0,s.subtreeFlags&15990||c){c=pk.transition,pk.transition=null;var h=C$2;C$2=1;var _=K$1;K$1|=4,ok.current=null,Pj(i,s),ek(s,i),Oe(Df),dd$1=!!Cf,Df=Cf=null,i.current=s,ik(s),dc$1(),K$1=_,C$2=h,pk.transition=c}else i.current=s;if(wk&&(wk=!1,xk=i,yk=a),c=i.pendingLanes,c===0&&(Si=null),mc$1(s.stateNode),Ek(i,B$1()),e!==null)for(o=i.onRecoverableError,s=0;s<e.length;s++)a=e[s],o(a.value,{componentStack:a.stack,digest:a.digest});if(Pi)throw Pi=!1,i=Qi,Qi=null,i;return yk&1&&i.tag!==0&&Ik(),c=i.pendingLanes,c&1?i===Ak?zk++:(zk=0,Ak=i):zk=0,jg(),null}function Ik(){if(xk!==null){var i=Dc$1(yk),e=pk.transition,s=C$2;try{if(pk.transition=null,C$2=16>i?16:i,xk===null)var o=!1;else{if(i=xk,xk=null,yk=0,K$1&6)throw Error(p$1(331));var a=K$1;for(K$1|=4,V$1=i.current;V$1!==null;){var c=V$1,h=c.child;if(V$1.flags&16){var _=c.deletions;if(_!==null){for(var $=0;$<_.length;$++){var g=_[$];for(V$1=g;V$1!==null;){var d=V$1;switch(d.tag){case 0:case 11:case 15:Qj(8,d,c)}var j=d.child;if(j!==null)j.return=d,V$1=j;else for(;V$1!==null;){d=V$1;var tt=d.sibling,rt=d.return;if(Tj(d),d===g){V$1=null;break}if(tt!==null){tt.return=rt,V$1=tt;break}V$1=rt}}}var et=c.alternate;if(et!==null){var it=et.child;if(it!==null){et.child=null;do{var st=it.sibling;it.sibling=null,it=st}while(it!==null)}}V$1=c}}if(c.subtreeFlags&2064&&h!==null)h.return=c,V$1=h;else e:for(;V$1!==null;){if(c=V$1,c.flags&2048)switch(c.tag){case 0:case 11:case 15:Qj(9,c,c.return)}var nt=c.sibling;if(nt!==null){nt.return=c.return,V$1=nt;break e}V$1=c.return}}var ot=i.current;for(V$1=ot;V$1!==null;){h=V$1;var ht=h.child;if(h.subtreeFlags&2064&&ht!==null)ht.return=h,V$1=ht;else e:for(h=ot;V$1!==null;){if(_=V$1,_.flags&2048)try{switch(_.tag){case 0:case 11:case 15:Rj(9,_)}}catch(lt){W$1(_,_.return,lt)}if(_===h){V$1=null;break e}var pt=_.sibling;if(pt!==null){pt.return=_.return,V$1=pt;break e}V$1=_.return}}if(K$1=a,jg(),lc$1&&typeof lc$1.onPostCommitFiberRoot=="function")try{lc$1.onPostCommitFiberRoot(kc$1,i)}catch{}o=!0}return o}finally{C$2=s,pk.transition=e}}return!1}function Yk(i,e,s){e=Ki(s,e),e=Oi(i,e,1),i=dh(i,e,1),e=L(),i!==null&&(Ac$1(i,1,e),Ek(i,e))}function W$1(i,e,s){if(i.tag===3)Yk(i,i,s);else for(;e!==null;){if(e.tag===3){Yk(e,i,s);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Si===null||!Si.has(o))){i=Ki(s,i),i=Ri(e,i,1),e=dh(e,i,1),i=L(),e!==null&&(Ac$1(e,1,i),Ek(e,i));break}}e=e.return}}function Ui(i,e,s){var o=i.pingCache;o!==null&&o.delete(e),e=L(),i.pingedLanes|=i.suspendedLanes&s,R$1===i&&(Z$1&s)===s&&(T$1===4||T$1===3&&(Z$1&130023424)===Z$1&&500>B$1()-gk?Lk(i,0):sk|=s),Ek(i,e)}function Zk(i,e){e===0&&(i.mode&1?(e=sc$1,sc$1<<=1,!(sc$1&130023424)&&(sc$1=4194304)):e=1);var s=L();i=Zg(i,e),i!==null&&(Ac$1(i,e,s),Ek(i,s))}function vj(i){var e=i.memoizedState,s=0;e!==null&&(s=e.retryLane),Zk(i,s)}function ck(i,e){var s=0;switch(i.tag){case 13:var o=i.stateNode,a=i.memoizedState;a!==null&&(s=a.retryLane);break;case 19:o=i.stateNode;break;default:throw Error(p$1(314))}o!==null&&o.delete(e),Zk(i,s)}var Wk;Wk=function(i,e,s){if(i!==null)if(i.memoizedProps!==e.pendingProps||Wf.current)Ug=!0;else{if(!(i.lanes&s)&&!(e.flags&128))return Ug=!1,zj(i,e,s);Ug=!!(i.flags&131072)}else Ug=!1,I$1&&e.flags&1048576&&ug(e,ng,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;jj(i,e),i=e.pendingProps;var a=Yf(e,H$1.current);Tg(e,s),a=Xh(null,e,o,i,a,s);var c=bi();return e.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zf(o)?(c=!0,cg(e)):c=!1,e.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,ah(e),a.updater=nh,e.stateNode=a,a._reactInternals=e,rh(e,o,i,s),e=kj(null,e,o,!0,c,s)):(e.tag=0,I$1&&c&&vg(e),Yi(null,e,a,s),e=e.child),e;case 16:o=e.elementType;e:{switch(jj(i,e),i=e.pendingProps,a=o._init,o=a(o._payload),e.type=o,a=e.tag=$k(o),i=Lg(o,i),a){case 0:e=dj(null,e,o,i,s);break e;case 1:e=ij(null,e,o,i,s);break e;case 11:e=Zi(null,e,o,i,s);break e;case 14:e=aj(null,e,o,Lg(o.type,i),s);break e}throw Error(p$1(306,o,""))}return e;case 0:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Lg(o,a),dj(i,e,o,a,s);case 1:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Lg(o,a),ij(i,e,o,a,s);case 3:e:{if(lj(e),i===null)throw Error(p$1(387));o=e.pendingProps,c=e.memoizedState,a=c.element,bh(i,e),gh(e,o,null,s);var h=e.memoizedState;if(o=h.element,c.isDehydrated)if(c={element:o,isDehydrated:!1,cache:h.cache,pendingSuspenseBoundaries:h.pendingSuspenseBoundaries,transitions:h.transitions},e.updateQueue.baseState=c,e.memoizedState=c,e.flags&256){a=Ki(Error(p$1(423)),e),e=mj(i,e,o,s,a);break e}else if(o!==a){a=Ki(Error(p$1(424)),e),e=mj(i,e,o,s,a);break e}else for(yg=Lf(e.stateNode.containerInfo.firstChild),xg=e,I$1=!0,zg=null,s=Ch(e,null,o,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Ig(),o===a){e=$i(i,e,s);break e}Yi(i,e,o,s)}e=e.child}return e;case 5:return Kh(e),i===null&&Eg(e),o=e.type,a=e.pendingProps,c=i!==null?i.memoizedProps:null,h=a.children,Ef(o,a)?h=null:c!==null&&Ef(o,c)&&(e.flags|=32),hj(i,e),Yi(i,e,h,s),e.child;case 6:return i===null&&Eg(e),null;case 13:return pj(i,e,s);case 4:return Ih(e,e.stateNode.containerInfo),o=e.pendingProps,i===null?e.child=Bh(e,null,o,s):Yi(i,e,o,s),e.child;case 11:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Lg(o,a),Zi(i,e,o,a,s);case 7:return Yi(i,e,e.pendingProps,s),e.child;case 8:return Yi(i,e,e.pendingProps.children,s),e.child;case 12:return Yi(i,e,e.pendingProps.children,s),e.child;case 10:e:{if(o=e.type._context,a=e.pendingProps,c=e.memoizedProps,h=a.value,G$1(Mg,o._currentValue),o._currentValue=h,c!==null)if(He(c.value,h)){if(c.children===a.children&&!Wf.current){e=$i(i,e,s);break e}}else for(c=e.child,c!==null&&(c.return=e);c!==null;){var _=c.dependencies;if(_!==null){h=c.child;for(var $=_.firstContext;$!==null;){if($.context===o){if(c.tag===1){$=ch(-1,s&-s),$.tag=2;var g=c.updateQueue;if(g!==null){g=g.shared;var d=g.pending;d===null?$.next=$:($.next=d.next,d.next=$),g.pending=$}}c.lanes|=s,$=c.alternate,$!==null&&($.lanes|=s),Sg(c.return,s,e),_.lanes|=s;break}$=$.next}}else if(c.tag===10)h=c.type===e.type?null:c.child;else if(c.tag===18){if(h=c.return,h===null)throw Error(p$1(341));h.lanes|=s,_=h.alternate,_!==null&&(_.lanes|=s),Sg(h,s,e),h=c.sibling}else h=c.child;if(h!==null)h.return=c;else for(h=c;h!==null;){if(h===e){h=null;break}if(c=h.sibling,c!==null){c.return=h.return,h=c;break}h=h.return}c=h}Yi(i,e,a.children,s),e=e.child}return e;case 9:return a=e.type,o=e.pendingProps.children,Tg(e,s),a=Vg(a),o=o(a),e.flags|=1,Yi(i,e,o,s),e.child;case 14:return o=e.type,a=Lg(o,e.pendingProps),a=Lg(o.type,a),aj(i,e,o,a,s);case 15:return cj(i,e,e.type,e.pendingProps,s);case 17:return o=e.type,a=e.pendingProps,a=e.elementType===o?a:Lg(o,a),jj(i,e),e.tag=1,Zf(o)?(i=!0,cg(e)):i=!1,Tg(e,s),ph(e,o,a),rh(e,o,a,s),kj(null,e,o,!0,i,s);case 19:return yj(i,e,s);case 22:return ej(i,e,s)}throw Error(p$1(156,e.tag))};function Gk(i,e){return ac$1(i,e)}function al(i,e,s,o){this.tag=i,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bg(i,e,s,o){return new al(i,e,s,o)}function bj(i){return i=i.prototype,!(!i||!i.isReactComponent)}function $k(i){if(typeof i=="function")return bj(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Da$1)return 11;if(i===Ga$1)return 14}return 2}function wh(i,e){var s=i.alternate;return s===null?(s=Bg(i.tag,e,i.key,i.mode),s.elementType=i.elementType,s.type=i.type,s.stateNode=i.stateNode,s.alternate=i,i.alternate=s):(s.pendingProps=e,s.type=i.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=i.flags&14680064,s.childLanes=i.childLanes,s.lanes=i.lanes,s.child=i.child,s.memoizedProps=i.memoizedProps,s.memoizedState=i.memoizedState,s.updateQueue=i.updateQueue,e=i.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=i.sibling,s.index=i.index,s.ref=i.ref,s}function yh(i,e,s,o,a,c){var h=2;if(o=i,typeof i=="function")bj(i)&&(h=1);else if(typeof i=="string")h=5;else e:switch(i){case ya$1:return Ah(s.children,a,c,e);case za$1:h=8,a|=8;break;case Aa$1:return i=Bg(12,s,e,a|2),i.elementType=Aa$1,i.lanes=c,i;case Ea$1:return i=Bg(13,s,e,a),i.elementType=Ea$1,i.lanes=c,i;case Fa$1:return i=Bg(19,s,e,a),i.elementType=Fa$1,i.lanes=c,i;case Ia$1:return qj(s,a,c,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Ba$1:h=10;break e;case Ca$1:h=9;break e;case Da$1:h=11;break e;case Ga$1:h=14;break e;case Ha$1:h=16,o=null;break e}throw Error(p$1(130,i==null?i:typeof i,""))}return e=Bg(h,s,e,a),e.elementType=i,e.type=o,e.lanes=c,e}function Ah(i,e,s,o){return i=Bg(7,i,o,e),i.lanes=s,i}function qj(i,e,s,o){return i=Bg(22,i,o,e),i.elementType=Ia$1,i.lanes=s,i.stateNode={isHidden:!1},i}function xh(i,e,s){return i=Bg(6,i,null,e),i.lanes=s,i}function zh(i,e,s){return e=Bg(4,i.children!==null?i.children:[],i.key,e),e.lanes=s,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function bl(i,e,s,o,a){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=zc$1(0),this.expirationTimes=zc$1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=zc$1(0),this.identifierPrefix=o,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function cl(i,e,s,o,a,c,h,_,$){return i=new bl(i,e,s,_,$),e===1?(e=1,c===!0&&(e|=8)):e=0,c=Bg(3,null,null,e),i.current=c,c.stateNode=i,c.memoizedState={element:o,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},ah(c),i}function dl(i,e,s){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:wa$1,key:o==null?null:""+o,children:i,containerInfo:e,implementation:s}}function el(i){if(!i)return Vf;i=i._reactInternals;e:{if(Vb$1(i)!==i||i.tag!==1)throw Error(p$1(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zf(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(p$1(171))}if(i.tag===1){var s=i.type;if(Zf(s))return bg(i,s,e)}return e}function fl(i,e,s,o,a,c,h,_,$){return i=cl(s,o,!0,i,a,c,h,_,$),i.context=el(null),s=i.current,o=L(),a=lh(s),c=ch(o,a),c.callback=e??null,dh(s,c,a),i.current.lanes=a,Ac$1(i,a,o),Ek(i,o),i}function gl(i,e,s,o){var a=e.current,c=L(),h=lh(a);return s=el(s),e.context===null?e.context=s:e.pendingContext=s,e=ch(c,h),e.payload={element:i},o=o===void 0?null:o,o!==null&&(e.callback=o),i=dh(a,e,h),i!==null&&(mh(i,a,h,c),eh(i,a,h)),h}function hl(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function il(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var s=i.retryLane;i.retryLane=s!==0&&s<e?s:e}}function jl(i,e){il(i,e),(i=i.alternate)&&il(i,e)}function kl(){return null}var ll=typeof reportError=="function"?reportError:function(i){console.error(i)};function ml(i){this._internalRoot=i}nl.prototype.render=ml.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(p$1(409));gl(i,e,null,null)};nl.prototype.unmount=ml.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;Sk(function(){gl(null,i,null,null)}),e[uf]=null}};function nl(i){this._internalRoot=i}nl.prototype.unstable_scheduleHydration=function(i){if(i){var e=Hc$1();i={blockedOn:null,target:i,priority:e};for(var s=0;s<Qc$1.length&&e!==0&&e<Qc$1[s].priority;s++);Qc$1.splice(s,0,i),s===0&&Vc$1(i)}};function ol(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function pl(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function ql(){}function rl(i,e,s,o,a){if(a){if(typeof o=="function"){var c=o;o=function(){var g=hl(h);c.call(g)}}var h=fl(e,o,i,0,null,!1,!1,"",ql);return i._reactRootContainer=h,i[uf]=h.current,sf(i.nodeType===8?i.parentNode:i),Sk(),h}for(;a=i.lastChild;)i.removeChild(a);if(typeof o=="function"){var _=o;o=function(){var g=hl($);_.call(g)}}var $=cl(i,0,!1,null,null,!1,!1,"",ql);return i._reactRootContainer=$,i[uf]=$.current,sf(i.nodeType===8?i.parentNode:i),Sk(function(){gl(e,$,s,o)}),$}function sl(i,e,s,o,a){var c=s._reactRootContainer;if(c){var h=c;if(typeof a=="function"){var _=a;a=function(){var $=hl(h);_.call($)}}gl(e,h,i,a)}else h=rl(s,e,i,a,o);return hl(h)}Ec$1=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var s=tc$1(e.pendingLanes);s!==0&&(Cc$1(e,s|1),Ek(e,B$1()),!(K$1&6)&&(Hj=B$1()+500,jg()))}break;case 13:Sk(function(){var o=Zg(i,1);if(o!==null){var a=L();mh(o,i,1,a)}}),jl(i,1)}};Fc$1=function(i){if(i.tag===13){var e=Zg(i,134217728);if(e!==null){var s=L();mh(e,i,134217728,s)}jl(i,134217728)}};Gc$1=function(i){if(i.tag===13){var e=lh(i),s=Zg(i,e);if(s!==null){var o=L();mh(s,i,e,o)}jl(i,e)}};Hc$1=function(){return C$2};Ic$1=function(i,e){var s=C$2;try{return C$2=i,e()}finally{C$2=s}};yb$1=function(i,e,s){switch(e){case"input":if(bb$1(i,s),e=s.name,s.type==="radio"&&e!=null){for(s=i;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var o=s[e];if(o!==i&&o.form===i.form){var a=Db(o);if(!a)throw Error(p$1(90));Wa$1(o),bb$1(o,a)}}}break;case"textarea":ib$1(i,s);break;case"select":e=s.value,e!=null&&fb$1(i,!!s.multiple,e,!1)}};Gb$1=Rk;Hb$1=Sk;var tl={usingClientEntryPoint:!1,Events:[Cb$1,ue$1,Db,Eb$1,Fb$1,Rk]},ul={findFiberByHostInstance:Wc$1,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},vl={bundleType:ul.bundleType,version:ul.version,rendererPackageName:ul.rendererPackageName,rendererConfig:ul.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ua$1.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Zb$1(i),i===null?null:i.stateNode},findFiberByHostInstance:ul.findFiberByHostInstance||kl,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wl.isDisabled&&wl.supportsFiber)try{kc$1=wl.inject(vl),lc$1=wl}catch{}}reactDom_production_min.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tl;reactDom_production_min.createPortal=function(i,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ol(e))throw Error(p$1(200));return dl(i,e,null,s)};reactDom_production_min.createRoot=function(i,e){if(!ol(i))throw Error(p$1(299));var s=!1,o="",a=ll;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(a=e.onRecoverableError)),e=cl(i,1,!1,null,null,s,!1,o,a),i[uf]=e.current,sf(i.nodeType===8?i.parentNode:i),new ml(e)};reactDom_production_min.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(p$1(188)):(i=Object.keys(i).join(","),Error(p$1(268,i)));return i=Zb$1(e),i=i===null?null:i.stateNode,i};reactDom_production_min.flushSync=function(i){return Sk(i)};reactDom_production_min.hydrate=function(i,e,s){if(!pl(e))throw Error(p$1(200));return sl(null,i,e,!0,s)};reactDom_production_min.hydrateRoot=function(i,e,s){if(!ol(i))throw Error(p$1(405));var o=s!=null&&s.hydratedSources||null,a=!1,c="",h=ll;if(s!=null&&(s.unstable_strictMode===!0&&(a=!0),s.identifierPrefix!==void 0&&(c=s.identifierPrefix),s.onRecoverableError!==void 0&&(h=s.onRecoverableError)),e=fl(e,null,i,1,s??null,a,!1,c,h),i[uf]=e.current,sf(i),o)for(i=0;i<o.length;i++)s=o[i],a=s._getVersion,a=a(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,a]:e.mutableSourceEagerHydrationData.push(s,a);return new nl(e)};reactDom_production_min.render=function(i,e,s){if(!pl(e))throw Error(p$1(200));return sl(null,i,e,!1,s)};reactDom_production_min.unmountComponentAtNode=function(i){if(!pl(i))throw Error(p$1(40));return i._reactRootContainer?(Sk(function(){sl(null,null,i,!1,function(){i._reactRootContainer=null,i[uf]=null})}),!0):!1};reactDom_production_min.unstable_batchedUpdates=Rk;reactDom_production_min.unstable_renderSubtreeIntoContainer=function(i,e,s,o){if(!pl(s))throw Error(p$1(200));if(i==null||i._reactInternals===void 0)throw Error(p$1(38));return sl(i,e,s,!1,o)};reactDom_production_min.version="18.2.0-next-9e3b772b8-20220608";function checkDCE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(checkDCE)}catch(i){console.error(i)}}checkDCE(),reactDom.exports=reactDom_production_min;var reactDomExports=reactDom.exports;const index$1=getDefaultExportFromCjs(reactDomExports),ReactDOM=_mergeNamespaces({__proto__:null,default:index$1},[reactDomExports]);var m=reactDomExports;client.createRoot=m.createRoot,client.hydrateRoot=m.hydrateRoot;/**
 * @remix-run/router v1.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$2(){return _extends$2=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends$2.apply(this,arguments)}var Action;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Action||(Action={}));const PopStateEventType="popstate";function createHashHistory(i){i===void 0&&(i={});function e(a,c){let{pathname:h="/",search:_="",hash:$=""}=parsePath(a.location.hash.substr(1));return!h.startsWith("/")&&!h.startsWith(".")&&(h="/"+h),createLocation("",{pathname:h,search:_,hash:$},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function s(a,c){let h=a.document.querySelector("base"),_="";if(h&&h.getAttribute("href")){let $=a.location.href,g=$.indexOf("#");_=g===-1?$:$.slice(0,g)}return _+"#"+(typeof c=="string"?c:createPath(c))}function o(a,c){warning$2(a.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(c)+")")}return getUrlBasedHistory(e,s,o,i)}function invariant$1(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function warning$2(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function createKey(){return Math.random().toString(36).substr(2,8)}function getHistoryState(i,e){return{usr:i.state,key:i.key,idx:e}}function createLocation(i,e,s,o){return s===void 0&&(s=null),_extends$2({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?parsePath(e):e,{state:s,key:e&&e.key||o||createKey()})}function createPath(i){let{pathname:e="/",search:s="",hash:o=""}=i;return s&&s!=="?"&&(e+=s.charAt(0)==="?"?s:"?"+s),o&&o!=="#"&&(e+=o.charAt(0)==="#"?o:"#"+o),e}function parsePath(i){let e={};if(i){let s=i.indexOf("#");s>=0&&(e.hash=i.substr(s),i=i.substr(0,s));let o=i.indexOf("?");o>=0&&(e.search=i.substr(o),i=i.substr(0,o)),i&&(e.pathname=i)}return e}function getUrlBasedHistory(i,e,s,o){o===void 0&&(o={});let{window:a=document.defaultView,v5Compat:c=!1}=o,h=a.history,_=Action.Pop,$=null,g=d();g==null&&(g=0,h.replaceState(_extends$2({},h.state,{idx:g}),""));function d(){return(h.state||{idx:null}).idx}function j(){_=Action.Pop;let st=d(),nt=st==null?null:st-g;g=st,$&&$({action:_,location:it.location,delta:nt})}function tt(st,nt){_=Action.Push;let ot=createLocation(it.location,st,nt);s&&s(ot,st),g=d()+1;let ht=getHistoryState(ot,g),pt=it.createHref(ot);try{h.pushState(ht,"",pt)}catch(lt){if(lt instanceof DOMException&&lt.name==="DataCloneError")throw lt;a.location.assign(pt)}c&&$&&$({action:_,location:it.location,delta:1})}function rt(st,nt){_=Action.Replace;let ot=createLocation(it.location,st,nt);s&&s(ot,st),g=d();let ht=getHistoryState(ot,g),pt=it.createHref(ot);h.replaceState(ht,"",pt),c&&$&&$({action:_,location:it.location,delta:0})}function et(st){let nt=a.location.origin!=="null"?a.location.origin:a.location.href,ot=typeof st=="string"?st:createPath(st);return invariant$1(nt,"No window.location.(origin|href) available to create URL for href: "+ot),new URL(ot,nt)}let it={get action(){return _},get location(){return i(a,h)},listen(st){if($)throw new Error("A history only accepts one active listener");return a.addEventListener(PopStateEventType,j),$=st,()=>{a.removeEventListener(PopStateEventType,j),$=null}},createHref(st){return e(a,st)},createURL:et,encodeLocation(st){let nt=et(st);return{pathname:nt.pathname,search:nt.search,hash:nt.hash}},push:tt,replace:rt,go(st){return h.go(st)}};return it}var ResultType;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(ResultType||(ResultType={}));const immutableRouteKeys=new Set(["lazy","caseSensitive","path","id","index","children"]);function isIndexRoute(i){return i.index===!0}function convertRoutesToDataRoutes(i,e,s,o){return s===void 0&&(s=[]),o===void 0&&(o={}),i.map((a,c)=>{let h=[...s,c],_=typeof a.id=="string"?a.id:h.join("-");if(invariant$1(a.index!==!0||!a.children,"Cannot specify children on an index route"),invariant$1(!o[_],'Found a route id collision on id "'+_+`".  Route id's must be globally unique within Data Router usages`),isIndexRoute(a)){let $=_extends$2({},a,e(a),{id:_});return o[_]=$,$}else{let $=_extends$2({},a,e(a),{id:_,children:void 0});return o[_]=$,a.children&&($.children=convertRoutesToDataRoutes(a.children,e,h,o)),$}})}function matchRoutes(i,e,s){s===void 0&&(s="/");let o=typeof e=="string"?parsePath(e):e,a=stripBasename(o.pathname||"/",s);if(a==null)return null;let c=flattenRoutes(i);rankRouteBranches(c);let h=null;for(let _=0;h==null&&_<c.length;++_)h=matchRouteBranch(c[_],safelyDecodeURI(a));return h}function convertRouteMatchToUiMatch(i,e){let{route:s,pathname:o,params:a}=i;return{id:s.id,pathname:o,params:a,data:e[s.id],handle:s.handle}}function flattenRoutes(i,e,s,o){e===void 0&&(e=[]),s===void 0&&(s=[]),o===void 0&&(o="");let a=(c,h,_)=>{let $={relativePath:_===void 0?c.path||"":_,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};$.relativePath.startsWith("/")&&(invariant$1($.relativePath.startsWith(o),'Absolute route path "'+$.relativePath+'" nested under path '+('"'+o+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),$.relativePath=$.relativePath.slice(o.length));let g=joinPaths([o,$.relativePath]),d=s.concat($);c.children&&c.children.length>0&&(invariant$1(c.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),flattenRoutes(c.children,e,d,g)),!(c.path==null&&!c.index)&&e.push({path:g,score:computeScore(g,c.index),routesMeta:d})};return i.forEach((c,h)=>{var _;if(c.path===""||!((_=c.path)!=null&&_.includes("?")))a(c,h);else for(let $ of explodeOptionalSegments(c.path))a(c,h,$)}),e}function explodeOptionalSegments(i){let e=i.split("/");if(e.length===0)return[];let[s,...o]=e,a=s.endsWith("?"),c=s.replace(/\?$/,"");if(o.length===0)return a?[c,""]:[c];let h=explodeOptionalSegments(o.join("/")),_=[];return _.push(...h.map($=>$===""?c:[c,$].join("/"))),a&&_.push(...h),_.map($=>i.startsWith("/")&&$===""?"/":$)}function rankRouteBranches(i){i.sort((e,s)=>e.score!==s.score?s.score-e.score:compareIndexes(e.routesMeta.map(o=>o.childrenIndex),s.routesMeta.map(o=>o.childrenIndex)))}const paramRe=/^:[\w-]+$/,dynamicSegmentValue=3,indexRouteValue=2,emptySegmentValue=1,staticSegmentValue=10,splatPenalty=-2,isSplat=i=>i==="*";function computeScore(i,e){let s=i.split("/"),o=s.length;return s.some(isSplat)&&(o+=splatPenalty),e&&(o+=indexRouteValue),s.filter(a=>!isSplat(a)).reduce((a,c)=>a+(paramRe.test(c)?dynamicSegmentValue:c===""?emptySegmentValue:staticSegmentValue),o)}function compareIndexes(i,e){return i.length===e.length&&i.slice(0,-1).every((o,a)=>o===e[a])?i[i.length-1]-e[e.length-1]:0}function matchRouteBranch(i,e){let{routesMeta:s}=i,o={},a="/",c=[];for(let h=0;h<s.length;++h){let _=s[h],$=h===s.length-1,g=a==="/"?e:e.slice(a.length)||"/",d=matchPath({path:_.relativePath,caseSensitive:_.caseSensitive,end:$},g);if(!d)return null;Object.assign(o,d.params);let j=_.route;c.push({params:o,pathname:joinPaths([a,d.pathname]),pathnameBase:normalizePathname(joinPaths([a,d.pathnameBase])),route:j}),d.pathnameBase!=="/"&&(a=joinPaths([a,d.pathnameBase]))}return c}function matchPath(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[s,o]=compilePath(i.path,i.caseSensitive,i.end),a=e.match(s);if(!a)return null;let c=a[0],h=c.replace(/(.)\/+$/,"$1"),_=a.slice(1);return{params:o.reduce((g,d,j)=>{let{paramName:tt,isOptional:rt}=d;if(tt==="*"){let it=_[j]||"";h=c.slice(0,c.length-it.length).replace(/(.)\/+$/,"$1")}const et=_[j];return rt&&!et?g[tt]=void 0:g[tt]=safelyDecodeURIComponent(et||"",tt),g},{}),pathname:c,pathnameBase:h,pattern:i}}function compilePath(i,e,s){e===void 0&&(e=!1),s===void 0&&(s=!0),warning$2(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let o=[],a="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,_,$)=>(o.push({paramName:_,isOptional:$!=null}),$?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(o.push({paramName:"*"}),a+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?a+="\\/*$":i!==""&&i!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,e?void 0:"i"),o]}function safelyDecodeURI(i){try{return decodeURI(i)}catch(e){return warning$2(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function safelyDecodeURIComponent(i,e){try{return decodeURIComponent(i)}catch(s){return warning$2(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+i+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+s+").")),i}}function stripBasename(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,o=i.charAt(s);return o&&o!=="/"?null:i.slice(s)||"/"}function resolvePath(i,e){e===void 0&&(e="/");let{pathname:s,search:o="",hash:a=""}=typeof i=="string"?parsePath(i):i;return{pathname:s?s.startsWith("/")?s:resolvePathname(s,e):e,search:normalizeSearch(o),hash:normalizeHash(a)}}function resolvePathname(i,e){let s=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(a=>{a===".."?s.length>1&&s.pop():a!=="."&&s.push(a)}),s.length>1?s.join("/"):"/"}function getInvalidPathError(i,e,s,o){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(o)+"].  Please separate it out to the ")+("`to."+s+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function getPathContributingMatches(i){return i.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function getResolveToMatches(i,e){let s=getPathContributingMatches(i);return e?s.map((o,a)=>a===i.length-1?o.pathname:o.pathnameBase):s.map(o=>o.pathnameBase)}function resolveTo(i,e,s,o){o===void 0&&(o=!1);let a;typeof i=="string"?a=parsePath(i):(a=_extends$2({},i),invariant$1(!a.pathname||!a.pathname.includes("?"),getInvalidPathError("?","pathname","search",a)),invariant$1(!a.pathname||!a.pathname.includes("#"),getInvalidPathError("#","pathname","hash",a)),invariant$1(!a.search||!a.search.includes("#"),getInvalidPathError("#","search","hash",a)));let c=i===""||a.pathname==="",h=c?"/":a.pathname,_;if(h==null)_=s;else{let j=e.length-1;if(!o&&h.startsWith("..")){let tt=h.split("/");for(;tt[0]==="..";)tt.shift(),j-=1;a.pathname=tt.join("/")}_=j>=0?e[j]:"/"}let $=resolvePath(a,_),g=h&&h!=="/"&&h.endsWith("/"),d=(c||h===".")&&s.endsWith("/");return!$.pathname.endsWith("/")&&(g||d)&&($.pathname+="/"),$}const joinPaths=i=>i.join("/").replace(/\/\/+/g,"/"),normalizePathname=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),normalizeSearch=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,normalizeHash=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;class ErrorResponseImpl{constructor(e,s,o,a){a===void 0&&(a=!1),this.status=e,this.statusText=s||"",this.internal=a,o instanceof Error?(this.data=o.toString(),this.error=o):this.data=o}}function isRouteErrorResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const validMutationMethodsArr=["post","put","patch","delete"],validMutationMethods=new Set(validMutationMethodsArr),validRequestMethodsArr=["get",...validMutationMethodsArr],validRequestMethods=new Set(validRequestMethodsArr),redirectStatusCodes=new Set([301,302,303,307,308]),redirectPreserveMethodStatusCodes=new Set([307,308]),IDLE_NAVIGATION={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_FETCHER={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},IDLE_BLOCKER={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},ABSOLUTE_URL_REGEX=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,defaultMapRouteProperties=i=>({hasErrorBoundary:!!i.hasErrorBoundary}),TRANSITIONS_STORAGE_KEY="remix-router-transitions";function createRouter(i){const e=i.window?i.window:typeof window<"u"?window:void 0,s=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",o=!s;invariant$1(i.routes.length>0,"You must provide a non-empty routes array to createRouter");let a;if(i.mapRouteProperties)a=i.mapRouteProperties;else if(i.detectErrorBoundary){let Ft=i.detectErrorBoundary;a=jt=>({hasErrorBoundary:Ft(jt)})}else a=defaultMapRouteProperties;let c={},h=convertRoutesToDataRoutes(i.routes,a,void 0,c),_,$=i.basename||"/",g=_extends$2({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1},i.future),d=null,j=new Set,tt=null,rt=null,et=null,it=i.hydrationData!=null,st=matchRoutes(h,i.history.location,$),nt=null;if(st==null){let Ft=getInternalRouterError(404,{pathname:i.history.location.pathname}),{matches:jt,route:Yt}=getShortCircuitMatches(h);st=jt,nt={[Yt.id]:Ft}}let ot,ht=st.some(Ft=>Ft.route.lazy),pt=st.some(Ft=>Ft.route.loader);if(ht)ot=!1;else if(!pt)ot=!0;else if(g.v7_partialHydration){let Ft=i.hydrationData?i.hydrationData.loaderData:null,jt=i.hydrationData?i.hydrationData.errors:null;ot=st.every(Yt=>Yt.route.loader&&Yt.route.loader.hydrate!==!0&&(Ft&&Ft[Yt.route.id]!==void 0||jt&&jt[Yt.route.id]!==void 0))}else ot=i.hydrationData!=null;let lt,ut={historyAction:i.history.action,location:i.history.location,matches:st,initialized:ot,navigation:IDLE_NAVIGATION,restoreScrollPosition:i.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:i.hydrationData&&i.hydrationData.loaderData||{},actionData:i.hydrationData&&i.hydrationData.actionData||null,errors:i.hydrationData&&i.hydrationData.errors||nt,fetchers:new Map,blockers:new Map},yt=Action.Pop,Pt=!1,vt,Vt=!1,Dt=new Map,Qt=null,Wt=!1,Kt=!1,tn=[],Ht=[],St=new Map,ft=0,ct=-1,dt=new Map,gt=new Set,Tt=new Map,wt=new Map,xt=new Set,At=new Map,at=new Map,mt=!1;function _t(){if(d=i.history.listen(Ft=>{let{action:jt,location:Yt,delta:rn}=Ft;if(mt){mt=!1;return}warning$2(at.size===0||rn!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let hn=Ot({currentLocation:ut.location,nextLocation:Yt,historyAction:jt});if(hn&&rn!=null){mt=!0,i.history.go(rn*-1),Lt(hn,{state:"blocked",location:Yt,proceed(){Lt(hn,{state:"proceeding",proceed:void 0,reset:void 0,location:Yt}),i.history.go(rn)},reset(){let fn=new Map(ut.blockers);fn.set(hn,IDLE_BLOCKER),Ct({blockers:fn})}});return}return Nt(jt,Yt)}),s){restoreAppliedTransitions(e,Dt);let Ft=()=>persistAppliedTransitions(e,Dt);e.addEventListener("pagehide",Ft),Qt=()=>e.removeEventListener("pagehide",Ft)}return ut.initialized||Nt(Action.Pop,ut.location,{initialHydration:!0}),lt}function Rt(){d&&d(),Qt&&Qt(),j.clear(),vt&&vt.abort(),ut.fetchers.forEach((Ft,jt)=>xn(jt)),ut.blockers.forEach((Ft,jt)=>Jt(jt))}function bt(Ft){return j.add(Ft),()=>j.delete(Ft)}function Ct(Ft,jt){jt===void 0&&(jt={}),ut=_extends$2({},ut,Ft);let Yt=[],rn=[];g.v7_fetcherPersist&&ut.fetchers.forEach((hn,fn)=>{hn.state==="idle"&&(xt.has(fn)?rn.push(fn):Yt.push(fn))}),[...j].forEach(hn=>hn(ut,{deletedFetchers:rn,unstable_viewTransitionOpts:jt.viewTransitionOpts,unstable_flushSync:jt.flushSync===!0})),g.v7_fetcherPersist&&(Yt.forEach(hn=>ut.fetchers.delete(hn)),rn.forEach(hn=>xn(hn)))}function $t(Ft,jt,Yt){var rn,hn;let{flushSync:fn}=Yt===void 0?{}:Yt,yn=ut.actionData!=null&&ut.navigation.formMethod!=null&&isMutationMethod(ut.navigation.formMethod)&&ut.navigation.state==="loading"&&((rn=Ft.state)==null?void 0:rn._isRedirect)!==!0,gn;jt.actionData?Object.keys(jt.actionData).length>0?gn=jt.actionData:gn=null:yn?gn=ut.actionData:gn=null;let pn=jt.loaderData?mergeLoaderData(ut.loaderData,jt.loaderData,jt.matches||[],jt.errors):ut.loaderData,Pn=ut.blockers;Pn.size>0&&(Pn=new Map(Pn),Pn.forEach((wn,$n)=>Pn.set($n,IDLE_BLOCKER)));let Vn=Pt===!0||ut.navigation.formMethod!=null&&isMutationMethod(ut.navigation.formMethod)&&((hn=Ft.state)==null?void 0:hn._isRedirect)!==!0;_&&(h=_,_=void 0),Wt||yt===Action.Pop||(yt===Action.Push?i.history.push(Ft,Ft.state):yt===Action.Replace&&i.history.replace(Ft,Ft.state));let _n;if(yt===Action.Pop){let wn=Dt.get(ut.location.pathname);wn&&wn.has(Ft.pathname)?_n={currentLocation:ut.location,nextLocation:Ft}:Dt.has(Ft.pathname)&&(_n={currentLocation:Ft,nextLocation:ut.location})}else if(Vt){let wn=Dt.get(ut.location.pathname);wn?wn.add(Ft.pathname):(wn=new Set([Ft.pathname]),Dt.set(ut.location.pathname,wn)),_n={currentLocation:ut.location,nextLocation:Ft}}Ct(_extends$2({},jt,{actionData:gn,loaderData:pn,historyAction:yt,location:Ft,initialized:!0,navigation:IDLE_NAVIGATION,revalidation:"idle",restoreScrollPosition:Qn(Ft,jt.matches||ut.matches),preventScrollReset:Vn,blockers:Pn}),{viewTransitionOpts:_n,flushSync:fn===!0}),yt=Action.Pop,Pt=!1,Vt=!1,Wt=!1,Kt=!1,tn=[],Ht=[]}async function Ut(Ft,jt){if(typeof Ft=="number"){i.history.go(Ft);return}let Yt=normalizeTo(ut.location,ut.matches,$,g.v7_prependBasename,Ft,g.v7_relativeSplatPath,jt?.fromRouteId,jt?.relative),{path:rn,submission:hn,error:fn}=normalizeNavigateOptions(g.v7_normalizeFormMethod,!1,Yt,jt),yn=ut.location,gn=createLocation(ut.location,rn,jt&&jt.state);gn=_extends$2({},gn,i.history.encodeLocation(gn));let pn=jt&&jt.replace!=null?jt.replace:void 0,Pn=Action.Push;pn===!0?Pn=Action.Replace:pn===!1||hn!=null&&isMutationMethod(hn.formMethod)&&hn.formAction===ut.location.pathname+ut.location.search&&(Pn=Action.Replace);let Vn=jt&&"preventScrollReset"in jt?jt.preventScrollReset===!0:void 0,_n=(jt&&jt.unstable_flushSync)===!0,wn=Ot({currentLocation:yn,nextLocation:gn,historyAction:Pn});if(wn){Lt(wn,{state:"blocked",location:gn,proceed(){Lt(wn,{state:"proceeding",proceed:void 0,reset:void 0,location:gn}),Ut(Ft,jt)},reset(){let $n=new Map(ut.blockers);$n.set(wn,IDLE_BLOCKER),Ct({blockers:$n})}});return}return await Nt(Pn,gn,{submission:hn,pendingError:fn,preventScrollReset:Vn,replace:jt&&jt.replace,enableViewTransition:jt&&jt.unstable_viewTransition,flushSync:_n})}function en(){if(En(),Ct({revalidation:"loading"}),ut.navigation.state!=="submitting"){if(ut.navigation.state==="idle"){Nt(ut.historyAction,ut.location,{startUninterruptedRevalidation:!0});return}Nt(yt||ut.historyAction,ut.navigation.location,{overrideNavigation:ut.navigation})}}async function Nt(Ft,jt,Yt){vt&&vt.abort(),vt=null,yt=Ft,Wt=(Yt&&Yt.startUninterruptedRevalidation)===!0,Ln(ut.location,ut.matches),Pt=(Yt&&Yt.preventScrollReset)===!0,Vt=(Yt&&Yt.enableViewTransition)===!0;let rn=_||h,hn=Yt&&Yt.overrideNavigation,fn=matchRoutes(rn,jt,$),yn=(Yt&&Yt.flushSync)===!0;if(!fn){let $n=getInternalRouterError(404,{pathname:jt.pathname}),{matches:Wn,route:jn}=getShortCircuitMatches(rn);ln(),$t(jt,{matches:Wn,loaderData:{},errors:{[jn.id]:$n}},{flushSync:yn});return}if(ut.initialized&&!Kt&&isHashChangeOnly(ut.location,jt)&&!(Yt&&Yt.submission&&isMutationMethod(Yt.submission.formMethod))){$t(jt,{matches:fn},{flushSync:yn});return}vt=new AbortController;let gn=createClientSideRequest(i.history,jt,vt.signal,Yt&&Yt.submission),pn,Pn;if(Yt&&Yt.pendingError)Pn={[findNearestBoundary(fn).route.id]:Yt.pendingError};else if(Yt&&Yt.submission&&isMutationMethod(Yt.submission.formMethod)){let $n=await Bt(gn,jt,Yt.submission,fn,{replace:Yt.replace,flushSync:yn});if($n.shortCircuited)return;pn=$n.pendingActionData,Pn=$n.pendingActionError,hn=getLoadingNavigation(jt,Yt.submission),yn=!1,gn=new Request(gn.url,{signal:gn.signal})}let{shortCircuited:Vn,loaderData:_n,errors:wn}=await zt(gn,jt,fn,hn,Yt&&Yt.submission,Yt&&Yt.fetcherSubmission,Yt&&Yt.replace,Yt&&Yt.initialHydration===!0,yn,pn,Pn);Vn||(vt=null,$t(jt,_extends$2({matches:fn},pn?{actionData:pn}:{},{loaderData:_n,errors:wn})))}async function Bt(Ft,jt,Yt,rn,hn){hn===void 0&&(hn={}),En();let fn=getSubmittingNavigation(jt,Yt);Ct({navigation:fn},{flushSync:hn.flushSync===!0});let yn,gn=getTargetMatch(rn,jt);if(!gn.route.action&&!gn.route.lazy)yn={type:ResultType.error,error:getInternalRouterError(405,{method:Ft.method,pathname:jt.pathname,routeId:gn.route.id})};else if(yn=await callLoaderOrAction("action",Ft,gn,rn,c,a,$,g.v7_relativeSplatPath),Ft.signal.aborted)return{shortCircuited:!0};if(isRedirectResult(yn)){let pn;return hn&&hn.replace!=null?pn=hn.replace:pn=yn.location===ut.location.pathname+ut.location.search,await cn(ut,yn,{submission:Yt,replace:pn}),{shortCircuited:!0}}if(isErrorResult(yn)){let pn=findNearestBoundary(rn,gn.route.id);return(hn&&hn.replace)!==!0&&(yt=Action.Push),{pendingActionData:{},pendingActionError:{[pn.route.id]:yn.error}}}if(isDeferredResult(yn))throw getInternalRouterError(400,{type:"defer-action"});return{pendingActionData:{[gn.route.id]:yn.data}}}async function zt(Ft,jt,Yt,rn,hn,fn,yn,gn,pn,Pn,Vn){let _n=rn||getLoadingNavigation(jt,hn),wn=hn||fn||getSubmissionFromNavigation(_n),$n=_||h,[Wn,jn]=getMatchesToLoad(i.history,ut,Yt,wn,jt,g.v7_partialHydration&&gn===!0,Kt,tn,Ht,xt,Tt,gt,$n,$,Pn,Vn);if(ln(Cn=>!(Yt&&Yt.some(Dn=>Dn.route.id===Cn))||Wn&&Wn.some(Dn=>Dn.route.id===Cn)),ct=++ft,Wn.length===0&&jn.length===0){let Cn=Xn();return $t(jt,_extends$2({matches:Yt,loaderData:{},errors:Vn||null},Pn?{actionData:Pn}:{},Cn?{fetchers:new Map(ut.fetchers)}:{}),{flushSync:pn}),{shortCircuited:!0}}if(!Wt&&(!g.v7_partialHydration||!gn)){jn.forEach(Dn=>{let Yn=ut.fetchers.get(Dn.key),lr=getLoadingFetcher(void 0,Yn?Yn.data:void 0);ut.fetchers.set(Dn.key,lr)});let Cn=Pn||ut.actionData;Ct(_extends$2({navigation:_n},Cn?Object.keys(Cn).length===0?{actionData:null}:{actionData:Cn}:{},jn.length>0?{fetchers:new Map(ut.fetchers)}:{}),{flushSync:pn})}jn.forEach(Cn=>{St.has(Cn.key)&&kn(Cn.key),Cn.controller&&St.set(Cn.key,Cn.controller)});let rr=()=>jn.forEach(Cn=>kn(Cn.key));vt&&vt.signal.addEventListener("abort",rr);let{results:hr,loaderResults:ir,fetcherResults:Zn}=await mn(ut.matches,Yt,Wn,jn,Ft);if(Ft.signal.aborted)return{shortCircuited:!0};vt&&vt.signal.removeEventListener("abort",rr),jn.forEach(Cn=>St.delete(Cn.key));let tr=findRedirect(hr);if(tr){if(tr.idx>=Wn.length){let Cn=jn[tr.idx-Wn.length].key;gt.add(Cn)}return await cn(ut,tr.result,{replace:yn}),{shortCircuited:!0}}let{loaderData:dr,errors:fr}=processLoaderData(ut,Yt,Wn,ir,Vn,jn,Zn,At);At.forEach((Cn,Dn)=>{Cn.subscribe(Yn=>{(Yn||Cn.done)&&At.delete(Dn)})});let pr=Xn(),nr=Gn(ct),ar=pr||nr||jn.length>0;return _extends$2({loaderData:dr,errors:fr},ar?{fetchers:new Map(ut.fetchers)}:{})}function Gt(Ft,jt,Yt,rn){if(o)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");St.has(Ft)&&kn(Ft);let hn=(rn&&rn.unstable_flushSync)===!0,fn=_||h,yn=normalizeTo(ut.location,ut.matches,$,g.v7_prependBasename,Yt,g.v7_relativeSplatPath,jt,rn?.relative),gn=matchRoutes(fn,yn,$);if(!gn){Rn(Ft,jt,getInternalRouterError(404,{pathname:yn}),{flushSync:hn});return}let{path:pn,submission:Pn,error:Vn}=normalizeNavigateOptions(g.v7_normalizeFormMethod,!0,yn,rn);if(Vn){Rn(Ft,jt,Vn,{flushSync:hn});return}let _n=getTargetMatch(gn,pn);if(Pt=(rn&&rn.preventScrollReset)===!0,Pn&&isMutationMethod(Pn.formMethod)){Xt(Ft,jt,pn,_n,gn,hn,Pn);return}Tt.set(Ft,{routeId:jt,path:pn}),sn(Ft,jt,pn,_n,gn,hn,Pn)}async function Xt(Ft,jt,Yt,rn,hn,fn,yn){if(En(),Tt.delete(Ft),!rn.route.action&&!rn.route.lazy){let Dn=getInternalRouterError(405,{method:yn.formMethod,pathname:Yt,routeId:jt});Rn(Ft,jt,Dn,{flushSync:fn});return}let gn=ut.fetchers.get(Ft);vn(Ft,getSubmittingFetcher(yn,gn),{flushSync:fn});let pn=new AbortController,Pn=createClientSideRequest(i.history,Yt,pn.signal,yn);St.set(Ft,pn);let Vn=ft,_n=await callLoaderOrAction("action",Pn,rn,hn,c,a,$,g.v7_relativeSplatPath);if(Pn.signal.aborted){St.get(Ft)===pn&&St.delete(Ft);return}if(g.v7_fetcherPersist&&xt.has(Ft)){if(isRedirectResult(_n)||isErrorResult(_n)){vn(Ft,getDoneFetcher(void 0));return}}else{if(isRedirectResult(_n))if(St.delete(Ft),ct>Vn){vn(Ft,getDoneFetcher(void 0));return}else return gt.add(Ft),vn(Ft,getLoadingFetcher(yn)),cn(ut,_n,{fetcherSubmission:yn});if(isErrorResult(_n)){Rn(Ft,jt,_n.error);return}}if(isDeferredResult(_n))throw getInternalRouterError(400,{type:"defer-action"});let wn=ut.navigation.location||ut.location,$n=createClientSideRequest(i.history,wn,pn.signal),Wn=_||h,jn=ut.navigation.state!=="idle"?matchRoutes(Wn,ut.navigation.location,$):ut.matches;invariant$1(jn,"Didn't find any matches after fetcher action");let rr=++ft;dt.set(Ft,rr);let hr=getLoadingFetcher(yn,_n.data);ut.fetchers.set(Ft,hr);let[ir,Zn]=getMatchesToLoad(i.history,ut,jn,yn,wn,!1,Kt,tn,Ht,xt,Tt,gt,Wn,$,{[rn.route.id]:_n.data},void 0);Zn.filter(Dn=>Dn.key!==Ft).forEach(Dn=>{let Yn=Dn.key,lr=ut.fetchers.get(Yn),yr=getLoadingFetcher(void 0,lr?lr.data:void 0);ut.fetchers.set(Yn,yr),St.has(Yn)&&kn(Yn),Dn.controller&&St.set(Yn,Dn.controller)}),Ct({fetchers:new Map(ut.fetchers)});let tr=()=>Zn.forEach(Dn=>kn(Dn.key));pn.signal.addEventListener("abort",tr);let{results:dr,loaderResults:fr,fetcherResults:pr}=await mn(ut.matches,jn,ir,Zn,$n);if(pn.signal.aborted)return;pn.signal.removeEventListener("abort",tr),dt.delete(Ft),St.delete(Ft),Zn.forEach(Dn=>St.delete(Dn.key));let nr=findRedirect(dr);if(nr){if(nr.idx>=ir.length){let Dn=Zn[nr.idx-ir.length].key;gt.add(Dn)}return cn(ut,nr.result)}let{loaderData:ar,errors:Cn}=processLoaderData(ut,ut.matches,ir,fr,void 0,Zn,pr,At);if(ut.fetchers.has(Ft)){let Dn=getDoneFetcher(_n.data);ut.fetchers.set(Ft,Dn)}Gn(rr),ut.navigation.state==="loading"&&rr>ct?(invariant$1(yt,"Expected pending action"),vt&&vt.abort(),$t(ut.navigation.location,{matches:jn,loaderData:ar,errors:Cn,fetchers:new Map(ut.fetchers)})):(Ct({errors:Cn,loaderData:mergeLoaderData(ut.loaderData,ar,jn,Cn),fetchers:new Map(ut.fetchers)}),Kt=!1)}async function sn(Ft,jt,Yt,rn,hn,fn,yn){let gn=ut.fetchers.get(Ft);vn(Ft,getLoadingFetcher(yn,gn?gn.data:void 0),{flushSync:fn});let pn=new AbortController,Pn=createClientSideRequest(i.history,Yt,pn.signal);St.set(Ft,pn);let Vn=ft,_n=await callLoaderOrAction("loader",Pn,rn,hn,c,a,$,g.v7_relativeSplatPath);if(isDeferredResult(_n)&&(_n=await resolveDeferredData(_n,Pn.signal,!0)||_n),St.get(Ft)===pn&&St.delete(Ft),!Pn.signal.aborted){if(xt.has(Ft)){vn(Ft,getDoneFetcher(void 0));return}if(isRedirectResult(_n))if(ct>Vn){vn(Ft,getDoneFetcher(void 0));return}else{gt.add(Ft),await cn(ut,_n);return}if(isErrorResult(_n)){Rn(Ft,jt,_n.error);return}invariant$1(!isDeferredResult(_n),"Unhandled fetcher deferred data"),vn(Ft,getDoneFetcher(_n.data))}}async function cn(Ft,jt,Yt){let{submission:rn,fetcherSubmission:hn,replace:fn}=Yt===void 0?{}:Yt;jt.revalidate&&(Kt=!0);let yn=createLocation(Ft.location,jt.location,{_isRedirect:!0});if(invariant$1(yn,"Expected a location on the redirect navigation"),s){let wn=!1;if(jt.reloadDocument)wn=!0;else if(ABSOLUTE_URL_REGEX.test(jt.location)){const $n=i.history.createURL(jt.location);wn=$n.origin!==e.location.origin||stripBasename($n.pathname,$)==null}if(wn){fn?e.location.replace(jt.location):e.location.assign(jt.location);return}}vt=null;let gn=fn===!0?Action.Replace:Action.Push,{formMethod:pn,formAction:Pn,formEncType:Vn}=Ft.navigation;!rn&&!hn&&pn&&Pn&&Vn&&(rn=getSubmissionFromNavigation(Ft.navigation));let _n=rn||hn;if(redirectPreserveMethodStatusCodes.has(jt.status)&&_n&&isMutationMethod(_n.formMethod))await Nt(gn,yn,{submission:_extends$2({},_n,{formAction:jt.location}),preventScrollReset:Pt});else{let wn=getLoadingNavigation(yn,rn);await Nt(gn,yn,{overrideNavigation:wn,fetcherSubmission:hn,preventScrollReset:Pt})}}async function mn(Ft,jt,Yt,rn,hn){let fn=await Promise.all([...Yt.map(pn=>callLoaderOrAction("loader",hn,pn,jt,c,a,$,g.v7_relativeSplatPath)),...rn.map(pn=>pn.matches&&pn.match&&pn.controller?callLoaderOrAction("loader",createClientSideRequest(i.history,pn.path,pn.controller.signal),pn.match,pn.matches,c,a,$,g.v7_relativeSplatPath):{type:ResultType.error,error:getInternalRouterError(404,{pathname:pn.path})})]),yn=fn.slice(0,Yt.length),gn=fn.slice(Yt.length);return await Promise.all([resolveDeferredResults(Ft,Yt,yn,yn.map(()=>hn.signal),!1,ut.loaderData),resolveDeferredResults(Ft,rn.map(pn=>pn.match),gn,rn.map(pn=>pn.controller?pn.controller.signal:null),!0)]),{results:fn,loaderResults:yn,fetcherResults:gn}}function En(){Kt=!0,tn.push(...ln()),Tt.forEach((Ft,jt)=>{St.has(jt)&&(Ht.push(jt),kn(jt))})}function vn(Ft,jt,Yt){Yt===void 0&&(Yt={}),ut.fetchers.set(Ft,jt),Ct({fetchers:new Map(ut.fetchers)},{flushSync:(Yt&&Yt.flushSync)===!0})}function Rn(Ft,jt,Yt,rn){rn===void 0&&(rn={});let hn=findNearestBoundary(ut.matches,jt);xn(Ft),Ct({errors:{[hn.route.id]:Yt},fetchers:new Map(ut.fetchers)},{flushSync:(rn&&rn.flushSync)===!0})}function Nn(Ft){return g.v7_fetcherPersist&&(wt.set(Ft,(wt.get(Ft)||0)+1),xt.has(Ft)&&xt.delete(Ft)),ut.fetchers.get(Ft)||IDLE_FETCHER}function xn(Ft){let jt=ut.fetchers.get(Ft);St.has(Ft)&&!(jt&&jt.state==="loading"&&dt.has(Ft))&&kn(Ft),Tt.delete(Ft),dt.delete(Ft),gt.delete(Ft),xt.delete(Ft),ut.fetchers.delete(Ft)}function Kn(Ft){if(g.v7_fetcherPersist){let jt=(wt.get(Ft)||0)-1;jt<=0?(wt.delete(Ft),xt.add(Ft)):wt.set(Ft,jt)}else xn(Ft);Ct({fetchers:new Map(ut.fetchers)})}function kn(Ft){let jt=St.get(Ft);invariant$1(jt,"Expected fetch controller: "+Ft),jt.abort(),St.delete(Ft)}function Bn(Ft){for(let jt of Ft){let Yt=Nn(jt),rn=getDoneFetcher(Yt.data);ut.fetchers.set(jt,rn)}}function Xn(){let Ft=[],jt=!1;for(let Yt of gt){let rn=ut.fetchers.get(Yt);invariant$1(rn,"Expected fetcher: "+Yt),rn.state==="loading"&&(gt.delete(Yt),Ft.push(Yt),jt=!0)}return Bn(Ft),jt}function Gn(Ft){let jt=[];for(let[Yt,rn]of dt)if(rn<Ft){let hn=ut.fetchers.get(Yt);invariant$1(hn,"Expected fetcher: "+Yt),hn.state==="loading"&&(kn(Yt),dt.delete(Yt),jt.push(Yt))}return Bn(jt),jt.length>0}function er(Ft,jt){let Yt=ut.blockers.get(Ft)||IDLE_BLOCKER;return at.get(Ft)!==jt&&at.set(Ft,jt),Yt}function Jt(Ft){ut.blockers.delete(Ft),at.delete(Ft)}function Lt(Ft,jt){let Yt=ut.blockers.get(Ft)||IDLE_BLOCKER;invariant$1(Yt.state==="unblocked"&&jt.state==="blocked"||Yt.state==="blocked"&&jt.state==="blocked"||Yt.state==="blocked"&&jt.state==="proceeding"||Yt.state==="blocked"&&jt.state==="unblocked"||Yt.state==="proceeding"&&jt.state==="unblocked","Invalid blocker state transition: "+Yt.state+" -> "+jt.state);let rn=new Map(ut.blockers);rn.set(Ft,jt),Ct({blockers:rn})}function Ot(Ft){let{currentLocation:jt,nextLocation:Yt,historyAction:rn}=Ft;if(at.size===0)return;at.size>1&&warning$2(!1,"A router only supports one blocker at a time");let hn=Array.from(at.entries()),[fn,yn]=hn[hn.length-1],gn=ut.blockers.get(fn);if(!(gn&&gn.state==="proceeding")&&yn({currentLocation:jt,nextLocation:Yt,historyAction:rn}))return fn}function ln(Ft){let jt=[];return At.forEach((Yt,rn)=>{(!Ft||Ft(rn))&&(Yt.cancel(),jt.push(rn),At.delete(rn))}),jt}function In(Ft,jt,Yt){if(tt=Ft,et=jt,rt=Yt||null,!it&&ut.navigation===IDLE_NAVIGATION){it=!0;let rn=Qn(ut.location,ut.matches);rn!=null&&Ct({restoreScrollPosition:rn})}return()=>{tt=null,et=null,rt=null}}function On(Ft,jt){return rt&&rt(Ft,jt.map(rn=>convertRouteMatchToUiMatch(rn,ut.loaderData)))||Ft.key}function Ln(Ft,jt){if(tt&&et){let Yt=On(Ft,jt);tt[Yt]=et()}}function Qn(Ft,jt){if(tt){let Yt=On(Ft,jt),rn=tt[Yt];if(typeof rn=="number")return rn}return null}function Jn(Ft){c={},_=convertRoutesToDataRoutes(Ft,a,void 0,c)}return lt={get basename(){return $},get future(){return g},get state(){return ut},get routes(){return h},get window(){return e},initialize:_t,subscribe:bt,enableScrollRestoration:In,navigate:Ut,fetch:Gt,revalidate:en,createHref:Ft=>i.history.createHref(Ft),encodeLocation:Ft=>i.history.encodeLocation(Ft),getFetcher:Nn,deleteFetcher:Kn,dispose:Rt,getBlocker:er,deleteBlocker:Jt,_internalFetchControllers:St,_internalActiveDeferreds:At,_internalSetRoutes:Jn},lt}function isSubmissionNavigation(i){return i!=null&&("formData"in i&&i.formData!=null||"body"in i&&i.body!==void 0)}function normalizeTo(i,e,s,o,a,c,h,_){let $,g;if(h){$=[];for(let j of e)if($.push(j),j.route.id===h){g=j;break}}else $=e,g=e[e.length-1];let d=resolveTo(a||".",getResolveToMatches($,c),stripBasename(i.pathname,s)||i.pathname,_==="path");return a==null&&(d.search=i.search,d.hash=i.hash),(a==null||a===""||a===".")&&g&&g.route.index&&!hasNakedIndexQuery(d.search)&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),o&&s!=="/"&&(d.pathname=d.pathname==="/"?s:joinPaths([s,d.pathname])),createPath(d)}function normalizeNavigateOptions(i,e,s,o){if(!o||!isSubmissionNavigation(o))return{path:s};if(o.formMethod&&!isValidMethod(o.formMethod))return{path:s,error:getInternalRouterError(405,{method:o.formMethod})};let a=()=>({path:s,error:getInternalRouterError(400,{type:"invalid-body"})}),c=o.formMethod||"get",h=i?c.toUpperCase():c.toLowerCase(),_=stripHashFromPath(s);if(o.body!==void 0){if(o.formEncType==="text/plain"){if(!isMutationMethod(h))return a();let tt=typeof o.body=="string"?o.body:o.body instanceof FormData||o.body instanceof URLSearchParams?Array.from(o.body.entries()).reduce((rt,et)=>{let[it,st]=et;return""+rt+it+"="+st+`
`},""):String(o.body);return{path:s,submission:{formMethod:h,formAction:_,formEncType:o.formEncType,formData:void 0,json:void 0,text:tt}}}else if(o.formEncType==="application/json"){if(!isMutationMethod(h))return a();try{let tt=typeof o.body=="string"?JSON.parse(o.body):o.body;return{path:s,submission:{formMethod:h,formAction:_,formEncType:o.formEncType,formData:void 0,json:tt,text:void 0}}}catch{return a()}}}invariant$1(typeof FormData=="function","FormData is not available in this environment");let $,g;if(o.formData)$=convertFormDataToSearchParams(o.formData),g=o.formData;else if(o.body instanceof FormData)$=convertFormDataToSearchParams(o.body),g=o.body;else if(o.body instanceof URLSearchParams)$=o.body,g=convertSearchParamsToFormData($);else if(o.body==null)$=new URLSearchParams,g=new FormData;else try{$=new URLSearchParams(o.body),g=convertSearchParamsToFormData($)}catch{return a()}let d={formMethod:h,formAction:_,formEncType:o&&o.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(isMutationMethod(d.formMethod))return{path:s,submission:d};let j=parsePath(s);return e&&j.search&&hasNakedIndexQuery(j.search)&&$.append("index",""),j.search="?"+$,{path:createPath(j),submission:d}}function getLoaderMatchesUntilBoundary(i,e){let s=i;if(e){let o=i.findIndex(a=>a.route.id===e);o>=0&&(s=i.slice(0,o))}return s}function getMatchesToLoad(i,e,s,o,a,c,h,_,$,g,d,j,tt,rt,et,it){let st=it?Object.values(it)[0]:et?Object.values(et)[0]:void 0,nt=i.createURL(e.location),ot=i.createURL(a),ht=it?Object.keys(it)[0]:void 0,lt=getLoaderMatchesUntilBoundary(s,ht).filter((yt,Pt)=>{let{route:vt}=yt;if(vt.lazy)return!0;if(vt.loader==null)return!1;if(c)return vt.loader.hydrate?!0:e.loaderData[vt.id]===void 0&&(!e.errors||e.errors[vt.id]===void 0);if(isNewLoader(e.loaderData,e.matches[Pt],yt)||_.some(Qt=>Qt===yt.route.id))return!0;let Vt=e.matches[Pt],Dt=yt;return shouldRevalidateLoader(yt,_extends$2({currentUrl:nt,currentParams:Vt.params,nextUrl:ot,nextParams:Dt.params},o,{actionResult:st,defaultShouldRevalidate:h||nt.pathname+nt.search===ot.pathname+ot.search||nt.search!==ot.search||isNewRouteInstance(Vt,Dt)}))}),ut=[];return d.forEach((yt,Pt)=>{if(c||!s.some(Wt=>Wt.route.id===yt.routeId)||g.has(Pt))return;let vt=matchRoutes(tt,yt.path,rt);if(!vt){ut.push({key:Pt,routeId:yt.routeId,path:yt.path,matches:null,match:null,controller:null});return}let Vt=e.fetchers.get(Pt),Dt=getTargetMatch(vt,yt.path),Qt=!1;j.has(Pt)?Qt=!1:$.includes(Pt)?Qt=!0:Vt&&Vt.state!=="idle"&&Vt.data===void 0?Qt=h:Qt=shouldRevalidateLoader(Dt,_extends$2({currentUrl:nt,currentParams:e.matches[e.matches.length-1].params,nextUrl:ot,nextParams:s[s.length-1].params},o,{actionResult:st,defaultShouldRevalidate:h})),Qt&&ut.push({key:Pt,routeId:yt.routeId,path:yt.path,matches:vt,match:Dt,controller:new AbortController})}),[lt,ut]}function isNewLoader(i,e,s){let o=!e||s.route.id!==e.route.id,a=i[s.route.id]===void 0;return o||a}function isNewRouteInstance(i,e){let s=i.route.path;return i.pathname!==e.pathname||s!=null&&s.endsWith("*")&&i.params["*"]!==e.params["*"]}function shouldRevalidateLoader(i,e){if(i.route.shouldRevalidate){let s=i.route.shouldRevalidate(e);if(typeof s=="boolean")return s}return e.defaultShouldRevalidate}async function loadLazyRouteModule(i,e,s){if(!i.lazy)return;let o=await i.lazy();if(!i.lazy)return;let a=s[i.id];invariant$1(a,"No route found in manifest");let c={};for(let h in o){let $=a[h]!==void 0&&h!=="hasErrorBoundary";warning$2(!$,'Route "'+a.id+'" has a static property "'+h+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+h+'" will be ignored.')),!$&&!immutableRouteKeys.has(h)&&(c[h]=o[h])}Object.assign(a,c),Object.assign(a,_extends$2({},e(a),{lazy:void 0}))}async function callLoaderOrAction(i,e,s,o,a,c,h,_,$){$===void 0&&($={});let g,d,j,tt=it=>{let st,nt=new Promise((ot,ht)=>st=ht);return j=()=>st(),e.signal.addEventListener("abort",j),Promise.race([it({request:e,params:s.params,context:$.requestContext}),nt])};try{let it=s.route[i];if(s.route.lazy)if(it){let st,nt=await Promise.all([tt(it).catch(ot=>{st=ot}),loadLazyRouteModule(s.route,c,a)]);if(st)throw st;d=nt[0]}else if(await loadLazyRouteModule(s.route,c,a),it=s.route[i],it)d=await tt(it);else if(i==="action"){let st=new URL(e.url),nt=st.pathname+st.search;throw getInternalRouterError(405,{method:e.method,pathname:nt,routeId:s.route.id})}else return{type:ResultType.data,data:void 0};else if(it)d=await tt(it);else{let st=new URL(e.url),nt=st.pathname+st.search;throw getInternalRouterError(404,{pathname:nt})}invariant$1(d!==void 0,"You defined "+(i==="action"?"an action":"a loader")+" for route "+('"'+s.route.id+"\" but didn't return anything from your `"+i+"` ")+"function. Please return a value or `null`.")}catch(it){g=ResultType.error,d=it}finally{j&&e.signal.removeEventListener("abort",j)}if(isResponse(d)){let it=d.status;if(redirectStatusCodes.has(it)){let nt=d.headers.get("Location");if(invariant$1(nt,"Redirects returned/thrown from loaders/actions must have a Location header"),!ABSOLUTE_URL_REGEX.test(nt))nt=normalizeTo(new URL(e.url),o.slice(0,o.indexOf(s)+1),h,!0,nt,_);else if(!$.isStaticRequest){let ot=new URL(e.url),ht=nt.startsWith("//")?new URL(ot.protocol+nt):new URL(nt),pt=stripBasename(ht.pathname,h)!=null;ht.origin===ot.origin&&pt&&(nt=ht.pathname+ht.search+ht.hash)}if($.isStaticRequest)throw d.headers.set("Location",nt),d;return{type:ResultType.redirect,status:it,location:nt,revalidate:d.headers.get("X-Remix-Revalidate")!==null,reloadDocument:d.headers.get("X-Remix-Reload-Document")!==null}}if($.isRouteRequest)throw{type:g===ResultType.error?ResultType.error:ResultType.data,response:d};let st;try{let nt=d.headers.get("Content-Type");nt&&/\bapplication\/json\b/.test(nt)?d.body==null?st=null:st=await d.json():st=await d.text()}catch(nt){return{type:ResultType.error,error:nt}}return g===ResultType.error?{type:g,error:new ErrorResponseImpl(it,d.statusText,st),headers:d.headers}:{type:ResultType.data,data:st,statusCode:d.status,headers:d.headers}}if(g===ResultType.error)return{type:g,error:d};if(isDeferredData(d)){var rt,et;return{type:ResultType.deferred,deferredData:d,statusCode:(rt=d.init)==null?void 0:rt.status,headers:((et=d.init)==null?void 0:et.headers)&&new Headers(d.init.headers)}}return{type:ResultType.data,data:d}}function createClientSideRequest(i,e,s,o){let a=i.createURL(stripHashFromPath(e)).toString(),c={signal:s};if(o&&isMutationMethod(o.formMethod)){let{formMethod:h,formEncType:_}=o;c.method=h.toUpperCase(),_==="application/json"?(c.headers=new Headers({"Content-Type":_}),c.body=JSON.stringify(o.json)):_==="text/plain"?c.body=o.text:_==="application/x-www-form-urlencoded"&&o.formData?c.body=convertFormDataToSearchParams(o.formData):c.body=o.formData}return new Request(a,c)}function convertFormDataToSearchParams(i){let e=new URLSearchParams;for(let[s,o]of i.entries())e.append(s,typeof o=="string"?o:o.name);return e}function convertSearchParamsToFormData(i){let e=new FormData;for(let[s,o]of i.entries())e.append(s,o);return e}function processRouteLoaderData(i,e,s,o,a){let c={},h=null,_,$=!1,g={};return s.forEach((d,j)=>{let tt=e[j].route.id;if(invariant$1(!isRedirectResult(d),"Cannot handle redirect results in processLoaderData"),isErrorResult(d)){let rt=findNearestBoundary(i,tt),et=d.error;o&&(et=Object.values(o)[0],o=void 0),h=h||{},h[rt.route.id]==null&&(h[rt.route.id]=et),c[tt]=void 0,$||($=!0,_=isRouteErrorResponse(d.error)?d.error.status:500),d.headers&&(g[tt]=d.headers)}else isDeferredResult(d)?(a.set(tt,d.deferredData),c[tt]=d.deferredData.data):c[tt]=d.data,d.statusCode!=null&&d.statusCode!==200&&!$&&(_=d.statusCode),d.headers&&(g[tt]=d.headers)}),o&&(h=o,c[Object.keys(o)[0]]=void 0),{loaderData:c,errors:h,statusCode:_||200,loaderHeaders:g}}function processLoaderData(i,e,s,o,a,c,h,_){let{loaderData:$,errors:g}=processRouteLoaderData(e,s,o,a,_);for(let d=0;d<c.length;d++){let{key:j,match:tt,controller:rt}=c[d];invariant$1(h!==void 0&&h[d]!==void 0,"Did not find corresponding fetcher result");let et=h[d];if(!(rt&&rt.signal.aborted))if(isErrorResult(et)){let it=findNearestBoundary(i.matches,tt?.route.id);g&&g[it.route.id]||(g=_extends$2({},g,{[it.route.id]:et.error})),i.fetchers.delete(j)}else if(isRedirectResult(et))invariant$1(!1,"Unhandled fetcher revalidation redirect");else if(isDeferredResult(et))invariant$1(!1,"Unhandled fetcher deferred data");else{let it=getDoneFetcher(et.data);i.fetchers.set(j,it)}}return{loaderData:$,errors:g}}function mergeLoaderData(i,e,s,o){let a=_extends$2({},e);for(let c of s){let h=c.route.id;if(e.hasOwnProperty(h)?e[h]!==void 0&&(a[h]=e[h]):i[h]!==void 0&&c.route.loader&&(a[h]=i[h]),o&&o.hasOwnProperty(h))break}return a}function findNearestBoundary(i,e){return(e?i.slice(0,i.findIndex(o=>o.route.id===e)+1):[...i]).reverse().find(o=>o.route.hasErrorBoundary===!0)||i[0]}function getShortCircuitMatches(i){let e=i.length===1?i[0]:i.find(s=>s.index||!s.path||s.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function getInternalRouterError(i,e){let{pathname:s,routeId:o,method:a,type:c}=e===void 0?{}:e,h="Unknown Server Error",_="Unknown @remix-run/router error";return i===400?(h="Bad Request",a&&s&&o?_="You made a "+a+' request to "'+s+'" but '+('did not provide a `loader` for route "'+o+'", ')+"so there is no way to handle the request.":c==="defer-action"?_="defer() is not supported in actions":c==="invalid-body"&&(_="Unable to encode submission body")):i===403?(h="Forbidden",_='Route "'+o+'" does not match URL "'+s+'"'):i===404?(h="Not Found",_='No route matches URL "'+s+'"'):i===405&&(h="Method Not Allowed",a&&s&&o?_="You made a "+a.toUpperCase()+' request to "'+s+'" but '+('did not provide an `action` for route "'+o+'", ')+"so there is no way to handle the request.":a&&(_='Invalid request method "'+a.toUpperCase()+'"')),new ErrorResponseImpl(i||500,h,new Error(_),!0)}function findRedirect(i){for(let e=i.length-1;e>=0;e--){let s=i[e];if(isRedirectResult(s))return{result:s,idx:e}}}function stripHashFromPath(i){let e=typeof i=="string"?parsePath(i):i;return createPath(_extends$2({},e,{hash:""}))}function isHashChangeOnly(i,e){return i.pathname!==e.pathname||i.search!==e.search?!1:i.hash===""?e.hash!=="":i.hash===e.hash?!0:e.hash!==""}function isDeferredResult(i){return i.type===ResultType.deferred}function isErrorResult(i){return i.type===ResultType.error}function isRedirectResult(i){return(i&&i.type)===ResultType.redirect}function isDeferredData(i){let e=i;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function isResponse(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.headers=="object"&&typeof i.body<"u"}function isValidMethod(i){return validRequestMethods.has(i.toLowerCase())}function isMutationMethod(i){return validMutationMethods.has(i.toLowerCase())}async function resolveDeferredResults(i,e,s,o,a,c){for(let h=0;h<s.length;h++){let _=s[h],$=e[h];if(!$)continue;let g=i.find(j=>j.route.id===$.route.id),d=g!=null&&!isNewRouteInstance(g,$)&&(c&&c[$.route.id])!==void 0;if(isDeferredResult(_)&&(a||d)){let j=o[h];invariant$1(j,"Expected an AbortSignal for revalidating fetcher deferred result"),await resolveDeferredData(_,j,a).then(tt=>{tt&&(s[h]=tt||s[h])})}}}async function resolveDeferredData(i,e,s){if(s===void 0&&(s=!1),!await i.deferredData.resolveData(e)){if(s)try{return{type:ResultType.data,data:i.deferredData.unwrappedData}}catch(a){return{type:ResultType.error,error:a}}return{type:ResultType.data,data:i.deferredData.data}}}function hasNakedIndexQuery(i){return new URLSearchParams(i).getAll("index").some(e=>e==="")}function getTargetMatch(i,e){let s=typeof e=="string"?parsePath(e).search:e.search;if(i[i.length-1].route.index&&hasNakedIndexQuery(s||""))return i[i.length-1];let o=getPathContributingMatches(i);return o[o.length-1]}function getSubmissionFromNavigation(i){let{formMethod:e,formAction:s,formEncType:o,text:a,formData:c,json:h}=i;if(!(!e||!s||!o)){if(a!=null)return{formMethod:e,formAction:s,formEncType:o,formData:void 0,json:void 0,text:a};if(c!=null)return{formMethod:e,formAction:s,formEncType:o,formData:c,json:void 0,text:void 0};if(h!==void 0)return{formMethod:e,formAction:s,formEncType:o,formData:void 0,json:h,text:void 0}}}function getLoadingNavigation(i,e){return e?{state:"loading",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:i,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function getSubmittingNavigation(i,e){return{state:"submitting",location:i,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function getLoadingFetcher(i,e){return i?{state:"loading",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function getSubmittingFetcher(i,e){return{state:"submitting",formMethod:i.formMethod,formAction:i.formAction,formEncType:i.formEncType,formData:i.formData,json:i.json,text:i.text,data:e?e.data:void 0}}function getDoneFetcher(i){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:i}}function restoreAppliedTransitions(i,e){try{let s=i.sessionStorage.getItem(TRANSITIONS_STORAGE_KEY);if(s){let o=JSON.parse(s);for(let[a,c]of Object.entries(o||{}))c&&Array.isArray(c)&&e.set(a,new Set(c||[]))}}catch{}}function persistAppliedTransitions(i,e){if(e.size>0){let s={};for(let[o,a]of e)s[o]=[...a];try{i.sessionStorage.setItem(TRANSITIONS_STORAGE_KEY,JSON.stringify(s))}catch(o){warning$2(!1,"Failed to save applied view transitions in sessionStorage ("+o+").")}}}/**
 * React Router v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends$1(){return _extends$1=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends$1.apply(this,arguments)}const DataRouterContext=reactExports.createContext(null),DataRouterStateContext=reactExports.createContext(null),NavigationContext=reactExports.createContext(null),LocationContext=reactExports.createContext(null),RouteContext=reactExports.createContext({outlet:null,matches:[],isDataRoute:!1}),RouteErrorContext=reactExports.createContext(null);function useInRouterContext(){return reactExports.useContext(LocationContext)!=null}function useLocation(){return useInRouterContext()||invariant$1(!1),reactExports.useContext(LocationContext).location}function useRoutes(i,e){return useRoutesImpl(i,e)}function useRoutesImpl(i,e,s,o){useInRouterContext()||invariant$1(!1);let{navigator:a}=reactExports.useContext(NavigationContext),{matches:c}=reactExports.useContext(RouteContext),h=c[c.length-1],_=h?h.params:{};h&&h.pathname;let $=h?h.pathnameBase:"/";h&&h.route;let g=useLocation(),d;if(e){var j;let st=typeof e=="string"?parsePath(e):e;$==="/"||(j=st.pathname)!=null&&j.startsWith($)||invariant$1(!1),d=st}else d=g;let tt=d.pathname||"/",rt=$==="/"?tt:tt.slice($.length)||"/",et=matchRoutes(i,{pathname:rt}),it=_renderMatches(et&&et.map(st=>Object.assign({},st,{params:Object.assign({},_,st.params),pathname:joinPaths([$,a.encodeLocation?a.encodeLocation(st.pathname).pathname:st.pathname]),pathnameBase:st.pathnameBase==="/"?$:joinPaths([$,a.encodeLocation?a.encodeLocation(st.pathnameBase).pathname:st.pathnameBase])})),c,s,o);return e&&it?reactExports.createElement(LocationContext.Provider,{value:{location:_extends$1({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Action.Pop}},it):it}function DefaultErrorComponent(){let i=useRouteError(),e=isRouteErrorResponse(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),s=i instanceof Error?i.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement("h2",null,"Unexpected Application Error!"),reactExports.createElement("h3",{style:{fontStyle:"italic"}},e),s?reactExports.createElement("pre",{style:a},s):null,null)}const defaultErrorElement=reactExports.createElement(DefaultErrorComponent,null);class RenderErrorBoundary extends reactExports.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,s){return s.location!==e.location||s.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:s.error,location:s.location,revalidation:e.revalidation||s.revalidation}}componentDidCatch(e,s){console.error("React Router caught the following error during render",e,s)}render(){return this.state.error!==void 0?reactExports.createElement(RouteContext.Provider,{value:this.props.routeContext},reactExports.createElement(RouteErrorContext.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function RenderedRoute(i){let{routeContext:e,match:s,children:o}=i,a=reactExports.useContext(DataRouterContext);return a&&a.static&&a.staticContext&&(s.route.errorElement||s.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=s.route.id),reactExports.createElement(RouteContext.Provider,{value:e},o)}function _renderMatches(i,e,s,o){var a;if(e===void 0&&(e=[]),s===void 0&&(s=null),o===void 0&&(o=null),i==null){var c;if((c=s)!=null&&c.errors)i=s.matches;else return null}let h=i,_=(a=s)==null?void 0:a.errors;if(_!=null){let d=h.findIndex(j=>j.route.id&&_?.[j.route.id]);d>=0||invariant$1(!1),h=h.slice(0,Math.min(h.length,d+1))}let $=!1,g=-1;if(s&&o&&o.v7_partialHydration)for(let d=0;d<h.length;d++){let j=h[d];if((j.route.HydrateFallback||j.route.hydrateFallbackElement)&&(g=d),j.route.id){let{loaderData:tt,errors:rt}=s,et=j.route.loader&&tt[j.route.id]===void 0&&(!rt||rt[j.route.id]===void 0);if(j.route.lazy||et){$=!0,g>=0?h=h.slice(0,g+1):h=[h[0]];break}}}return h.reduceRight((d,j,tt)=>{let rt,et=!1,it=null,st=null;s&&(rt=_&&j.route.id?_[j.route.id]:void 0,it=j.route.errorElement||defaultErrorElement,$&&(g<0&&tt===0?(warningOnce("route-fallback",!1),et=!0,st=null):g===tt&&(et=!0,st=j.route.hydrateFallbackElement||null)));let nt=e.concat(h.slice(0,tt+1)),ot=()=>{let ht;return rt?ht=it:et?ht=st:j.route.Component?ht=reactExports.createElement(j.route.Component,null):j.route.element?ht=j.route.element:ht=d,reactExports.createElement(RenderedRoute,{match:j,routeContext:{outlet:d,matches:nt,isDataRoute:s!=null},children:ht})};return s&&(j.route.ErrorBoundary||j.route.errorElement||tt===0)?reactExports.createElement(RenderErrorBoundary,{location:s.location,revalidation:s.revalidation,component:it,error:rt,children:ot(),routeContext:{outlet:null,matches:nt,isDataRoute:!0}}):ot()},null)}var DataRouterStateHook$1=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(DataRouterStateHook$1||{});function useDataRouterState(i){let e=reactExports.useContext(DataRouterStateContext);return e||invariant$1(!1),e}function useRouteContext(i){let e=reactExports.useContext(RouteContext);return e||invariant$1(!1),e}function useCurrentRouteId(i){let e=useRouteContext(),s=e.matches[e.matches.length-1];return s.route.id||invariant$1(!1),s.route.id}function useRouteError(){var i;let e=reactExports.useContext(RouteErrorContext),s=useDataRouterState(DataRouterStateHook$1.UseRouteError),o=useCurrentRouteId(DataRouterStateHook$1.UseRouteError);return e!==void 0?e:(i=s.errors)==null?void 0:i[o]}const alreadyWarned={};function warningOnce(i,e,s){!e&&!alreadyWarned[i]&&(alreadyWarned[i]=!0)}function Route(i){invariant$1(!1)}function Router(i){let{basename:e="/",children:s=null,location:o,navigationType:a=Action.Pop,navigator:c,static:h=!1,future:_}=i;useInRouterContext()&&invariant$1(!1);let $=e.replace(/^\/*/,"/"),g=reactExports.useMemo(()=>({basename:$,navigator:c,static:h,future:_extends$1({v7_relativeSplatPath:!1},_)}),[$,_,c,h]);typeof o=="string"&&(o=parsePath(o));let{pathname:d="/",search:j="",hash:tt="",state:rt=null,key:et="default"}=o,it=reactExports.useMemo(()=>{let st=stripBasename(d,$);return st==null?null:{location:{pathname:st,search:j,hash:tt,state:rt,key:et},navigationType:a}},[$,d,j,tt,rt,et,a]);return it==null?null:reactExports.createElement(NavigationContext.Provider,{value:g},reactExports.createElement(LocationContext.Provider,{children:s,value:it}))}function Routes(i){let{children:e,location:s}=i;return useRoutes(createRoutesFromChildren(e),s)}new Promise(()=>{});function createRoutesFromChildren(i,e){e===void 0&&(e=[]);let s=[];return reactExports.Children.forEach(i,(o,a)=>{if(!reactExports.isValidElement(o))return;let c=[...e,a];if(o.type===reactExports.Fragment){s.push.apply(s,createRoutesFromChildren(o.props.children,c));return}o.type!==Route&&invariant$1(!1),!o.props.index||!o.props.children||invariant$1(!1);let h={id:o.props.id||c.join("-"),caseSensitive:o.props.caseSensitive,element:o.props.element,Component:o.props.Component,index:o.props.index,path:o.props.path,loader:o.props.loader,action:o.props.action,errorElement:o.props.errorElement,ErrorBoundary:o.props.ErrorBoundary,hasErrorBoundary:o.props.ErrorBoundary!=null||o.props.errorElement!=null,shouldRevalidate:o.props.shouldRevalidate,handle:o.props.handle,lazy:o.props.lazy};o.props.children&&(h.children=createRoutesFromChildren(o.props.children,c)),s.push(h)}),s}function mapRouteProperties(i){let e={hasErrorBoundary:i.ErrorBoundary!=null||i.errorElement!=null};return i.Component&&Object.assign(e,{element:reactExports.createElement(i.Component),Component:void 0}),i.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:reactExports.createElement(i.HydrateFallback),HydrateFallback:void 0}),i.ErrorBoundary&&Object.assign(e,{errorElement:reactExports.createElement(i.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.22.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function _extends(){return _extends=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var s=arguments[e];for(var o in s)Object.prototype.hasOwnProperty.call(s,o)&&(i[o]=s[o])}return i},_extends.apply(this,arguments)}const REACT_ROUTER_VERSION="6";try{window.__reactRouterVersion=REACT_ROUTER_VERSION}catch{}function createHashRouter(i,e){return createRouter({basename:e?.basename,future:_extends({},e?.future,{v7_prependBasename:!0}),history:createHashHistory({window:e?.window}),hydrationData:e?.hydrationData||parseHydrationData(),routes:i,mapRouteProperties,window:e?.window}).initialize()}function parseHydrationData(){var i;let e=(i=window)==null?void 0:i.__staticRouterHydrationData;return e&&e.errors&&(e=_extends({},e,{errors:deserializeErrors(e.errors)})),e}function deserializeErrors(i){if(!i)return null;let e=Object.entries(i),s={};for(let[o,a]of e)if(a&&a.__type==="RouteErrorResponse")s[o]=new ErrorResponseImpl(a.status,a.statusText,a.data,a.internal===!0);else if(a&&a.__type==="Error"){if(a.__subType){let c=window[a.__subType];if(typeof c=="function")try{let h=new c(a.message);h.stack="",s[o]=h}catch{}}if(s[o]==null){let c=new Error(a.message);c.stack="",s[o]=c}}else s[o]=a;return s}const ViewTransitionContext=reactExports.createContext({isTransitioning:!1}),FetchersContext=reactExports.createContext(new Map),START_TRANSITION="startTransition",startTransitionImpl=React$1[START_TRANSITION],FLUSH_SYNC="flushSync",flushSyncImpl=ReactDOM[FLUSH_SYNC];function startTransitionSafe(i){startTransitionImpl?startTransitionImpl(i):i()}function flushSyncSafe(i){flushSyncImpl?flushSyncImpl(i):i()}let Deferred$1=class{constructor(){this.status="pending",this.promise=new Promise((e,s)=>{this.resolve=o=>{this.status==="pending"&&(this.status="resolved",e(o))},this.reject=o=>{this.status==="pending"&&(this.status="rejected",s(o))}})}};function RouterProvider(i){let{fallbackElement:e,router:s,future:o}=i,[a,c]=reactExports.useState(s.state),[h,_]=reactExports.useState(),[$,g]=reactExports.useState({isTransitioning:!1}),[d,j]=reactExports.useState(),[tt,rt]=reactExports.useState(),[et,it]=reactExports.useState(),st=reactExports.useRef(new Map),{v7_startTransition:nt}=o||{},ot=reactExports.useCallback(yt=>{nt?startTransitionSafe(yt):yt()},[nt]),ht=reactExports.useCallback((yt,Pt)=>{let{deletedFetchers:vt,unstable_flushSync:Vt,unstable_viewTransitionOpts:Dt}=Pt;vt.forEach(Wt=>st.current.delete(Wt)),yt.fetchers.forEach((Wt,Kt)=>{Wt.data!==void 0&&st.current.set(Kt,Wt.data)});let Qt=s.window==null||typeof s.window.document.startViewTransition!="function";if(!Dt||Qt){Vt?flushSyncSafe(()=>c(yt)):ot(()=>c(yt));return}if(Vt){flushSyncSafe(()=>{tt&&(d&&d.resolve(),tt.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:Dt.currentLocation,nextLocation:Dt.nextLocation})});let Wt=s.window.document.startViewTransition(()=>{flushSyncSafe(()=>c(yt))});Wt.finished.finally(()=>{flushSyncSafe(()=>{j(void 0),rt(void 0),_(void 0),g({isTransitioning:!1})})}),flushSyncSafe(()=>rt(Wt));return}tt?(d&&d.resolve(),tt.skipTransition(),it({state:yt,currentLocation:Dt.currentLocation,nextLocation:Dt.nextLocation})):(_(yt),g({isTransitioning:!0,flushSync:!1,currentLocation:Dt.currentLocation,nextLocation:Dt.nextLocation}))},[s.window,tt,d,st,ot]);reactExports.useLayoutEffect(()=>s.subscribe(ht),[s,ht]),reactExports.useEffect(()=>{$.isTransitioning&&!$.flushSync&&j(new Deferred$1)},[$]),reactExports.useEffect(()=>{if(d&&h&&s.window){let yt=h,Pt=d.promise,vt=s.window.document.startViewTransition(async()=>{ot(()=>c(yt)),await Pt});vt.finished.finally(()=>{j(void 0),rt(void 0),_(void 0),g({isTransitioning:!1})}),rt(vt)}},[ot,h,d,s.window]),reactExports.useEffect(()=>{d&&h&&a.location.key===h.location.key&&d.resolve()},[d,tt,a.location,h]),reactExports.useEffect(()=>{!$.isTransitioning&&et&&(_(et.state),g({isTransitioning:!0,flushSync:!1,currentLocation:et.currentLocation,nextLocation:et.nextLocation}),it(void 0))},[$.isTransitioning,et]),reactExports.useEffect(()=>{},[]);let pt=reactExports.useMemo(()=>({createHref:s.createHref,encodeLocation:s.encodeLocation,go:yt=>s.navigate(yt),push:(yt,Pt,vt)=>s.navigate(yt,{state:Pt,preventScrollReset:vt?.preventScrollReset}),replace:(yt,Pt,vt)=>s.navigate(yt,{replace:!0,state:Pt,preventScrollReset:vt?.preventScrollReset})}),[s]),lt=s.basename||"/",ut=reactExports.useMemo(()=>({router:s,navigator:pt,static:!1,basename:lt}),[s,pt,lt]);return reactExports.createElement(reactExports.Fragment,null,reactExports.createElement(DataRouterContext.Provider,{value:ut},reactExports.createElement(DataRouterStateContext.Provider,{value:a},reactExports.createElement(FetchersContext.Provider,{value:st.current},reactExports.createElement(ViewTransitionContext.Provider,{value:$},reactExports.createElement(Router,{basename:lt,location:a.location,navigationType:a.historyAction,navigator:pt,future:{v7_relativeSplatPath:s.future.v7_relativeSplatPath}},a.initialized||s.future.v7_partialHydration?reactExports.createElement(DataRoutes,{routes:s.routes,future:s.future,state:a}):e))))),null)}function DataRoutes(i){let{routes:e,future:s,state:o}=i;return useRoutesImpl(e,void 0,o,s)}var DataRouterHook;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(DataRouterHook||(DataRouterHook={}));var DataRouterStateHook;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(DataRouterStateHook||(DataRouterStateHook={}));var define_process_env_default={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const stringToByteArray$1=function(i){const e=[];let s=0;for(let o=0;o<i.length;o++){let a=i.charCodeAt(o);a<128?e[s++]=a:a<2048?(e[s++]=a>>6|192,e[s++]=a&63|128):(a&64512)===55296&&o+1<i.length&&(i.charCodeAt(o+1)&64512)===56320?(a=65536+((a&1023)<<10)+(i.charCodeAt(++o)&1023),e[s++]=a>>18|240,e[s++]=a>>12&63|128,e[s++]=a>>6&63|128,e[s++]=a&63|128):(e[s++]=a>>12|224,e[s++]=a>>6&63|128,e[s++]=a&63|128)}return e},byteArrayToString=function(i){const e=[];let s=0,o=0;for(;s<i.length;){const a=i[s++];if(a<128)e[o++]=String.fromCharCode(a);else if(a>191&&a<224){const c=i[s++];e[o++]=String.fromCharCode((a&31)<<6|c&63)}else if(a>239&&a<365){const c=i[s++],h=i[s++],_=i[s++],$=((a&7)<<18|(c&63)<<12|(h&63)<<6|_&63)-65536;e[o++]=String.fromCharCode(55296+($>>10)),e[o++]=String.fromCharCode(56320+($&1023))}else{const c=i[s++],h=i[s++];e[o++]=String.fromCharCode((a&15)<<12|(c&63)<<6|h&63)}}return e.join("")},base64={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const s=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,o=[];for(let a=0;a<i.length;a+=3){const c=i[a],h=a+1<i.length,_=h?i[a+1]:0,$=a+2<i.length,g=$?i[a+2]:0,d=c>>2,j=(c&3)<<4|_>>4;let tt=(_&15)<<2|g>>6,rt=g&63;$||(rt=64,h||(tt=64)),o.push(s[d],s[j],s[tt],s[rt])}return o.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray(stringToByteArray$1(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):byteArrayToString(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const s=e?this.charToByteMapWebSafe_:this.charToByteMap_,o=[];for(let a=0;a<i.length;){const c=s[i.charAt(a++)],_=a<i.length?s[i.charAt(a)]:0;++a;const g=a<i.length?s[i.charAt(a)]:64;++a;const j=a<i.length?s[i.charAt(a)]:64;if(++a,c==null||_==null||g==null||j==null)throw new DecodeBase64StringError;const tt=c<<2|_>>4;if(o.push(tt),g!==64){const rt=_<<4&240|g>>2;if(o.push(rt),j!==64){const et=g<<6&192|j;o.push(et)}}}return o},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class DecodeBase64StringError extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const base64Encode=function(i){const e=stringToByteArray$1(i);return base64.encodeByteArray(e,!0)},base64urlEncodeWithoutPadding=function(i){return base64Encode(i).replace(/\./g,"")},base64Decode=function(i){try{return base64.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getGlobal(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const getDefaultsFromGlobal=()=>getGlobal().__FIREBASE_DEFAULTS__,getDefaultsFromEnvVariable=()=>{if(typeof process>"u"||typeof define_process_env_default>"u")return;const i=define_process_env_default.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},getDefaultsFromCookie=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&base64Decode(i[1]);return e&&JSON.parse(e)},getDefaults=()=>{try{return getDefaultsFromGlobal()||getDefaultsFromEnvVariable()||getDefaultsFromCookie()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},getDefaultEmulatorHost=i=>{var e,s;return(s=(e=getDefaults())===null||e===void 0?void 0:e.emulatorHosts)===null||s===void 0?void 0:s[i]},getDefaultEmulatorHostnameAndPort=i=>{const e=getDefaultEmulatorHost(i);if(!e)return;const s=e.lastIndexOf(":");if(s<=0||s+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const o=parseInt(e.substring(s+1),10);return e[0]==="["?[e.substring(1,s-1),o]:[e.substring(0,s),o]},getDefaultAppConfig=()=>{var i;return(i=getDefaults())===null||i===void 0?void 0:i.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Deferred{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}wrapCallback(e){return(s,o)=>{s?this.reject(s):this.resolve(o),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(s):e(s,o))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function createMockUserToken(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const s={alg:"none",type:"JWT"},o=e||"demo-project",a=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h=Object.assign({iss:`https://securetoken.google.com/${o}`,aud:o,iat:a,exp:a+3600,auth_time:a,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[base64urlEncodeWithoutPadding(JSON.stringify(s)),base64urlEncodeWithoutPadding(JSON.stringify(h)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getUA(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function isNode(){var i;const e=(i=getDefaults())===null||i===void 0?void 0:i.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function isSafari(){return!isNode()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function isIndexedDBAvailable(){try{return typeof indexedDB=="object"}catch{return!1}}function validateIndexedDBOpenable(){return new Promise((i,e)=>{try{let s=!0;const o="validate-browser-context-for-indexeddb-analytics-module",a=self.indexedDB.open(o);a.onsuccess=()=>{a.result.close(),s||self.indexedDB.deleteDatabase(o),i(!0)},a.onupgradeneeded=()=>{s=!1},a.onerror=()=>{var c;e(((c=a.error)===null||c===void 0?void 0:c.message)||"")}}catch(s){e(s)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERROR_NAME="FirebaseError";class FirebaseError extends Error{constructor(e,s,o){super(s),this.code=e,this.customData=o,this.name=ERROR_NAME,Object.setPrototypeOf(this,FirebaseError.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ErrorFactory.prototype.create)}}class ErrorFactory{constructor(e,s,o){this.service=e,this.serviceName=s,this.errors=o}create(e,...s){const o=s[0]||{},a=`${this.service}/${e}`,c=this.errors[e],h=c?replaceTemplate(c,o):"Error",_=`${this.serviceName}: ${h} (${a}).`;return new FirebaseError(a,_,o)}}function replaceTemplate(i,e){return i.replace(PATTERN,(s,o)=>{const a=e[o];return a!=null?String(a):`<${o}?>`})}const PATTERN=/\{\$([^}]+)}/g;function deepEqual(i,e){if(i===e)return!0;const s=Object.keys(i),o=Object.keys(e);for(const a of s){if(!o.includes(a))return!1;const c=i[a],h=e[a];if(isObject(c)&&isObject(h)){if(!deepEqual(c,h))return!1}else if(c!==h)return!1}for(const a of o)if(!s.includes(a))return!1;return!0}function isObject(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getModularInstance(i){return i&&i._delegate?i._delegate:i}class Component{constructor(e,s,o){this.name=e,this.instanceFactory=s,this.type=o,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME$1="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Provider{constructor(e,s){this.name=e,this.container=s,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const s=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(s)){const o=new Deferred;if(this.instancesDeferred.set(s,o),this.isInitialized(s)||this.shouldAutoInitialize())try{const a=this.getOrInitializeService({instanceIdentifier:s});a&&o.resolve(a)}catch{}}return this.instancesDeferred.get(s).promise}getImmediate(e){var s;const o=this.normalizeInstanceIdentifier(e?.identifier),a=(s=e?.optional)!==null&&s!==void 0?s:!1;if(this.isInitialized(o)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:o})}catch(c){if(a)return null;throw c}else{if(a)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(isComponentEager(e))try{this.getOrInitializeService({instanceIdentifier:DEFAULT_ENTRY_NAME$1})}catch{}for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);try{const c=this.getOrInitializeService({instanceIdentifier:a});o.resolve(c)}catch{}}}}clearInstance(e=DEFAULT_ENTRY_NAME$1){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(s=>"INTERNAL"in s).map(s=>s.INTERNAL.delete()),...e.filter(s=>"_delete"in s).map(s=>s._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=DEFAULT_ENTRY_NAME$1){return this.instances.has(e)}getOptions(e=DEFAULT_ENTRY_NAME$1){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:s={}}=e,o=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(o))throw Error(`${this.name}(${o}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const a=this.getOrInitializeService({instanceIdentifier:o,options:s});for(const[c,h]of this.instancesDeferred.entries()){const _=this.normalizeInstanceIdentifier(c);o===_&&h.resolve(a)}return a}onInit(e,s){var o;const a=this.normalizeInstanceIdentifier(s),c=(o=this.onInitCallbacks.get(a))!==null&&o!==void 0?o:new Set;c.add(e),this.onInitCallbacks.set(a,c);const h=this.instances.get(a);return h&&e(h,a),()=>{c.delete(e)}}invokeOnInitCallbacks(e,s){const o=this.onInitCallbacks.get(s);if(o)for(const a of o)try{a(e,s)}catch{}}getOrInitializeService({instanceIdentifier:e,options:s={}}){let o=this.instances.get(e);if(!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:normalizeIdentifierForFactory(e),options:s}),this.instances.set(e,o),this.instancesOptions.set(e,s),this.invokeOnInitCallbacks(o,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,o)}catch{}return o||null}normalizeInstanceIdentifier(e=DEFAULT_ENTRY_NAME$1){return this.component?this.component.multipleInstances?e:DEFAULT_ENTRY_NAME$1:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function normalizeIdentifierForFactory(i){return i===DEFAULT_ENTRY_NAME$1?void 0:i}function isComponentEager(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ComponentContainer{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const s=this.getProvider(e.name);if(s.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);s.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const s=new Provider(e,this);return this.providers.set(e,s),s}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var LogLevel;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(LogLevel||(LogLevel={}));const levelStringToEnum={debug:LogLevel.DEBUG,verbose:LogLevel.VERBOSE,info:LogLevel.INFO,warn:LogLevel.WARN,error:LogLevel.ERROR,silent:LogLevel.SILENT},defaultLogLevel=LogLevel.INFO,ConsoleMethod={[LogLevel.DEBUG]:"log",[LogLevel.VERBOSE]:"log",[LogLevel.INFO]:"info",[LogLevel.WARN]:"warn",[LogLevel.ERROR]:"error"},defaultLogHandler=(i,e,...s)=>{if(e<i.logLevel)return;const o=new Date().toISOString(),a=ConsoleMethod[e];if(a)console[a](`[${o}]  ${i.name}:`,...s);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Logger{constructor(e){this.name=e,this._logLevel=defaultLogLevel,this._logHandler=defaultLogHandler,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in LogLevel))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?levelStringToEnum[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.DEBUG,...e),this._logHandler(this,LogLevel.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.VERBOSE,...e),this._logHandler(this,LogLevel.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.INFO,...e),this._logHandler(this,LogLevel.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.WARN,...e),this._logHandler(this,LogLevel.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,LogLevel.ERROR,...e),this._logHandler(this,LogLevel.ERROR,...e)}}const instanceOfAny=(i,e)=>e.some(s=>i instanceof s);let idbProxyableTypes,cursorAdvanceMethods;function getIdbProxyableTypes(){return idbProxyableTypes||(idbProxyableTypes=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function getCursorAdvanceMethods(){return cursorAdvanceMethods||(cursorAdvanceMethods=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const cursorRequestMap=new WeakMap,transactionDoneMap=new WeakMap,transactionStoreNamesMap=new WeakMap,transformCache=new WeakMap,reverseTransformCache=new WeakMap;function promisifyRequest(i){const e=new Promise((s,o)=>{const a=()=>{i.removeEventListener("success",c),i.removeEventListener("error",h)},c=()=>{s(wrap(i.result)),a()},h=()=>{o(i.error),a()};i.addEventListener("success",c),i.addEventListener("error",h)});return e.then(s=>{s instanceof IDBCursor&&cursorRequestMap.set(s,i)}).catch(()=>{}),reverseTransformCache.set(e,i),e}function cacheDonePromiseForTransaction(i){if(transactionDoneMap.has(i))return;const e=new Promise((s,o)=>{const a=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",h),i.removeEventListener("abort",h)},c=()=>{s(),a()},h=()=>{o(i.error||new DOMException("AbortError","AbortError")),a()};i.addEventListener("complete",c),i.addEventListener("error",h),i.addEventListener("abort",h)});transactionDoneMap.set(i,e)}let idbProxyTraps={get(i,e,s){if(i instanceof IDBTransaction){if(e==="done")return transactionDoneMap.get(i);if(e==="objectStoreNames")return i.objectStoreNames||transactionStoreNamesMap.get(i);if(e==="store")return s.objectStoreNames[1]?void 0:s.objectStore(s.objectStoreNames[0])}return wrap(i[e])},set(i,e,s){return i[e]=s,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function replaceTraps(i){idbProxyTraps=i(idbProxyTraps)}function wrapFunction(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...s){const o=i.call(unwrap(this),e,...s);return transactionStoreNamesMap.set(o,e.sort?e.sort():[e]),wrap(o)}:getCursorAdvanceMethods().includes(i)?function(...e){return i.apply(unwrap(this),e),wrap(cursorRequestMap.get(this))}:function(...e){return wrap(i.apply(unwrap(this),e))}}function transformCachableValue(i){return typeof i=="function"?wrapFunction(i):(i instanceof IDBTransaction&&cacheDonePromiseForTransaction(i),instanceOfAny(i,getIdbProxyableTypes())?new Proxy(i,idbProxyTraps):i)}function wrap(i){if(i instanceof IDBRequest)return promisifyRequest(i);if(transformCache.has(i))return transformCache.get(i);const e=transformCachableValue(i);return e!==i&&(transformCache.set(i,e),reverseTransformCache.set(e,i)),e}const unwrap=i=>reverseTransformCache.get(i);function openDB(i,e,{blocked:s,upgrade:o,blocking:a,terminated:c}={}){const h=indexedDB.open(i,e),_=wrap(h);return o&&h.addEventListener("upgradeneeded",$=>{o(wrap(h.result),$.oldVersion,$.newVersion,wrap(h.transaction),$)}),s&&h.addEventListener("blocked",$=>s($.oldVersion,$.newVersion,$)),_.then($=>{c&&$.addEventListener("close",()=>c()),a&&$.addEventListener("versionchange",g=>a(g.oldVersion,g.newVersion,g))}).catch(()=>{}),_}const readMethods=["get","getKey","getAll","getAllKeys","count"],writeMethods=["put","add","delete","clear"],cachedMethods=new Map;function getMethod(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(cachedMethods.get(e))return cachedMethods.get(e);const s=e.replace(/FromIndex$/,""),o=e!==s,a=writeMethods.includes(s);if(!(s in(o?IDBIndex:IDBObjectStore).prototype)||!(a||readMethods.includes(s)))return;const c=async function(h,..._){const $=this.transaction(h,a?"readwrite":"readonly");let g=$.store;return o&&(g=g.index(_.shift())),(await Promise.all([g[s](..._),a&&$.done]))[0]};return cachedMethods.set(e,c),c}replaceTraps(i=>({...i,get:(e,s,o)=>getMethod(e,s)||i.get(e,s,o),has:(e,s)=>!!getMethod(e,s)||i.has(e,s)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PlatformLoggerServiceImpl{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(s=>{if(isVersionServiceProvider(s)){const o=s.getImmediate();return`${o.library}/${o.version}`}else return null}).filter(s=>s).join(" ")}}function isVersionServiceProvider(i){const e=i.getComponent();return e?.type==="VERSION"}const name$o="@firebase/app",version$1$1="0.9.27";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const logger=new Logger("@firebase/app"),name$n="@firebase/app-compat",name$m="@firebase/analytics-compat",name$l="@firebase/analytics",name$k="@firebase/app-check-compat",name$j="@firebase/app-check",name$i="@firebase/auth",name$h="@firebase/auth-compat",name$g="@firebase/database",name$f="@firebase/database-compat",name$e="@firebase/functions",name$d="@firebase/functions-compat",name$c="@firebase/installations",name$b="@firebase/installations-compat",name$a="@firebase/messaging",name$9="@firebase/messaging-compat",name$8="@firebase/performance",name$7="@firebase/performance-compat",name$6="@firebase/remote-config",name$5="@firebase/remote-config-compat",name$4="@firebase/storage",name$3="@firebase/storage-compat",name$2="@firebase/firestore",name$1$1="@firebase/firestore-compat",name$p="firebase",version$2="10.8.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_ENTRY_NAME="[DEFAULT]",PLATFORM_LOG_STRING={[name$o]:"fire-core",[name$n]:"fire-core-compat",[name$l]:"fire-analytics",[name$m]:"fire-analytics-compat",[name$j]:"fire-app-check",[name$k]:"fire-app-check-compat",[name$i]:"fire-auth",[name$h]:"fire-auth-compat",[name$g]:"fire-rtdb",[name$f]:"fire-rtdb-compat",[name$e]:"fire-fn",[name$d]:"fire-fn-compat",[name$c]:"fire-iid",[name$b]:"fire-iid-compat",[name$a]:"fire-fcm",[name$9]:"fire-fcm-compat",[name$8]:"fire-perf",[name$7]:"fire-perf-compat",[name$6]:"fire-rc",[name$5]:"fire-rc-compat",[name$4]:"fire-gcs",[name$3]:"fire-gcs-compat",[name$2]:"fire-fst",[name$1$1]:"fire-fst-compat","fire-js":"fire-js",[name$p]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _apps=new Map,_components=new Map;function _addComponent(i,e){try{i.container.addComponent(e)}catch(s){logger.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,s)}}function _registerComponent(i){const e=i.name;if(_components.has(e))return logger.debug(`There were multiple attempts to register component ${e}.`),!1;_components.set(e,i);for(const s of _apps.values())_addComponent(s,i);return!0}function _getProvider(i,e){const s=i.container.getProvider("heartbeat").getImmediate({optional:!0});return s&&s.triggerHeartbeat(),i.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ERRORS={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},ERROR_FACTORY=new ErrorFactory("app","Firebase",ERRORS);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirebaseAppImpl{constructor(e,s,o){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},s),this._name=s.name,this._automaticDataCollectionEnabled=s.automaticDataCollectionEnabled,this._container=o,this.container.addComponent(new Component("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ERROR_FACTORY.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SDK_VERSION=version$2;function initializeApp(i,e={}){let s=i;typeof e!="object"&&(e={name:e});const o=Object.assign({name:DEFAULT_ENTRY_NAME,automaticDataCollectionEnabled:!1},e),a=o.name;if(typeof a!="string"||!a)throw ERROR_FACTORY.create("bad-app-name",{appName:String(a)});if(s||(s=getDefaultAppConfig()),!s)throw ERROR_FACTORY.create("no-options");const c=_apps.get(a);if(c){if(deepEqual(s,c.options)&&deepEqual(o,c.config))return c;throw ERROR_FACTORY.create("duplicate-app",{appName:a})}const h=new ComponentContainer(a);for(const $ of _components.values())h.addComponent($);const _=new FirebaseAppImpl(s,o,h);return _apps.set(a,_),_}function getApp(i=DEFAULT_ENTRY_NAME){const e=_apps.get(i);if(!e&&i===DEFAULT_ENTRY_NAME&&getDefaultAppConfig())return initializeApp();if(!e)throw ERROR_FACTORY.create("no-app",{appName:i});return e}function registerVersion(i,e,s){var o;let a=(o=PLATFORM_LOG_STRING[i])!==null&&o!==void 0?o:i;s&&(a+=`-${s}`);const c=a.match(/\s|\//),h=e.match(/\s|\//);if(c||h){const _=[`Unable to register library "${a}" with version "${e}":`];c&&_.push(`library name "${a}" contains illegal characters (whitespace or "/")`),c&&h&&_.push("and"),h&&_.push(`version name "${e}" contains illegal characters (whitespace or "/")`),logger.warn(_.join(" "));return}_registerComponent(new Component(`${a}-version`,()=>({library:a,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DB_NAME="firebase-heartbeat-database",DB_VERSION=1,STORE_NAME="firebase-heartbeat-store";let dbPromise=null;function getDbPromise(){return dbPromise||(dbPromise=openDB(DB_NAME,DB_VERSION,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(STORE_NAME)}catch(s){console.warn(s)}}}}).catch(i=>{throw ERROR_FACTORY.create("idb-open",{originalErrorMessage:i.message})})),dbPromise}async function readHeartbeatsFromIndexedDB(i){try{const s=(await getDbPromise()).transaction(STORE_NAME),o=await s.objectStore(STORE_NAME).get(computeKey(i));return await s.done,o}catch(e){if(e instanceof FirebaseError)logger.warn(e.message);else{const s=ERROR_FACTORY.create("idb-get",{originalErrorMessage:e?.message});logger.warn(s.message)}}}async function writeHeartbeatsToIndexedDB(i,e){try{const o=(await getDbPromise()).transaction(STORE_NAME,"readwrite");await o.objectStore(STORE_NAME).put(e,computeKey(i)),await o.done}catch(s){if(s instanceof FirebaseError)logger.warn(s.message);else{const o=ERROR_FACTORY.create("idb-set",{originalErrorMessage:s?.message});logger.warn(o.message)}}}function computeKey(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MAX_HEADER_BYTES=1024,STORED_HEARTBEAT_RETENTION_MAX_MILLIS=30*24*60*60*1e3;class HeartbeatServiceImpl{constructor(e){this.container=e,this._heartbeatsCache=null;const s=this.container.getProvider("app").getImmediate();this._storage=new HeartbeatStorageImpl(s),this._heartbeatsCachePromise=this._storage.read().then(o=>(this._heartbeatsCache=o,o))}async triggerHeartbeat(){var e,s;const a=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=getUTCDateString();if(!(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((s=this._heartbeatsCache)===null||s===void 0?void 0:s.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(h=>h.date===c)))return this._heartbeatsCache.heartbeats.push({date:c,agent:a}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(h=>{const _=new Date(h.date).valueOf();return Date.now()-_<=STORED_HEARTBEAT_RETENTION_MAX_MILLIS}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var e;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const s=getUTCDateString(),{heartbeatsToSend:o,unsentEntries:a}=extractHeartbeatsForHeader(this._heartbeatsCache.heartbeats),c=base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:o}));return this._heartbeatsCache.lastSentHeartbeatDate=s,a.length>0?(this._heartbeatsCache.heartbeats=a,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}}function getUTCDateString(){return new Date().toISOString().substring(0,10)}function extractHeartbeatsForHeader(i,e=MAX_HEADER_BYTES){const s=[];let o=i.slice();for(const a of i){const c=s.find(h=>h.agent===a.agent);if(c){if(c.dates.push(a.date),countBytes(s)>e){c.dates.pop();break}}else if(s.push({agent:a.agent,dates:[a.date]}),countBytes(s)>e){s.pop();break}o=o.slice(1)}return{heartbeatsToSend:s,unsentEntries:o}}class HeartbeatStorageImpl{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return isIndexedDBAvailable()?validateIndexedDBOpenable().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const s=await readHeartbeatsFromIndexedDB(this.app);return s?.heartbeats?s:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var s;if(await this._canUseIndexedDBPromise){const a=await this.read();return writeHeartbeatsToIndexedDB(this.app,{lastSentHeartbeatDate:(s=e.lastSentHeartbeatDate)!==null&&s!==void 0?s:a.lastSentHeartbeatDate,heartbeats:[...a.heartbeats,...e.heartbeats]})}else return}}function countBytes(i){return base64urlEncodeWithoutPadding(JSON.stringify({version:2,heartbeats:i})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function registerCoreComponents(i){_registerComponent(new Component("platform-logger",e=>new PlatformLoggerServiceImpl(e),"PRIVATE")),_registerComponent(new Component("heartbeat",e=>new HeartbeatServiceImpl(e),"PRIVATE")),registerVersion(name$o,version$1$1,i),registerVersion(name$o,version$1$1,"esm2017"),registerVersion("fire-js","")}registerCoreComponents("");var commonjsGlobal=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},k,goog=goog||{},l=commonjsGlobal||self;function aa(i){var e=typeof i;return e=e!="object"?e:i?Array.isArray(i)?"array":e:"null",e=="array"||e=="object"&&typeof i.length=="number"}function p(i){var e=typeof i;return e=="object"&&i!=null||e=="function"}function ba(i){return Object.prototype.hasOwnProperty.call(i,ca)&&i[ca]||(i[ca]=++da)}var ca="closure_uid_"+(1e9*Math.random()>>>0),da=0;function ea(i,e,s){return i.call.apply(i.bind,arguments)}function fa(i,e,s){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var a=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(a,o),i.apply(e,a)}}return function(){return i.apply(e,arguments)}}function q(i,e,s){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?q=ea:q=fa,q.apply(null,arguments)}function ha(i,e){var s=Array.prototype.slice.call(arguments,1);return function(){var o=s.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function r$1(i,e){function s(){}s.prototype=e.prototype,i.$=e.prototype,i.prototype=new s,i.prototype.constructor=i,i.ac=function(o,a,c){for(var h=Array(arguments.length-2),_=2;_<arguments.length;_++)h[_-2]=arguments[_];return e.prototype[a].apply(o,h)}}function v$1(){this.s=this.s,this.o=this.o}var ia=0;v$1.prototype.s=!1;v$1.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),ia!=0)&&ba(this)};v$1.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const ka=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if(typeof i=="string")return typeof e!="string"||e.length!=1?-1:i.indexOf(e,0);for(let s=0;s<i.length;s++)if(s in i&&i[s]===e)return s;return-1};function ma(i){const e=i.length;if(0<e){const s=Array(e);for(let o=0;o<e;o++)s[o]=i[o];return s}return[]}function na(i,e){for(let s=1;s<arguments.length;s++){const o=arguments[s];if(aa(o)){const a=i.length||0,c=o.length||0;i.length=a+c;for(let h=0;h<c;h++)i[a+h]=o[h]}else i.push(o)}}function w$1(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}w$1.prototype.h=function(){this.defaultPrevented=!0};var oa=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{const s=()=>{};l.addEventListener("test",s,e),l.removeEventListener("test",s,e)}catch{}return i}();function x(i){return/^[\s\xa0]*$/.test(i)}function pa(){var i=l.navigator;return i&&(i=i.userAgent)?i:""}function y(i){return pa().indexOf(i)!=-1}function qa(i){return qa[" "](i),i}qa[" "]=function(){};function ra(i,e){var s=sa;return Object.prototype.hasOwnProperty.call(s,i)?s[i]:s[i]=e(i)}var ta=y("Opera"),z=y("Trident")||y("MSIE"),ua=y("Edge"),va=ua||z,wa=y("Gecko")&&!(pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge"))&&!(y("Trident")||y("MSIE"))&&!y("Edge"),xa=pa().toLowerCase().indexOf("webkit")!=-1&&!y("Edge");function ya(){var i=l.document;return i?i.documentMode:void 0}var za;e:{var Aa="",Ba=function(){var i=pa();if(wa)return/rv:([^\);]+)(\)|;)/.exec(i);if(ua)return/Edge\/([\d\.]+)/.exec(i);if(z)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i);if(xa)return/WebKit\/(\S+)/.exec(i);if(ta)return/(?:Version)[ \/]?(\S+)/.exec(i)}();if(Ba&&(Aa=Ba?Ba[1]:""),z){var Ca=ya();if(Ca!=null&&Ca>parseFloat(Aa)){za=String(Ca);break e}}za=Aa}var Da;if(l.document&&z){var Ea=ya();Da=Ea||parseInt(za,10)||void 0}else Da=void 0;var Fa=Da;function A(i,e){if(w$1.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var s=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(wa){e:{try{qa(e.nodeName);var a=!0;break e}catch{}a=!1}a||(e=null)}}else s=="mouseover"?e=i.fromElement:s=="mouseout"&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=i.clientX!==void 0?i.clientX:i.pageX,this.clientY=i.clientY!==void 0?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType=typeof i.pointerType=="string"?i.pointerType:Ga[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&A.$.h.call(this)}}r$1(A,w$1);var Ga={2:"touch",3:"pen",4:"mouse"};A.prototype.h=function(){A.$.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ha="closure_listenable_"+(1e6*Math.random()|0),Ia=0;function Ja(i,e,s,o,a){this.listener=i,this.proxy=null,this.src=e,this.type=s,this.capture=!!o,this.la=a,this.key=++Ia,this.fa=this.ia=!1}function Ma(i){i.fa=!0,i.listener=null,i.proxy=null,i.src=null,i.la=null}function Na(i,e,s){for(const o in i)e.call(s,i[o],o,i)}function Oa(i,e){for(const s in i)e.call(void 0,i[s],s,i)}function Pa(i){const e={};for(const s in i)e[s]=i[s];return e}const Qa="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Ra(i,e){let s,o;for(let a=1;a<arguments.length;a++){o=arguments[a];for(s in o)i[s]=o[s];for(let c=0;c<Qa.length;c++)s=Qa[c],Object.prototype.hasOwnProperty.call(o,s)&&(i[s]=o[s])}}function Sa(i){this.src=i,this.g={},this.h=0}Sa.prototype.add=function(i,e,s,o,a){var c=i.toString();i=this.g[c],i||(i=this.g[c]=[],this.h++);var h=Ta(i,e,o,a);return-1<h?(e=i[h],s||(e.ia=!1)):(e=new Ja(e,this.src,c,!!o,a),e.ia=s,i.push(e)),e};function Ua(i,e){var s=e.type;if(s in i.g){var o=i.g[s],a=ka(o,e),c;(c=0<=a)&&Array.prototype.splice.call(o,a,1),c&&(Ma(e),i.g[s].length==0&&(delete i.g[s],i.h--))}}function Ta(i,e,s,o){for(var a=0;a<i.length;++a){var c=i[a];if(!c.fa&&c.listener==e&&c.capture==!!s&&c.la==o)return a}return-1}var Va="closure_lm_"+(1e6*Math.random()|0),Wa={};function Ya(i,e,s,o,a){if(o&&o.once)return Za(i,e,s,o,a);if(Array.isArray(e)){for(var c=0;c<e.length;c++)Ya(i,e[c],s,o,a);return null}return s=$a(s),i&&i[Ha]?i.O(e,s,p(o)?!!o.capture:!!o,a):ab(i,e,s,!1,o,a)}function ab(i,e,s,o,a,c){if(!e)throw Error("Invalid event type");var h=p(a)?!!a.capture:!!a,_=bb(i);if(_||(i[Va]=_=new Sa(i)),s=_.add(e,s,o,h,c),s.proxy)return s;if(o=cb(),s.proxy=o,o.src=i,o.listener=s,i.addEventListener)oa||(a=h),a===void 0&&(a=!1),i.addEventListener(e.toString(),o,a);else if(i.attachEvent)i.attachEvent(db$1(e.toString()),o);else if(i.addListener&&i.removeListener)i.addListener(o);else throw Error("addEventListener and attachEvent are unavailable.");return s}function cb(){function i(s){return e.call(i.src,i.listener,s)}const e=eb;return i}function Za(i,e,s,o,a){if(Array.isArray(e)){for(var c=0;c<e.length;c++)Za(i,e[c],s,o,a);return null}return s=$a(s),i&&i[Ha]?i.P(e,s,p(o)?!!o.capture:!!o,a):ab(i,e,s,!0,o,a)}function fb(i,e,s,o,a){if(Array.isArray(e))for(var c=0;c<e.length;c++)fb(i,e[c],s,o,a);else o=p(o)?!!o.capture:!!o,s=$a(s),i&&i[Ha]?(i=i.i,e=String(e).toString(),e in i.g&&(c=i.g[e],s=Ta(c,s,o,a),-1<s&&(Ma(c[s]),Array.prototype.splice.call(c,s,1),c.length==0&&(delete i.g[e],i.h--)))):i&&(i=bb(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ta(e,s,o,a)),(s=-1<i?e[i]:null)&&gb(s))}function gb(i){if(typeof i!="number"&&i&&!i.fa){var e=i.src;if(e&&e[Ha])Ua(e.i,i);else{var s=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(s,o,i.capture):e.detachEvent?e.detachEvent(db$1(s),o):e.addListener&&e.removeListener&&e.removeListener(o),(s=bb(e))?(Ua(s,i),s.h==0&&(s.src=null,e[Va]=null)):Ma(i)}}}function db$1(i){return i in Wa?Wa[i]:Wa[i]="on"+i}function eb(i,e){if(i.fa)i=!0;else{e=new A(e,this);var s=i.listener,o=i.la||i.src;i.ia&&gb(i),i=s.call(o,e)}return i}function bb(i){return i=i[Va],i instanceof Sa?i:null}var hb="__closure_events_fn_"+(1e9*Math.random()>>>0);function $a(i){return typeof i=="function"?i:(i[hb]||(i[hb]=function(e){return i.handleEvent(e)}),i[hb])}function B(){v$1.call(this),this.i=new Sa(this),this.S=this,this.J=null}r$1(B,v$1);B.prototype[Ha]=!0;B.prototype.removeEventListener=function(i,e,s,o){fb(this,i,e,s,o)};function C$1(i,e){var s,o=i.J;if(o)for(s=[];o;o=o.J)s.push(o);if(i=i.S,o=e.type||e,typeof e=="string")e=new w$1(e,i);else if(e instanceof w$1)e.target=e.target||i;else{var a=e;e=new w$1(o,i),Ra(e,a)}if(a=!0,s)for(var c=s.length-1;0<=c;c--){var h=e.g=s[c];a=ib(h,o,!0,e)&&a}if(h=e.g=i,a=ib(h,o,!0,e)&&a,a=ib(h,o,!1,e)&&a,s)for(c=0;c<s.length;c++)h=e.g=s[c],a=ib(h,o,!1,e)&&a}B.prototype.N=function(){if(B.$.N.call(this),this.i){var i=this.i,e;for(e in i.g){for(var s=i.g[e],o=0;o<s.length;o++)Ma(s[o]);delete i.g[e],i.h--}}this.J=null};B.prototype.O=function(i,e,s,o){return this.i.add(String(i),e,!1,s,o)};B.prototype.P=function(i,e,s,o){return this.i.add(String(i),e,!0,s,o)};function ib(i,e,s,o){if(e=i.i.g[String(e)],!e)return!0;e=e.concat();for(var a=!0,c=0;c<e.length;++c){var h=e[c];if(h&&!h.fa&&h.capture==s){var _=h.listener,$=h.la||h.src;h.ia&&Ua(i.i,h),a=_.call($,o)!==!1&&a}}return a&&!o.defaultPrevented}var jb=l.JSON.stringify;class kb{constructor(e,s){this.i=e,this.j=s,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function lb(){var i=mb;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}class nb{constructor(){this.h=this.g=null}add(e,s){const o=ob.get();o.set(e,s),this.h?this.h.next=o:this.g=o,this.h=o}}var ob=new kb(()=>new pb,i=>i.reset());class pb{constructor(){this.next=this.g=this.h=null}set(e,s){this.h=e,this.g=s,this.next=null}reset(){this.next=this.g=this.h=null}}function qb(i){var e=1;i=i.split(":");const s=[];for(;0<e&&i.length;)s.push(i.shift()),e--;return i.length&&s.push(i.join(":")),s}function rb(i){l.setTimeout(()=>{throw i},0)}let sb,tb=!1,mb=new nb,vb=()=>{const i=l.Promise.resolve(void 0);sb=()=>{i.then(ub)}};var ub=()=>{for(var i;i=lb();){try{i.h.call(i.g)}catch(s){rb(s)}var e=ob;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}tb=!1};function wb(i,e){B.call(this),this.h=i||1,this.g=e||l,this.j=q(this.qb,this),this.l=Date.now()}r$1(wb,B);k=wb.prototype;k.ga=!1;k.T=null;k.qb=function(){if(this.ga){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-i):(this.T&&(this.g.clearTimeout(this.T),this.T=null),C$1(this,"tick"),this.ga&&(xb(this),this.start()))}};k.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function xb(i){i.ga=!1,i.T&&(i.g.clearTimeout(i.T),i.T=null)}k.N=function(){wb.$.N.call(this),xb(this),delete this.g};function yb(i,e,s){if(typeof i=="function")s&&(i=q(i,s));else if(i&&typeof i.handleEvent=="function")i=q(i.handleEvent,i);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:l.setTimeout(i,e||0)}function zb(i){i.g=yb(()=>{i.g=null,i.i&&(i.i=!1,zb(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}class Ab extends v$1{constructor(e,s){super(),this.m=e,this.j=s,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:zb(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Bb(i){v$1.call(this),this.h=i,this.g={}}r$1(Bb,v$1);var Cb=[];function Eb(i,e,s,o){Array.isArray(s)||(s&&(Cb[0]=s.toString()),s=Cb);for(var a=0;a<s.length;a++){var c=Ya(e,s[a],o||i.handleEvent,!1,i.h||i);if(!c)break;i.g[c.key]=c}}function Fb(i){Na(i.g,function(e,s){this.g.hasOwnProperty(s)&&gb(e)},i),i.g={}}Bb.prototype.N=function(){Bb.$.N.call(this),Fb(this)};Bb.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Gb(){this.g=!0}Gb.prototype.Ea=function(){this.g=!1};function Hb(i,e,s,o,a,c){i.info(function(){if(i.g)if(c)for(var h="",_=c.split("&"),$=0;$<_.length;$++){var g=_[$].split("=");if(1<g.length){var d=g[0];g=g[1];var j=d.split("_");h=2<=j.length&&j[1]=="type"?h+(d+"="+g+"&"):h+(d+"=redacted&")}}else h=null;else h=c;return"XMLHTTP REQ ("+o+") [attempt "+a+"]: "+e+`
`+s+`
`+h})}function Ib(i,e,s,o,a,c,h){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+a+"]: "+e+`
`+s+`
`+c+" "+h})}function D$1(i,e,s,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+Jb(i,s)+(o?" "+o:"")})}function Kb(i,e){i.info(function(){return"TIMEOUT: "+e})}Gb.prototype.info=function(){};function Jb(i,e){if(!i.g)return e;if(!e)return null;try{var s=JSON.parse(e);if(s){for(i=0;i<s.length;i++)if(Array.isArray(s[i])){var o=s[i];if(!(2>o.length)){var a=o[1];if(Array.isArray(a)&&!(1>a.length)){var c=a[0];if(c!="noop"&&c!="stop"&&c!="close")for(var h=1;h<a.length;h++)a[h]=""}}}}return jb(s)}catch{return e}}var E={},Lb=null;function Mb(){return Lb=Lb||new B}E.Ta="serverreachability";function Nb(i){w$1.call(this,E.Ta,i)}r$1(Nb,w$1);function Ob(i){const e=Mb();C$1(e,new Nb(e))}E.STAT_EVENT="statevent";function Pb(i,e){w$1.call(this,E.STAT_EVENT,i),this.stat=e}r$1(Pb,w$1);function F$1(i){const e=Mb();C$1(e,new Pb(e,i))}E.Ua="timingevent";function Qb(i,e){w$1.call(this,E.Ua,i),this.size=e}r$1(Qb,w$1);function Rb(i,e){if(typeof i!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){i()},e)}var Sb={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},Tb={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Ub(){}Ub.prototype.h=null;function Vb(i){return i.h||(i.h=i.i())}function Wb(){}var Xb={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Yb(){w$1.call(this,"d")}r$1(Yb,w$1);function Zb(){w$1.call(this,"c")}r$1(Zb,w$1);var $b;function ac(){}r$1(ac,Ub);ac.prototype.g=function(){return new XMLHttpRequest};ac.prototype.i=function(){return{}};$b=new ac;function bc(i,e,s,o){this.l=i,this.j=e,this.m=s,this.W=o||1,this.U=new Bb(this),this.P=cc,i=va?125:void 0,this.V=new wb(i),this.I=null,this.i=!1,this.u=this.B=this.A=this.L=this.G=this.Y=this.C=null,this.F=[],this.g=null,this.o=0,this.s=this.v=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new dc}function dc(){this.i=null,this.g="",this.h=!1}var cc=45e3,ec={},fc={};k=bc.prototype;k.setTimeout=function(i){this.P=i};function gc(i,e,s){i.L=1,i.A=hc(G(e)),i.u=s,i.S=!0,ic(i,null)}function ic(i,e){i.G=Date.now(),jc(i),i.B=G(i.A);var s=i.B,o=i.W;Array.isArray(o)||(o=[String(o)]),kc(s.i,"t",o),i.o=0,s=i.l.J,i.h=new dc,i.g=lc(i.l,s?e:null,!i.u),0<i.O&&(i.M=new Ab(q(i.Pa,i,i.g),i.O)),Eb(i.U,i.g,"readystatechange",i.nb),e=i.I?Pa(i.I):{},i.u?(i.v||(i.v="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ha(i.B,i.v,i.u,e)):(i.v="GET",i.g.ha(i.B,i.v,null,e)),Ob(),Hb(i.j,i.v,i.B,i.m,i.W,i.u)}k.nb=function(i){i=i.target;const e=this.M;e&&H(i)==3?e.l():this.Pa(i)};k.Pa=function(i){try{if(i==this.g)e:{const d=H(this.g);var e=this.g.Ia();const j=this.g.da();if(!(3>d)&&(d!=3||va||this.g&&(this.h.h||this.g.ja()||mc(this.g)))){this.J||d!=4||e==7||(e==8||0>=j?Ob(3):Ob(2)),nc(this);var s=this.g.da();this.ca=s;t:if(oc(this)){var o=mc(this.g);i="";var a=o.length,c=H(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){I(this),pc(this);var h="";break t}this.h.i=new l.TextDecoder}for(e=0;e<a;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:c&&e==a-1});o.length=0,this.h.g+=i,this.o=0,h=this.h.g}else h=this.g.ja();if(this.i=s==200,Ib(this.j,this.v,this.B,this.m,this.W,d,s),this.i){if(this.aa&&!this.K){t:{if(this.g){var _,$=this.g;if((_=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!x(_)){var g=_;break t}}g=null}if(s=g)D$1(this.j,this.m,s,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,qc(this,s);else{this.i=!1,this.s=3,F$1(12),I(this),pc(this);break e}}this.S?(rc(this,d,h),va&&this.i&&d==3&&(Eb(this.U,this.V,"tick",this.mb),this.V.start())):(D$1(this.j,this.m,h,null),qc(this,h)),d==4&&I(this),this.i&&!this.J&&(d==4?sc(this.l,this):(this.i=!1,jc(this)))}else tc(this.g),s==400&&0<h.indexOf("Unknown SID")?(this.s=3,F$1(12)):(this.s=0,F$1(13)),I(this),pc(this)}}}catch{}finally{}};function oc(i){return i.g?i.v=="GET"&&i.L!=2&&i.l.Ha:!1}function rc(i,e,s){let o=!0,a;for(;!i.J&&i.o<s.length;)if(a=uc(i,s),a==fc){e==4&&(i.s=4,F$1(14),o=!1),D$1(i.j,i.m,null,"[Incomplete Response]");break}else if(a==ec){i.s=4,F$1(15),D$1(i.j,i.m,s,"[Invalid Chunk]"),o=!1;break}else D$1(i.j,i.m,a,null),qc(i,a);oc(i)&&i.o!=0&&(i.h.g=i.h.g.slice(i.o),i.o=0),e!=4||s.length!=0||i.h.h||(i.s=1,F$1(16),o=!1),i.i=i.i&&o,o?0<s.length&&!i.ba&&(i.ba=!0,e=i.l,e.g==i&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+s.length),vc(e),e.M=!0,F$1(11))):(D$1(i.j,i.m,s,"[Invalid Chunked Response]"),I(i),pc(i))}k.mb=function(){if(this.g){var i=H(this.g),e=this.g.ja();this.o<e.length&&(nc(this),rc(this,i,e),this.i&&i!=4&&jc(this))}};function uc(i,e){var s=i.o,o=e.indexOf(`
`,s);return o==-1?fc:(s=Number(e.substring(s,o)),isNaN(s)?ec:(o+=1,o+s>e.length?fc:(e=e.slice(o,o+s),i.o=o+s,e)))}k.cancel=function(){this.J=!0,I(this)};function jc(i){i.Y=Date.now()+i.P,wc(i,i.P)}function wc(i,e){if(i.C!=null)throw Error("WatchDog timer not null");i.C=Rb(q(i.lb,i),e)}function nc(i){i.C&&(l.clearTimeout(i.C),i.C=null)}k.lb=function(){this.C=null;const i=Date.now();0<=i-this.Y?(Kb(this.j,this.B),this.L!=2&&(Ob(),F$1(17)),I(this),this.s=2,pc(this)):wc(this,this.Y-i)};function pc(i){i.l.H==0||i.J||sc(i.l,i)}function I(i){nc(i);var e=i.M;e&&typeof e.sa=="function"&&e.sa(),i.M=null,xb(i.V),Fb(i.U),i.g&&(e=i.g,i.g=null,e.abort(),e.sa())}function qc(i,e){try{var s=i.l;if(s.H!=0&&(s.g==i||xc(s.i,i))){if(!i.K&&xc(s.i,i)&&s.H==3){try{var o=s.Ja.g.parse(e)}catch{o=null}if(Array.isArray(o)&&o.length==3){var a=o;if(a[0]==0){e:if(!s.u){if(s.g)if(s.g.G+3e3<i.G)yc(s),zc(s);else break e;Ac(s),F$1(18)}}else s.Fa=a[1],0<s.Fa-s.V&&37500>a[2]&&s.G&&s.A==0&&!s.v&&(s.v=Rb(q(s.ib,s),6e3));if(1>=Bc(s.i)&&s.oa){try{s.oa()}catch{}s.oa=void 0}}else J(s,11)}else if((i.K||s.g==i)&&yc(s),!x(e))for(a=s.Ja.g.parse(e),e=0;e<a.length;e++){let g=a[e];if(s.V=g[0],g=g[1],s.H==2)if(g[0]=="c"){s.K=g[1],s.pa=g[2];const d=g[3];d!=null&&(s.ra=d,s.l.info("VER="+s.ra));const j=g[4];j!=null&&(s.Ga=j,s.l.info("SVER="+s.Ga));const tt=g[5];tt!=null&&typeof tt=="number"&&0<tt&&(o=1.5*tt,s.L=o,s.l.info("backChannelRequestTimeoutMs_="+o)),o=s;const rt=i.g;if(rt){const et=rt.g?rt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(et){var c=o.i;c.g||et.indexOf("spdy")==-1&&et.indexOf("quic")==-1&&et.indexOf("h2")==-1||(c.j=c.l,c.g=new Set,c.h&&(Cc(c,c.h),c.h=null))}if(o.F){const it=rt.g?rt.g.getResponseHeader("X-HTTP-Session-Id"):null;it&&(o.Da=it,K(o.I,o.F,it))}}s.H=3,s.h&&s.h.Ba(),s.ca&&(s.S=Date.now()-i.G,s.l.info("Handshake RTT: "+s.S+"ms")),o=s;var h=i;if(o.wa=Dc(o,o.J?o.pa:null,o.Y),h.K){Ec(o.i,h);var _=h,$=o.L;$&&_.setTimeout($),_.C&&(nc(_),jc(_)),o.g=h}else Fc(o);0<s.j.length&&Gc(s)}else g[0]!="stop"&&g[0]!="close"||J(s,7);else s.H==3&&(g[0]=="stop"||g[0]=="close"?g[0]=="stop"?J(s,7):Hc(s):g[0]!="noop"&&s.h&&s.h.Aa(g),s.A=0)}}Ob(4)}catch{}}function Ic(i){if(i.Z&&typeof i.Z=="function")return i.Z();if(typeof Map<"u"&&i instanceof Map||typeof Set<"u"&&i instanceof Set)return Array.from(i.values());if(typeof i=="string")return i.split("");if(aa(i)){for(var e=[],s=i.length,o=0;o<s;o++)e.push(i[o]);return e}e=[],s=0;for(o in i)e[s++]=i[o];return e}function Jc(i){if(i.ta&&typeof i.ta=="function")return i.ta();if(!i.Z||typeof i.Z!="function"){if(typeof Map<"u"&&i instanceof Map)return Array.from(i.keys());if(!(typeof Set<"u"&&i instanceof Set)){if(aa(i)||typeof i=="string"){var e=[];i=i.length;for(var s=0;s<i;s++)e.push(s);return e}e=[],s=0;for(const o in i)e[s++]=o;return e}}}function Kc(i,e){if(i.forEach&&typeof i.forEach=="function")i.forEach(e,void 0);else if(aa(i)||typeof i=="string")Array.prototype.forEach.call(i,e,void 0);else for(var s=Jc(i),o=Ic(i),a=o.length,c=0;c<a;c++)e.call(void 0,o[c],s&&s[c],i)}var Lc=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Mc(i,e){if(i){i=i.split("&");for(var s=0;s<i.length;s++){var o=i[s].indexOf("="),a=null;if(0<=o){var c=i[s].substring(0,o);a=i[s].substring(o+1)}else c=i[s];e(c,a?decodeURIComponent(a.replace(/\+/g," ")):"")}}}function M(i){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,i instanceof M){this.h=i.h,Nc(this,i.j),this.s=i.s,this.g=i.g,Oc(this,i.m),this.l=i.l;var e=i.i,s=new Pc;s.i=e.i,e.g&&(s.g=new Map(e.g),s.h=e.h),Qc(this,s),this.o=i.o}else i&&(e=String(i).match(Lc))?(this.h=!1,Nc(this,e[1]||"",!0),this.s=Rc(e[2]||""),this.g=Rc(e[3]||"",!0),Oc(this,e[4]),this.l=Rc(e[5]||"",!0),Qc(this,e[6]||"",!0),this.o=Rc(e[7]||"")):(this.h=!1,this.i=new Pc(null,this.h))}M.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Sc(e,Tc,!0),":");var s=this.g;return(s||e=="file")&&(i.push("//"),(e=this.s)&&i.push(Sc(e,Tc,!0),"@"),i.push(encodeURIComponent(String(s)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),s=this.m,s!=null&&i.push(":",String(s))),(s=this.l)&&(this.g&&s.charAt(0)!="/"&&i.push("/"),i.push(Sc(s,s.charAt(0)=="/"?Uc:Vc,!0))),(s=this.i.toString())&&i.push("?",s),(s=this.o)&&i.push("#",Sc(s,Wc)),i.join("")};function G(i){return new M(i)}function Nc(i,e,s){i.j=s?Rc(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Oc(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Qc(i,e,s){e instanceof Pc?(i.i=e,Xc(i.i,i.h)):(s||(e=Sc(e,Yc)),i.i=new Pc(e,i.h))}function K(i,e,s){i.i.set(e,s)}function hc(i){return K(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function Rc(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Sc(i,e,s){return typeof i=="string"?(i=encodeURI(i).replace(e,Zc),s&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function Zc(i){return i=i.charCodeAt(0),"%"+(i>>4&15).toString(16)+(i&15).toString(16)}var Tc=/[#\/\?@]/g,Vc=/[#\?:]/g,Uc=/[#\?]/g,Yc=/[#\?@]/g,Wc=/#/g;function Pc(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function N(i){i.g||(i.g=new Map,i.h=0,i.i&&Mc(i.i,function(e,s){i.add(decodeURIComponent(e.replace(/\+/g," ")),s)}))}k=Pc.prototype;k.add=function(i,e){N(this),this.i=null,i=O(this,i);var s=this.g.get(i);return s||this.g.set(i,s=[]),s.push(e),this.h+=1,this};function $c(i,e){N(i),e=O(i,e),i.g.has(e)&&(i.i=null,i.h-=i.g.get(e).length,i.g.delete(e))}function ad(i,e){return N(i),e=O(i,e),i.g.has(e)}k.forEach=function(i,e){N(this),this.g.forEach(function(s,o){s.forEach(function(a){i.call(e,a,o,this)},this)},this)};k.ta=function(){N(this);const i=Array.from(this.g.values()),e=Array.from(this.g.keys()),s=[];for(let o=0;o<e.length;o++){const a=i[o];for(let c=0;c<a.length;c++)s.push(e[o])}return s};k.Z=function(i){N(this);let e=[];if(typeof i=="string")ad(this,i)&&(e=e.concat(this.g.get(O(this,i))));else{i=Array.from(this.g.values());for(let s=0;s<i.length;s++)e=e.concat(i[s])}return e};k.set=function(i,e){return N(this),this.i=null,i=O(this,i),ad(this,i)&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this};k.get=function(i,e){return i?(i=this.Z(i),0<i.length?String(i[0]):e):e};function kc(i,e,s){$c(i,e),0<s.length&&(i.i=null,i.g.set(O(i,e),ma(s)),i.h+=s.length)}k.toString=function(){if(this.i)return this.i;if(!this.g)return"";const i=[],e=Array.from(this.g.keys());for(var s=0;s<e.length;s++){var o=e[s];const c=encodeURIComponent(String(o)),h=this.Z(o);for(o=0;o<h.length;o++){var a=c;h[o]!==""&&(a+="="+encodeURIComponent(String(h[o]))),i.push(a)}}return this.i=i.join("&")};function O(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Xc(i,e){e&&!i.j&&(N(i),i.i=null,i.g.forEach(function(s,o){var a=o.toLowerCase();o!=a&&($c(this,o),kc(this,a,s))},i)),i.j=e}var bd=class{constructor(i,e){this.g=i,this.map=e}};function cd(i){this.l=i||dd,l.PerformanceNavigationTiming?(i=l.performance.getEntriesByType("navigation"),i=0<i.length&&(i[0].nextHopProtocol=="hq"||i[0].nextHopProtocol=="h2")):i=!!(l.g&&l.g.Ka&&l.g.Ka()&&l.g.Ka().dc),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var dd=10;function ed(i){return i.h?!0:i.g?i.g.size>=i.j:!1}function Bc(i){return i.h?1:i.g?i.g.size:0}function xc(i,e){return i.h?i.h==e:i.g?i.g.has(e):!1}function Cc(i,e){i.g?i.g.add(e):i.h=e}function Ec(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}cd.prototype.cancel=function(){if(this.i=fd(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const i of this.g.values())i.cancel();this.g.clear()}};function fd(i){if(i.h!=null)return i.i.concat(i.h.F);if(i.g!=null&&i.g.size!==0){let e=i.i;for(const s of i.g.values())e=e.concat(s.F);return e}return ma(i.i)}var gd=class{stringify(i){return l.JSON.stringify(i,void 0)}parse(i){return l.JSON.parse(i,void 0)}};function hd(){this.g=new gd}function id(i,e,s){const o=s||"";try{Kc(i,function(a,c){let h=a;p(a)&&(h=jb(a)),e.push(o+c+"="+encodeURIComponent(h))})}catch(a){throw e.push(o+"type="+encodeURIComponent("_badmap")),a}}function jd(i,e){const s=new Gb;if(l.Image){const o=new Image;o.onload=ha(kd,s,o,"TestLoadImage: loaded",!0,e),o.onerror=ha(kd,s,o,"TestLoadImage: error",!1,e),o.onabort=ha(kd,s,o,"TestLoadImage: abort",!1,e),o.ontimeout=ha(kd,s,o,"TestLoadImage: timeout",!1,e),l.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}function kd(i,e,s,o,a){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,a(o)}catch{}}function ld(i){this.l=i.ec||null,this.j=i.ob||!1}r$1(ld,Ub);ld.prototype.g=function(){return new md(this.l,this.j)};ld.prototype.i=function(i){return function(){return i}}({});function md(i,e){B.call(this),this.F=i,this.u=e,this.m=void 0,this.readyState=nd,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}r$1(md,B);var nd=0;k=md.prototype;k.open=function(i,e){if(this.readyState!=nd)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,od(this)};k.send=function(i){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.F||l).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};k.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,pd(this)),this.readyState=nd};k.$a=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,od(this)),this.g&&(this.readyState=3,od(this),this.g)))if(this.responseType==="arraybuffer")i.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;qd(this)}else i.text().then(this.Za.bind(this),this.ka.bind(this))};function qd(i){i.j.read().then(i.Xa.bind(i)).catch(i.ka.bind(i))}k.Xa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?pd(this):od(this),this.readyState==3&&qd(this)}};k.Za=function(i){this.g&&(this.response=this.responseText=i,pd(this))};k.Ya=function(i){this.g&&(this.response=i,pd(this))};k.ka=function(){this.g&&pd(this)};function pd(i){i.readyState=4,i.l=null,i.j=null,i.A=null,od(i)}k.setRequestHeader=function(i,e){this.v.append(i,e)};k.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""};k.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var s=e.next();!s.done;)s=s.value,i.push(s[0]+": "+s[1]),s=e.next();return i.join(`\r
`)};function od(i){i.onreadystatechange&&i.onreadystatechange.call(i)}Object.defineProperty(md.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(i){this.m=i?"include":"same-origin"}});var rd=l.JSON.parse;function P(i){B.call(this),this.headers=new Map,this.u=i||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=sd,this.L=this.M=!1}r$1(P,B);var sd="",td=/^https?$/i,ud=["POST","PUT"];k=P.prototype;k.Oa=function(i){this.M=i};k.ha=function(i,e,s,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+i);e=e?e.toUpperCase():"GET",this.I=i,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():$b.g(),this.C=this.u?Vb(this.u):Vb($b),this.g.onreadystatechange=q(this.La,this);try{this.G=!0,this.g.open(e,String(i),!0),this.G=!1}catch(c){vd(this,c);return}if(i=s||"",s=new Map(this.headers),o)if(Object.getPrototypeOf(o)===Object.prototype)for(var a in o)s.set(a,o[a]);else if(typeof o.keys=="function"&&typeof o.get=="function")for(const c of o.keys())s.set(c,o.get(c));else throw Error("Unknown input type for opt_headers: "+String(o));o=Array.from(s.keys()).find(c=>c.toLowerCase()=="content-type"),a=l.FormData&&i instanceof l.FormData,!(0<=ka(ud,e))||o||a||s.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[c,h]of s)this.g.setRequestHeader(c,h);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{wd(this),0<this.B&&((this.L=xd(this.g))?(this.g.timeout=this.B,this.g.ontimeout=q(this.ua,this)):this.A=yb(this.ua,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(c){vd(this,c)}};function xd(i){return z&&typeof i.timeout=="number"&&i.ontimeout!==void 0}k.ua=function(){typeof goog<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,C$1(this,"timeout"),this.abort(8))};function vd(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,yd(i),zd(i)}function yd(i){i.F||(i.F=!0,C$1(i,"complete"),C$1(i,"error"))}k.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,C$1(this,"complete"),C$1(this,"abort"),zd(this))};k.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),zd(this,!0)),P.$.N.call(this)};k.La=function(){this.s||(this.G||this.v||this.l?Ad(this):this.kb())};k.kb=function(){Ad(this)};function Ad(i){if(i.h&&typeof goog<"u"&&(!i.C[1]||H(i)!=4||i.da()!=2)){if(i.v&&H(i)==4)yb(i.La,0,i);else if(C$1(i,"readystatechange"),H(i)==4){i.h=!1;try{const h=i.da();e:switch(h){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var s;if(!(s=e)){var o;if(o=h===0){var a=String(i.I).match(Lc)[1]||null;!a&&l.self&&l.self.location&&(a=l.self.location.protocol.slice(0,-1)),o=!td.test(a?a.toLowerCase():"")}s=o}if(s)C$1(i,"complete"),C$1(i,"success");else{i.m=6;try{var c=2<H(i)?i.g.statusText:""}catch{c=""}i.j=c+" ["+i.da()+"]",yd(i)}}finally{zd(i)}}}}function zd(i,e){if(i.g){wd(i);const s=i.g,o=i.C[0]?()=>{}:null;i.g=null,i.C=null,e||C$1(i,"ready");try{s.onreadystatechange=o}catch{}}}function wd(i){i.g&&i.L&&(i.g.ontimeout=null),i.A&&(l.clearTimeout(i.A),i.A=null)}k.isActive=function(){return!!this.g};function H(i){return i.g?i.g.readyState:0}k.da=function(){try{return 2<H(this)?this.g.status:-1}catch{return-1}};k.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};k.Wa=function(i){if(this.g){var e=this.g.responseText;return i&&e.indexOf(i)==0&&(e=e.substring(i.length)),rd(e)}};function mc(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.K){case sd:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch{return null}}function tc(i){const e={};i=(i.g&&2<=H(i)&&i.g.getAllResponseHeaders()||"").split(`\r
`);for(let o=0;o<i.length;o++){if(x(i[o]))continue;var s=qb(i[o]);const a=s[0];if(s=s[1],typeof s!="string")continue;s=s.trim();const c=e[a]||[];e[a]=c,c.push(s)}Oa(e,function(o){return o.join(", ")})}k.Ia=function(){return this.m};k.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function Bd(i){let e="";return Na(i,function(s,o){e+=o,e+=":",e+=s,e+=`\r
`}),e}function Cd(i,e,s){e:{for(o in s){var o=!1;break e}o=!0}o||(s=Bd(s),typeof i=="string"?s!=null&&encodeURIComponent(String(s)):K(i,e,s))}function Dd(i,e,s){return s&&s.internalChannelParams&&s.internalChannelParams[i]||e}function Ed(i){this.Ga=0,this.j=[],this.l=new Gb,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Dd("failFast",!1,i),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Dd("baseRetryDelayMs",5e3,i),this.hb=Dd("retryDelaySeedMs",1e4,i),this.eb=Dd("forwardChannelMaxRetries",2,i),this.xa=Dd("forwardChannelRequestTimeoutMs",2e4,i),this.va=i&&i.xmlHttpFactory||void 0,this.Ha=i&&i.useFetchStreams||!1,this.L=void 0,this.J=i&&i.supportsCrossDomainXhr||!1,this.K="",this.i=new cd(i&&i.concurrentRequestLimit),this.Ja=new hd,this.P=i&&i.fastHandshake||!1,this.O=i&&i.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=i&&i.bc||!1,i&&i.Ea&&this.l.Ea(),i&&i.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&i&&i.detectBufferingProxy||!1,this.qa=void 0,i&&i.longPollingTimeout&&0<i.longPollingTimeout&&(this.qa=i.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}k=Ed.prototype;k.ra=8;k.H=1;function Hc(i){if(Fd(i),i.H==3){var e=i.W++,s=G(i.I);if(K(s,"SID",i.K),K(s,"RID",e),K(s,"TYPE","terminate"),Gd(i,s),e=new bc(i,i.l,e),e.L=2,e.A=hc(G(s)),s=!1,l.navigator&&l.navigator.sendBeacon)try{s=l.navigator.sendBeacon(e.A.toString(),"")}catch{}!s&&l.Image&&(new Image().src=e.A,s=!0),s||(e.g=lc(e.l,null),e.g.ha(e.A)),e.G=Date.now(),jc(e)}Hd(i)}function zc(i){i.g&&(vc(i),i.g.cancel(),i.g=null)}function Fd(i){zc(i),i.u&&(l.clearTimeout(i.u),i.u=null),yc(i),i.i.cancel(),i.m&&(typeof i.m=="number"&&l.clearTimeout(i.m),i.m=null)}function Gc(i){if(!ed(i.i)&&!i.m){i.m=!0;var e=i.Na;sb||vb(),tb||(sb(),tb=!0),mb.add(e,i),i.C=0}}function Id(i,e){return Bc(i.i)>=i.i.j-(i.m?1:0)?!1:i.m?(i.j=e.F.concat(i.j),!0):i.H==1||i.H==2||i.C>=(i.cb?0:i.eb)?!1:(i.m=Rb(q(i.Na,i,e),Jd(i,i.C)),i.C++,!0)}k.Na=function(i){if(this.m)if(this.m=null,this.H==1){if(!i){this.W=Math.floor(1e5*Math.random()),i=this.W++;const a=new bc(this,this.l,i);let c=this.s;if(this.U&&(c?(c=Pa(c),Ra(c,this.U)):c=this.U),this.o!==null||this.O||(a.I=c,c=null),this.P)e:{for(var e=0,s=0;s<this.j.length;s++){t:{var o=this.j[s];if("__data__"in o.map&&(o=o.map.__data__,typeof o=="string")){o=o.length;break t}o=void 0}if(o===void 0)break;if(e+=o,4096<e){e=s;break e}if(e===4096||s===this.j.length-1){e=s+1;break e}}e=1e3}else e=1e3;e=Kd(this,a,e),s=G(this.I),K(s,"RID",i),K(s,"CVER",22),this.F&&K(s,"X-HTTP-Session-Id",this.F),Gd(this,s),c&&(this.O?e="headers="+encodeURIComponent(String(Bd(c)))+"&"+e:this.o&&Cd(s,this.o,c)),Cc(this.i,a),this.bb&&K(s,"TYPE","init"),this.P?(K(s,"$req",e),K(s,"SID","null"),a.aa=!0,gc(a,s,null)):gc(a,s,e),this.H=2}}else this.H==3&&(i?Ld(this,i):this.j.length==0||ed(this.i)||Ld(this))};function Ld(i,e){var s;e?s=e.m:s=i.W++;const o=G(i.I);K(o,"SID",i.K),K(o,"RID",s),K(o,"AID",i.V),Gd(i,o),i.o&&i.s&&Cd(o,i.o,i.s),s=new bc(i,i.l,s,i.C+1),i.o===null&&(s.I=i.s),e&&(i.j=e.F.concat(i.j)),e=Kd(i,s,1e3),s.setTimeout(Math.round(.5*i.xa)+Math.round(.5*i.xa*Math.random())),Cc(i.i,s),gc(s,o,e)}function Gd(i,e){i.na&&Na(i.na,function(s,o){K(e,o,s)}),i.h&&Kc({},function(s,o){K(e,o,s)})}function Kd(i,e,s){s=Math.min(i.j.length,s);var o=i.h?q(i.h.Va,i.h,i):null;e:{var a=i.j;let c=-1;for(;;){const h=["count="+s];c==-1?0<s?(c=a[0].g,h.push("ofs="+c)):c=0:h.push("ofs="+c);let _=!0;for(let $=0;$<s;$++){let g=a[$].g;const d=a[$].map;if(g-=c,0>g)c=Math.max(0,a[$].g-100),_=!1;else try{id(d,h,"req"+g+"_")}catch{o&&o(d)}}if(_){o=h.join("&");break e}}}return i=i.j.splice(0,s),e.F=i,o}function Fc(i){if(!i.g&&!i.u){i.ba=1;var e=i.Ma;sb||vb(),tb||(sb(),tb=!0),mb.add(e,i),i.A=0}}function Ac(i){return i.g||i.u||3<=i.A?!1:(i.ba++,i.u=Rb(q(i.Ma,i),Jd(i,i.A)),i.A++,!0)}k.Ma=function(){if(this.u=null,Md(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var i=2*this.S;this.l.info("BP detection timer enabled: "+i),this.B=Rb(q(this.jb,this),i)}};k.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,F$1(10),zc(this),Md(this))};function vc(i){i.B!=null&&(l.clearTimeout(i.B),i.B=null)}function Md(i){i.g=new bc(i,i.l,"rpc",i.ba),i.o===null&&(i.g.I=i.s),i.g.O=0;var e=G(i.wa);K(e,"RID","rpc"),K(e,"SID",i.K),K(e,"AID",i.V),K(e,"CI",i.G?"0":"1"),!i.G&&i.qa&&K(e,"TO",i.qa),K(e,"TYPE","xmlhttp"),Gd(i,e),i.o&&i.s&&Cd(e,i.o,i.s),i.L&&i.g.setTimeout(i.L);var s=i.g;i=i.pa,s.L=1,s.A=hc(G(e)),s.u=null,s.S=!0,ic(s,i)}k.ib=function(){this.v!=null&&(this.v=null,zc(this),Ac(this),F$1(19))};function yc(i){i.v!=null&&(l.clearTimeout(i.v),i.v=null)}function sc(i,e){var s=null;if(i.g==e){yc(i),vc(i),i.g=null;var o=2}else if(xc(i.i,e))s=e.F,Ec(i.i,e),o=1;else return;if(i.H!=0){if(e.i)if(o==1){s=e.u?e.u.length:0,e=Date.now()-e.G;var a=i.C;o=Mb(),C$1(o,new Qb(o,s)),Gc(i)}else Fc(i);else if(a=e.s,a==3||a==0&&0<e.ca||!(o==1&&Id(i,e)||o==2&&Ac(i)))switch(s&&0<s.length&&(e=i.i,e.i=e.i.concat(s)),a){case 1:J(i,5);break;case 4:J(i,10);break;case 3:J(i,6);break;default:J(i,2)}}}function Jd(i,e){let s=i.ab+Math.floor(Math.random()*i.hb);return i.isActive()||(s*=2),s*e}function J(i,e){if(i.l.info("Error code "+e),e==2){var s=null;i.h&&(s=null);var o=q(i.pb,i);s||(s=new M("//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Nc(s,"https"),hc(s)),jd(s.toString(),o)}else F$1(2);i.H=0,i.h&&i.h.za(e),Hd(i),Fd(i)}k.pb=function(i){i?(this.l.info("Successfully pinged google.com"),F$1(2)):(this.l.info("Failed to ping google.com"),F$1(1))};function Hd(i){if(i.H=0,i.ma=[],i.h){const e=fd(i.i);(e.length!=0||i.j.length!=0)&&(na(i.ma,e),na(i.ma,i.j),i.i.i.length=0,ma(i.j),i.j.length=0),i.h.ya()}}function Dc(i,e,s){var o=s instanceof M?G(s):new M(s);if(o.g!="")e&&(o.g=e+"."+o.g),Oc(o,o.m);else{var a=l.location;o=a.protocol,e=e?e+"."+a.hostname:a.hostname,a=+a.port;var c=new M(null);o&&Nc(c,o),e&&(c.g=e),a&&Oc(c,a),s&&(c.l=s),o=c}return s=i.F,e=i.Da,s&&e&&K(o,s,e),K(o,"VER",i.ra),Gd(i,o),o}function lc(i,e,s){if(e&&!i.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=i.Ha&&!i.va?new P(new ld({ob:s})):new P(i.va),e.Oa(i.J),e}k.isActive=function(){return!!this.h&&this.h.isActive(this)};function Nd(){}k=Nd.prototype;k.Ba=function(){};k.Aa=function(){};k.za=function(){};k.ya=function(){};k.isActive=function(){return!0};k.Va=function(){};function Od(){if(z&&!(10<=Number(Fa)))throw Error("Environmental error: no available transport.")}Od.prototype.g=function(i,e){return new Q(i,e)};function Q(i,e){B.call(this),this.g=new Ed(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(i?i["X-WebChannel-Client-Profile"]=e.Ca:i={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=i,(i=e&&e.cc)&&!x(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!x(e)&&(this.g.F=e,i=this.h,i!==null&&e in i&&(i=this.h,e in i&&delete i[e])),this.j=new R(this)}r$1(Q,B);Q.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var i=this.g,e=this.l,s=this.h||void 0;F$1(0),i.Y=e,i.na=s||{},i.G=i.aa,i.I=Dc(i,null,i.Y),Gc(i)};Q.prototype.close=function(){Hc(this.g)};Q.prototype.u=function(i){var e=this.g;if(typeof i=="string"){var s={};s.__data__=i,i=s}else this.v&&(s={},s.__data__=jb(i),i=s);e.j.push(new bd(e.fb++,i)),e.H==3&&Gc(e)};Q.prototype.N=function(){this.g.h=null,delete this.j,Hc(this.g),delete this.g,Q.$.N.call(this)};function Pd(i){Yb.call(this),i.__headers__&&(this.headers=i.__headers__,this.statusCode=i.__status__,delete i.__headers__,delete i.__status__);var e=i.__sm__;if(e){e:{for(const s in e){i=s;break e}i=void 0}(this.i=i)&&(i=this.i,e=e!==null&&i in e?e[i]:void 0),this.data=e}else this.data=i}r$1(Pd,Yb);function Qd(){Zb.call(this),this.status=1}r$1(Qd,Zb);function R(i){this.g=i}r$1(R,Nd);R.prototype.Ba=function(){C$1(this.g,"a")};R.prototype.Aa=function(i){C$1(this.g,new Pd(i))};R.prototype.za=function(i){C$1(this.g,new Qd)};R.prototype.ya=function(){C$1(this.g,"b")};function Rd(){this.blockSize=-1}function S$1(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}r$1(S$1,Rd);S$1.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Sd(i,e,s){s||(s=0);var o=Array(16);if(typeof e=="string")for(var a=0;16>a;++a)o[a]=e.charCodeAt(s++)|e.charCodeAt(s++)<<8|e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<24;else for(a=0;16>a;++a)o[a]=e[s++]|e[s++]<<8|e[s++]<<16|e[s++]<<24;e=i.g[0],s=i.g[1],a=i.g[2];var c=i.g[3],h=e+(c^s&(a^c))+o[0]+3614090360&4294967295;e=s+(h<<7&4294967295|h>>>25),h=c+(a^e&(s^a))+o[1]+3905402710&4294967295,c=e+(h<<12&4294967295|h>>>20),h=a+(s^c&(e^s))+o[2]+606105819&4294967295,a=c+(h<<17&4294967295|h>>>15),h=s+(e^a&(c^e))+o[3]+3250441966&4294967295,s=a+(h<<22&4294967295|h>>>10),h=e+(c^s&(a^c))+o[4]+4118548399&4294967295,e=s+(h<<7&4294967295|h>>>25),h=c+(a^e&(s^a))+o[5]+1200080426&4294967295,c=e+(h<<12&4294967295|h>>>20),h=a+(s^c&(e^s))+o[6]+2821735955&4294967295,a=c+(h<<17&4294967295|h>>>15),h=s+(e^a&(c^e))+o[7]+4249261313&4294967295,s=a+(h<<22&4294967295|h>>>10),h=e+(c^s&(a^c))+o[8]+1770035416&4294967295,e=s+(h<<7&4294967295|h>>>25),h=c+(a^e&(s^a))+o[9]+2336552879&4294967295,c=e+(h<<12&4294967295|h>>>20),h=a+(s^c&(e^s))+o[10]+4294925233&4294967295,a=c+(h<<17&4294967295|h>>>15),h=s+(e^a&(c^e))+o[11]+2304563134&4294967295,s=a+(h<<22&4294967295|h>>>10),h=e+(c^s&(a^c))+o[12]+1804603682&4294967295,e=s+(h<<7&4294967295|h>>>25),h=c+(a^e&(s^a))+o[13]+4254626195&4294967295,c=e+(h<<12&4294967295|h>>>20),h=a+(s^c&(e^s))+o[14]+2792965006&4294967295,a=c+(h<<17&4294967295|h>>>15),h=s+(e^a&(c^e))+o[15]+1236535329&4294967295,s=a+(h<<22&4294967295|h>>>10),h=e+(a^c&(s^a))+o[1]+4129170786&4294967295,e=s+(h<<5&4294967295|h>>>27),h=c+(s^a&(e^s))+o[6]+3225465664&4294967295,c=e+(h<<9&4294967295|h>>>23),h=a+(e^s&(c^e))+o[11]+643717713&4294967295,a=c+(h<<14&4294967295|h>>>18),h=s+(c^e&(a^c))+o[0]+3921069994&4294967295,s=a+(h<<20&4294967295|h>>>12),h=e+(a^c&(s^a))+o[5]+3593408605&4294967295,e=s+(h<<5&4294967295|h>>>27),h=c+(s^a&(e^s))+o[10]+38016083&4294967295,c=e+(h<<9&4294967295|h>>>23),h=a+(e^s&(c^e))+o[15]+3634488961&4294967295,a=c+(h<<14&4294967295|h>>>18),h=s+(c^e&(a^c))+o[4]+3889429448&4294967295,s=a+(h<<20&4294967295|h>>>12),h=e+(a^c&(s^a))+o[9]+568446438&4294967295,e=s+(h<<5&4294967295|h>>>27),h=c+(s^a&(e^s))+o[14]+3275163606&4294967295,c=e+(h<<9&4294967295|h>>>23),h=a+(e^s&(c^e))+o[3]+4107603335&4294967295,a=c+(h<<14&4294967295|h>>>18),h=s+(c^e&(a^c))+o[8]+1163531501&4294967295,s=a+(h<<20&4294967295|h>>>12),h=e+(a^c&(s^a))+o[13]+2850285829&4294967295,e=s+(h<<5&4294967295|h>>>27),h=c+(s^a&(e^s))+o[2]+4243563512&4294967295,c=e+(h<<9&4294967295|h>>>23),h=a+(e^s&(c^e))+o[7]+1735328473&4294967295,a=c+(h<<14&4294967295|h>>>18),h=s+(c^e&(a^c))+o[12]+2368359562&4294967295,s=a+(h<<20&4294967295|h>>>12),h=e+(s^a^c)+o[5]+4294588738&4294967295,e=s+(h<<4&4294967295|h>>>28),h=c+(e^s^a)+o[8]+2272392833&4294967295,c=e+(h<<11&4294967295|h>>>21),h=a+(c^e^s)+o[11]+1839030562&4294967295,a=c+(h<<16&4294967295|h>>>16),h=s+(a^c^e)+o[14]+4259657740&4294967295,s=a+(h<<23&4294967295|h>>>9),h=e+(s^a^c)+o[1]+2763975236&4294967295,e=s+(h<<4&4294967295|h>>>28),h=c+(e^s^a)+o[4]+1272893353&4294967295,c=e+(h<<11&4294967295|h>>>21),h=a+(c^e^s)+o[7]+4139469664&4294967295,a=c+(h<<16&4294967295|h>>>16),h=s+(a^c^e)+o[10]+3200236656&4294967295,s=a+(h<<23&4294967295|h>>>9),h=e+(s^a^c)+o[13]+681279174&4294967295,e=s+(h<<4&4294967295|h>>>28),h=c+(e^s^a)+o[0]+3936430074&4294967295,c=e+(h<<11&4294967295|h>>>21),h=a+(c^e^s)+o[3]+3572445317&4294967295,a=c+(h<<16&4294967295|h>>>16),h=s+(a^c^e)+o[6]+76029189&4294967295,s=a+(h<<23&4294967295|h>>>9),h=e+(s^a^c)+o[9]+3654602809&4294967295,e=s+(h<<4&4294967295|h>>>28),h=c+(e^s^a)+o[12]+3873151461&4294967295,c=e+(h<<11&4294967295|h>>>21),h=a+(c^e^s)+o[15]+530742520&4294967295,a=c+(h<<16&4294967295|h>>>16),h=s+(a^c^e)+o[2]+3299628645&4294967295,s=a+(h<<23&4294967295|h>>>9),h=e+(a^(s|~c))+o[0]+4096336452&4294967295,e=s+(h<<6&4294967295|h>>>26),h=c+(s^(e|~a))+o[7]+1126891415&4294967295,c=e+(h<<10&4294967295|h>>>22),h=a+(e^(c|~s))+o[14]+2878612391&4294967295,a=c+(h<<15&4294967295|h>>>17),h=s+(c^(a|~e))+o[5]+4237533241&4294967295,s=a+(h<<21&4294967295|h>>>11),h=e+(a^(s|~c))+o[12]+1700485571&4294967295,e=s+(h<<6&4294967295|h>>>26),h=c+(s^(e|~a))+o[3]+2399980690&4294967295,c=e+(h<<10&4294967295|h>>>22),h=a+(e^(c|~s))+o[10]+4293915773&4294967295,a=c+(h<<15&4294967295|h>>>17),h=s+(c^(a|~e))+o[1]+2240044497&4294967295,s=a+(h<<21&4294967295|h>>>11),h=e+(a^(s|~c))+o[8]+1873313359&4294967295,e=s+(h<<6&4294967295|h>>>26),h=c+(s^(e|~a))+o[15]+4264355552&4294967295,c=e+(h<<10&4294967295|h>>>22),h=a+(e^(c|~s))+o[6]+2734768916&4294967295,a=c+(h<<15&4294967295|h>>>17),h=s+(c^(a|~e))+o[13]+1309151649&4294967295,s=a+(h<<21&4294967295|h>>>11),h=e+(a^(s|~c))+o[4]+4149444226&4294967295,e=s+(h<<6&4294967295|h>>>26),h=c+(s^(e|~a))+o[11]+3174756917&4294967295,c=e+(h<<10&4294967295|h>>>22),h=a+(e^(c|~s))+o[2]+718787259&4294967295,a=c+(h<<15&4294967295|h>>>17),h=s+(c^(a|~e))+o[9]+3951481745&4294967295,i.g[0]=i.g[0]+e&4294967295,i.g[1]=i.g[1]+(a+(h<<21&4294967295|h>>>11))&4294967295,i.g[2]=i.g[2]+a&4294967295,i.g[3]=i.g[3]+c&4294967295}S$1.prototype.j=function(i,e){e===void 0&&(e=i.length);for(var s=e-this.blockSize,o=this.m,a=this.h,c=0;c<e;){if(a==0)for(;c<=s;)Sd(this,i,c),c+=this.blockSize;if(typeof i=="string"){for(;c<e;)if(o[a++]=i.charCodeAt(c++),a==this.blockSize){Sd(this,o),a=0;break}}else for(;c<e;)if(o[a++]=i[c++],a==this.blockSize){Sd(this,o),a=0;break}}this.h=a,this.i+=e};S$1.prototype.l=function(){var i=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);i[0]=128;for(var e=1;e<i.length-8;++e)i[e]=0;var s=8*this.i;for(e=i.length-8;e<i.length;++e)i[e]=s&255,s/=256;for(this.j(i),i=Array(16),e=s=0;4>e;++e)for(var o=0;32>o;o+=8)i[s++]=this.g[e]>>>o&255;return i};function T(i,e){this.h=e;for(var s=[],o=!0,a=i.length-1;0<=a;a--){var c=i[a]|0;o&&c==e||(s[a]=c,o=!1)}this.g=s}var sa={};function Td(i){return-128<=i&&128>i?ra(i,function(e){return new T([e|0],0>e?-1:0)}):new T([i|0],0>i?-1:0)}function U(i){if(isNaN(i)||!isFinite(i))return V;if(0>i)return W(U(-i));for(var e=[],s=1,o=0;i>=s;o++)e[o]=i/s|0,s*=Ud;return new T(e,0)}function Vd(i,e){if(i.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(i.charAt(0)=="-")return W(Vd(i.substring(1),e));if(0<=i.indexOf("-"))throw Error('number format error: interior "-" character');for(var s=U(Math.pow(e,8)),o=V,a=0;a<i.length;a+=8){var c=Math.min(8,i.length-a),h=parseInt(i.substring(a,a+c),e);8>c?(c=U(Math.pow(e,c)),o=o.R(c).add(U(h))):(o=o.R(s),o=o.add(U(h)))}return o}var Ud=4294967296,V=Td(0),Wd=Td(1),Xd=Td(16777216);k=T.prototype;k.ea=function(){if(X(this))return-W(this).ea();for(var i=0,e=1,s=0;s<this.g.length;s++){var o=this.D(s);i+=(0<=o?o:Ud+o)*e,e*=Ud}return i};k.toString=function(i){if(i=i||10,2>i||36<i)throw Error("radix out of range: "+i);if(Y(this))return"0";if(X(this))return"-"+W(this).toString(i);for(var e=U(Math.pow(i,6)),s=this,o="";;){var a=Yd(s,e).g;s=Zd(s,a.R(e));var c=((0<s.g.length?s.g[0]:s.h)>>>0).toString(i);if(s=a,Y(s))return c+o;for(;6>c.length;)c="0"+c;o=c+o}};k.D=function(i){return 0>i?0:i<this.g.length?this.g[i]:this.h};function Y(i){if(i.h!=0)return!1;for(var e=0;e<i.g.length;e++)if(i.g[e]!=0)return!1;return!0}function X(i){return i.h==-1}k.X=function(i){return i=Zd(this,i),X(i)?-1:Y(i)?0:1};function W(i){for(var e=i.g.length,s=[],o=0;o<e;o++)s[o]=~i.g[o];return new T(s,~i.h).add(Wd)}k.abs=function(){return X(this)?W(this):this};k.add=function(i){for(var e=Math.max(this.g.length,i.g.length),s=[],o=0,a=0;a<=e;a++){var c=o+(this.D(a)&65535)+(i.D(a)&65535),h=(c>>>16)+(this.D(a)>>>16)+(i.D(a)>>>16);o=h>>>16,c&=65535,h&=65535,s[a]=h<<16|c}return new T(s,s[s.length-1]&-2147483648?-1:0)};function Zd(i,e){return i.add(W(e))}k.R=function(i){if(Y(this)||Y(i))return V;if(X(this))return X(i)?W(this).R(W(i)):W(W(this).R(i));if(X(i))return W(this.R(W(i)));if(0>this.X(Xd)&&0>i.X(Xd))return U(this.ea()*i.ea());for(var e=this.g.length+i.g.length,s=[],o=0;o<2*e;o++)s[o]=0;for(o=0;o<this.g.length;o++)for(var a=0;a<i.g.length;a++){var c=this.D(o)>>>16,h=this.D(o)&65535,_=i.D(a)>>>16,$=i.D(a)&65535;s[2*o+2*a]+=h*$,$d(s,2*o+2*a),s[2*o+2*a+1]+=c*$,$d(s,2*o+2*a+1),s[2*o+2*a+1]+=h*_,$d(s,2*o+2*a+1),s[2*o+2*a+2]+=c*_,$d(s,2*o+2*a+2)}for(o=0;o<e;o++)s[o]=s[2*o+1]<<16|s[2*o];for(o=e;o<2*e;o++)s[o]=0;return new T(s,0)};function $d(i,e){for(;(i[e]&65535)!=i[e];)i[e+1]+=i[e]>>>16,i[e]&=65535,e++}function ae$1(i,e){this.g=i,this.h=e}function Yd(i,e){if(Y(e))throw Error("division by zero");if(Y(i))return new ae$1(V,V);if(X(i))return e=Yd(W(i),e),new ae$1(W(e.g),W(e.h));if(X(e))return e=Yd(i,W(e)),new ae$1(W(e.g),e.h);if(30<i.g.length){if(X(i)||X(e))throw Error("slowDivide_ only works with positive integers.");for(var s=Wd,o=e;0>=o.X(i);)s=be(s),o=be(o);var a=Z(s,1),c=Z(o,1);for(o=Z(o,2),s=Z(s,2);!Y(o);){var h=c.add(o);0>=h.X(i)&&(a=a.add(s),c=h),o=Z(o,1),s=Z(s,1)}return e=Zd(i,a.R(e)),new ae$1(a,e)}for(a=V;0<=i.X(e);){for(s=Math.max(1,Math.floor(i.ea()/e.ea())),o=Math.ceil(Math.log(s)/Math.LN2),o=48>=o?1:Math.pow(2,o-48),c=U(s),h=c.R(e);X(h)||0<h.X(i);)s-=o,c=U(s),h=c.R(e);Y(c)&&(c=Wd),a=a.add(c),i=Zd(i,h)}return new ae$1(a,i)}k.gb=function(i){return Yd(this,i).h};k.and=function(i){for(var e=Math.max(this.g.length,i.g.length),s=[],o=0;o<e;o++)s[o]=this.D(o)&i.D(o);return new T(s,this.h&i.h)};k.or=function(i){for(var e=Math.max(this.g.length,i.g.length),s=[],o=0;o<e;o++)s[o]=this.D(o)|i.D(o);return new T(s,this.h|i.h)};k.xor=function(i){for(var e=Math.max(this.g.length,i.g.length),s=[],o=0;o<e;o++)s[o]=this.D(o)^i.D(o);return new T(s,this.h^i.h)};function be(i){for(var e=i.g.length+1,s=[],o=0;o<e;o++)s[o]=i.D(o)<<1|i.D(o-1)>>>31;return new T(s,i.h)}function Z(i,e){var s=e>>5;e%=32;for(var o=i.g.length-s,a=[],c=0;c<o;c++)a[c]=0<e?i.D(c+s)>>>e|i.D(c+s+1)<<32-e:i.D(c+s);return new T(a,i.h)}Od.prototype.createWebChannel=Od.prototype.g;Q.prototype.send=Q.prototype.u;Q.prototype.open=Q.prototype.m;Q.prototype.close=Q.prototype.close;Sb.NO_ERROR=0;Sb.TIMEOUT=8;Sb.HTTP_ERROR=6;Tb.COMPLETE="complete";Wb.EventType=Xb;Xb.OPEN="a";Xb.CLOSE="b";Xb.ERROR="c";Xb.MESSAGE="d";B.prototype.listen=B.prototype.O;P.prototype.listenOnce=P.prototype.P;P.prototype.getLastError=P.prototype.Sa;P.prototype.getLastErrorCode=P.prototype.Ia;P.prototype.getStatus=P.prototype.da;P.prototype.getResponseJson=P.prototype.Wa;P.prototype.getResponseText=P.prototype.ja;P.prototype.send=P.prototype.ha;P.prototype.setWithCredentials=P.prototype.Oa;S$1.prototype.digest=S$1.prototype.l;S$1.prototype.reset=S$1.prototype.reset;S$1.prototype.update=S$1.prototype.j;T.prototype.add=T.prototype.add;T.prototype.multiply=T.prototype.R;T.prototype.modulo=T.prototype.gb;T.prototype.compare=T.prototype.X;T.prototype.toNumber=T.prototype.ea;T.prototype.toString=T.prototype.toString;T.prototype.getBits=T.prototype.D;T.fromNumber=U;T.fromString=Vd;var createWebChannelTransport=function(){return new Od},getStatEventTarget=function(){return Mb()},ErrorCode$1=Sb,EventType=Tb,Event$1=E,Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},WebChannel=Wb,XhrIo=P,Md5=S$1,Integer=T;const w="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class User{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}User.UNAUTHENTICATED=new User(null),User.GOOGLE_CREDENTIALS=new User("google-credentials-uid"),User.FIRST_PARTY=new User("first-party-uid"),User.MOCK_USER=new User("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let S="10.8.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b=new Logger("@firebase/firestore");function __PRIVATE_getLogLevel(){return b.logLevel}function __PRIVATE_logDebug(i,...e){if(b.logLevel<=LogLevel.DEBUG){const s=e.map(__PRIVATE_argToString);b.debug(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_logError(i,...e){if(b.logLevel<=LogLevel.ERROR){const s=e.map(__PRIVATE_argToString);b.error(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_logWarn(i,...e){if(b.logLevel<=LogLevel.WARN){const s=e.map(__PRIVATE_argToString);b.warn(`Firestore (${S}): ${i}`,...s)}}function __PRIVATE_argToString(i){if(typeof i=="string")return i;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(s){return JSON.stringify(s)}(i)}catch{return i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fail(i="Unexpected state"){const e=`FIRESTORE (${S}) INTERNAL ASSERTION FAILED: `+i;throw __PRIVATE_logError(e),new Error(e)}function __PRIVATE_hardAssert(i,e){i||fail()}function __PRIVATE_debugCast(i,e){return i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class FirestoreError extends FirebaseError{constructor(e,s){super(e,s),this.code=e,this.message=s,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Deferred{constructor(){this.promise=new Promise((e,s)=>{this.resolve=e,this.reject=s})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_OAuthToken{constructor(e,s){this.user=s,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class __PRIVATE_EmptyAuthCredentialsProvider{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,s){e.enqueueRetryable(()=>s(User.UNAUTHENTICATED))}shutdown(){}}class __PRIVATE_EmulatorAuthCredentialsProvider{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,s){this.changeListener=s,e.enqueueRetryable(()=>s(this.token.user))}shutdown(){this.changeListener=null}}class __PRIVATE_FirebaseAuthCredentialsProvider{constructor(e){this.t=e,this.currentUser=User.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,s){let o=this.i;const a=$=>this.i!==o?(o=this.i,s($)):Promise.resolve();let c=new __PRIVATE_Deferred;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new __PRIVATE_Deferred,e.enqueueRetryable(()=>a(this.currentUser))};const h=()=>{const $=c;e.enqueueRetryable(async()=>{await $.promise,await a(this.currentUser)})},_=$=>{__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=$,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit($=>_($)),setTimeout(()=>{if(!this.auth){const $=this.t.getImmediate({optional:!0});$?_($):(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new __PRIVATE_Deferred)}},0),h()}getToken(){const e=this.i,s=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(s).then(o=>this.i!==e?(__PRIVATE_logDebug("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(__PRIVATE_hardAssert(typeof o.accessToken=="string"),new __PRIVATE_OAuthToken(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return __PRIVATE_hardAssert(e===null||typeof e=="string"),new User(e)}}class __PRIVATE_FirstPartyToken{constructor(e,s,o){this.l=e,this.h=s,this.P=o,this.type="FirstParty",this.user=User.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class __PRIVATE_FirstPartyAuthCredentialsProvider{constructor(e,s,o){this.l=e,this.h=s,this.P=o}getToken(){return Promise.resolve(new __PRIVATE_FirstPartyToken(this.l,this.h,this.P))}start(e,s){e.enqueueRetryable(()=>s(User.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class AppCheckToken{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class __PRIVATE_FirebaseAppCheckTokenProvider{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,s){const o=c=>{c.error!=null&&__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${c.error.message}`);const h=c.token!==this.R;return this.R=c.token,__PRIVATE_logDebug("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?s(c.token):Promise.resolve()};this.o=c=>{e.enqueueRetryable(()=>o(c))};const a=c=>{__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=c,this.appCheck.addTokenListener(this.o)};this.A.onInit(c=>a(c)),setTimeout(()=>{if(!this.appCheck){const c=this.A.getImmediate({optional:!0});c?a(c):__PRIVATE_logDebug("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(s=>s?(__PRIVATE_hardAssert(typeof s.token=="string"),this.R=s.token,new AppCheckToken(s.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_randomBytes(i){const e=typeof self<"u"&&(self.crypto||self.msCrypto),s=new Uint8Array(i);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(s);else for(let o=0;o<i;o++)s[o]=Math.floor(256*Math.random());return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AutoId{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",s=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const a=__PRIVATE_randomBytes(40);for(let c=0;c<a.length;++c)o.length<20&&a[c]<s&&(o+=e.charAt(a[c]%e.length))}return o}}function __PRIVATE_primitiveComparator(i,e){return i<e?-1:i>e?1:0}function __PRIVATE_arrayEquals(i,e,s){return i.length===e.length&&i.every((o,a)=>s(o,e[a]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Timestamp{constructor(e,s){if(this.seconds=e,this.nanoseconds=s,s<0)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(s>=1e9)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+s);if(e<-62135596800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new FirestoreError(D.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Timestamp.fromMillis(Date.now())}static fromDate(e){return Timestamp.fromMillis(e.getTime())}static fromMillis(e){const s=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*s));return new Timestamp(s,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?__PRIVATE_primitiveComparator(this.nanoseconds,e.nanoseconds):__PRIVATE_primitiveComparator(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotVersion{constructor(e){this.timestamp=e}static fromTimestamp(e){return new SnapshotVersion(e)}static min(){return new SnapshotVersion(new Timestamp(0,0))}static max(){return new SnapshotVersion(new Timestamp(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BasePath{constructor(e,s,o){s===void 0?s=0:s>e.length&&fail(),o===void 0?o=e.length-s:o>e.length-s&&fail(),this.segments=e,this.offset=s,this.len=o}get length(){return this.len}isEqual(e){return BasePath.comparator(this,e)===0}child(e){const s=this.segments.slice(this.offset,this.limit());return e instanceof BasePath?e.forEach(o=>{s.push(o)}):s.push(e),this.construct(s)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let s=0;s<this.length;s++)if(this.get(s)!==e.get(s))return!1;return!0}forEach(e){for(let s=this.offset,o=this.limit();s<o;s++)e(this.segments[s])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,s){const o=Math.min(e.length,s.length);for(let a=0;a<o;a++){const c=e.get(a),h=s.get(a);if(c<h)return-1;if(c>h)return 1}return e.length<s.length?-1:e.length>s.length?1:0}}class ResourcePath extends BasePath{construct(e,s,o){return new ResourcePath(e,s,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const s=[];for(const o of e){if(o.indexOf("//")>=0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);s.push(...o.split("/").filter(a=>a.length>0))}return new ResourcePath(s)}static emptyPath(){return new ResourcePath([])}}const C=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class FieldPath$1 extends BasePath{construct(e,s,o){return new FieldPath$1(e,s,o)}static isValidIdentifier(e){return C.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),FieldPath$1.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new FieldPath$1(["__name__"])}static fromServerFormat(e){const s=[];let o="",a=0;const c=()=>{if(o.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);s.push(o),o=""};let h=!1;for(;a<e.length;){const _=e[a];if(_==="\\"){if(a+1===e.length)throw new FirestoreError(D.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const $=e[a+1];if($!=="\\"&&$!=="."&&$!=="`")throw new FirestoreError(D.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=$,a+=2}else _==="`"?(h=!h,a++):_!=="."||h?(o+=_,a++):(c(),a++)}if(c(),h)throw new FirestoreError(D.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new FieldPath$1(s)}static emptyPath(){return new FieldPath$1([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentKey{constructor(e){this.path=e}static fromPath(e){return new DocumentKey(ResourcePath.fromString(e))}static fromName(e){return new DocumentKey(ResourcePath.fromString(e).popFirst(5))}static empty(){return new DocumentKey(ResourcePath.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ResourcePath.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,s){return ResourcePath.comparator(e.path,s.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new DocumentKey(new ResourcePath(e.slice()))}}function __PRIVATE_newIndexOffsetSuccessorFromReadTime(i,e){const s=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,a=SnapshotVersion.fromTimestamp(o===1e9?new Timestamp(s+1,0):new Timestamp(s,o));return new IndexOffset(a,DocumentKey.empty(),e)}function __PRIVATE_newIndexOffsetFromDocument(i){return new IndexOffset(i.readTime,i.key,-1)}class IndexOffset{constructor(e,s,o){this.readTime=e,this.documentKey=s,this.largestBatchId=o}static min(){return new IndexOffset(SnapshotVersion.min(),DocumentKey.empty(),-1)}static max(){return new IndexOffset(SnapshotVersion.max(),DocumentKey.empty(),-1)}}function __PRIVATE_indexOffsetComparator(i,e){let s=i.readTime.compareTo(e.readTime);return s!==0?s:(s=DocumentKey.comparator(i.documentKey,e.documentKey),s!==0?s:__PRIVATE_primitiveComparator(i.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class PersistenceTransaction{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function __PRIVATE_ignoreIfPrimaryLeaseLoss(i){if(i.code!==D.FAILED_PRECONDITION||i.message!==v)throw i;__PRIVATE_logDebug("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PersistencePromise{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(s=>{this.isDone=!0,this.result=s,this.nextCallback&&this.nextCallback(s)},s=>{this.isDone=!0,this.error=s,this.catchCallback&&this.catchCallback(s)})}catch(e){return this.next(void 0,e)}next(e,s){return this.callbackAttached&&fail(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(s,this.error):this.wrapSuccess(e,this.result):new PersistencePromise((o,a)=>{this.nextCallback=c=>{this.wrapSuccess(e,c).next(o,a)},this.catchCallback=c=>{this.wrapFailure(s,c).next(o,a)}})}toPromise(){return new Promise((e,s)=>{this.next(e,s)})}wrapUserFunction(e){try{const s=e();return s instanceof PersistencePromise?s:PersistencePromise.resolve(s)}catch(s){return PersistencePromise.reject(s)}}wrapSuccess(e,s){return e?this.wrapUserFunction(()=>e(s)):PersistencePromise.resolve(s)}wrapFailure(e,s){return e?this.wrapUserFunction(()=>e(s)):PersistencePromise.reject(s)}static resolve(e){return new PersistencePromise((s,o)=>{s(e)})}static reject(e){return new PersistencePromise((s,o)=>{o(e)})}static waitFor(e){return new PersistencePromise((s,o)=>{let a=0,c=0,h=!1;e.forEach(_=>{++a,_.next(()=>{++c,h&&c===a&&s()},$=>o($))}),h=!0,c===a&&s()})}static or(e){let s=PersistencePromise.resolve(!1);for(const o of e)s=s.next(a=>a?PersistencePromise.resolve(a):o());return s}static forEach(e,s){const o=[];return e.forEach((a,c)=>{o.push(s.call(this,a,c))}),this.waitFor(o)}static mapArray(e,s){return new PersistencePromise((o,a)=>{const c=e.length,h=new Array(c);let _=0;for(let $=0;$<c;$++){const g=$;s(e[g]).next(d=>{h[g]=d,++_,_===c&&o(h)},d=>a(d))}})}static doWhile(e,s){return new PersistencePromise((o,a)=>{const c=()=>{e()===!0?s().next(()=>{c()},a):o()};c()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_SimpleDbTransaction{constructor(e,s){this.action=e,this.transaction=s,this.aborted=!1,this.V=new __PRIVATE_Deferred,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{s.error?this.V.reject(new __PRIVATE_IndexedDbTransactionError(e,s.error)):this.V.resolve()},this.transaction.onerror=o=>{const a=__PRIVATE_checkForAndReportiOSError(o.target.error);this.V.reject(new __PRIVATE_IndexedDbTransactionError(e,a))}}static open(e,s,o,a){try{return new __PRIVATE_SimpleDbTransaction(s,e.transaction(a,o))}catch(c){throw new __PRIVATE_IndexedDbTransactionError(s,c)}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(__PRIVATE_logDebug("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||typeof e.commit!="function"||e.commit()}store(e){const s=this.transaction.objectStore(e);return new __PRIVATE_SimpleDbStore(s)}}class __PRIVATE_SimpleDb{constructor(e,s,o){this.name=e,this.version=s,this.p=o,__PRIVATE_SimpleDb.S(getUA())===12.2&&__PRIVATE_logError("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return __PRIVATE_logDebug("SimpleDb","Removing database:",e),__PRIVATE_wrapRequest(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!isIndexedDBAvailable())return!1;if(__PRIVATE_SimpleDb.C())return!0;const e=getUA(),s=__PRIVATE_SimpleDb.S(e),o=0<s&&s<10,a=__PRIVATE_SimpleDb.v(e),c=0<a&&a<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||c)}static C(){var e;return typeof process<"u"&&((e=process.__PRIVATE_env)===null||e===void 0?void 0:e.F)==="YES"}static M(e,s){return e.store(s)}static S(e){const s=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=s?s[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static v(e){const s=e.match(/Android ([\d.]+)/i),o=s?s[1].split(".").slice(0,2).join("."):"-1";return Number(o)}async O(e){return this.db||(__PRIVATE_logDebug("SimpleDb","Opening database:",this.name),this.db=await new Promise((s,o)=>{const a=indexedDB.open(this.name,this.version);a.onsuccess=c=>{const h=c.target.result;s(h)},a.onblocked=()=>{o(new __PRIVATE_IndexedDbTransactionError(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},a.onerror=c=>{const h=c.target.error;h.name==="VersionError"?o(new FirestoreError(D.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?o(new FirestoreError(D.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):o(new __PRIVATE_IndexedDbTransactionError(e,h))},a.onupgradeneeded=c=>{__PRIVATE_logDebug("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',c.oldVersion);const h=c.target.result;this.p.N(h,a.transaction,c.oldVersion,this.version).next(()=>{__PRIVATE_logDebug("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.B&&(this.db.onversionchange=s=>this.B(s)),this.db}L(e){this.B=e,this.db&&(this.db.onversionchange=s=>e(s))}async runTransaction(e,s,o,a){const c=s==="readonly";let h=0;for(;;){++h;try{this.db=await this.O(e);const _=__PRIVATE_SimpleDbTransaction.open(this.db,e,c?"readonly":"readwrite",o),$=a(_).next(g=>(_.g(),g)).catch(g=>(_.abort(g),PersistencePromise.reject(g))).toPromise();return $.catch(()=>{}),await _.m,$}catch(_){const $=_,g=$.name!=="FirebaseError"&&h<3;if(__PRIVATE_logDebug("SimpleDb","Transaction failed with error:",$.message,"Retrying:",g),this.close(),!g)return Promise.reject($)}}}close(){this.db&&this.db.close(),this.db=void 0}}class __PRIVATE_IterationController{constructor(e){this.k=e,this.q=!1,this.K=null}get isDone(){return this.q}get $(){return this.K}set cursor(e){this.k=e}done(){this.q=!0}U(e){this.K=e}delete(){return __PRIVATE_wrapRequest(this.k.delete())}}class __PRIVATE_IndexedDbTransactionError extends FirestoreError{constructor(e,s){super(D.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${s}`),this.name="IndexedDbTransactionError"}}function __PRIVATE_isIndexedDbTransactionError(i){return i.name==="IndexedDbTransactionError"}class __PRIVATE_SimpleDbStore{constructor(e){this.store=e}put(e,s){let o;return s!==void 0?(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,e,s),o=this.store.put(s,e)):(__PRIVATE_logDebug("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),__PRIVATE_wrapRequest(o)}add(e){return __PRIVATE_logDebug("SimpleDb","ADD",this.store.name,e,e),__PRIVATE_wrapRequest(this.store.add(e))}get(e){return __PRIVATE_wrapRequest(this.store.get(e)).next(s=>(s===void 0&&(s=null),__PRIVATE_logDebug("SimpleDb","GET",this.store.name,e,s),s))}delete(e){return __PRIVATE_logDebug("SimpleDb","DELETE",this.store.name,e),__PRIVATE_wrapRequest(this.store.delete(e))}count(){return __PRIVATE_logDebug("SimpleDb","COUNT",this.store.name),__PRIVATE_wrapRequest(this.store.count())}W(e,s){const o=this.options(e,s),a=o.index?this.store.index(o.index):this.store;if(typeof a.getAll=="function"){const c=a.getAll(o.range);return new PersistencePromise((h,_)=>{c.onerror=$=>{_($.target.error)},c.onsuccess=$=>{h($.target.result)}})}{const c=this.cursor(o),h=[];return this.G(c,(_,$)=>{h.push($)}).next(()=>h)}}j(e,s){const o=this.store.getAll(e,s===null?void 0:s);return new PersistencePromise((a,c)=>{o.onerror=h=>{c(h.target.error)},o.onsuccess=h=>{a(h.target.result)}})}H(e,s){__PRIVATE_logDebug("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,s);o.J=!1;const a=this.cursor(o);return this.G(a,(c,h,_)=>_.delete())}Y(e,s){let o;s?o=e:(o={},s=e);const a=this.cursor(o);return this.G(a,s)}Z(e){const s=this.cursor({});return new PersistencePromise((o,a)=>{s.onerror=c=>{const h=__PRIVATE_checkForAndReportiOSError(c.target.error);a(h)},s.onsuccess=c=>{const h=c.target.result;h?e(h.primaryKey,h.value).next(_=>{_?h.continue():o()}):o()}})}G(e,s){const o=[];return new PersistencePromise((a,c)=>{e.onerror=h=>{c(h.target.error)},e.onsuccess=h=>{const _=h.target.result;if(!_)return void a();const $=new __PRIVATE_IterationController(_),g=s(_.primaryKey,_.value,$);if(g instanceof PersistencePromise){const d=g.catch(j=>($.done(),PersistencePromise.reject(j)));o.push(d)}$.isDone?a():$.$===null?_.continue():_.continue($.$)}}).next(()=>PersistencePromise.waitFor(o))}options(e,s){let o;return e!==void 0&&(typeof e=="string"?o=e:s=e),{index:o,range:s}}cursor(e){let s="next";if(e.reverse&&(s="prev"),e.index){const o=this.store.index(e.index);return e.J?o.openKeyCursor(e.range,s):o.openCursor(e.range,s)}return this.store.openCursor(e.range,s)}}function __PRIVATE_wrapRequest(i){return new PersistencePromise((e,s)=>{i.onsuccess=o=>{const a=o.target.result;e(a)},i.onerror=o=>{const a=__PRIVATE_checkForAndReportiOSError(o.target.error);s(a)}})}let F=!1;function __PRIVATE_checkForAndReportiOSError(i){const e=__PRIVATE_SimpleDb.S(getUA());if(e>=12.2&&e<13){const s="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(s)>=0){const o=new FirestoreError("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${s}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return F||(F=!0,setTimeout(()=>{throw o},0)),o}}return i}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ListenSequence{constructor(e,s){this.previousValue=e,s&&(s.sequenceNumberHandler=o=>this.se(o),this.oe=o=>s.writeSequenceNumber(o))}se(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.oe&&this.oe(e),e}}__PRIVATE_ListenSequence._e=-1;function __PRIVATE_isNullOrUndefined(i){return i==null}function __PRIVATE_isNegativeZero(i){return i===0&&1/i==-1/0}function isSafeInteger(i){return typeof i=="number"&&Number.isInteger(i)&&!__PRIVATE_isNegativeZero(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_objectSize(i){let e=0;for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e++;return e}function forEach(i,e){for(const s in i)Object.prototype.hasOwnProperty.call(i,s)&&e(s,i[s])}function isEmpty(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedMap{constructor(e,s){this.comparator=e,this.root=s||LLRBNode.EMPTY}insert(e,s){return new SortedMap(this.comparator,this.root.insert(e,s,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}remove(e){return new SortedMap(this.comparator,this.root.remove(e,this.comparator).copy(null,null,LLRBNode.BLACK,null,null))}get(e){let s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return s.value;o<0?s=s.left:o>0&&(s=s.right)}return null}indexOf(e){let s=0,o=this.root;for(;!o.isEmpty();){const a=this.comparator(e,o.key);if(a===0)return s+o.left.size;a<0?o=o.left:(s+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((s,o)=>(e(s,o),!1))}toString(){const e=[];return this.inorderTraversal((s,o)=>(e.push(`${s}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new SortedMapIterator(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!1)}getReverseIterator(){return new SortedMapIterator(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new SortedMapIterator(this.root,e,this.comparator,!0)}}class SortedMapIterator{constructor(e,s,o,a){this.isReverse=a,this.nodeStack=[];let c=1;for(;!e.isEmpty();)if(c=s?o(e.key,s):1,s&&a&&(c*=-1),c<0)e=this.isReverse?e.left:e.right;else{if(c===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const s={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return s}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class LLRBNode{constructor(e,s,o,a,c){this.key=e,this.value=s,this.color=o??LLRBNode.RED,this.left=a??LLRBNode.EMPTY,this.right=c??LLRBNode.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,s,o,a,c){return new LLRBNode(e??this.key,s??this.value,o??this.color,a??this.left,c??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,s,o){let a=this;const c=o(e,a.key);return a=c<0?a.copy(null,null,null,a.left.insert(e,s,o),null):c===0?a.copy(null,s,null,null,null):a.copy(null,null,null,null,a.right.insert(e,s,o)),a.fixUp()}removeMin(){if(this.left.isEmpty())return LLRBNode.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,s){let o,a=this;if(s(e,a.key)<0)a.left.isEmpty()||a.left.isRed()||a.left.left.isRed()||(a=a.moveRedLeft()),a=a.copy(null,null,null,a.left.remove(e,s),null);else{if(a.left.isRed()&&(a=a.rotateRight()),a.right.isEmpty()||a.right.isRed()||a.right.left.isRed()||(a=a.moveRedRight()),s(e,a.key)===0){if(a.right.isEmpty())return LLRBNode.EMPTY;o=a.right.min(),a=a.copy(o.key,o.value,null,null,a.right.removeMin())}a=a.copy(null,null,null,null,a.right.remove(e,s))}return a.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,LLRBNode.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,LLRBNode.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),s=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,s)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw fail();const e=this.left.check();if(e!==this.right.check())throw fail();return e+(this.isRed()?0:1)}}LLRBNode.EMPTY=null,LLRBNode.RED=!0,LLRBNode.BLACK=!1;LLRBNode.EMPTY=new class{constructor(){this.size=0}get key(){throw fail()}get value(){throw fail()}get color(){throw fail()}get left(){throw fail()}get right(){throw fail()}copy(e,s,o,a,c){return this}insert(e,s,o){return new LLRBNode(e,s)}remove(e,s){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SortedSet{constructor(e){this.comparator=e,this.data=new SortedMap(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((s,o)=>(e(s),!1))}forEachInRange(e,s){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const a=o.getNext();if(this.comparator(a.key,e[1])>=0)return;s(a.key)}}forEachWhile(e,s){let o;for(o=s!==void 0?this.data.getIteratorFrom(s):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const s=this.data.getIteratorFrom(e);return s.hasNext()?s.getNext().key:null}getIterator(){return new SortedSetIterator(this.data.getIterator())}getIteratorFrom(e){return new SortedSetIterator(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let s=this;return s.size<e.size&&(s=e,e=this),e.forEach(o=>{s=s.add(o)}),s}isEqual(e){if(!(e instanceof SortedSet)||this.size!==e.size)return!1;const s=this.data.getIterator(),o=e.data.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(this.comparator(a,c)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(s=>{e.push(s)}),e}toString(){const e=[];return this.forEach(s=>e.push(s)),"SortedSet("+e.toString()+")"}copy(e){const s=new SortedSet(this.comparator);return s.data=e,s}}class SortedSetIterator{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldMask{constructor(e){this.fields=e,e.sort(FieldPath$1.comparator)}static empty(){return new FieldMask([])}unionWith(e){let s=new SortedSet(FieldPath$1.comparator);for(const o of this.fields)s=s.add(o);for(const o of e)s=s.add(o);return new FieldMask(s.toArray())}covers(e){for(const s of this.fields)if(s.isPrefixOf(e))return!0;return!1}isEqual(e){return __PRIVATE_arrayEquals(this.fields,e.fields,(s,o)=>s.isEqual(o))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_Base64DecodeError extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ByteString{constructor(e){this.binaryString=e}static fromBase64String(e){const s=function(a){try{return atob(a)}catch(c){throw typeof DOMException<"u"&&c instanceof DOMException?new __PRIVATE_Base64DecodeError("Invalid base64 string: "+c):c}}(e);return new ByteString(s)}static fromUint8Array(e){const s=function(a){let c="";for(let h=0;h<a.length;++h)c+=String.fromCharCode(a[h]);return c}(e);return new ByteString(s)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(s){return btoa(s)}(this.binaryString)}toUint8Array(){return function(s){const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return __PRIVATE_primitiveComparator(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}ByteString.EMPTY_BYTE_STRING=new ByteString("");const ee=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function __PRIVATE_normalizeTimestamp(i){if(__PRIVATE_hardAssert(!!i),typeof i=="string"){let e=0;const s=ee.exec(i);if(__PRIVATE_hardAssert(!!s),s[1]){let a=s[1];a=(a+"000000000").substr(0,9),e=Number(a)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:__PRIVATE_normalizeNumber(i.seconds),nanos:__PRIVATE_normalizeNumber(i.nanos)}}function __PRIVATE_normalizeNumber(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function __PRIVATE_normalizeByteString(i){return typeof i=="string"?ByteString.fromBase64String(i):ByteString.fromUint8Array(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_isServerTimestamp(i){var e,s;return((s=(((e=i?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||s===void 0?void 0:s.stringValue)==="server_timestamp"}function __PRIVATE_getPreviousValue(i){const e=i.mapValue.fields.__previous_value__;return __PRIVATE_isServerTimestamp(e)?__PRIVATE_getPreviousValue(e):e}function __PRIVATE_getLocalWriteTime(i){const e=__PRIVATE_normalizeTimestamp(i.mapValue.fields.__local_write_time__.timestampValue);return new Timestamp(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DatabaseInfo{constructor(e,s,o,a,c,h,_,$,g){this.databaseId=e,this.appId=s,this.persistenceKey=o,this.host=a,this.ssl=c,this.forceLongPolling=h,this.autoDetectLongPolling=_,this.longPollingOptions=$,this.useFetchStreams=g}}class DatabaseId{constructor(e,s){this.projectId=e,this.database=s||"(default)"}static empty(){return new DatabaseId("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof DatabaseId&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function __PRIVATE_typeOrder(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?__PRIVATE_isServerTimestamp(i)?4:__PRIVATE_isMaxValue(i)?9007199254740991:10:fail()}function __PRIVATE_valueEquals(i,e){if(i===e)return!0;const s=__PRIVATE_typeOrder(i);if(s!==__PRIVATE_typeOrder(e))return!1;switch(s){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return __PRIVATE_getLocalWriteTime(i).isEqual(__PRIVATE_getLocalWriteTime(e));case 3:return function(a,c){if(typeof a.timestampValue=="string"&&typeof c.timestampValue=="string"&&a.timestampValue.length===c.timestampValue.length)return a.timestampValue===c.timestampValue;const h=__PRIVATE_normalizeTimestamp(a.timestampValue),_=__PRIVATE_normalizeTimestamp(c.timestampValue);return h.seconds===_.seconds&&h.nanos===_.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return function(a,c){return __PRIVATE_normalizeByteString(a.bytesValue).isEqual(__PRIVATE_normalizeByteString(c.bytesValue))}(i,e);case 7:return i.referenceValue===e.referenceValue;case 8:return function(a,c){return __PRIVATE_normalizeNumber(a.geoPointValue.latitude)===__PRIVATE_normalizeNumber(c.geoPointValue.latitude)&&__PRIVATE_normalizeNumber(a.geoPointValue.longitude)===__PRIVATE_normalizeNumber(c.geoPointValue.longitude)}(i,e);case 2:return function(a,c){if("integerValue"in a&&"integerValue"in c)return __PRIVATE_normalizeNumber(a.integerValue)===__PRIVATE_normalizeNumber(c.integerValue);if("doubleValue"in a&&"doubleValue"in c){const h=__PRIVATE_normalizeNumber(a.doubleValue),_=__PRIVATE_normalizeNumber(c.doubleValue);return h===_?__PRIVATE_isNegativeZero(h)===__PRIVATE_isNegativeZero(_):isNaN(h)&&isNaN(_)}return!1}(i,e);case 9:return __PRIVATE_arrayEquals(i.arrayValue.values||[],e.arrayValue.values||[],__PRIVATE_valueEquals);case 10:return function(a,c){const h=a.mapValue.fields||{},_=c.mapValue.fields||{};if(__PRIVATE_objectSize(h)!==__PRIVATE_objectSize(_))return!1;for(const $ in h)if(h.hasOwnProperty($)&&(_[$]===void 0||!__PRIVATE_valueEquals(h[$],_[$])))return!1;return!0}(i,e);default:return fail()}}function __PRIVATE_arrayValueContains(i,e){return(i.values||[]).find(s=>__PRIVATE_valueEquals(s,e))!==void 0}function __PRIVATE_valueCompare(i,e){if(i===e)return 0;const s=__PRIVATE_typeOrder(i),o=__PRIVATE_typeOrder(e);if(s!==o)return __PRIVATE_primitiveComparator(s,o);switch(s){case 0:case 9007199254740991:return 0;case 1:return __PRIVATE_primitiveComparator(i.booleanValue,e.booleanValue);case 2:return function(c,h){const _=__PRIVATE_normalizeNumber(c.integerValue||c.doubleValue),$=__PRIVATE_normalizeNumber(h.integerValue||h.doubleValue);return _<$?-1:_>$?1:_===$?0:isNaN(_)?isNaN($)?0:-1:1}(i,e);case 3:return __PRIVATE_compareTimestamps(i.timestampValue,e.timestampValue);case 4:return __PRIVATE_compareTimestamps(__PRIVATE_getLocalWriteTime(i),__PRIVATE_getLocalWriteTime(e));case 5:return __PRIVATE_primitiveComparator(i.stringValue,e.stringValue);case 6:return function(c,h){const _=__PRIVATE_normalizeByteString(c),$=__PRIVATE_normalizeByteString(h);return _.compareTo($)}(i.bytesValue,e.bytesValue);case 7:return function(c,h){const _=c.split("/"),$=h.split("/");for(let g=0;g<_.length&&g<$.length;g++){const d=__PRIVATE_primitiveComparator(_[g],$[g]);if(d!==0)return d}return __PRIVATE_primitiveComparator(_.length,$.length)}(i.referenceValue,e.referenceValue);case 8:return function(c,h){const _=__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.latitude),__PRIVATE_normalizeNumber(h.latitude));return _!==0?_:__PRIVATE_primitiveComparator(__PRIVATE_normalizeNumber(c.longitude),__PRIVATE_normalizeNumber(h.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(c,h){const _=c.values||[],$=h.values||[];for(let g=0;g<_.length&&g<$.length;++g){const d=__PRIVATE_valueCompare(_[g],$[g]);if(d)return d}return __PRIVATE_primitiveComparator(_.length,$.length)}(i.arrayValue,e.arrayValue);case 10:return function(c,h){if(c===te.mapValue&&h===te.mapValue)return 0;if(c===te.mapValue)return 1;if(h===te.mapValue)return-1;const _=c.fields||{},$=Object.keys(_),g=h.fields||{},d=Object.keys(g);$.sort(),d.sort();for(let j=0;j<$.length&&j<d.length;++j){const tt=__PRIVATE_primitiveComparator($[j],d[j]);if(tt!==0)return tt;const rt=__PRIVATE_valueCompare(_[$[j]],g[d[j]]);if(rt!==0)return rt}return __PRIVATE_primitiveComparator($.length,d.length)}(i.mapValue,e.mapValue);default:throw fail()}}function __PRIVATE_compareTimestamps(i,e){if(typeof i=="string"&&typeof e=="string"&&i.length===e.length)return __PRIVATE_primitiveComparator(i,e);const s=__PRIVATE_normalizeTimestamp(i),o=__PRIVATE_normalizeTimestamp(e),a=__PRIVATE_primitiveComparator(s.seconds,o.seconds);return a!==0?a:__PRIVATE_primitiveComparator(s.nanos,o.nanos)}function canonicalId(i){return __PRIVATE_canonifyValue(i)}function __PRIVATE_canonifyValue(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(s){const o=__PRIVATE_normalizeTimestamp(s);return`time(${o.seconds},${o.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?function(s){return __PRIVATE_normalizeByteString(s).toBase64()}(i.bytesValue):"referenceValue"in i?function(s){return DocumentKey.fromName(s).toString()}(i.referenceValue):"geoPointValue"in i?function(s){return`geo(${s.latitude},${s.longitude})`}(i.geoPointValue):"arrayValue"in i?function(s){let o="[",a=!0;for(const c of s.values||[])a?a=!1:o+=",",o+=__PRIVATE_canonifyValue(c);return o+"]"}(i.arrayValue):"mapValue"in i?function(s){const o=Object.keys(s.fields||{}).sort();let a="{",c=!0;for(const h of o)c?c=!1:a+=",",a+=`${h}:${__PRIVATE_canonifyValue(s.fields[h])}`;return a+"}"}(i.mapValue):fail()}function __PRIVATE_refValue(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function isInteger(i){return!!i&&"integerValue"in i}function isArray(i){return!!i&&"arrayValue"in i}function __PRIVATE_isNullValue(i){return!!i&&"nullValue"in i}function __PRIVATE_isNanValue(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function __PRIVATE_isMapValue(i){return!!i&&"mapValue"in i}function __PRIVATE_deepClone(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return forEach(i.mapValue.fields,(s,o)=>e.mapValue.fields[s]=__PRIVATE_deepClone(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let s=0;s<(i.arrayValue.values||[]).length;++s)e.arrayValue.values[s]=__PRIVATE_deepClone(i.arrayValue.values[s]);return e}return Object.assign({},i)}function __PRIVATE_isMaxValue(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectValue{constructor(e){this.value=e}static empty(){return new ObjectValue({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let s=this.value;for(let o=0;o<e.length-1;++o)if(s=(s.mapValue.fields||{})[e.get(o)],!__PRIVATE_isMapValue(s))return null;return s=(s.mapValue.fields||{})[e.lastSegment()],s||null}}set(e,s){this.getFieldsMap(e.popLast())[e.lastSegment()]=__PRIVATE_deepClone(s)}setAll(e){let s=FieldPath$1.emptyPath(),o={},a=[];e.forEach((h,_)=>{if(!s.isImmediateParentOf(_)){const $=this.getFieldsMap(s);this.applyChanges($,o,a),o={},a=[],s=_.popLast()}h?o[_.lastSegment()]=__PRIVATE_deepClone(h):a.push(_.lastSegment())});const c=this.getFieldsMap(s);this.applyChanges(c,o,a)}delete(e){const s=this.field(e.popLast());__PRIVATE_isMapValue(s)&&s.mapValue.fields&&delete s.mapValue.fields[e.lastSegment()]}isEqual(e){return __PRIVATE_valueEquals(this.value,e.value)}getFieldsMap(e){let s=this.value;s.mapValue.fields||(s.mapValue={fields:{}});for(let o=0;o<e.length;++o){let a=s.mapValue.fields[e.get(o)];__PRIVATE_isMapValue(a)&&a.mapValue.fields||(a={mapValue:{fields:{}}},s.mapValue.fields[e.get(o)]=a),s=a}return s.mapValue.fields}applyChanges(e,s,o){forEach(s,(a,c)=>e[a]=c);for(const a of o)delete e[a]}clone(){return new ObjectValue(__PRIVATE_deepClone(this.value))}}function __PRIVATE_extractFieldMask(i){const e=[];return forEach(i.fields,(s,o)=>{const a=new FieldPath$1([s]);if(__PRIVATE_isMapValue(o)){const c=__PRIVATE_extractFieldMask(o.mapValue).fields;if(c.length===0)e.push(a);else for(const h of c)e.push(a.child(h))}else e.push(a)}),new FieldMask(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutableDocument{constructor(e,s,o,a,c,h,_){this.key=e,this.documentType=s,this.version=o,this.readTime=a,this.createTime=c,this.data=h,this.documentState=_}static newInvalidDocument(e){return new MutableDocument(e,0,SnapshotVersion.min(),SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newFoundDocument(e,s,o,a){return new MutableDocument(e,1,s,SnapshotVersion.min(),o,a,0)}static newNoDocument(e,s){return new MutableDocument(e,2,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),0)}static newUnknownDocument(e,s){return new MutableDocument(e,3,s,SnapshotVersion.min(),SnapshotVersion.min(),ObjectValue.empty(),2)}convertToFoundDocument(e,s){return!this.createTime.isEqual(SnapshotVersion.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=s,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ObjectValue.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ObjectValue.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=SnapshotVersion.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof MutableDocument&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new MutableDocument(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bound{constructor(e,s){this.position=e,this.inclusive=s}}function __PRIVATE_boundCompareToDocument(i,e,s){let o=0;for(let a=0;a<i.position.length;a++){const c=e[a],h=i.position[a];if(c.field.isKeyField()?o=DocumentKey.comparator(DocumentKey.fromName(h.referenceValue),s.key):o=__PRIVATE_valueCompare(h,s.data.field(c.field)),c.dir==="desc"&&(o*=-1),o!==0)break}return o}function __PRIVATE_boundEquals(i,e){if(i===null)return e===null;if(e===null||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let s=0;s<i.position.length;s++)if(!__PRIVATE_valueEquals(i.position[s],e.position[s]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OrderBy{constructor(e,s="asc"){this.field=e,this.dir=s}}function __PRIVATE_orderByEquals(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Filter{}class FieldFilter extends Filter{constructor(e,s,o){super(),this.field=e,this.op=s,this.value=o}static create(e,s,o){return e.isKeyField()?s==="in"||s==="not-in"?this.createKeyFieldInFilter(e,s,o):new __PRIVATE_KeyFieldFilter(e,s,o):s==="array-contains"?new __PRIVATE_ArrayContainsFilter(e,o):s==="in"?new __PRIVATE_InFilter(e,o):s==="not-in"?new __PRIVATE_NotInFilter(e,o):s==="array-contains-any"?new __PRIVATE_ArrayContainsAnyFilter(e,o):new FieldFilter(e,s,o)}static createKeyFieldInFilter(e,s,o){return s==="in"?new __PRIVATE_KeyFieldInFilter(e,o):new __PRIVATE_KeyFieldNotInFilter(e,o)}matches(e){const s=e.data.field(this.field);return this.op==="!="?s!==null&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value)):s!==null&&__PRIVATE_typeOrder(this.value)===__PRIVATE_typeOrder(s)&&this.matchesComparison(__PRIVATE_valueCompare(s,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return fail()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class CompositeFilter extends Filter{constructor(e,s){super(),this.filters=e,this.op=s,this.ue=null}static create(e,s){return new CompositeFilter(e,s)}matches(e){return __PRIVATE_compositeFilterIsConjunction(this)?this.filters.find(s=>!s.matches(e))===void 0:this.filters.find(s=>s.matches(e))!==void 0}getFlattenedFilters(){return this.ue!==null||(this.ue=this.filters.reduce((e,s)=>e.concat(s.getFlattenedFilters()),[])),this.ue}getFilters(){return Object.assign([],this.filters)}}function __PRIVATE_compositeFilterIsConjunction(i){return i.op==="and"}function __PRIVATE_compositeFilterIsFlatConjunction(i){return __PRIVATE_compositeFilterIsFlat(i)&&__PRIVATE_compositeFilterIsConjunction(i)}function __PRIVATE_compositeFilterIsFlat(i){for(const e of i.filters)if(e instanceof CompositeFilter)return!1;return!0}function __PRIVATE_canonifyFilter(i){if(i instanceof FieldFilter)return i.field.canonicalString()+i.op.toString()+canonicalId(i.value);if(__PRIVATE_compositeFilterIsFlatConjunction(i))return i.filters.map(e=>__PRIVATE_canonifyFilter(e)).join(",");{const e=i.filters.map(s=>__PRIVATE_canonifyFilter(s)).join(",");return`${i.op}(${e})`}}function __PRIVATE_filterEquals(i,e){return i instanceof FieldFilter?function(o,a){return a instanceof FieldFilter&&o.op===a.op&&o.field.isEqual(a.field)&&__PRIVATE_valueEquals(o.value,a.value)}(i,e):i instanceof CompositeFilter?function(o,a){return a instanceof CompositeFilter&&o.op===a.op&&o.filters.length===a.filters.length?o.filters.reduce((c,h,_)=>c&&__PRIVATE_filterEquals(h,a.filters[_]),!0):!1}(i,e):void fail()}function __PRIVATE_stringifyFilter(i){return i instanceof FieldFilter?function(s){return`${s.field.canonicalString()} ${s.op} ${canonicalId(s.value)}`}(i):i instanceof CompositeFilter?function(s){return s.op.toString()+" {"+s.getFilters().map(__PRIVATE_stringifyFilter).join(" ,")+"}"}(i):"Filter"}class __PRIVATE_KeyFieldFilter extends FieldFilter{constructor(e,s,o){super(e,s,o),this.key=DocumentKey.fromName(o.referenceValue)}matches(e){const s=DocumentKey.comparator(e.key,this.key);return this.matchesComparison(s)}}class __PRIVATE_KeyFieldInFilter extends FieldFilter{constructor(e,s){super(e,"in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("in",s)}matches(e){return this.keys.some(s=>s.isEqual(e.key))}}class __PRIVATE_KeyFieldNotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s),this.keys=__PRIVATE_extractDocumentKeysFromArrayValue("not-in",s)}matches(e){return!this.keys.some(s=>s.isEqual(e.key))}}function __PRIVATE_extractDocumentKeysFromArrayValue(i,e){var s;return(((s=e.arrayValue)===null||s===void 0?void 0:s.values)||[]).map(o=>DocumentKey.fromName(o.referenceValue))}class __PRIVATE_ArrayContainsFilter extends FieldFilter{constructor(e,s){super(e,"array-contains",s)}matches(e){const s=e.data.field(this.field);return isArray(s)&&__PRIVATE_arrayValueContains(s.arrayValue,this.value)}}class __PRIVATE_InFilter extends FieldFilter{constructor(e,s){super(e,"in",s)}matches(e){const s=e.data.field(this.field);return s!==null&&__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_NotInFilter extends FieldFilter{constructor(e,s){super(e,"not-in",s)}matches(e){if(__PRIVATE_arrayValueContains(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const s=e.data.field(this.field);return s!==null&&!__PRIVATE_arrayValueContains(this.value.arrayValue,s)}}class __PRIVATE_ArrayContainsAnyFilter extends FieldFilter{constructor(e,s){super(e,"array-contains-any",s)}matches(e){const s=e.data.field(this.field);return!(!isArray(s)||!s.arrayValue.values)&&s.arrayValue.values.some(o=>__PRIVATE_arrayValueContains(this.value.arrayValue,o))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetImpl{constructor(e,s=null,o=[],a=[],c=null,h=null,_=null){this.path=e,this.collectionGroup=s,this.orderBy=o,this.filters=a,this.limit=c,this.startAt=h,this.endAt=_,this.ce=null}}function __PRIVATE_newTarget(i,e=null,s=[],o=[],a=null,c=null,h=null){return new __PRIVATE_TargetImpl(i,e,s,o,a,c,h)}function __PRIVATE_canonifyTarget(i){const e=__PRIVATE_debugCast(i);if(e.ce===null){let s=e.path.canonicalString();e.collectionGroup!==null&&(s+="|cg:"+e.collectionGroup),s+="|f:",s+=e.filters.map(o=>__PRIVATE_canonifyFilter(o)).join(","),s+="|ob:",s+=e.orderBy.map(o=>function(c){return c.field.canonicalString()+c.dir}(o)).join(","),__PRIVATE_isNullOrUndefined(e.limit)||(s+="|l:",s+=e.limit),e.startAt&&(s+="|lb:",s+=e.startAt.inclusive?"b:":"a:",s+=e.startAt.position.map(o=>canonicalId(o)).join(",")),e.endAt&&(s+="|ub:",s+=e.endAt.inclusive?"a:":"b:",s+=e.endAt.position.map(o=>canonicalId(o)).join(",")),e.ce=s}return e.ce}function __PRIVATE_targetEquals(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let s=0;s<i.orderBy.length;s++)if(!__PRIVATE_orderByEquals(i.orderBy[s],e.orderBy[s]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let s=0;s<i.filters.length;s++)if(!__PRIVATE_filterEquals(i.filters[s],e.filters[s]))return!1;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!__PRIVATE_boundEquals(i.startAt,e.startAt)&&__PRIVATE_boundEquals(i.endAt,e.endAt)}function __PRIVATE_targetIsDocumentTarget(i){return DocumentKey.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryImpl{constructor(e,s=null,o=[],a=[],c=null,h="F",_=null,$=null){this.path=e,this.collectionGroup=s,this.explicitOrderBy=o,this.filters=a,this.limit=c,this.limitType=h,this.startAt=_,this.endAt=$,this.le=null,this.he=null,this.Pe=null,this.startAt,this.endAt}}function __PRIVATE_newQuery(i,e,s,o,a,c,h,_){return new __PRIVATE_QueryImpl(i,e,s,o,a,c,h,_)}function __PRIVATE_newQueryForPath(i){return new __PRIVATE_QueryImpl(i)}function __PRIVATE_queryMatchesAllDocuments(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function __PRIVATE_isCollectionGroupQuery(i){return i.collectionGroup!==null}function __PRIVATE_queryNormalizedOrderBy(i){const e=__PRIVATE_debugCast(i);if(e.le===null){e.le=[];const s=new Set;for(const c of e.explicitOrderBy)e.le.push(c),s.add(c.field.canonicalString());const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(h){let _=new SortedSet(FieldPath$1.comparator);return h.filters.forEach($=>{$.getFlattenedFilters().forEach(g=>{g.isInequality()&&(_=_.add(g.field))})}),_})(e).forEach(c=>{s.has(c.canonicalString())||c.isKeyField()||e.le.push(new OrderBy(c,o))}),s.has(FieldPath$1.keyField().canonicalString())||e.le.push(new OrderBy(FieldPath$1.keyField(),o))}return e.le}function __PRIVATE_queryToTarget(i){const e=__PRIVATE_debugCast(i);return e.he||(e.he=__PRIVATE__queryToTarget(e,__PRIVATE_queryNormalizedOrderBy(i))),e.he}function __PRIVATE__queryToTarget(i,e){if(i.limitType==="F")return __PRIVATE_newTarget(i.path,i.collectionGroup,e,i.filters,i.limit,i.startAt,i.endAt);{e=e.map(a=>{const c=a.dir==="desc"?"asc":"desc";return new OrderBy(a.field,c)});const s=i.endAt?new Bound(i.endAt.position,i.endAt.inclusive):null,o=i.startAt?new Bound(i.startAt.position,i.startAt.inclusive):null;return __PRIVATE_newTarget(i.path,i.collectionGroup,e,i.filters,i.limit,s,o)}}function __PRIVATE_queryWithAddedFilter(i,e){const s=i.filters.concat([e]);return new __PRIVATE_QueryImpl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),s,i.limit,i.limitType,i.startAt,i.endAt)}function __PRIVATE_queryWithLimit(i,e,s){return new __PRIVATE_QueryImpl(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,s,i.startAt,i.endAt)}function __PRIVATE_queryEquals(i,e){return __PRIVATE_targetEquals(__PRIVATE_queryToTarget(i),__PRIVATE_queryToTarget(e))&&i.limitType===e.limitType}function __PRIVATE_canonifyQuery(i){return`${__PRIVATE_canonifyTarget(__PRIVATE_queryToTarget(i))}|lt:${i.limitType}`}function __PRIVATE_stringifyQuery(i){return`Query(target=${function(s){let o=s.path.canonicalString();return s.collectionGroup!==null&&(o+=" collectionGroup="+s.collectionGroup),s.filters.length>0&&(o+=`, filters: [${s.filters.map(a=>__PRIVATE_stringifyFilter(a)).join(", ")}]`),__PRIVATE_isNullOrUndefined(s.limit)||(o+=", limit: "+s.limit),s.orderBy.length>0&&(o+=`, orderBy: [${s.orderBy.map(a=>function(h){return`${h.field.canonicalString()} (${h.dir})`}(a)).join(", ")}]`),s.startAt&&(o+=", startAt: ",o+=s.startAt.inclusive?"b:":"a:",o+=s.startAt.position.map(a=>canonicalId(a)).join(",")),s.endAt&&(o+=", endAt: ",o+=s.endAt.inclusive?"a:":"b:",o+=s.endAt.position.map(a=>canonicalId(a)).join(",")),`Target(${o})`}(__PRIVATE_queryToTarget(i))}; limitType=${i.limitType})`}function __PRIVATE_queryMatches(i,e){return e.isFoundDocument()&&function(o,a){const c=a.key.path;return o.collectionGroup!==null?a.key.hasCollectionId(o.collectionGroup)&&o.path.isPrefixOf(c):DocumentKey.isDocumentKey(o.path)?o.path.isEqual(c):o.path.isImmediateParentOf(c)}(i,e)&&function(o,a){for(const c of __PRIVATE_queryNormalizedOrderBy(o))if(!c.field.isKeyField()&&a.data.field(c.field)===null)return!1;return!0}(i,e)&&function(o,a){for(const c of o.filters)if(!c.matches(a))return!1;return!0}(i,e)&&function(o,a){return!(o.startAt&&!function(h,_,$){const g=__PRIVATE_boundCompareToDocument(h,_,$);return h.inclusive?g<=0:g<0}(o.startAt,__PRIVATE_queryNormalizedOrderBy(o),a)||o.endAt&&!function(h,_,$){const g=__PRIVATE_boundCompareToDocument(h,_,$);return h.inclusive?g>=0:g>0}(o.endAt,__PRIVATE_queryNormalizedOrderBy(o),a))}(i,e)}function __PRIVATE_queryCollectionGroup(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function __PRIVATE_newQueryComparator(i){return(e,s)=>{let o=!1;for(const a of __PRIVATE_queryNormalizedOrderBy(i)){const c=__PRIVATE_compareDocs(a,e,s);if(c!==0)return c;o=o||a.field.isKeyField()}return 0}}function __PRIVATE_compareDocs(i,e,s){const o=i.field.isKeyField()?DocumentKey.comparator(e.key,s.key):function(c,h,_){const $=h.data.field(c),g=_.data.field(c);return $!==null&&g!==null?__PRIVATE_valueCompare($,g):fail()}(i.field,e,s);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return fail()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ObjectMap{constructor(e,s){this.mapKeyFn=e,this.equalsFn=s,this.inner={},this.innerSize=0}get(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o!==void 0){for(const[a,c]of o)if(this.equalsFn(a,e))return c}}has(e){return this.get(e)!==void 0}set(e,s){const o=this.mapKeyFn(e),a=this.inner[o];if(a===void 0)return this.inner[o]=[[e,s]],void this.innerSize++;for(let c=0;c<a.length;c++)if(this.equalsFn(a[c][0],e))return void(a[c]=[e,s]);a.push([e,s]),this.innerSize++}delete(e){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return!1;for(let a=0;a<o.length;a++)if(this.equalsFn(o[a][0],e))return o.length===1?delete this.inner[s]:o.splice(a,1),this.innerSize--,!0;return!1}forEach(e){forEach(this.inner,(s,o)=>{for(const[a,c]of o)e(a,c)})}isEmpty(){return isEmpty(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const re=new SortedMap(DocumentKey.comparator);function __PRIVATE_mutableDocumentMap(){return re}const ie=new SortedMap(DocumentKey.comparator);function documentMap(...i){let e=ie;for(const s of i)e=e.insert(s.key,s);return e}function __PRIVATE_convertOverlayedDocumentMapToDocumentMap(i){let e=ie;return i.forEach((s,o)=>e=e.insert(s,o.overlayedDocument)),e}function __PRIVATE_newOverlayMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newMutationMap(){return __PRIVATE_newDocumentKeyMap()}function __PRIVATE_newDocumentKeyMap(){return new ObjectMap(i=>i.toString(),(i,e)=>i.isEqual(e))}const se=new SortedMap(DocumentKey.comparator),oe=new SortedSet(DocumentKey.comparator);function __PRIVATE_documentKeySet(...i){let e=oe;for(const s of i)e=e.add(s);return e}const _e=new SortedSet(__PRIVATE_primitiveComparator);function __PRIVATE_targetIdSet(){return _e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_toDouble(i,e){if(i.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:__PRIVATE_isNegativeZero(e)?"-0":e}}function __PRIVATE_toInteger(i){return{integerValue:""+i}}function toNumber(i,e){return isSafeInteger(e)?__PRIVATE_toInteger(e):__PRIVATE_toDouble(i,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TransformOperation{constructor(){this._=void 0}}function __PRIVATE_applyTransformOperationToLocalView(i,e,s){return i instanceof __PRIVATE_ServerTimestampTransform?function(a,c){const h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}};return c&&__PRIVATE_isServerTimestamp(c)&&(c=__PRIVATE_getPreviousValue(c)),c&&(h.fields.__previous_value__=c),{mapValue:h}}(s,e):i instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(i,e):i instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(i,e):function(a,c){const h=__PRIVATE_computeTransformOperationBaseValue(a,c),_=asNumber(h)+asNumber(a.Ie);return isInteger(h)&&isInteger(a.Ie)?__PRIVATE_toInteger(_):__PRIVATE_toDouble(a.serializer,_)}(i,e)}function __PRIVATE_applyTransformOperationToRemoteDocument(i,e,s){return i instanceof __PRIVATE_ArrayUnionTransformOperation?__PRIVATE_applyArrayUnionTransformOperation(i,e):i instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_applyArrayRemoveTransformOperation(i,e):s}function __PRIVATE_computeTransformOperationBaseValue(i,e){return i instanceof __PRIVATE_NumericIncrementTransformOperation?function(o){return isInteger(o)||function(c){return!!c&&"doubleValue"in c}(o)}(e)?e:{integerValue:0}:null}class __PRIVATE_ServerTimestampTransform extends TransformOperation{}class __PRIVATE_ArrayUnionTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayUnionTransformOperation(i,e){const s=__PRIVATE_coercedFieldValuesArray(e);for(const o of i.elements)s.some(a=>__PRIVATE_valueEquals(a,o))||s.push(o);return{arrayValue:{values:s}}}class __PRIVATE_ArrayRemoveTransformOperation extends TransformOperation{constructor(e){super(),this.elements=e}}function __PRIVATE_applyArrayRemoveTransformOperation(i,e){let s=__PRIVATE_coercedFieldValuesArray(e);for(const o of i.elements)s=s.filter(a=>!__PRIVATE_valueEquals(a,o));return{arrayValue:{values:s}}}class __PRIVATE_NumericIncrementTransformOperation extends TransformOperation{constructor(e,s){super(),this.serializer=e,this.Ie=s}}function asNumber(i){return __PRIVATE_normalizeNumber(i.integerValue||i.doubleValue)}function __PRIVATE_coercedFieldValuesArray(i){return isArray(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}function __PRIVATE_fieldTransformEquals(i,e){return i.field.isEqual(e.field)&&function(o,a){return o instanceof __PRIVATE_ArrayUnionTransformOperation&&a instanceof __PRIVATE_ArrayUnionTransformOperation||o instanceof __PRIVATE_ArrayRemoveTransformOperation&&a instanceof __PRIVATE_ArrayRemoveTransformOperation?__PRIVATE_arrayEquals(o.elements,a.elements,__PRIVATE_valueEquals):o instanceof __PRIVATE_NumericIncrementTransformOperation&&a instanceof __PRIVATE_NumericIncrementTransformOperation?__PRIVATE_valueEquals(o.Ie,a.Ie):o instanceof __PRIVATE_ServerTimestampTransform&&a instanceof __PRIVATE_ServerTimestampTransform}(i.transform,e.transform)}class MutationResult{constructor(e,s){this.version=e,this.transformResults=s}}class Precondition{constructor(e,s){this.updateTime=e,this.exists=s}static none(){return new Precondition}static exists(e){return new Precondition(void 0,e)}static updateTime(e){return new Precondition(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function __PRIVATE_preconditionIsValidForDocument(i,e){return i.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(i.updateTime):i.exists===void 0||i.exists===e.isFoundDocument()}class Mutation{}function __PRIVATE_calculateOverlayMutation(i,e){if(!i.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return i.isNoDocument()?new __PRIVATE_DeleteMutation(i.key,Precondition.none()):new __PRIVATE_SetMutation(i.key,i.data,Precondition.none());{const s=i.data,o=ObjectValue.empty();let a=new SortedSet(FieldPath$1.comparator);for(let c of e.fields)if(!a.has(c)){let h=s.field(c);h===null&&c.length>1&&(c=c.popLast(),h=s.field(c)),h===null?o.delete(c):o.set(c,h),a=a.add(c)}return new __PRIVATE_PatchMutation(i.key,o,new FieldMask(a.toArray()),Precondition.none())}}function __PRIVATE_mutationApplyToRemoteDocument(i,e,s){i instanceof __PRIVATE_SetMutation?function(a,c,h){const _=a.value.clone(),$=__PRIVATE_serverTransformResults(a.fieldTransforms,c,h.transformResults);_.setAll($),c.convertToFoundDocument(h.version,_).setHasCommittedMutations()}(i,e,s):i instanceof __PRIVATE_PatchMutation?function(a,c,h){if(!__PRIVATE_preconditionIsValidForDocument(a.precondition,c))return void c.convertToUnknownDocument(h.version);const _=__PRIVATE_serverTransformResults(a.fieldTransforms,c,h.transformResults),$=c.data;$.setAll(__PRIVATE_getPatch(a)),$.setAll(_),c.convertToFoundDocument(h.version,$).setHasCommittedMutations()}(i,e,s):function(a,c,h){c.convertToNoDocument(h.version).setHasCommittedMutations()}(0,e,s)}function __PRIVATE_mutationApplyToLocalView(i,e,s,o){return i instanceof __PRIVATE_SetMutation?function(c,h,_,$){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,h))return _;const g=c.value.clone(),d=__PRIVATE_localTransformResults(c.fieldTransforms,$,h);return g.setAll(d),h.convertToFoundDocument(h.version,g).setHasLocalMutations(),null}(i,e,s,o):i instanceof __PRIVATE_PatchMutation?function(c,h,_,$){if(!__PRIVATE_preconditionIsValidForDocument(c.precondition,h))return _;const g=__PRIVATE_localTransformResults(c.fieldTransforms,$,h),d=h.data;return d.setAll(__PRIVATE_getPatch(c)),d.setAll(g),h.convertToFoundDocument(h.version,d).setHasLocalMutations(),_===null?null:_.unionWith(c.fieldMask.fields).unionWith(c.fieldTransforms.map(j=>j.field))}(i,e,s,o):function(c,h,_){return __PRIVATE_preconditionIsValidForDocument(c.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):_}(i,e,s)}function __PRIVATE_mutationExtractBaseValue(i,e){let s=null;for(const o of i.fieldTransforms){const a=e.data.field(o.field),c=__PRIVATE_computeTransformOperationBaseValue(o.transform,a||null);c!=null&&(s===null&&(s=ObjectValue.empty()),s.set(o.field,c))}return s||null}function __PRIVATE_mutationEquals(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&!!function(o,a){return o===void 0&&a===void 0||!(!o||!a)&&__PRIVATE_arrayEquals(o,a,(c,h)=>__PRIVATE_fieldTransformEquals(c,h))}(i.fieldTransforms,e.fieldTransforms)&&(i.type===0?i.value.isEqual(e.value):i.type!==1||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask))}class __PRIVATE_SetMutation extends Mutation{constructor(e,s,o,a=[]){super(),this.key=e,this.value=s,this.precondition=o,this.fieldTransforms=a,this.type=0}getFieldMask(){return null}}class __PRIVATE_PatchMutation extends Mutation{constructor(e,s,o,a,c=[]){super(),this.key=e,this.data=s,this.fieldMask=o,this.precondition=a,this.fieldTransforms=c,this.type=1}getFieldMask(){return this.fieldMask}}function __PRIVATE_getPatch(i){const e=new Map;return i.fieldMask.fields.forEach(s=>{if(!s.isEmpty()){const o=i.data.field(s);e.set(s,o)}}),e}function __PRIVATE_serverTransformResults(i,e,s){const o=new Map;__PRIVATE_hardAssert(i.length===s.length);for(let a=0;a<s.length;a++){const c=i[a],h=c.transform,_=e.data.field(c.field);o.set(c.field,__PRIVATE_applyTransformOperationToRemoteDocument(h,_,s[a]))}return o}function __PRIVATE_localTransformResults(i,e,s){const o=new Map;for(const a of i){const c=a.transform,h=s.data.field(a.field);o.set(a.field,__PRIVATE_applyTransformOperationToLocalView(c,h,e))}return o}class __PRIVATE_DeleteMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class __PRIVATE_VerifyMutation extends Mutation{constructor(e,s){super(),this.key=e,this.precondition=s,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MutationBatch{constructor(e,s,o,a){this.batchId=e,this.localWriteTime=s,this.baseMutations=o,this.mutations=a}applyToRemoteDocument(e,s){const o=s.mutationResults;for(let a=0;a<this.mutations.length;a++){const c=this.mutations[a];c.key.isEqual(e.key)&&__PRIVATE_mutationApplyToRemoteDocument(c,e,o[a])}}applyToLocalView(e,s){for(const o of this.baseMutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));for(const o of this.mutations)o.key.isEqual(e.key)&&(s=__PRIVATE_mutationApplyToLocalView(o,e,s,this.localWriteTime));return s}applyToLocalDocumentSet(e,s){const o=__PRIVATE_newMutationMap();return this.mutations.forEach(a=>{const c=e.get(a.key),h=c.overlayedDocument;let _=this.applyToLocalView(h,c.mutatedFields);_=s.has(a.key)?null:_;const $=__PRIVATE_calculateOverlayMutation(h,_);$!==null&&o.set(a.key,$),h.isValidDocument()||h.convertToNoDocument(SnapshotVersion.min())}),o}keys(){return this.mutations.reduce((e,s)=>e.add(s.key),__PRIVATE_documentKeySet())}isEqual(e){return this.batchId===e.batchId&&__PRIVATE_arrayEquals(this.mutations,e.mutations,(s,o)=>__PRIVATE_mutationEquals(s,o))&&__PRIVATE_arrayEquals(this.baseMutations,e.baseMutations,(s,o)=>__PRIVATE_mutationEquals(s,o))}}class MutationBatchResult{constructor(e,s,o,a){this.batch=e,this.commitVersion=s,this.mutationResults=o,this.docVersions=a}static from(e,s,o){__PRIVATE_hardAssert(e.mutations.length===o.length);let a=function(){return se}();const c=e.mutations;for(let h=0;h<c.length;h++)a=a.insert(c[h].key,o[h].version);return new MutationBatchResult(e,s,o,a)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Overlay{constructor(e,s){this.largestBatchId=e,this.mutation=s}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ExistenceFilter{constructor(e,s){this.count=e,this.unchangedNames=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ae,ue;function __PRIVATE_isPermanentError(i){switch(i){default:return fail();case D.CANCELLED:case D.UNKNOWN:case D.DEADLINE_EXCEEDED:case D.RESOURCE_EXHAUSTED:case D.INTERNAL:case D.UNAVAILABLE:case D.UNAUTHENTICATED:return!1;case D.INVALID_ARGUMENT:case D.NOT_FOUND:case D.ALREADY_EXISTS:case D.PERMISSION_DENIED:case D.FAILED_PRECONDITION:case D.ABORTED:case D.OUT_OF_RANGE:case D.UNIMPLEMENTED:case D.DATA_LOSS:return!0}}function __PRIVATE_mapCodeFromRpcCode(i){if(i===void 0)return __PRIVATE_logError("GRPC error has no .code"),D.UNKNOWN;switch(i){case ae.OK:return D.OK;case ae.CANCELLED:return D.CANCELLED;case ae.UNKNOWN:return D.UNKNOWN;case ae.DEADLINE_EXCEEDED:return D.DEADLINE_EXCEEDED;case ae.RESOURCE_EXHAUSTED:return D.RESOURCE_EXHAUSTED;case ae.INTERNAL:return D.INTERNAL;case ae.UNAVAILABLE:return D.UNAVAILABLE;case ae.UNAUTHENTICATED:return D.UNAUTHENTICATED;case ae.INVALID_ARGUMENT:return D.INVALID_ARGUMENT;case ae.NOT_FOUND:return D.NOT_FOUND;case ae.ALREADY_EXISTS:return D.ALREADY_EXISTS;case ae.PERMISSION_DENIED:return D.PERMISSION_DENIED;case ae.FAILED_PRECONDITION:return D.FAILED_PRECONDITION;case ae.ABORTED:return D.ABORTED;case ae.OUT_OF_RANGE:return D.OUT_OF_RANGE;case ae.UNIMPLEMENTED:return D.UNIMPLEMENTED;case ae.DATA_LOSS:return D.DATA_LOSS;default:return fail()}}(ue=ae||(ae={}))[ue.OK=0]="OK",ue[ue.CANCELLED=1]="CANCELLED",ue[ue.UNKNOWN=2]="UNKNOWN",ue[ue.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ue[ue.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ue[ue.NOT_FOUND=5]="NOT_FOUND",ue[ue.ALREADY_EXISTS=6]="ALREADY_EXISTS",ue[ue.PERMISSION_DENIED=7]="PERMISSION_DENIED",ue[ue.UNAUTHENTICATED=16]="UNAUTHENTICATED",ue[ue.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ue[ue.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ue[ue.ABORTED=10]="ABORTED",ue[ue.OUT_OF_RANGE=11]="OUT_OF_RANGE",ue[ue.UNIMPLEMENTED=12]="UNIMPLEMENTED",ue[ue.INTERNAL=13]="INTERNAL",ue[ue.UNAVAILABLE=14]="UNAVAILABLE",ue[ue.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newTextEncoder(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const le=new Integer([4294967295,4294967295],0);function __PRIVATE_getMd5HashValue(i){const e=__PRIVATE_newTextEncoder().encode(i),s=new Md5;return s.update(e),new Uint8Array(s.digest())}function __PRIVATE_get64BitUints(i){const e=new DataView(i.buffer),s=e.getUint32(0,!0),o=e.getUint32(4,!0),a=e.getUint32(8,!0),c=e.getUint32(12,!0);return[new Integer([s,o],0),new Integer([a,c],0)]}class BloomFilter{constructor(e,s,o){if(this.bitmap=e,this.padding=s,this.hashCount=o,s<0||s>=8)throw new __PRIVATE_BloomFilterError(`Invalid padding: ${s}`);if(o<0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length>0&&this.hashCount===0)throw new __PRIVATE_BloomFilterError(`Invalid hash count: ${o}`);if(e.length===0&&s!==0)throw new __PRIVATE_BloomFilterError(`Invalid padding when bitmap length is 0: ${s}`);this.Te=8*e.length-s,this.Ee=Integer.fromNumber(this.Te)}de(e,s,o){let a=e.add(s.multiply(Integer.fromNumber(o)));return a.compare(le)===1&&(a=new Integer([a.getBits(0),a.getBits(1)],0)),a.modulo(this.Ee).toNumber()}Ae(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const h=this.de(o,a,c);if(!this.Ae(h))return!1}return!0}static create(e,s,o){const a=e%8==0?0:8-e%8,c=new Uint8Array(Math.ceil(e/8)),h=new BloomFilter(c,a,s);return o.forEach(_=>h.insert(_)),h}insert(e){if(this.Te===0)return;const s=__PRIVATE_getMd5HashValue(e),[o,a]=__PRIVATE_get64BitUints(s);for(let c=0;c<this.hashCount;c++){const h=this.de(o,a,c);this.Re(h)}}Re(e){const s=Math.floor(e/8),o=e%8;this.bitmap[s]|=1<<o}}class __PRIVATE_BloomFilterError extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteEvent{constructor(e,s,o,a,c){this.snapshotVersion=e,this.targetChanges=s,this.targetMismatches=o,this.documentUpdates=a,this.resolvedLimboDocuments=c}static createSynthesizedRemoteEventForCurrentChange(e,s,o){const a=new Map;return a.set(e,TargetChange.createSynthesizedTargetChangeForCurrentChange(e,s,o)),new RemoteEvent(SnapshotVersion.min(),a,new SortedMap(__PRIVATE_primitiveComparator),__PRIVATE_mutableDocumentMap(),__PRIVATE_documentKeySet())}}class TargetChange{constructor(e,s,o,a,c){this.resumeToken=e,this.current=s,this.addedDocuments=o,this.modifiedDocuments=a,this.removedDocuments=c}static createSynthesizedTargetChangeForCurrentChange(e,s,o){return new TargetChange(o,s,__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet(),__PRIVATE_documentKeySet())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentWatchChange{constructor(e,s,o,a){this.Ve=e,this.removedTargetIds=s,this.key=o,this.me=a}}class __PRIVATE_ExistenceFilterChange{constructor(e,s){this.targetId=e,this.fe=s}}class __PRIVATE_WatchTargetChange{constructor(e,s,o=ByteString.EMPTY_BYTE_STRING,a=null){this.state=e,this.targetIds=s,this.resumeToken=o,this.cause=a}}class __PRIVATE_TargetState{constructor(){this.ge=0,this.pe=__PRIVATE_snapshotChangesMap(),this.ye=ByteString.EMPTY_BYTE_STRING,this.we=!1,this.Se=!0}get current(){return this.we}get resumeToken(){return this.ye}get be(){return this.ge!==0}get De(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.ye=e)}ve(){let e=__PRIVATE_documentKeySet(),s=__PRIVATE_documentKeySet(),o=__PRIVATE_documentKeySet();return this.pe.forEach((a,c)=>{switch(c){case 0:e=e.add(a);break;case 2:s=s.add(a);break;case 1:o=o.add(a);break;default:fail()}}),new TargetChange(this.ye,this.we,e,s,o)}Fe(){this.Se=!1,this.pe=__PRIVATE_snapshotChangesMap()}Me(e,s){this.Se=!0,this.pe=this.pe.insert(e,s)}xe(e){this.Se=!0,this.pe=this.pe.remove(e)}Oe(){this.ge+=1}Ne(){this.ge-=1,__PRIVATE_hardAssert(this.ge>=0)}Be(){this.Se=!0,this.we=!0}}class __PRIVATE_WatchChangeAggregator{constructor(e){this.Le=e,this.ke=new Map,this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap(__PRIVATE_primitiveComparator)}$e(e){for(const s of e.Ve)e.me&&e.me.isFoundDocument()?this.Ue(s,e.me):this.We(s,e.key,e.me);for(const s of e.removedTargetIds)this.We(s,e.key,e.me)}Ge(e){this.forEachTarget(e,s=>{const o=this.ze(s);switch(e.state){case 0:this.je(s)&&o.Ce(e.resumeToken);break;case 1:o.Ne(),o.be||o.Fe(),o.Ce(e.resumeToken);break;case 2:o.Ne(),o.be||this.removeTarget(s);break;case 3:this.je(s)&&(o.Be(),o.Ce(e.resumeToken));break;case 4:this.je(s)&&(this.He(s),o.Ce(e.resumeToken));break;default:fail()}})}forEachTarget(e,s){e.targetIds.length>0?e.targetIds.forEach(s):this.ke.forEach((o,a)=>{this.je(a)&&s(a)})}Je(e){const s=e.targetId,o=e.fe.count,a=this.Ye(s);if(a){const c=a.target;if(__PRIVATE_targetIsDocumentTarget(c))if(o===0){const h=new DocumentKey(c.path);this.We(s,h,MutableDocument.newNoDocument(h,SnapshotVersion.min()))}else __PRIVATE_hardAssert(o===1);else{const h=this.Ze(s);if(h!==o){const _=this.Xe(e),$=_?this.et(_,e,h):1;if($!==0){this.He(s);const g=$===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(s,g)}}}}}Xe(e){const s=e.fe.unchangedNames;if(!s||!s.bits)return null;const{bits:{bitmap:o="",padding:a=0},hashCount:c=0}=s;let h,_;try{h=__PRIVATE_normalizeByteString(o).toUint8Array()}catch($){if($ instanceof __PRIVATE_Base64DecodeError)return __PRIVATE_logWarn("Decoding the base64 bloom filter in existence filter failed ("+$.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw $}try{_=new BloomFilter(h,a,c)}catch($){return __PRIVATE_logWarn($ instanceof __PRIVATE_BloomFilterError?"BloomFilter error: ":"Applying bloom filter failed: ",$),null}return _.Te===0?null:_}et(e,s,o){return s.fe.count===o-this.rt(e,s.targetId)?0:2}rt(e,s){const o=this.Le.getRemoteKeysForTarget(s);let a=0;return o.forEach(c=>{const h=this.Le.nt(),_=`projects/${h.projectId}/databases/${h.database}/documents/${c.path.canonicalString()}`;e.mightContain(_)||(this.We(s,c,null),a++)}),a}it(e){const s=new Map;this.ke.forEach((c,h)=>{const _=this.Ye(h);if(_){if(c.current&&__PRIVATE_targetIsDocumentTarget(_.target)){const $=new DocumentKey(_.target.path);this.qe.get($)!==null||this.st(h,$)||this.We(h,$,MutableDocument.newNoDocument($,e))}c.De&&(s.set(h,c.ve()),c.Fe())}});let o=__PRIVATE_documentKeySet();this.Qe.forEach((c,h)=>{let _=!0;h.forEachWhile($=>{const g=this.Ye($);return!g||g.purpose==="TargetPurposeLimboResolution"||(_=!1,!1)}),_&&(o=o.add(c))}),this.qe.forEach((c,h)=>h.setReadTime(e));const a=new RemoteEvent(e,s,this.Ke,this.qe,o);return this.qe=__PRIVATE_mutableDocumentMap(),this.Qe=__PRIVATE_documentTargetMap(),this.Ke=new SortedMap(__PRIVATE_primitiveComparator),a}Ue(e,s){if(!this.je(e))return;const o=this.st(e,s.key)?2:0;this.ze(e).Me(s.key,o),this.qe=this.qe.insert(s.key,s),this.Qe=this.Qe.insert(s.key,this.ot(s.key).add(e))}We(e,s,o){if(!this.je(e))return;const a=this.ze(e);this.st(e,s)?a.Me(s,1):a.xe(s),this.Qe=this.Qe.insert(s,this.ot(s).delete(e)),o&&(this.qe=this.qe.insert(s,o))}removeTarget(e){this.ke.delete(e)}Ze(e){const s=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+s.addedDocuments.size-s.removedDocuments.size}Oe(e){this.ze(e).Oe()}ze(e){let s=this.ke.get(e);return s||(s=new __PRIVATE_TargetState,this.ke.set(e,s)),s}ot(e){let s=this.Qe.get(e);return s||(s=new SortedSet(__PRIVATE_primitiveComparator),this.Qe=this.Qe.insert(e,s)),s}je(e){const s=this.Ye(e)!==null;return s||__PRIVATE_logDebug("WatchChangeAggregator","Detected inactive target",e),s}Ye(e){const s=this.ke.get(e);return s&&s.be?null:this.Le._t(e)}He(e){this.ke.set(e,new __PRIVATE_TargetState),this.Le.getRemoteKeysForTarget(e).forEach(s=>{this.We(e,s,null)})}st(e,s){return this.Le.getRemoteKeysForTarget(e).has(s)}}function __PRIVATE_documentTargetMap(){return new SortedMap(DocumentKey.comparator)}function __PRIVATE_snapshotChangesMap(){return new SortedMap(DocumentKey.comparator)}const he={asc:"ASCENDING",desc:"DESCENDING"},Pe={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ie={and:"AND",or:"OR"};class JsonProtoSerializer{constructor(e,s){this.databaseId=e,this.useProto3Json=s}}function __PRIVATE_toInt32Proto(i,e){return i.useProto3Json||__PRIVATE_isNullOrUndefined(e)?e:{value:e}}function toTimestamp(i,e){return i.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function __PRIVATE_toBytes(i,e){return i.useProto3Json?e.toBase64():e.toUint8Array()}function __PRIVATE_toVersion(i,e){return toTimestamp(i,e.toTimestamp())}function __PRIVATE_fromVersion(i){return __PRIVATE_hardAssert(!!i),SnapshotVersion.fromTimestamp(function(s){const o=__PRIVATE_normalizeTimestamp(s);return new Timestamp(o.seconds,o.nanos)}(i))}function __PRIVATE_toResourceName(i,e){return __PRIVATE_toResourcePath(i,e).canonicalString()}function __PRIVATE_toResourcePath(i,e){const s=function(a){return new ResourcePath(["projects",a.projectId,"databases",a.database])}(i).child("documents");return e===void 0?s:s.child(e)}function __PRIVATE_fromResourceName(i){const e=ResourcePath.fromString(i);return __PRIVATE_hardAssert(__PRIVATE_isValidResourceName(e)),e}function __PRIVATE_toName(i,e){return __PRIVATE_toResourceName(i.databaseId,e.path)}function fromName(i,e){const s=__PRIVATE_fromResourceName(e);if(s.get(1)!==i.databaseId.projectId)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+s.get(1)+" vs "+i.databaseId.projectId);if(s.get(3)!==i.databaseId.database)throw new FirestoreError(D.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+s.get(3)+" vs "+i.databaseId.database);return new DocumentKey(__PRIVATE_extractLocalPathFromResourceName(s))}function __PRIVATE_toQueryPath(i,e){return __PRIVATE_toResourceName(i.databaseId,e)}function __PRIVATE_fromQueryPath(i){const e=__PRIVATE_fromResourceName(i);return e.length===4?ResourcePath.emptyPath():__PRIVATE_extractLocalPathFromResourceName(e)}function __PRIVATE_getEncodedDatabaseId(i){return new ResourcePath(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function __PRIVATE_extractLocalPathFromResourceName(i){return __PRIVATE_hardAssert(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function __PRIVATE_toMutationDocument(i,e,s){return{name:__PRIVATE_toName(i,e),fields:s.value.mapValue.fields}}function __PRIVATE_fromWatchChange(i,e){let s;if("targetChange"in e){e.targetChange;const o=function(g){return g==="NO_CHANGE"?0:g==="ADD"?1:g==="REMOVE"?2:g==="CURRENT"?3:g==="RESET"?4:fail()}(e.targetChange.targetChangeType||"NO_CHANGE"),a=e.targetChange.targetIds||[],c=function(g,d){return g.useProto3Json?(__PRIVATE_hardAssert(d===void 0||typeof d=="string"),ByteString.fromBase64String(d||"")):(__PRIVATE_hardAssert(d===void 0||d instanceof Uint8Array),ByteString.fromUint8Array(d||new Uint8Array))}(i,e.targetChange.resumeToken),h=e.targetChange.cause,_=h&&function(g){const d=g.code===void 0?D.UNKNOWN:__PRIVATE_mapCodeFromRpcCode(g.code);return new FirestoreError(d,g.message||"")}(h);s=new __PRIVATE_WatchTargetChange(o,a,c,_||null)}else if("documentChange"in e){e.documentChange;const o=e.documentChange;o.document,o.document.name,o.document.updateTime;const a=fromName(i,o.document.name),c=__PRIVATE_fromVersion(o.document.updateTime),h=o.document.createTime?__PRIVATE_fromVersion(o.document.createTime):SnapshotVersion.min(),_=new ObjectValue({mapValue:{fields:o.document.fields}}),$=MutableDocument.newFoundDocument(a,c,h,_),g=o.targetIds||[],d=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange(g,d,$.key,$)}else if("documentDelete"in e){e.documentDelete;const o=e.documentDelete;o.document;const a=fromName(i,o.document),c=o.readTime?__PRIVATE_fromVersion(o.readTime):SnapshotVersion.min(),h=MutableDocument.newNoDocument(a,c),_=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],_,h.key,h)}else if("documentRemove"in e){e.documentRemove;const o=e.documentRemove;o.document;const a=fromName(i,o.document),c=o.removedTargetIds||[];s=new __PRIVATE_DocumentWatchChange([],c,a,null)}else{if(!("filter"in e))return fail();{e.filter;const o=e.filter;o.targetId;const{count:a=0,unchangedNames:c}=o,h=new ExistenceFilter(a,c),_=o.targetId;s=new __PRIVATE_ExistenceFilterChange(_,h)}}return s}function toMutation(i,e){let s;if(e instanceof __PRIVATE_SetMutation)s={update:__PRIVATE_toMutationDocument(i,e.key,e.value)};else if(e instanceof __PRIVATE_DeleteMutation)s={delete:__PRIVATE_toName(i,e.key)};else if(e instanceof __PRIVATE_PatchMutation)s={update:__PRIVATE_toMutationDocument(i,e.key,e.data),updateMask:__PRIVATE_toDocumentMask(e.fieldMask)};else{if(!(e instanceof __PRIVATE_VerifyMutation))return fail();s={verify:__PRIVATE_toName(i,e.key)}}return e.fieldTransforms.length>0&&(s.updateTransforms=e.fieldTransforms.map(o=>function(c,h){const _=h.transform;if(_ instanceof __PRIVATE_ServerTimestampTransform)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(_ instanceof __PRIVATE_ArrayUnionTransformOperation)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:_.elements}};if(_ instanceof __PRIVATE_ArrayRemoveTransformOperation)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:_.elements}};if(_ instanceof __PRIVATE_NumericIncrementTransformOperation)return{fieldPath:h.field.canonicalString(),increment:_.Ie};throw fail()}(0,o))),e.precondition.isNone||(s.currentDocument=function(a,c){return c.updateTime!==void 0?{updateTime:__PRIVATE_toVersion(a,c.updateTime)}:c.exists!==void 0?{exists:c.exists}:fail()}(i,e.precondition)),s}function __PRIVATE_fromWriteResults(i,e){return i&&i.length>0?(__PRIVATE_hardAssert(e!==void 0),i.map(s=>function(a,c){let h=a.updateTime?__PRIVATE_fromVersion(a.updateTime):__PRIVATE_fromVersion(c);return h.isEqual(SnapshotVersion.min())&&(h=__PRIVATE_fromVersion(c)),new MutationResult(h,a.transformResults||[])}(s,e))):[]}function __PRIVATE_toDocumentsTarget(i,e){return{documents:[__PRIVATE_toQueryPath(i,e.path)]}}function __PRIVATE_toQueryTarget(i,e){const s={structuredQuery:{}},o=e.path;let a;e.collectionGroup!==null?(a=o,s.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(a=o.popLast(),s.structuredQuery.from=[{collectionId:o.lastSegment()}]),s.parent=__PRIVATE_toQueryPath(i,a);const c=function(g){if(g.length!==0)return __PRIVATE_toFilter(CompositeFilter.create(g,"and"))}(e.filters);c&&(s.structuredQuery.where=c);const h=function(g){if(g.length!==0)return g.map(d=>function(tt){return{field:__PRIVATE_toFieldPathReference(tt.field),direction:__PRIVATE_toDirection(tt.dir)}}(d))}(e.orderBy);h&&(s.structuredQuery.orderBy=h);const _=__PRIVATE_toInt32Proto(i,e.limit);return _!==null&&(s.structuredQuery.limit=_),e.startAt&&(s.structuredQuery.startAt=function(g){return{before:g.inclusive,values:g.position}}(e.startAt)),e.endAt&&(s.structuredQuery.endAt=function(g){return{before:!g.inclusive,values:g.position}}(e.endAt)),{ut:s,parent:a}}function __PRIVATE_convertQueryTargetToQuery(i){let e=__PRIVATE_fromQueryPath(i.parent);const s=i.structuredQuery,o=s.from?s.from.length:0;let a=null;if(o>0){__PRIVATE_hardAssert(o===1);const d=s.from[0];d.allDescendants?a=d.collectionId:e=e.child(d.collectionId)}let c=[];s.where&&(c=function(j){const tt=__PRIVATE_fromFilter(j);return tt instanceof CompositeFilter&&__PRIVATE_compositeFilterIsFlatConjunction(tt)?tt.getFilters():[tt]}(s.where));let h=[];s.orderBy&&(h=function(j){return j.map(tt=>function(et){return new OrderBy(__PRIVATE_fromFieldPathReference(et.field),function(st){switch(st){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(et.direction))}(tt))}(s.orderBy));let _=null;s.limit&&(_=function(j){let tt;return tt=typeof j=="object"?j.value:j,__PRIVATE_isNullOrUndefined(tt)?null:tt}(s.limit));let $=null;s.startAt&&($=function(j){const tt=!!j.before,rt=j.values||[];return new Bound(rt,tt)}(s.startAt));let g=null;return s.endAt&&(g=function(j){const tt=!j.before,rt=j.values||[];return new Bound(rt,tt)}(s.endAt)),__PRIVATE_newQuery(e,a,h,c,_,"F",$,g)}function __PRIVATE_toListenRequestLabels(i,e){const s=function(a){switch(a){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return fail()}}(e.purpose);return s==null?null:{"goog-listen-tags":s}}function __PRIVATE_fromFilter(i){return i.unaryFilter!==void 0?function(s){switch(s.unaryFilter.op){case"IS_NAN":const o=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(o,"==",{doubleValue:NaN});case"IS_NULL":const a=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(a,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const c=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(c,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=__PRIVATE_fromFieldPathReference(s.unaryFilter.field);return FieldFilter.create(h,"!=",{nullValue:"NULL_VALUE"});default:return fail()}}(i):i.fieldFilter!==void 0?function(s){return FieldFilter.create(__PRIVATE_fromFieldPathReference(s.fieldFilter.field),function(a){switch(a){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return fail()}}(s.fieldFilter.op),s.fieldFilter.value)}(i):i.compositeFilter!==void 0?function(s){return CompositeFilter.create(s.compositeFilter.filters.map(o=>__PRIVATE_fromFilter(o)),function(a){switch(a){case"AND":return"and";case"OR":return"or";default:return fail()}}(s.compositeFilter.op))}(i):fail()}function __PRIVATE_toDirection(i){return he[i]}function __PRIVATE_toOperatorName(i){return Pe[i]}function __PRIVATE_toCompositeOperatorName(i){return Ie[i]}function __PRIVATE_toFieldPathReference(i){return{fieldPath:i.canonicalString()}}function __PRIVATE_fromFieldPathReference(i){return FieldPath$1.fromServerFormat(i.fieldPath)}function __PRIVATE_toFilter(i){return i instanceof FieldFilter?function(s){if(s.op==="=="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NULL"}}}else if(s.op==="!="){if(__PRIVATE_isNanValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NAN"}};if(__PRIVATE_isNullValue(s.value))return{unaryFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:__PRIVATE_toFieldPathReference(s.field),op:__PRIVATE_toOperatorName(s.op),value:s.value}}}(i):i instanceof CompositeFilter?function(s){const o=s.getFilters().map(a=>__PRIVATE_toFilter(a));return o.length===1?o[0]:{compositeFilter:{op:__PRIVATE_toCompositeOperatorName(s.op),filters:o}}}(i):fail()}function __PRIVATE_toDocumentMask(i){const e=[];return i.fields.forEach(s=>e.push(s.canonicalString())),{fieldPaths:e}}function __PRIVATE_isValidResourceName(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TargetData{constructor(e,s,o,a,c=SnapshotVersion.min(),h=SnapshotVersion.min(),_=ByteString.EMPTY_BYTE_STRING,$=null){this.target=e,this.targetId=s,this.purpose=o,this.sequenceNumber=a,this.snapshotVersion=c,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=_,this.expectedCount=$}withSequenceNumber(e){return new TargetData(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,s){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,s,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new TargetData(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalSerializer{constructor(e){this.ct=e}}function __PRIVATE_fromBundledQuery(i){const e=__PRIVATE_convertQueryTargetToQuery({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?__PRIVATE_queryWithLimit(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryIndexManager{constructor(){this._n=new __PRIVATE_MemoryCollectionParentIndex}addToCollectionParentIndex(e,s){return this._n.add(s),PersistencePromise.resolve()}getCollectionParents(e,s){return PersistencePromise.resolve(this._n.getEntries(s))}addFieldIndex(e,s){return PersistencePromise.resolve()}deleteFieldIndex(e,s){return PersistencePromise.resolve()}deleteAllFieldIndexes(e){return PersistencePromise.resolve()}createTargetIndexes(e,s){return PersistencePromise.resolve()}getDocumentsMatchingTarget(e,s){return PersistencePromise.resolve(null)}getIndexType(e,s){return PersistencePromise.resolve(0)}getFieldIndexes(e,s){return PersistencePromise.resolve([])}getNextCollectionGroupToUpdate(e){return PersistencePromise.resolve(null)}getMinOffset(e,s){return PersistencePromise.resolve(IndexOffset.min())}getMinOffsetFromCollectionGroup(e,s){return PersistencePromise.resolve(IndexOffset.min())}updateCollectionGroup(e,s,o){return PersistencePromise.resolve()}updateIndexEntries(e,s){return PersistencePromise.resolve()}}class __PRIVATE_MemoryCollectionParentIndex{constructor(){this.index={}}add(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s]||new SortedSet(ResourcePath.comparator),c=!a.has(o);return this.index[s]=a.add(o),c}has(e){const s=e.lastSegment(),o=e.popLast(),a=this.index[s];return a&&a.has(o)}getEntries(e){return(this.index[e]||new SortedSet(ResourcePath.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_TargetIdGenerator{constructor(e){this.On=e}next(){return this.On+=2,this.On}static Nn(){return new __PRIVATE_TargetIdGenerator(0)}static Bn(){return new __PRIVATE_TargetIdGenerator(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RemoteDocumentChangeBuffer{constructor(){this.changes=new ObjectMap(e=>e.toString(),(e,s)=>e.isEqual(s)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,s){this.assertNotApplied(),this.changes.set(e,MutableDocument.newInvalidDocument(e).setReadTime(s))}getEntry(e,s){this.assertNotApplied();const o=this.changes.get(s);return o!==void 0?PersistencePromise.resolve(o):this.getFromCache(e,s)}getEntries(e,s){return this.getAllFromCache(e,s)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OverlayedDocument{constructor(e,s){this.overlayedDocument=e,this.mutatedFields=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LocalDocumentsView{constructor(e,s,o,a){this.remoteDocumentCache=e,this.mutationQueue=s,this.documentOverlayCache=o,this.indexManager=a}getDocument(e,s){let o=null;return this.documentOverlayCache.getOverlay(e,s).next(a=>(o=a,this.remoteDocumentCache.getEntry(e,s))).next(a=>(o!==null&&__PRIVATE_mutationApplyToLocalView(o.mutation,a,FieldMask.empty(),Timestamp.now()),a))}getDocuments(e,s){return this.remoteDocumentCache.getEntries(e,s).next(o=>this.getLocalViewOfDocuments(e,o,__PRIVATE_documentKeySet()).next(()=>o))}getLocalViewOfDocuments(e,s,o=__PRIVATE_documentKeySet()){const a=__PRIVATE_newOverlayMap();return this.populateOverlays(e,a,s).next(()=>this.computeViews(e,s,a,o).next(c=>{let h=documentMap();return c.forEach((_,$)=>{h=h.insert(_,$.overlayedDocument)}),h}))}getOverlayedDocuments(e,s){const o=__PRIVATE_newOverlayMap();return this.populateOverlays(e,o,s).next(()=>this.computeViews(e,s,o,__PRIVATE_documentKeySet()))}populateOverlays(e,s,o){const a=[];return o.forEach(c=>{s.has(c)||a.push(c)}),this.documentOverlayCache.getOverlays(e,a).next(c=>{c.forEach((h,_)=>{s.set(h,_)})})}computeViews(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const h=__PRIVATE_newDocumentKeyMap(),_=function(){return __PRIVATE_newDocumentKeyMap()}();return s.forEach(($,g)=>{const d=o.get(g.key);a.has(g.key)&&(d===void 0||d.mutation instanceof __PRIVATE_PatchMutation)?c=c.insert(g.key,g):d!==void 0?(h.set(g.key,d.mutation.getFieldMask()),__PRIVATE_mutationApplyToLocalView(d.mutation,g,d.mutation.getFieldMask(),Timestamp.now())):h.set(g.key,FieldMask.empty())}),this.recalculateAndSaveOverlays(e,c).next($=>($.forEach((g,d)=>h.set(g,d)),s.forEach((g,d)=>{var j;return _.set(g,new OverlayedDocument(d,(j=h.get(g))!==null&&j!==void 0?j:null))}),_))}recalculateAndSaveOverlays(e,s){const o=__PRIVATE_newDocumentKeyMap();let a=new SortedMap((h,_)=>h-_),c=__PRIVATE_documentKeySet();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,s).next(h=>{for(const _ of h)_.keys().forEach($=>{const g=s.get($);if(g===null)return;let d=o.get($)||FieldMask.empty();d=_.applyToLocalView(g,d),o.set($,d);const j=(a.get(_.batchId)||__PRIVATE_documentKeySet()).add($);a=a.insert(_.batchId,j)})}).next(()=>{const h=[],_=a.getReverseIterator();for(;_.hasNext();){const $=_.getNext(),g=$.key,d=$.value,j=__PRIVATE_newMutationMap();d.forEach(tt=>{if(!c.has(tt)){const rt=__PRIVATE_calculateOverlayMutation(s.get(tt),o.get(tt));rt!==null&&j.set(tt,rt),c=c.add(tt)}}),h.push(this.documentOverlayCache.saveOverlays(e,g,j))}return PersistencePromise.waitFor(h)}).next(()=>o)}recalculateAndSaveOverlaysForDocumentKeys(e,s){return this.remoteDocumentCache.getEntries(e,s).next(o=>this.recalculateAndSaveOverlays(e,o))}getDocumentsMatchingQuery(e,s,o,a){return function(h){return DocumentKey.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0}(s)?this.getDocumentsMatchingDocumentQuery(e,s.path):__PRIVATE_isCollectionGroupQuery(s)?this.getDocumentsMatchingCollectionGroupQuery(e,s,o,a):this.getDocumentsMatchingCollectionQuery(e,s,o,a)}getNextDocuments(e,s,o,a){return this.remoteDocumentCache.getAllFromCollectionGroup(e,s,o,a).next(c=>{const h=a-c.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,s,o.largestBatchId,a-c.size):PersistencePromise.resolve(__PRIVATE_newOverlayMap());let _=-1,$=c;return h.next(g=>PersistencePromise.forEach(g,(d,j)=>(_<j.largestBatchId&&(_=j.largestBatchId),c.get(d)?PersistencePromise.resolve():this.remoteDocumentCache.getEntry(e,d).next(tt=>{$=$.insert(d,tt)}))).next(()=>this.populateOverlays(e,g,c)).next(()=>this.computeViews(e,$,g,__PRIVATE_documentKeySet())).next(d=>({batchId:_,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(d)})))})}getDocumentsMatchingDocumentQuery(e,s){return this.getDocument(e,new DocumentKey(s)).next(o=>{let a=documentMap();return o.isFoundDocument()&&(a=a.insert(o.key,o)),a})}getDocumentsMatchingCollectionGroupQuery(e,s,o,a){const c=s.collectionGroup;let h=documentMap();return this.indexManager.getCollectionParents(e,c).next(_=>PersistencePromise.forEach(_,$=>{const g=function(j,tt){return new __PRIVATE_QueryImpl(tt,null,j.explicitOrderBy.slice(),j.filters.slice(),j.limit,j.limitType,j.startAt,j.endAt)}(s,$.child(c));return this.getDocumentsMatchingCollectionQuery(e,g,o,a).next(d=>{d.forEach((j,tt)=>{h=h.insert(j,tt)})})}).next(()=>h))}getDocumentsMatchingCollectionQuery(e,s,o,a){let c;return this.documentOverlayCache.getOverlaysForCollection(e,s.path,o.largestBatchId).next(h=>(c=h,this.remoteDocumentCache.getDocumentsMatchingQuery(e,s,o,c,a))).next(h=>{c.forEach(($,g)=>{const d=g.getKey();h.get(d)===null&&(h=h.insert(d,MutableDocument.newInvalidDocument(d)))});let _=documentMap();return h.forEach(($,g)=>{const d=c.get($);d!==void 0&&__PRIVATE_mutationApplyToLocalView(d.mutation,g,FieldMask.empty(),Timestamp.now()),__PRIVATE_queryMatches(s,g)&&(_=_.insert($,g))}),_})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryBundleCache{constructor(e){this.serializer=e,this.cr=new Map,this.lr=new Map}getBundleMetadata(e,s){return PersistencePromise.resolve(this.cr.get(s))}saveBundleMetadata(e,s){return this.cr.set(s.id,function(a){return{id:a.id,version:a.version,createTime:__PRIVATE_fromVersion(a.createTime)}}(s)),PersistencePromise.resolve()}getNamedQuery(e,s){return PersistencePromise.resolve(this.lr.get(s))}saveNamedQuery(e,s){return this.lr.set(s.name,function(a){return{name:a.name,query:__PRIVATE_fromBundledQuery(a.bundledQuery),readTime:__PRIVATE_fromVersion(a.readTime)}}(s)),PersistencePromise.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryDocumentOverlayCache{constructor(){this.overlays=new SortedMap(DocumentKey.comparator),this.hr=new Map}getOverlay(e,s){return PersistencePromise.resolve(this.overlays.get(s))}getOverlays(e,s){const o=__PRIVATE_newOverlayMap();return PersistencePromise.forEach(s,a=>this.getOverlay(e,a).next(c=>{c!==null&&o.set(a,c)})).next(()=>o)}saveOverlays(e,s,o){return o.forEach((a,c)=>{this.ht(e,s,c)}),PersistencePromise.resolve()}removeOverlaysForBatchId(e,s,o){const a=this.hr.get(o);return a!==void 0&&(a.forEach(c=>this.overlays=this.overlays.remove(c)),this.hr.delete(o)),PersistencePromise.resolve()}getOverlaysForCollection(e,s,o){const a=__PRIVATE_newOverlayMap(),c=s.length+1,h=new DocumentKey(s.child("")),_=this.overlays.getIteratorFrom(h);for(;_.hasNext();){const $=_.getNext().value,g=$.getKey();if(!s.isPrefixOf(g.path))break;g.path.length===c&&$.largestBatchId>o&&a.set($.getKey(),$)}return PersistencePromise.resolve(a)}getOverlaysForCollectionGroup(e,s,o,a){let c=new SortedMap((g,d)=>g-d);const h=this.overlays.getIterator();for(;h.hasNext();){const g=h.getNext().value;if(g.getKey().getCollectionGroup()===s&&g.largestBatchId>o){let d=c.get(g.largestBatchId);d===null&&(d=__PRIVATE_newOverlayMap(),c=c.insert(g.largestBatchId,d)),d.set(g.getKey(),g)}}const _=__PRIVATE_newOverlayMap(),$=c.getIterator();for(;$.hasNext()&&($.getNext().value.forEach((g,d)=>_.set(g,d)),!(_.size()>=a)););return PersistencePromise.resolve(_)}ht(e,s,o){const a=this.overlays.get(o.key);if(a!==null){const h=this.hr.get(a.largestBatchId).delete(o.key);this.hr.set(a.largestBatchId,h)}this.overlays=this.overlays.insert(o.key,new Overlay(s,o));let c=this.hr.get(s);c===void 0&&(c=__PRIVATE_documentKeySet(),this.hr.set(s,c)),this.hr.set(s,c.add(o.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ReferenceSet{constructor(){this.Pr=new SortedSet(__PRIVATE_DocReference.Ir),this.Tr=new SortedSet(__PRIVATE_DocReference.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(e,s){const o=new __PRIVATE_DocReference(e,s);this.Pr=this.Pr.add(o),this.Tr=this.Tr.add(o)}dr(e,s){e.forEach(o=>this.addReference(o,s))}removeReference(e,s){this.Ar(new __PRIVATE_DocReference(e,s))}Rr(e,s){e.forEach(o=>this.removeReference(o,s))}Vr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1),c=[];return this.Tr.forEachInRange([o,a],h=>{this.Ar(h),c.push(h.key)}),c}mr(){this.Pr.forEach(e=>this.Ar(e))}Ar(e){this.Pr=this.Pr.delete(e),this.Tr=this.Tr.delete(e)}gr(e){const s=new DocumentKey(new ResourcePath([])),o=new __PRIVATE_DocReference(s,e),a=new __PRIVATE_DocReference(s,e+1);let c=__PRIVATE_documentKeySet();return this.Tr.forEachInRange([o,a],h=>{c=c.add(h.key)}),c}containsKey(e){const s=new __PRIVATE_DocReference(e,0),o=this.Pr.firstAfterOrEqual(s);return o!==null&&e.isEqual(o.key)}}class __PRIVATE_DocReference{constructor(e,s){this.key=e,this.pr=s}static Ir(e,s){return DocumentKey.comparator(e.key,s.key)||__PRIVATE_primitiveComparator(e.pr,s.pr)}static Er(e,s){return __PRIVATE_primitiveComparator(e.pr,s.pr)||DocumentKey.comparator(e.key,s.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryMutationQueue{constructor(e,s){this.indexManager=e,this.referenceDelegate=s,this.mutationQueue=[],this.yr=1,this.wr=new SortedSet(__PRIVATE_DocReference.Ir)}checkEmpty(e){return PersistencePromise.resolve(this.mutationQueue.length===0)}addMutationBatch(e,s,o,a){const c=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new MutationBatch(c,s,o,a);this.mutationQueue.push(h);for(const _ of a)this.wr=this.wr.add(new __PRIVATE_DocReference(_.key,c)),this.indexManager.addToCollectionParentIndex(e,_.key.path.popLast());return PersistencePromise.resolve(h)}lookupMutationBatch(e,s){return PersistencePromise.resolve(this.Sr(s))}getNextMutationBatchAfterBatchId(e,s){const o=s+1,a=this.br(o),c=a<0?0:a;return PersistencePromise.resolve(this.mutationQueue.length>c?this.mutationQueue[c]:null)}getHighestUnacknowledgedBatchId(){return PersistencePromise.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(e){return PersistencePromise.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=new __PRIVATE_DocReference(s,Number.POSITIVE_INFINITY),c=[];return this.wr.forEachInRange([o,a],h=>{const _=this.Sr(h.pr);c.push(_)}),PersistencePromise.resolve(c)}getAllMutationBatchesAffectingDocumentKeys(e,s){let o=new SortedSet(__PRIVATE_primitiveComparator);return s.forEach(a=>{const c=new __PRIVATE_DocReference(a,0),h=new __PRIVATE_DocReference(a,Number.POSITIVE_INFINITY);this.wr.forEachInRange([c,h],_=>{o=o.add(_.pr)})}),PersistencePromise.resolve(this.Dr(o))}getAllMutationBatchesAffectingQuery(e,s){const o=s.path,a=o.length+1;let c=o;DocumentKey.isDocumentKey(c)||(c=c.child(""));const h=new __PRIVATE_DocReference(new DocumentKey(c),0);let _=new SortedSet(__PRIVATE_primitiveComparator);return this.wr.forEachWhile($=>{const g=$.key.path;return!!o.isPrefixOf(g)&&(g.length===a&&(_=_.add($.pr)),!0)},h),PersistencePromise.resolve(this.Dr(_))}Dr(e){const s=[];return e.forEach(o=>{const a=this.Sr(o);a!==null&&s.push(a)}),s}removeMutationBatch(e,s){__PRIVATE_hardAssert(this.Cr(s.batchId,"removed")===0),this.mutationQueue.shift();let o=this.wr;return PersistencePromise.forEach(s.mutations,a=>{const c=new __PRIVATE_DocReference(a.key,s.batchId);return o=o.delete(c),this.referenceDelegate.markPotentiallyOrphaned(e,a.key)}).next(()=>{this.wr=o})}Mn(e){}containsKey(e,s){const o=new __PRIVATE_DocReference(s,0),a=this.wr.firstAfterOrEqual(o);return PersistencePromise.resolve(s.isEqual(a&&a.key))}performConsistencyCheck(e){return this.mutationQueue.length,PersistencePromise.resolve()}Cr(e,s){return this.br(e)}br(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Sr(e){const s=this.br(e);return s<0||s>=this.mutationQueue.length?null:this.mutationQueue[s]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryRemoteDocumentCacheImpl{constructor(e){this.vr=e,this.docs=function(){return new SortedMap(DocumentKey.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,s){const o=s.key,a=this.docs.get(o),c=a?a.size:0,h=this.vr(s);return this.docs=this.docs.insert(o,{document:s.mutableCopy(),size:h}),this.size+=h-c,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const s=this.docs.get(e);s&&(this.docs=this.docs.remove(e),this.size-=s.size)}getEntry(e,s){const o=this.docs.get(s);return PersistencePromise.resolve(o?o.document.mutableCopy():MutableDocument.newInvalidDocument(s))}getEntries(e,s){let o=__PRIVATE_mutableDocumentMap();return s.forEach(a=>{const c=this.docs.get(a);o=o.insert(a,c?c.document.mutableCopy():MutableDocument.newInvalidDocument(a))}),PersistencePromise.resolve(o)}getDocumentsMatchingQuery(e,s,o,a){let c=__PRIVATE_mutableDocumentMap();const h=s.path,_=new DocumentKey(h.child("")),$=this.docs.getIteratorFrom(_);for(;$.hasNext();){const{key:g,value:{document:d}}=$.getNext();if(!h.isPrefixOf(g.path))break;g.path.length>h.length+1||__PRIVATE_indexOffsetComparator(__PRIVATE_newIndexOffsetFromDocument(d),o)<=0||(a.has(d.key)||__PRIVATE_queryMatches(s,d))&&(c=c.insert(d.key,d.mutableCopy()))}return PersistencePromise.resolve(c)}getAllFromCollectionGroup(e,s,o,a){fail()}Fr(e,s){return PersistencePromise.forEach(this.docs,o=>s(o))}newChangeBuffer(e){return new __PRIVATE_MemoryRemoteDocumentChangeBuffer(this)}getSize(e){return PersistencePromise.resolve(this.size)}}class __PRIVATE_MemoryRemoteDocumentChangeBuffer extends RemoteDocumentChangeBuffer{constructor(e){super(),this.ar=e}applyChanges(e){const s=[];return this.changes.forEach((o,a)=>{a.isValidDocument()?s.push(this.ar.addEntry(e,a)):this.ar.removeEntry(o)}),PersistencePromise.waitFor(s)}getFromCache(e,s){return this.ar.getEntry(e,s)}getAllFromCache(e,s){return this.ar.getEntries(e,s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryTargetCache{constructor(e){this.persistence=e,this.Mr=new ObjectMap(s=>__PRIVATE_canonifyTarget(s),__PRIVATE_targetEquals),this.lastRemoteSnapshotVersion=SnapshotVersion.min(),this.highestTargetId=0,this.Or=0,this.Nr=new __PRIVATE_ReferenceSet,this.targetCount=0,this.Br=__PRIVATE_TargetIdGenerator.Nn()}forEachTarget(e,s){return this.Mr.forEach((o,a)=>s(a)),PersistencePromise.resolve()}getLastRemoteSnapshotVersion(e){return PersistencePromise.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return PersistencePromise.resolve(this.Or)}allocateTargetId(e){return this.highestTargetId=this.Br.next(),PersistencePromise.resolve(this.highestTargetId)}setTargetsMetadata(e,s,o){return o&&(this.lastRemoteSnapshotVersion=o),s>this.Or&&(this.Or=s),PersistencePromise.resolve()}qn(e){this.Mr.set(e.target,e);const s=e.targetId;s>this.highestTargetId&&(this.Br=new __PRIVATE_TargetIdGenerator(s),this.highestTargetId=s),e.sequenceNumber>this.Or&&(this.Or=e.sequenceNumber)}addTargetData(e,s){return this.qn(s),this.targetCount+=1,PersistencePromise.resolve()}updateTargetData(e,s){return this.qn(s),PersistencePromise.resolve()}removeTargetData(e,s){return this.Mr.delete(s.target),this.Nr.Vr(s.targetId),this.targetCount-=1,PersistencePromise.resolve()}removeTargets(e,s,o){let a=0;const c=[];return this.Mr.forEach((h,_)=>{_.sequenceNumber<=s&&o.get(_.targetId)===null&&(this.Mr.delete(h),c.push(this.removeMatchingKeysForTargetId(e,_.targetId)),a++)}),PersistencePromise.waitFor(c).next(()=>a)}getTargetCount(e){return PersistencePromise.resolve(this.targetCount)}getTargetData(e,s){const o=this.Mr.get(s)||null;return PersistencePromise.resolve(o)}addMatchingKeys(e,s,o){return this.Nr.dr(s,o),PersistencePromise.resolve()}removeMatchingKeys(e,s,o){this.Nr.Rr(s,o);const a=this.persistence.referenceDelegate,c=[];return a&&s.forEach(h=>{c.push(a.markPotentiallyOrphaned(e,h))}),PersistencePromise.waitFor(c)}removeMatchingKeysForTargetId(e,s){return this.Nr.Vr(s),PersistencePromise.resolve()}getMatchingKeysForTargetId(e,s){const o=this.Nr.gr(s);return PersistencePromise.resolve(o)}containsKey(e,s){return PersistencePromise.resolve(this.Nr.containsKey(s))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_MemoryPersistence{constructor(e,s){this.Lr={},this.overlays={},this.kr=new __PRIVATE_ListenSequence(0),this.qr=!1,this.qr=!0,this.referenceDelegate=e(this),this.Qr=new __PRIVATE_MemoryTargetCache(this),this.indexManager=new __PRIVATE_MemoryIndexManager,this.remoteDocumentCache=function(a){return new __PRIVATE_MemoryRemoteDocumentCacheImpl(a)}(o=>this.referenceDelegate.Kr(o)),this.serializer=new __PRIVATE_LocalSerializer(s),this.$r=new __PRIVATE_MemoryBundleCache(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let s=this.overlays[e.toKey()];return s||(s=new __PRIVATE_MemoryDocumentOverlayCache,this.overlays[e.toKey()]=s),s}getMutationQueue(e,s){let o=this.Lr[e.toKey()];return o||(o=new __PRIVATE_MemoryMutationQueue(s,this.referenceDelegate),this.Lr[e.toKey()]=o),o}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(e,s,o){__PRIVATE_logDebug("MemoryPersistence","Starting transaction:",e);const a=new __PRIVATE_MemoryTransaction(this.kr.next());return this.referenceDelegate.Ur(),o(a).next(c=>this.referenceDelegate.Wr(a).next(()=>c)).toPromise().then(c=>(a.raiseOnCommittedEvent(),c))}Gr(e,s){return PersistencePromise.or(Object.values(this.Lr).map(o=>()=>o.containsKey(e,s)))}}class __PRIVATE_MemoryTransaction extends PersistenceTransaction{constructor(e){super(),this.currentSequenceNumber=e}}class __PRIVATE_MemoryEagerDelegate{constructor(e){this.persistence=e,this.zr=new __PRIVATE_ReferenceSet,this.jr=null}static Hr(e){return new __PRIVATE_MemoryEagerDelegate(e)}get Jr(){if(this.jr)return this.jr;throw fail()}addReference(e,s,o){return this.zr.addReference(o,s),this.Jr.delete(o.toString()),PersistencePromise.resolve()}removeReference(e,s,o){return this.zr.removeReference(o,s),this.Jr.add(o.toString()),PersistencePromise.resolve()}markPotentiallyOrphaned(e,s){return this.Jr.add(s.toString()),PersistencePromise.resolve()}removeTarget(e,s){this.zr.Vr(s.targetId).forEach(a=>this.Jr.add(a.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,s.targetId).next(a=>{a.forEach(c=>this.Jr.add(c.toString()))}).next(()=>o.removeTargetData(e,s))}Ur(){this.jr=new Set}Wr(e){const s=this.persistence.getRemoteDocumentCache().newChangeBuffer();return PersistencePromise.forEach(this.Jr,o=>{const a=DocumentKey.fromPath(o);return this.Yr(e,a).next(c=>{c||s.removeEntry(a,SnapshotVersion.min())})}).next(()=>(this.jr=null,s.apply(e)))}updateLimboDocument(e,s){return this.Yr(e,s).next(o=>{o?this.Jr.delete(s.toString()):this.Jr.add(s.toString())})}Kr(e){return 0}Yr(e,s){return PersistencePromise.or([()=>PersistencePromise.resolve(this.zr.containsKey(s)),()=>this.persistence.getTargetCache().containsKey(e,s),()=>this.persistence.Gr(e,s)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalViewChanges{constructor(e,s,o,a){this.targetId=e,this.fromCache=s,this.qi=o,this.Qi=a}static Ki(e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();for(const c of s.docChanges)switch(c.type){case 0:o=o.add(c.doc.key);break;case 1:a=a.add(c.doc.key)}return new __PRIVATE_LocalViewChanges(e,s.fromCache,o,a)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QueryContext{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryEngine{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return isSafari()?8:__PRIVATE_SimpleDb.v(getUA())>0?6:4}()}initialize(e,s){this.zi=e,this.indexManager=s,this.$i=!0}getDocumentsMatchingQuery(e,s,o,a){const c={result:null};return this.ji(e,s).next(h=>{c.result=h}).next(()=>{if(!c.result)return this.Hi(e,s,a,o).next(h=>{c.result=h})}).next(()=>{if(c.result)return;const h=new QueryContext;return this.Ji(e,s,h).next(_=>{if(c.result=_,this.Ui)return this.Yi(e,s,h,_.size)})}).next(()=>c.result)}Yi(e,s,o,a){return o.documentReadCount<this.Wi?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","SDK will not create cache indexes for query:",__PRIVATE_stringifyQuery(s),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),PersistencePromise.resolve()):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Query:",__PRIVATE_stringifyQuery(s),"scans",o.documentReadCount,"local documents and returns",a,"documents as results."),o.documentReadCount>this.Gi*a?(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","The SDK decides to create cache indexes for query:",__PRIVATE_stringifyQuery(s),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,__PRIVATE_queryToTarget(s))):PersistencePromise.resolve())}ji(e,s){if(__PRIVATE_queryMatchesAllDocuments(s))return PersistencePromise.resolve(null);let o=__PRIVATE_queryToTarget(s);return this.indexManager.getIndexType(e,o).next(a=>a===0?null:(s.limit!==null&&a===1&&(s=__PRIVATE_queryWithLimit(s,null,"F"),o=__PRIVATE_queryToTarget(s)),this.indexManager.getDocumentsMatchingTarget(e,o).next(c=>{const h=__PRIVATE_documentKeySet(...c);return this.zi.getDocuments(e,h).next(_=>this.indexManager.getMinOffset(e,o).next($=>{const g=this.Zi(s,_);return this.Xi(s,g,h,$.readTime)?this.ji(e,__PRIVATE_queryWithLimit(s,null,"F")):this.es(e,g,s,$)}))})))}Hi(e,s,o,a){return __PRIVATE_queryMatchesAllDocuments(s)||a.isEqual(SnapshotVersion.min())?PersistencePromise.resolve(null):this.zi.getDocuments(e,o).next(c=>{const h=this.Zi(s,c);return this.Xi(s,h,o,a)?PersistencePromise.resolve(null):(__PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Re-using previous result from %s to execute query: %s",a.toString(),__PRIVATE_stringifyQuery(s)),this.es(e,h,s,__PRIVATE_newIndexOffsetSuccessorFromReadTime(a,-1)).next(_=>_))})}Zi(e,s){let o=new SortedSet(__PRIVATE_newQueryComparator(e));return s.forEach((a,c)=>{__PRIVATE_queryMatches(e,c)&&(o=o.add(c))}),o}Xi(e,s,o,a){if(e.limit===null)return!1;if(o.size!==s.size)return!0;const c=e.limitType==="F"?s.last():s.first();return!!c&&(c.hasPendingWrites||c.version.compareTo(a)>0)}Ji(e,s,o){return __PRIVATE_getLogLevel()<=LogLevel.DEBUG&&__PRIVATE_logDebug("QueryEngine","Using full collection scan to execute query:",__PRIVATE_stringifyQuery(s)),this.zi.getDocumentsMatchingQuery(e,s,IndexOffset.min(),o)}es(e,s,o,a){return this.zi.getDocumentsMatchingQuery(e,o,a).next(c=>(s.forEach(h=>{c=c.insert(h.key,h)}),c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_LocalStoreImpl{constructor(e,s,o,a){this.persistence=e,this.ts=s,this.serializer=a,this.ns=new SortedMap(__PRIVATE_primitiveComparator),this.rs=new ObjectMap(c=>__PRIVATE_canonifyTarget(c),__PRIVATE_targetEquals),this.ss=new Map,this.os=e.getRemoteDocumentCache(),this.Qr=e.getTargetCache(),this.$r=e.getBundleCache(),this._s(o)}_s(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new LocalDocumentsView(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",s=>e.collect(s,this.ns))}}function __PRIVATE_newLocalStore(i,e,s,o){return new __PRIVATE_LocalStoreImpl(i,e,s,o)}async function __PRIVATE_localStoreHandleUserChange(i,e){const s=__PRIVATE_debugCast(i);return await s.persistence.runTransaction("Handle user change","readonly",o=>{let a;return s.mutationQueue.getAllMutationBatches(o).next(c=>(a=c,s._s(e),s.mutationQueue.getAllMutationBatches(o))).next(c=>{const h=[],_=[];let $=__PRIVATE_documentKeySet();for(const g of a){h.push(g.batchId);for(const d of g.mutations)$=$.add(d.key)}for(const g of c){_.push(g.batchId);for(const d of g.mutations)$=$.add(d.key)}return s.localDocuments.getDocuments(o,$).next(g=>({us:g,removedBatchIds:h,addedBatchIds:_}))})})}function __PRIVATE_localStoreAcknowledgeBatch(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const a=e.batch.keys(),c=s.os.newChangeBuffer({trackRemovals:!0});return function(_,$,g,d){const j=g.batch,tt=j.keys();let rt=PersistencePromise.resolve();return tt.forEach(et=>{rt=rt.next(()=>d.getEntry($,et)).next(it=>{const st=g.docVersions.get(et);__PRIVATE_hardAssert(st!==null),it.version.compareTo(st)<0&&(j.applyToRemoteDocument(it,g),it.isValidDocument()&&(it.setReadTime(g.commitVersion),d.addEntry(it)))})}),rt.next(()=>_.mutationQueue.removeMutationBatch($,j))}(s,o,e,c).next(()=>c.apply(o)).next(()=>s.mutationQueue.performConsistencyCheck(o)).next(()=>s.documentOverlayCache.removeOverlaysForBatchId(o,a,e.batch.batchId)).next(()=>s.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(o,function(_){let $=__PRIVATE_documentKeySet();for(let g=0;g<_.mutationResults.length;++g)_.mutationResults[g].transformResults.length>0&&($=$.add(_.batch.mutations[g].key));return $}(e))).next(()=>s.localDocuments.getDocuments(o,a))})}function __PRIVATE_localStoreGetLastRemoteSnapshotVersion(i){const e=__PRIVATE_debugCast(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",s=>e.Qr.getLastRemoteSnapshotVersion(s))}function __PRIVATE_localStoreApplyRemoteEventToLocalCache(i,e){const s=__PRIVATE_debugCast(i),o=e.snapshotVersion;let a=s.ns;return s.persistence.runTransaction("Apply remote event","readwrite-primary",c=>{const h=s.os.newChangeBuffer({trackRemovals:!0});a=s.ns;const _=[];e.targetChanges.forEach((d,j)=>{const tt=a.get(j);if(!tt)return;_.push(s.Qr.removeMatchingKeys(c,d.removedDocuments,j).next(()=>s.Qr.addMatchingKeys(c,d.addedDocuments,j)));let rt=tt.withSequenceNumber(c.currentSequenceNumber);e.targetMismatches.get(j)!==null?rt=rt.withResumeToken(ByteString.EMPTY_BYTE_STRING,SnapshotVersion.min()).withLastLimboFreeSnapshotVersion(SnapshotVersion.min()):d.resumeToken.approximateByteSize()>0&&(rt=rt.withResumeToken(d.resumeToken,o)),a=a.insert(j,rt),function(it,st,nt){return it.resumeToken.approximateByteSize()===0||st.snapshotVersion.toMicroseconds()-it.snapshotVersion.toMicroseconds()>=3e8?!0:nt.addedDocuments.size+nt.modifiedDocuments.size+nt.removedDocuments.size>0}(tt,rt,d)&&_.push(s.Qr.updateTargetData(c,rt))});let $=__PRIVATE_mutableDocumentMap(),g=__PRIVATE_documentKeySet();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&_.push(s.persistence.referenceDelegate.updateLimboDocument(c,d))}),_.push(__PRIVATE_populateDocumentChangeBuffer(c,h,e.documentUpdates).next(d=>{$=d.cs,g=d.ls})),!o.isEqual(SnapshotVersion.min())){const d=s.Qr.getLastRemoteSnapshotVersion(c).next(j=>s.Qr.setTargetsMetadata(c,c.currentSequenceNumber,o));_.push(d)}return PersistencePromise.waitFor(_).next(()=>h.apply(c)).next(()=>s.localDocuments.getLocalViewOfDocuments(c,$,g)).next(()=>$)}).then(c=>(s.ns=a,c))}function __PRIVATE_populateDocumentChangeBuffer(i,e,s){let o=__PRIVATE_documentKeySet(),a=__PRIVATE_documentKeySet();return s.forEach(c=>o=o.add(c)),e.getEntries(i,o).next(c=>{let h=__PRIVATE_mutableDocumentMap();return s.forEach((_,$)=>{const g=c.get(_);$.isFoundDocument()!==g.isFoundDocument()&&(a=a.add(_)),$.isNoDocument()&&$.version.isEqual(SnapshotVersion.min())?(e.removeEntry(_,$.readTime),h=h.insert(_,$)):!g.isValidDocument()||$.version.compareTo(g.version)>0||$.version.compareTo(g.version)===0&&g.hasPendingWrites?(e.addEntry($),h=h.insert(_,$)):__PRIVATE_logDebug("LocalStore","Ignoring outdated watch update for ",_,". Current version:",g.version," Watch version:",$.version)}),{cs:h,ls:a}})}function __PRIVATE_localStoreGetNextMutationBatch(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Get next mutation batch","readonly",o=>(e===void 0&&(e=-1),s.mutationQueue.getNextMutationBatchAfterBatchId(o,e)))}function __PRIVATE_localStoreAllocateTarget(i,e){const s=__PRIVATE_debugCast(i);return s.persistence.runTransaction("Allocate target","readwrite",o=>{let a;return s.Qr.getTargetData(o,e).next(c=>c?(a=c,PersistencePromise.resolve(a)):s.Qr.allocateTargetId(o).next(h=>(a=new TargetData(e,h,"TargetPurposeListen",o.currentSequenceNumber),s.Qr.addTargetData(o,a).next(()=>a))))}).then(o=>{const a=s.ns.get(o.targetId);return(a===null||o.snapshotVersion.compareTo(a.snapshotVersion)>0)&&(s.ns=s.ns.insert(o.targetId,o),s.rs.set(e,o.targetId)),o})}async function __PRIVATE_localStoreReleaseTarget(i,e,s){const o=__PRIVATE_debugCast(i),a=o.ns.get(e),c=s?"readwrite":"readwrite-primary";try{s||await o.persistence.runTransaction("Release target",c,h=>o.persistence.referenceDelegate.removeTarget(h,a))}catch(h){if(!__PRIVATE_isIndexedDbTransactionError(h))throw h;__PRIVATE_logDebug("LocalStore",`Failed to update sequence numbers for target ${e}: ${h}`)}o.ns=o.ns.remove(e),o.rs.delete(a.target)}function __PRIVATE_localStoreExecuteQuery(i,e,s){const o=__PRIVATE_debugCast(i);let a=SnapshotVersion.min(),c=__PRIVATE_documentKeySet();return o.persistence.runTransaction("Execute query","readwrite",h=>function($,g,d){const j=__PRIVATE_debugCast($),tt=j.rs.get(d);return tt!==void 0?PersistencePromise.resolve(j.ns.get(tt)):j.Qr.getTargetData(g,d)}(o,h,__PRIVATE_queryToTarget(e)).next(_=>{if(_)return a=_.lastLimboFreeSnapshotVersion,o.Qr.getMatchingKeysForTargetId(h,_.targetId).next($=>{c=$})}).next(()=>o.ts.getDocumentsMatchingQuery(h,e,s?a:SnapshotVersion.min(),s?c:__PRIVATE_documentKeySet())).next(_=>(__PRIVATE_setMaxReadTime(o,__PRIVATE_queryCollectionGroup(e),_),{documents:_,hs:c})))}function __PRIVATE_setMaxReadTime(i,e,s){let o=i.ss.get(e)||SnapshotVersion.min();s.forEach((a,c)=>{c.readTime.compareTo(o)>0&&(o=c.readTime)}),i.ss.set(e,o)}class __PRIVATE_LocalClientState{constructor(){this.activeTargetIds=__PRIVATE_targetIdSet()}As(e){this.activeTargetIds=this.activeTargetIds.add(e)}Rs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}ds(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class __PRIVATE_MemorySharedClientState{constructor(){this.no=new __PRIVATE_LocalClientState,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,s,o){}addLocalQueryTarget(e){return this.no.As(e),this.ro[e]||"not-current"}updateQueryState(e,s,o){this.ro[e]=s}removeLocalQueryTarget(e){this.no.Rs(e)}isLocalQueryTarget(e){return this.no.activeTargetIds.has(e)}clearQueryState(e){delete this.ro[e]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(e){return this.no.activeTargetIds.has(e)}start(){return this.no=new __PRIVATE_LocalClientState,Promise.resolve()}handleUserChange(e,s,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_NoopConnectivityMonitor{io(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_BrowserConnectivityMonitor{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(e){this.uo.push(e)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.uo)e(0)}ao(){__PRIVATE_logDebug("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.uo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ae=null;function __PRIVATE_generateUniqueDebugId(){return Ae===null?Ae=function(){return 268435456+Math.round(2147483648*Math.random())}():Ae++,"0x"+Ae.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_StreamBridge{constructor(e){this.lo=e.lo,this.ho=e.ho}Po(e){this.Io=e}To(e){this.Eo=e}onMessage(e){this.Ao=e}close(){this.ho()}send(e){this.lo(e)}Ro(){this.Io()}Vo(e){this.Eo(e)}mo(e){this.Ao(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ve="WebChannelConnection";class __PRIVATE_WebChannelConnection extends class{constructor(s){this.databaseInfo=s,this.databaseId=s.databaseId;const o=s.ssl?"https":"http",a=encodeURIComponent(this.databaseId.projectId),c=encodeURIComponent(this.databaseId.database);this.fo=o+"://"+s.host,this.po=`projects/${a}/databases/${c}`,this.yo=this.databaseId.database==="(default)"?`project_id=${a}`:`project_id=${a}&database_id=${c}`}get wo(){return!1}So(s,o,a,c,h){const _=__PRIVATE_generateUniqueDebugId(),$=this.bo(s,o.toUriEncodedString());__PRIVATE_logDebug("RestConnection",`Sending RPC '${s}' ${_}:`,$,a);const g={"google-cloud-resource-prefix":this.po,"x-goog-request-params":this.yo};return this.Do(g,c,h),this.Co(s,$,g,a).then(d=>(__PRIVATE_logDebug("RestConnection",`Received RPC '${s}' ${_}: `,d),d),d=>{throw __PRIVATE_logWarn("RestConnection",`RPC '${s}' ${_} failed with error: `,d,"url: ",$,"request:",a),d})}vo(s,o,a,c,h,_){return this.So(s,o,a,c,h)}Do(s,o,a){s["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+S}(),s["Content-Type"]="text/plain",this.databaseInfo.appId&&(s["X-Firebase-GMPID"]=this.databaseInfo.appId),o&&o.headers.forEach((c,h)=>s[h]=c),a&&a.headers.forEach((c,h)=>s[h]=c)}bo(s,o){const a=Re[s];return`${this.fo}/v1/${o}:${a}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Co(e,s,o,a){const c=__PRIVATE_generateUniqueDebugId();return new Promise((h,_)=>{const $=new XhrIo;$.setWithCredentials(!0),$.listenOnce(EventType.COMPLETE,()=>{try{switch($.getLastErrorCode()){case ErrorCode$1.NO_ERROR:const d=$.getResponseJson();__PRIVATE_logDebug(Ve,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(d)),h(d);break;case ErrorCode$1.TIMEOUT:__PRIVATE_logDebug(Ve,`RPC '${e}' ${c} timed out`),_(new FirestoreError(D.DEADLINE_EXCEEDED,"Request time out"));break;case ErrorCode$1.HTTP_ERROR:const j=$.getStatus();if(__PRIVATE_logDebug(Ve,`RPC '${e}' ${c} failed with status:`,j,"response text:",$.getResponseText()),j>0){let tt=$.getResponseJson();Array.isArray(tt)&&(tt=tt[0]);const rt=tt?.error;if(rt&&rt.status&&rt.message){const et=function(st){const nt=st.toLowerCase().replace(/_/g,"-");return Object.values(D).indexOf(nt)>=0?nt:D.UNKNOWN}(rt.status);_(new FirestoreError(et,rt.message))}else _(new FirestoreError(D.UNKNOWN,"Server responded with status "+$.getStatus()))}else _(new FirestoreError(D.UNAVAILABLE,"Connection failed."));break;default:fail()}}finally{__PRIVATE_logDebug(Ve,`RPC '${e}' ${c} completed.`)}});const g=JSON.stringify(a);__PRIVATE_logDebug(Ve,`RPC '${e}' ${c} sending request:`,a),$.send(s,"POST",g,o,15)})}Fo(e,s,o){const a=__PRIVATE_generateUniqueDebugId(),c=[this.fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],h=createWebChannelTransport(),_=getStatEventTarget(),$={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},g=this.longPollingOptions.timeoutSeconds;g!==void 0&&($.longPollingTimeout=Math.round(1e3*g)),this.useFetchStreams&&($.useFetchStreams=!0),this.Do($.initMessageHeaders,s,o),$.encodeInitMessageHeaders=!0;const d=c.join("");__PRIVATE_logDebug(Ve,`Creating RPC '${e}' stream ${a}: ${d}`,$);const j=h.createWebChannel(d,$);let tt=!1,rt=!1;const et=new __PRIVATE_StreamBridge({lo:st=>{rt?__PRIVATE_logDebug(Ve,`Not sending because RPC '${e}' stream ${a} is closed:`,st):(tt||(__PRIVATE_logDebug(Ve,`Opening RPC '${e}' stream ${a} transport.`),j.open(),tt=!0),__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} sending:`,st),j.send(st))},ho:()=>j.close()}),it=(st,nt,ot)=>{st.listen(nt,ht=>{try{ot(ht)}catch(pt){setTimeout(()=>{throw pt},0)}})};return it(j,WebChannel.EventType.OPEN,()=>{rt||__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} transport opened.`)}),it(j,WebChannel.EventType.CLOSE,()=>{rt||(rt=!0,__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} transport closed`),et.Vo())}),it(j,WebChannel.EventType.ERROR,st=>{rt||(rt=!0,__PRIVATE_logWarn(Ve,`RPC '${e}' stream ${a} transport errored:`,st),et.Vo(new FirestoreError(D.UNAVAILABLE,"The operation could not be completed")))}),it(j,WebChannel.EventType.MESSAGE,st=>{var nt;if(!rt){const ot=st.data[0];__PRIVATE_hardAssert(!!ot);const ht=ot,pt=ht.error||((nt=ht[0])===null||nt===void 0?void 0:nt.error);if(pt){__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} received error:`,pt);const lt=pt.status;let ut=function(vt){const Vt=ae[vt];if(Vt!==void 0)return __PRIVATE_mapCodeFromRpcCode(Vt)}(lt),yt=pt.message;ut===void 0&&(ut=D.INTERNAL,yt="Unknown error status: "+lt+" with message "+pt.message),rt=!0,et.Vo(new FirestoreError(ut,yt)),j.close()}else __PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} received:`,ot),et.mo(ot)}}),it(_,Event$1.STAT_EVENT,st=>{st.stat===Stat.PROXY?__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} detected buffering proxy`):st.stat===Stat.NOPROXY&&__PRIVATE_logDebug(Ve,`RPC '${e}' stream ${a} detected no buffering proxy`)}),setTimeout(()=>{et.Ro()},0),et}}function getDocument(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_newSerializer(i){return new JsonProtoSerializer(i,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_ExponentialBackoff{constructor(e,s,o=1e3,a=1.5,c=6e4){this.oi=e,this.timerId=s,this.Mo=o,this.xo=a,this.Oo=c,this.No=0,this.Bo=null,this.Lo=Date.now(),this.reset()}reset(){this.No=0}ko(){this.No=this.Oo}qo(e){this.cancel();const s=Math.floor(this.No+this.Qo()),o=Math.max(0,Date.now()-this.Lo),a=Math.max(0,s-o);a>0&&__PRIVATE_logDebug("ExponentialBackoff",`Backing off for ${a} ms (base delay: ${this.No} ms, delay with jitter: ${s} ms, last attempt: ${o} ms ago)`),this.Bo=this.oi.enqueueAfterDelay(this.timerId,a,()=>(this.Lo=Date.now(),e())),this.No*=this.xo,this.No<this.Mo&&(this.No=this.Mo),this.No>this.Oo&&(this.No=this.Oo)}Ko(){this.Bo!==null&&(this.Bo.skipDelay(),this.Bo=null)}cancel(){this.Bo!==null&&(this.Bo.cancel(),this.Bo=null)}Qo(){return(Math.random()-.5)*this.No}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_PersistentStream{constructor(e,s,o,a,c,h,_,$){this.oi=e,this.$o=o,this.Uo=a,this.connection=c,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=_,this.listener=$,this.state=0,this.Wo=0,this.Go=null,this.zo=null,this.stream=null,this.jo=new __PRIVATE_ExponentialBackoff(e,s)}Ho(){return this.state===1||this.state===5||this.Jo()}Jo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Yo()}async stop(){this.Ho()&&await this.close(0)}Zo(){this.state=0,this.jo.reset()}Xo(){this.Jo()&&this.Go===null&&(this.Go=this.oi.enqueueAfterDelay(this.$o,6e4,()=>this.e_()))}t_(e){this.n_(),this.stream.send(e)}async e_(){if(this.Jo())return this.close(0)}n_(){this.Go&&(this.Go.cancel(),this.Go=null)}r_(){this.zo&&(this.zo.cancel(),this.zo=null)}async close(e,s){this.n_(),this.r_(),this.jo.cancel(),this.Wo++,e!==4?this.jo.reset():s&&s.code===D.RESOURCE_EXHAUSTED?(__PRIVATE_logError(s.toString()),__PRIVATE_logError("Using maximum backoff delay to prevent overloading the backend."),this.jo.ko()):s&&s.code===D.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.i_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.To(s)}i_(){}auth(){this.state=1;const e=this.s_(this.Wo),s=this.Wo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,a])=>{this.Wo===s&&this.o_(o,a)},o=>{e(()=>{const a=new FirestoreError(D.UNKNOWN,"Fetching auth token failed: "+o.message);return this.__(a)})})}o_(e,s){const o=this.s_(this.Wo);this.stream=this.a_(e,s),this.stream.Po(()=>{o(()=>(this.state=2,this.zo=this.oi.enqueueAfterDelay(this.Uo,1e4,()=>(this.Jo()&&(this.state=3),Promise.resolve())),this.listener.Po()))}),this.stream.To(a=>{o(()=>this.__(a))}),this.stream.onMessage(a=>{o(()=>this.onMessage(a))})}Yo(){this.state=5,this.jo.qo(async()=>{this.state=0,this.start()})}__(e){return __PRIVATE_logDebug("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}s_(e){return s=>{this.oi.enqueueAndForget(()=>this.Wo===e?s():(__PRIVATE_logDebug("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class __PRIVATE_PersistentListenStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,h){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",s,o,a,h),this.serializer=c}a_(e,s){return this.connection.Fo("Listen",e,s)}onMessage(e){this.jo.reset();const s=__PRIVATE_fromWatchChange(this.serializer,e),o=function(c){if(!("targetChange"in c))return SnapshotVersion.min();const h=c.targetChange;return h.targetIds&&h.targetIds.length?SnapshotVersion.min():h.readTime?__PRIVATE_fromVersion(h.readTime):SnapshotVersion.min()}(e);return this.listener.u_(s,o)}c_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.addTarget=function(c,h){let _;const $=h.target;if(_=__PRIVATE_targetIsDocumentTarget($)?{documents:__PRIVATE_toDocumentsTarget(c,$)}:{query:__PRIVATE_toQueryTarget(c,$).ut},_.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){_.resumeToken=__PRIVATE_toBytes(c,h.resumeToken);const g=__PRIVATE_toInt32Proto(c,h.expectedCount);g!==null&&(_.expectedCount=g)}else if(h.snapshotVersion.compareTo(SnapshotVersion.min())>0){_.readTime=toTimestamp(c,h.snapshotVersion.toTimestamp());const g=__PRIVATE_toInt32Proto(c,h.expectedCount);g!==null&&(_.expectedCount=g)}return _}(this.serializer,e);const o=__PRIVATE_toListenRequestLabels(this.serializer,e);o&&(s.labels=o),this.t_(s)}l_(e){const s={};s.database=__PRIVATE_getEncodedDatabaseId(this.serializer),s.removeTarget=e,this.t_(s)}}class __PRIVATE_PersistentWriteStream extends __PRIVATE_PersistentStream{constructor(e,s,o,a,c,h){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",s,o,a,h),this.serializer=c,this.h_=!1}get P_(){return this.h_}start(){this.h_=!1,this.lastStreamToken=void 0,super.start()}i_(){this.h_&&this.I_([])}a_(e,s){return this.connection.Fo("Write",e,s)}onMessage(e){if(__PRIVATE_hardAssert(!!e.streamToken),this.lastStreamToken=e.streamToken,this.h_){this.jo.reset();const s=__PRIVATE_fromWriteResults(e.writeResults,e.commitTime),o=__PRIVATE_fromVersion(e.commitTime);return this.listener.T_(o,s)}return __PRIVATE_hardAssert(!e.writeResults||e.writeResults.length===0),this.h_=!0,this.listener.E_()}d_(){const e={};e.database=__PRIVATE_getEncodedDatabaseId(this.serializer),this.t_(e)}I_(e){const s={streamToken:this.lastStreamToken,writes:e.map(o=>toMutation(this.serializer,o))};this.t_(s)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DatastoreImpl extends class{}{constructor(e,s,o,a){super(),this.authCredentials=e,this.appCheckCredentials=s,this.connection=o,this.serializer=a,this.A_=!1}R_(){if(this.A_)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}So(e,s,o,a){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([c,h])=>this.connection.So(e,__PRIVATE_toResourcePath(s,o),a,c,h)).catch(c=>{throw c.name==="FirebaseError"?(c.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new FirestoreError(D.UNKNOWN,c.toString())})}vo(e,s,o,a,c){return this.R_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([h,_])=>this.connection.vo(e,__PRIVATE_toResourcePath(s,o),a,h,_,c)).catch(h=>{throw h.name==="FirebaseError"?(h.code===D.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new FirestoreError(D.UNKNOWN,h.toString())})}terminate(){this.A_=!0,this.connection.terminate()}}class __PRIVATE_OnlineStateTracker{constructor(e,s){this.asyncQueue=e,this.onlineStateHandler=s,this.state="Unknown",this.m_=0,this.f_=null,this.g_=!0}p_(){this.m_===0&&(this.y_("Unknown"),this.f_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.f_=null,this.w_("Backend didn't respond within 10 seconds."),this.y_("Offline"),Promise.resolve())))}S_(e){this.state==="Online"?this.y_("Unknown"):(this.m_++,this.m_>=1&&(this.b_(),this.w_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.y_("Offline")))}set(e){this.b_(),this.m_=0,e==="Online"&&(this.g_=!1),this.y_(e)}y_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}w_(e){const s=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.g_?(__PRIVATE_logError(s),this.g_=!1):__PRIVATE_logDebug("OnlineStateTracker",s)}b_(){this.f_!==null&&(this.f_.cancel(),this.f_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_RemoteStoreImpl{constructor(e,s,o,a,c){this.localStore=e,this.datastore=s,this.asyncQueue=o,this.remoteSyncer={},this.D_=[],this.C_=new Map,this.v_=new Set,this.F_=[],this.M_=c,this.M_.io(h=>{o.enqueueAndForget(async()=>{__PRIVATE_canUseNetwork(this)&&(__PRIVATE_logDebug("RemoteStore","Restarting streams for network reachability change."),await async function($){const g=__PRIVATE_debugCast($);g.v_.add(4),await __PRIVATE_disableNetworkInternal(g),g.x_.set("Unknown"),g.v_.delete(4),await __PRIVATE_enableNetworkInternal(g)}(this))})}),this.x_=new __PRIVATE_OnlineStateTracker(o,a)}}async function __PRIVATE_enableNetworkInternal(i){if(__PRIVATE_canUseNetwork(i))for(const e of i.F_)await e(!0)}async function __PRIVATE_disableNetworkInternal(i){for(const e of i.F_)await e(!1)}function __PRIVATE_remoteStoreListen(i,e){const s=__PRIVATE_debugCast(i);s.C_.has(e.targetId)||(s.C_.set(e.targetId,e),__PRIVATE_shouldStartWatchStream(s)?__PRIVATE_startWatchStream(s):__PRIVATE_ensureWatchStream(s).Jo()&&__PRIVATE_sendWatchRequest(s,e))}function __PRIVATE_remoteStoreUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=__PRIVATE_ensureWatchStream(s);s.C_.delete(e),o.Jo()&&__PRIVATE_sendUnwatchRequest(s,e),s.C_.size===0&&(o.Jo()?o.Xo():__PRIVATE_canUseNetwork(s)&&s.x_.set("Unknown"))}function __PRIVATE_sendWatchRequest(i,e){if(i.O_.Oe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(SnapshotVersion.min())>0){const s=i.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(s)}__PRIVATE_ensureWatchStream(i).c_(e)}function __PRIVATE_sendUnwatchRequest(i,e){i.O_.Oe(e),__PRIVATE_ensureWatchStream(i).l_(e)}function __PRIVATE_startWatchStream(i){i.O_=new __PRIVATE_WatchChangeAggregator({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),_t:e=>i.C_.get(e)||null,nt:()=>i.datastore.serializer.databaseId}),__PRIVATE_ensureWatchStream(i).start(),i.x_.p_()}function __PRIVATE_shouldStartWatchStream(i){return __PRIVATE_canUseNetwork(i)&&!__PRIVATE_ensureWatchStream(i).Ho()&&i.C_.size>0}function __PRIVATE_canUseNetwork(i){return __PRIVATE_debugCast(i).v_.size===0}function __PRIVATE_cleanUpWatchStreamState(i){i.O_=void 0}async function __PRIVATE_onWatchStreamOpen(i){i.C_.forEach((e,s)=>{__PRIVATE_sendWatchRequest(i,e)})}async function __PRIVATE_onWatchStreamClose(i,e){__PRIVATE_cleanUpWatchStreamState(i),__PRIVATE_shouldStartWatchStream(i)?(i.x_.S_(e),__PRIVATE_startWatchStream(i)):i.x_.set("Unknown")}async function __PRIVATE_onWatchStreamChange(i,e,s){if(i.x_.set("Online"),e instanceof __PRIVATE_WatchTargetChange&&e.state===2&&e.cause)try{await async function(a,c){const h=c.cause;for(const _ of c.targetIds)a.C_.has(_)&&(await a.remoteSyncer.rejectListen(_,h),a.C_.delete(_),a.O_.removeTarget(_))}(i,e)}catch(o){__PRIVATE_logDebug("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),await __PRIVATE_disableNetworkUntilRecovery(i,o)}else if(e instanceof __PRIVATE_DocumentWatchChange?i.O_.$e(e):e instanceof __PRIVATE_ExistenceFilterChange?i.O_.Je(e):i.O_.Ge(e),!s.isEqual(SnapshotVersion.min()))try{const o=await __PRIVATE_localStoreGetLastRemoteSnapshotVersion(i.localStore);s.compareTo(o)>=0&&await function(c,h){const _=c.O_.it(h);return _.targetChanges.forEach(($,g)=>{if($.resumeToken.approximateByteSize()>0){const d=c.C_.get(g);d&&c.C_.set(g,d.withResumeToken($.resumeToken,h))}}),_.targetMismatches.forEach(($,g)=>{const d=c.C_.get($);if(!d)return;c.C_.set($,d.withResumeToken(ByteString.EMPTY_BYTE_STRING,d.snapshotVersion)),__PRIVATE_sendUnwatchRequest(c,$);const j=new TargetData(d.target,$,g,d.sequenceNumber);__PRIVATE_sendWatchRequest(c,j)}),c.remoteSyncer.applyRemoteEvent(_)}(i,s)}catch(o){__PRIVATE_logDebug("RemoteStore","Failed to raise snapshot:",o),await __PRIVATE_disableNetworkUntilRecovery(i,o)}}async function __PRIVATE_disableNetworkUntilRecovery(i,e,s){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;i.v_.add(1),await __PRIVATE_disableNetworkInternal(i),i.x_.set("Offline"),s||(s=()=>__PRIVATE_localStoreGetLastRemoteSnapshotVersion(i.localStore)),i.asyncQueue.enqueueRetryable(async()=>{__PRIVATE_logDebug("RemoteStore","Retrying IndexedDB access"),await s(),i.v_.delete(1),await __PRIVATE_enableNetworkInternal(i)})}function __PRIVATE_executeWithRecovery(i,e){return e().catch(s=>__PRIVATE_disableNetworkUntilRecovery(i,s,e))}async function __PRIVATE_fillWritePipeline(i){const e=__PRIVATE_debugCast(i),s=__PRIVATE_ensureWriteStream(e);let o=e.D_.length>0?e.D_[e.D_.length-1].batchId:-1;for(;__PRIVATE_canAddToWritePipeline(e);)try{const a=await __PRIVATE_localStoreGetNextMutationBatch(e.localStore,o);if(a===null){e.D_.length===0&&s.Xo();break}o=a.batchId,__PRIVATE_addToWritePipeline(e,a)}catch(a){await __PRIVATE_disableNetworkUntilRecovery(e,a)}__PRIVATE_shouldStartWriteStream(e)&&__PRIVATE_startWriteStream(e)}function __PRIVATE_canAddToWritePipeline(i){return __PRIVATE_canUseNetwork(i)&&i.D_.length<10}function __PRIVATE_addToWritePipeline(i,e){i.D_.push(e);const s=__PRIVATE_ensureWriteStream(i);s.Jo()&&s.P_&&s.I_(e.mutations)}function __PRIVATE_shouldStartWriteStream(i){return __PRIVATE_canUseNetwork(i)&&!__PRIVATE_ensureWriteStream(i).Ho()&&i.D_.length>0}function __PRIVATE_startWriteStream(i){__PRIVATE_ensureWriteStream(i).start()}async function __PRIVATE_onWriteStreamOpen(i){__PRIVATE_ensureWriteStream(i).d_()}async function __PRIVATE_onWriteHandshakeComplete(i){const e=__PRIVATE_ensureWriteStream(i);for(const s of i.D_)e.I_(s.mutations)}async function __PRIVATE_onMutationResult(i,e,s){const o=i.D_.shift(),a=MutationBatchResult.from(o,e,s);await __PRIVATE_executeWithRecovery(i,()=>i.remoteSyncer.applySuccessfulWrite(a)),await __PRIVATE_fillWritePipeline(i)}async function __PRIVATE_onWriteStreamClose(i,e){e&&__PRIVATE_ensureWriteStream(i).P_&&await async function(o,a){if(function(h){return __PRIVATE_isPermanentError(h)&&h!==D.ABORTED}(a.code)){const c=o.D_.shift();__PRIVATE_ensureWriteStream(o).Zo(),await __PRIVATE_executeWithRecovery(o,()=>o.remoteSyncer.rejectFailedWrite(c.batchId,a)),await __PRIVATE_fillWritePipeline(o)}}(i,e),__PRIVATE_shouldStartWriteStream(i)&&__PRIVATE_startWriteStream(i)}async function __PRIVATE_remoteStoreHandleCredentialChange(i,e){const s=__PRIVATE_debugCast(i);s.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("RemoteStore","RemoteStore received new credentials");const o=__PRIVATE_canUseNetwork(s);s.v_.add(3),await __PRIVATE_disableNetworkInternal(s),o&&s.x_.set("Unknown"),await s.remoteSyncer.handleCredentialChange(e),s.v_.delete(3),await __PRIVATE_enableNetworkInternal(s)}async function __PRIVATE_remoteStoreApplyPrimaryState(i,e){const s=__PRIVATE_debugCast(i);e?(s.v_.delete(2),await __PRIVATE_enableNetworkInternal(s)):e||(s.v_.add(2),await __PRIVATE_disableNetworkInternal(s),s.x_.set("Unknown"))}function __PRIVATE_ensureWatchStream(i){return i.N_||(i.N_=function(s,o,a){const c=__PRIVATE_debugCast(s);return c.R_(),new __PRIVATE_PersistentListenStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Po:__PRIVATE_onWatchStreamOpen.bind(null,i),To:__PRIVATE_onWatchStreamClose.bind(null,i),u_:__PRIVATE_onWatchStreamChange.bind(null,i)}),i.F_.push(async e=>{e?(i.N_.Zo(),__PRIVATE_shouldStartWatchStream(i)?__PRIVATE_startWatchStream(i):i.x_.set("Unknown")):(await i.N_.stop(),__PRIVATE_cleanUpWatchStreamState(i))})),i.N_}function __PRIVATE_ensureWriteStream(i){return i.B_||(i.B_=function(s,o,a){const c=__PRIVATE_debugCast(s);return c.R_(),new __PRIVATE_PersistentWriteStream(o,c.connection,c.authCredentials,c.appCheckCredentials,c.serializer,a)}(i.datastore,i.asyncQueue,{Po:__PRIVATE_onWriteStreamOpen.bind(null,i),To:__PRIVATE_onWriteStreamClose.bind(null,i),E_:__PRIVATE_onWriteHandshakeComplete.bind(null,i),T_:__PRIVATE_onMutationResult.bind(null,i)}),i.F_.push(async e=>{e?(i.B_.Zo(),await __PRIVATE_fillWritePipeline(i)):(await i.B_.stop(),i.D_.length>0&&(__PRIVATE_logDebug("RemoteStore",`Stopping write stream with ${i.D_.length} pending writes`),i.D_=[]))})),i.B_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DelayedOperation{constructor(e,s,o,a,c){this.asyncQueue=e,this.timerId=s,this.targetTimeMs=o,this.op=a,this.removalCallback=c,this.deferred=new __PRIVATE_Deferred,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(h=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,s,o,a,c){const h=Date.now()+o,_=new DelayedOperation(e,s,h,a,c);return _.start(o),_}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new FirestoreError(D.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function __PRIVATE_wrapInUserErrorIfRecoverable(i,e){if(__PRIVATE_logError("AsyncQueue",`${e}: ${i}`),__PRIVATE_isIndexedDbTransactionError(i))return new FirestoreError(D.UNAVAILABLE,`${e}: ${i}`);throw i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSet{constructor(e){this.comparator=e?(s,o)=>e(s,o)||DocumentKey.comparator(s.key,o.key):(s,o)=>DocumentKey.comparator(s.key,o.key),this.keyedMap=documentMap(),this.sortedSet=new SortedMap(this.comparator)}static emptySet(e){return new DocumentSet(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const s=this.keyedMap.get(e);return s?this.sortedSet.indexOf(s):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((s,o)=>(e(s),!1))}add(e){const s=this.delete(e.key);return s.copy(s.keyedMap.insert(e.key,e),s.sortedSet.insert(e,null))}delete(e){const s=this.get(e);return s?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(s)):this}isEqual(e){if(!(e instanceof DocumentSet)||this.size!==e.size)return!1;const s=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;s.hasNext();){const a=s.getNext().key,c=o.getNext().key;if(!a.isEqual(c))return!1}return!0}toString(){const e=[];return this.forEach(s=>{e.push(s.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,s){const o=new DocumentSet;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=s,o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_DocumentChangeSet{constructor(){this.L_=new SortedMap(DocumentKey.comparator)}track(e){const s=e.doc.key,o=this.L_.get(s);o?e.type!==0&&o.type===3?this.L_=this.L_.insert(s,e):e.type===3&&o.type!==1?this.L_=this.L_.insert(s,{type:o.type,doc:e.doc}):e.type===2&&o.type===2?this.L_=this.L_.insert(s,{type:2,doc:e.doc}):e.type===2&&o.type===0?this.L_=this.L_.insert(s,{type:0,doc:e.doc}):e.type===1&&o.type===0?this.L_=this.L_.remove(s):e.type===1&&o.type===2?this.L_=this.L_.insert(s,{type:1,doc:o.doc}):e.type===0&&o.type===1?this.L_=this.L_.insert(s,{type:2,doc:e.doc}):fail():this.L_=this.L_.insert(s,e)}k_(){const e=[];return this.L_.inorderTraversal((s,o)=>{e.push(o)}),e}}class ViewSnapshot{constructor(e,s,o,a,c,h,_,$,g){this.query=e,this.docs=s,this.oldDocs=o,this.docChanges=a,this.mutatedKeys=c,this.fromCache=h,this.syncStateChanged=_,this.excludesMetadataChanges=$,this.hasCachedResults=g}static fromInitialDocuments(e,s,o,a,c){const h=[];return s.forEach(_=>{h.push({type:0,doc:_})}),new ViewSnapshot(e,s,DocumentSet.emptySet(s),h,o,a,!0,!1,c)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&__PRIVATE_queryEquals(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const s=this.docChanges,o=e.docChanges;if(s.length!==o.length)return!1;for(let a=0;a<s.length;a++)if(s[a].type!==o[a].type||!s[a].doc.isEqual(o[a].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_QueryListenersInfo{constructor(){this.q_=void 0,this.Q_=[]}}class __PRIVATE_EventManagerImpl{constructor(){this.queries=new ObjectMap(e=>__PRIVATE_canonifyQuery(e),__PRIVATE_queryEquals),this.onlineState="Unknown",this.K_=new Set}}async function __PRIVATE_eventManagerListen(i,e){const s=__PRIVATE_debugCast(i),o=e.query;let a=!1,c=s.queries.get(o);if(c||(a=!0,c=new __PRIVATE_QueryListenersInfo),a)try{c.q_=await s.onListen(o)}catch(h){const _=__PRIVATE_wrapInUserErrorIfRecoverable(h,`Initialization of query '${__PRIVATE_stringifyQuery(e.query)}' failed`);return void e.onError(_)}s.queries.set(o,c),c.Q_.push(e),e.U_(s.onlineState),c.q_&&e.W_(c.q_)&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}async function __PRIVATE_eventManagerUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=e.query;let a=!1;const c=s.queries.get(o);if(c){const h=c.Q_.indexOf(e);h>=0&&(c.Q_.splice(h,1),a=c.Q_.length===0)}if(a)return s.queries.delete(o),s.onUnlisten(o)}function __PRIVATE_eventManagerOnWatchChange(i,e){const s=__PRIVATE_debugCast(i);let o=!1;for(const a of e){const c=a.query,h=s.queries.get(c);if(h){for(const _ of h.Q_)_.W_(a)&&(o=!0);h.q_=a}}o&&__PRIVATE_raiseSnapshotsInSyncEvent(s)}function __PRIVATE_eventManagerOnWatchError(i,e,s){const o=__PRIVATE_debugCast(i),a=o.queries.get(e);if(a)for(const c of a.Q_)c.onError(s);o.queries.delete(e)}function __PRIVATE_raiseSnapshotsInSyncEvent(i){i.K_.forEach(e=>{e.next()})}class __PRIVATE_QueryListener{constructor(e,s,o){this.query=e,this.G_=s,this.z_=!1,this.j_=null,this.onlineState="Unknown",this.options=o||{}}W_(e){if(!this.options.includeMetadataChanges){const o=[];for(const a of e.docChanges)a.type!==3&&o.push(a);e=new ViewSnapshot(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let s=!1;return this.z_?this.H_(e)&&(this.G_.next(e),s=!0):this.J_(e,this.onlineState)&&(this.Y_(e),s=!0),this.j_=e,s}onError(e){this.G_.error(e)}U_(e){this.onlineState=e;let s=!1;return this.j_&&!this.z_&&this.J_(this.j_,e)&&(this.Y_(this.j_),s=!0),s}J_(e,s){if(!e.fromCache)return!0;const o=s!=="Offline";return(!this.options.Z_||!o)&&(!e.docs.isEmpty()||e.hasCachedResults||s==="Offline")}H_(e){if(e.docChanges.length>0)return!0;const s=this.j_&&this.j_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!s)&&this.options.includeMetadataChanges===!0}Y_(e){e=ViewSnapshot.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.z_=!0,this.G_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AddedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_RemovedLimboDocument{constructor(e){this.key=e}}class __PRIVATE_View{constructor(e,s){this.query=e,this.oa=s,this._a=null,this.hasCachedResults=!1,this.current=!1,this.aa=__PRIVATE_documentKeySet(),this.mutatedKeys=__PRIVATE_documentKeySet(),this.ua=__PRIVATE_newQueryComparator(e),this.ca=new DocumentSet(this.ua)}get la(){return this.oa}ha(e,s){const o=s?s.Pa:new __PRIVATE_DocumentChangeSet,a=s?s.ca:this.ca;let c=s?s.mutatedKeys:this.mutatedKeys,h=a,_=!1;const $=this.query.limitType==="F"&&a.size===this.query.limit?a.last():null,g=this.query.limitType==="L"&&a.size===this.query.limit?a.first():null;if(e.inorderTraversal((d,j)=>{const tt=a.get(d),rt=__PRIVATE_queryMatches(this.query,j)?j:null,et=!!tt&&this.mutatedKeys.has(tt.key),it=!!rt&&(rt.hasLocalMutations||this.mutatedKeys.has(rt.key)&&rt.hasCommittedMutations);let st=!1;tt&&rt?tt.data.isEqual(rt.data)?et!==it&&(o.track({type:3,doc:rt}),st=!0):this.Ia(tt,rt)||(o.track({type:2,doc:rt}),st=!0,($&&this.ua(rt,$)>0||g&&this.ua(rt,g)<0)&&(_=!0)):!tt&&rt?(o.track({type:0,doc:rt}),st=!0):tt&&!rt&&(o.track({type:1,doc:tt}),st=!0,($||g)&&(_=!0)),st&&(rt?(h=h.add(rt),c=it?c.add(d):c.delete(d)):(h=h.delete(d),c=c.delete(d)))}),this.query.limit!==null)for(;h.size>this.query.limit;){const d=this.query.limitType==="F"?h.last():h.first();h=h.delete(d.key),c=c.delete(d.key),o.track({type:1,doc:d})}return{ca:h,Pa:o,Xi:_,mutatedKeys:c}}Ia(e,s){return e.hasLocalMutations&&s.hasCommittedMutations&&!s.hasLocalMutations}applyChanges(e,s,o,a){const c=this.ca;this.ca=e.ca,this.mutatedKeys=e.mutatedKeys;const h=e.Pa.k_();h.sort((d,j)=>function(rt,et){const it=st=>{switch(st){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return fail()}};return it(rt)-it(et)}(d.type,j.type)||this.ua(d.doc,j.doc)),this.Ta(o),a=a!=null&&a;const _=s&&!a?this.Ea():[],$=this.aa.size===0&&this.current&&!a?1:0,g=$!==this._a;return this._a=$,h.length!==0||g?{snapshot:new ViewSnapshot(this.query,e.ca,c,h,e.mutatedKeys,$===0,g,!1,!!o&&o.resumeToken.approximateByteSize()>0),da:_}:{da:_}}U_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ca:this.ca,Pa:new __PRIVATE_DocumentChangeSet,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{da:[]}}Aa(e){return!this.oa.has(e)&&!!this.ca.has(e)&&!this.ca.get(e).hasLocalMutations}Ta(e){e&&(e.addedDocuments.forEach(s=>this.oa=this.oa.add(s)),e.modifiedDocuments.forEach(s=>{}),e.removedDocuments.forEach(s=>this.oa=this.oa.delete(s)),this.current=e.current)}Ea(){if(!this.current)return[];const e=this.aa;this.aa=__PRIVATE_documentKeySet(),this.ca.forEach(o=>{this.Aa(o.key)&&(this.aa=this.aa.add(o.key))});const s=[];return e.forEach(o=>{this.aa.has(o)||s.push(new __PRIVATE_RemovedLimboDocument(o))}),this.aa.forEach(o=>{e.has(o)||s.push(new __PRIVATE_AddedLimboDocument(o))}),s}Ra(e){this.oa=e.hs,this.aa=__PRIVATE_documentKeySet();const s=this.ha(e.documents);return this.applyChanges(s,!0)}Va(){return ViewSnapshot.fromInitialDocuments(this.query,this.ca,this.mutatedKeys,this._a===0,this.hasCachedResults)}}class __PRIVATE_QueryView{constructor(e,s,o){this.query=e,this.targetId=s,this.view=o}}class LimboResolution{constructor(e){this.key=e,this.ma=!1}}class __PRIVATE_SyncEngineImpl{constructor(e,s,o,a,c,h){this.localStore=e,this.remoteStore=s,this.eventManager=o,this.sharedClientState=a,this.currentUser=c,this.maxConcurrentLimboResolutions=h,this.fa={},this.ga=new ObjectMap(_=>__PRIVATE_canonifyQuery(_),__PRIVATE_queryEquals),this.pa=new Map,this.ya=new Set,this.wa=new SortedMap(DocumentKey.comparator),this.Sa=new Map,this.ba=new __PRIVATE_ReferenceSet,this.Da={},this.Ca=new Map,this.va=__PRIVATE_TargetIdGenerator.Bn(),this.onlineState="Unknown",this.Fa=void 0}get isPrimaryClient(){return this.Fa===!0}}async function __PRIVATE_syncEngineListen(i,e){const s=__PRIVATE_ensureWatchCallbacks(i);let o,a;const c=s.ga.get(e);if(c)o=c.targetId,s.sharedClientState.addLocalQueryTarget(o),a=c.view.Va();else{const h=await __PRIVATE_localStoreAllocateTarget(s.localStore,__PRIVATE_queryToTarget(e)),_=s.sharedClientState.addLocalQueryTarget(h.targetId);o=h.targetId,a=await __PRIVATE_initializeViewAndComputeSnapshot(s,e,o,_==="current",h.resumeToken),s.isPrimaryClient&&__PRIVATE_remoteStoreListen(s.remoteStore,h)}return a}async function __PRIVATE_initializeViewAndComputeSnapshot(i,e,s,o,a){i.Ma=(j,tt,rt)=>async function(it,st,nt,ot){let ht=st.view.ha(nt);ht.Xi&&(ht=await __PRIVATE_localStoreExecuteQuery(it.localStore,st.query,!1).then(({documents:yt})=>st.view.ha(yt,ht)));const pt=ot&&ot.targetChanges.get(st.targetId),lt=ot&&ot.targetMismatches.get(st.targetId)!=null,ut=st.view.applyChanges(ht,it.isPrimaryClient,pt,lt);return __PRIVATE_updateTrackedLimbos(it,st.targetId,ut.da),ut.snapshot}(i,j,tt,rt);const c=await __PRIVATE_localStoreExecuteQuery(i.localStore,e,!0),h=new __PRIVATE_View(e,c.hs),_=h.ha(c.documents),$=TargetChange.createSynthesizedTargetChangeForCurrentChange(s,o&&i.onlineState!=="Offline",a),g=h.applyChanges(_,i.isPrimaryClient,$);__PRIVATE_updateTrackedLimbos(i,s,g.da);const d=new __PRIVATE_QueryView(e,s,h);return i.ga.set(e,d),i.pa.has(s)?i.pa.get(s).push(e):i.pa.set(s,[e]),g.snapshot}async function __PRIVATE_syncEngineUnlisten(i,e){const s=__PRIVATE_debugCast(i),o=s.ga.get(e),a=s.pa.get(o.targetId);if(a.length>1)return s.pa.set(o.targetId,a.filter(c=>!__PRIVATE_queryEquals(c,e))),void s.ga.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!1).then(()=>{s.sharedClientState.clearQueryState(o.targetId),__PRIVATE_remoteStoreUnlisten(s.remoteStore,o.targetId),__PRIVATE_removeAndCleanupTarget(s,o.targetId)}).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)):(__PRIVATE_removeAndCleanupTarget(s,o.targetId),await __PRIVATE_localStoreReleaseTarget(s.localStore,o.targetId,!0))}async function __PRIVATE_syncEngineWrite(i,e,s){const o=__PRIVATE_syncEngineEnsureWriteCallbacks(i);try{const a=await function(h,_){const $=__PRIVATE_debugCast(h),g=Timestamp.now(),d=_.reduce((rt,et)=>rt.add(et.key),__PRIVATE_documentKeySet());let j,tt;return $.persistence.runTransaction("Locally write mutations","readwrite",rt=>{let et=__PRIVATE_mutableDocumentMap(),it=__PRIVATE_documentKeySet();return $.os.getEntries(rt,d).next(st=>{et=st,et.forEach((nt,ot)=>{ot.isValidDocument()||(it=it.add(nt))})}).next(()=>$.localDocuments.getOverlayedDocuments(rt,et)).next(st=>{j=st;const nt=[];for(const ot of _){const ht=__PRIVATE_mutationExtractBaseValue(ot,j.get(ot.key).overlayedDocument);ht!=null&&nt.push(new __PRIVATE_PatchMutation(ot.key,ht,__PRIVATE_extractFieldMask(ht.value.mapValue),Precondition.exists(!0)))}return $.mutationQueue.addMutationBatch(rt,g,nt,_)}).next(st=>{tt=st;const nt=st.applyToLocalDocumentSet(j,it);return $.documentOverlayCache.saveOverlays(rt,st.batchId,nt)})}).then(()=>({batchId:tt.batchId,changes:__PRIVATE_convertOverlayedDocumentMapToDocumentMap(j)}))}(o.localStore,e);o.sharedClientState.addPendingMutation(a.batchId),function(h,_,$){let g=h.Da[h.currentUser.toKey()];g||(g=new SortedMap(__PRIVATE_primitiveComparator)),g=g.insert(_,$),h.Da[h.currentUser.toKey()]=g}(o,a.batchId,s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a.changes),await __PRIVATE_fillWritePipeline(o.remoteStore)}catch(a){const c=__PRIVATE_wrapInUserErrorIfRecoverable(a,"Failed to persist write");s.reject(c)}}async function __PRIVATE_syncEngineApplyRemoteEvent(i,e){const s=__PRIVATE_debugCast(i);try{const o=await __PRIVATE_localStoreApplyRemoteEventToLocalCache(s.localStore,e);e.targetChanges.forEach((a,c)=>{const h=s.Sa.get(c);h&&(__PRIVATE_hardAssert(a.addedDocuments.size+a.modifiedDocuments.size+a.removedDocuments.size<=1),a.addedDocuments.size>0?h.ma=!0:a.modifiedDocuments.size>0?__PRIVATE_hardAssert(h.ma):a.removedDocuments.size>0&&(__PRIVATE_hardAssert(h.ma),h.ma=!1))}),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o,e)}catch(o){await __PRIVATE_ignoreIfPrimaryLeaseLoss(o)}}function __PRIVATE_syncEngineApplyOnlineStateChange(i,e,s){const o=__PRIVATE_debugCast(i);if(o.isPrimaryClient&&s===0||!o.isPrimaryClient&&s===1){const a=[];o.ga.forEach((c,h)=>{const _=h.view.U_(e);_.snapshot&&a.push(_.snapshot)}),function(h,_){const $=__PRIVATE_debugCast(h);$.onlineState=_;let g=!1;$.queries.forEach((d,j)=>{for(const tt of j.Q_)tt.U_(_)&&(g=!0)}),g&&__PRIVATE_raiseSnapshotsInSyncEvent($)}(o.eventManager,e),a.length&&o.fa.u_(a),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}async function __PRIVATE_syncEngineRejectListen(i,e,s){const o=__PRIVATE_debugCast(i);o.sharedClientState.updateQueryState(e,"rejected",s);const a=o.Sa.get(e),c=a&&a.key;if(c){let h=new SortedMap(DocumentKey.comparator);h=h.insert(c,MutableDocument.newNoDocument(c,SnapshotVersion.min()));const _=__PRIVATE_documentKeySet().add(c),$=new RemoteEvent(SnapshotVersion.min(),new Map,new SortedMap(__PRIVATE_primitiveComparator),h,_);await __PRIVATE_syncEngineApplyRemoteEvent(o,$),o.wa=o.wa.remove(c),o.Sa.delete(e),__PRIVATE_pumpEnqueuedLimboResolutions(o)}else await __PRIVATE_localStoreReleaseTarget(o.localStore,e,!1).then(()=>__PRIVATE_removeAndCleanupTarget(o,e,s)).catch(__PRIVATE_ignoreIfPrimaryLeaseLoss)}async function __PRIVATE_syncEngineApplySuccessfulWrite(i,e){const s=__PRIVATE_debugCast(i),o=e.batch.batchId;try{const a=await __PRIVATE_localStoreAcknowledgeBatch(s.localStore,e);__PRIVATE_processUserCallback(s,o,null),__PRIVATE_triggerPendingWritesCallbacks(s,o),s.sharedClientState.updateMutationState(o,"acknowledged"),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}async function __PRIVATE_syncEngineRejectFailedWrite(i,e,s){const o=__PRIVATE_debugCast(i);try{const a=await function(h,_){const $=__PRIVATE_debugCast(h);return $.persistence.runTransaction("Reject batch","readwrite-primary",g=>{let d;return $.mutationQueue.lookupMutationBatch(g,_).next(j=>(__PRIVATE_hardAssert(j!==null),d=j.keys(),$.mutationQueue.removeMutationBatch(g,j))).next(()=>$.mutationQueue.performConsistencyCheck(g)).next(()=>$.documentOverlayCache.removeOverlaysForBatchId(g,d,_)).next(()=>$.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(g,d)).next(()=>$.localDocuments.getDocuments(g,d))})}(o.localStore,e);__PRIVATE_processUserCallback(o,e,s),__PRIVATE_triggerPendingWritesCallbacks(o,e),o.sharedClientState.updateMutationState(e,"rejected",s),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(o,a)}catch(a){await __PRIVATE_ignoreIfPrimaryLeaseLoss(a)}}function __PRIVATE_triggerPendingWritesCallbacks(i,e){(i.Ca.get(e)||[]).forEach(s=>{s.resolve()}),i.Ca.delete(e)}function __PRIVATE_processUserCallback(i,e,s){const o=__PRIVATE_debugCast(i);let a=o.Da[o.currentUser.toKey()];if(a){const c=a.get(e);c&&(s?c.reject(s):c.resolve(),a=a.remove(e)),o.Da[o.currentUser.toKey()]=a}}function __PRIVATE_removeAndCleanupTarget(i,e,s=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.pa.get(e))i.ga.delete(o),s&&i.fa.xa(o,s);i.pa.delete(e),i.isPrimaryClient&&i.ba.Vr(e).forEach(o=>{i.ba.containsKey(o)||__PRIVATE_removeLimboTarget(i,o)})}function __PRIVATE_removeLimboTarget(i,e){i.ya.delete(e.path.canonicalString());const s=i.wa.get(e);s!==null&&(__PRIVATE_remoteStoreUnlisten(i.remoteStore,s),i.wa=i.wa.remove(e),i.Sa.delete(s),__PRIVATE_pumpEnqueuedLimboResolutions(i))}function __PRIVATE_updateTrackedLimbos(i,e,s){for(const o of s)o instanceof __PRIVATE_AddedLimboDocument?(i.ba.addReference(o.key,e),__PRIVATE_trackLimboChange(i,o)):o instanceof __PRIVATE_RemovedLimboDocument?(__PRIVATE_logDebug("SyncEngine","Document no longer in limbo: "+o.key),i.ba.removeReference(o.key,e),i.ba.containsKey(o.key)||__PRIVATE_removeLimboTarget(i,o.key)):fail()}function __PRIVATE_trackLimboChange(i,e){const s=e.key,o=s.path.canonicalString();i.wa.get(s)||i.ya.has(o)||(__PRIVATE_logDebug("SyncEngine","New document in limbo: "+s),i.ya.add(o),__PRIVATE_pumpEnqueuedLimboResolutions(i))}function __PRIVATE_pumpEnqueuedLimboResolutions(i){for(;i.ya.size>0&&i.wa.size<i.maxConcurrentLimboResolutions;){const e=i.ya.values().next().value;i.ya.delete(e);const s=new DocumentKey(ResourcePath.fromString(e)),o=i.va.next();i.Sa.set(o,new LimboResolution(s)),i.wa=i.wa.insert(s,o),__PRIVATE_remoteStoreListen(i.remoteStore,new TargetData(__PRIVATE_queryToTarget(__PRIVATE_newQueryForPath(s.path)),o,"TargetPurposeLimboResolution",__PRIVATE_ListenSequence._e))}}async function __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(i,e,s){const o=__PRIVATE_debugCast(i),a=[],c=[],h=[];o.ga.isEmpty()||(o.ga.forEach((_,$)=>{h.push(o.Ma($,e,s).then(g=>{if((g||s)&&o.isPrimaryClient&&o.sharedClientState.updateQueryState($.targetId,g?.fromCache?"not-current":"current"),g){a.push(g);const d=__PRIVATE_LocalViewChanges.Ki($.targetId,g);c.push(d)}}))}),await Promise.all(h),o.fa.u_(a),await async function($,g){const d=__PRIVATE_debugCast($);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",j=>PersistencePromise.forEach(g,tt=>PersistencePromise.forEach(tt.qi,rt=>d.persistence.referenceDelegate.addReference(j,tt.targetId,rt)).next(()=>PersistencePromise.forEach(tt.Qi,rt=>d.persistence.referenceDelegate.removeReference(j,tt.targetId,rt)))))}catch(j){if(!__PRIVATE_isIndexedDbTransactionError(j))throw j;__PRIVATE_logDebug("LocalStore","Failed to update sequence numbers: "+j)}for(const j of g){const tt=j.targetId;if(!j.fromCache){const rt=d.ns.get(tt),et=rt.snapshotVersion,it=rt.withLastLimboFreeSnapshotVersion(et);d.ns=d.ns.insert(tt,it)}}}(o.localStore,c))}async function __PRIVATE_syncEngineHandleCredentialChange(i,e){const s=__PRIVATE_debugCast(i);if(!s.currentUser.isEqual(e)){__PRIVATE_logDebug("SyncEngine","User change. New user:",e.toKey());const o=await __PRIVATE_localStoreHandleUserChange(s.localStore,e);s.currentUser=e,function(c,h){c.Ca.forEach(_=>{_.forEach($=>{$.reject(new FirestoreError(D.CANCELLED,h))})}),c.Ca.clear()}(s,"'waitForPendingWrites' promise is rejected due to a user change."),s.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),await __PRIVATE_syncEngineEmitNewSnapsAndNotifyLocalStore(s,o.us)}}function __PRIVATE_syncEngineGetRemoteKeysForTarget(i,e){const s=__PRIVATE_debugCast(i),o=s.Sa.get(e);if(o&&o.ma)return __PRIVATE_documentKeySet().add(o.key);{let a=__PRIVATE_documentKeySet();const c=s.pa.get(e);if(!c)return a;for(const h of c){const _=s.ga.get(h);a=a.unionWith(_.view.la)}return a}}function __PRIVATE_ensureWatchCallbacks(i){const e=__PRIVATE_debugCast(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=__PRIVATE_syncEngineApplyRemoteEvent.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=__PRIVATE_syncEngineGetRemoteKeysForTarget.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=__PRIVATE_syncEngineRejectListen.bind(null,e),e.fa.u_=__PRIVATE_eventManagerOnWatchChange.bind(null,e.eventManager),e.fa.xa=__PRIVATE_eventManagerOnWatchError.bind(null,e.eventManager),e}function __PRIVATE_syncEngineEnsureWriteCallbacks(i){const e=__PRIVATE_debugCast(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=__PRIVATE_syncEngineApplySuccessfulWrite.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=__PRIVATE_syncEngineRejectFailedWrite.bind(null,e),e}class MemoryOfflineComponentProvider{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=__PRIVATE_newSerializer(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,s){return null}createIndexBackfillerScheduler(e,s){return null}createLocalStore(e){return __PRIVATE_newLocalStore(this.persistence,new __PRIVATE_QueryEngine,e.initialUser,this.serializer)}createPersistence(e){return new __PRIVATE_MemoryPersistence(__PRIVATE_MemoryEagerDelegate.Hr,this.serializer)}createSharedClientState(e){return new __PRIVATE_MemorySharedClientState}async terminate(){var e,s;(e=this.gcScheduler)===null||e===void 0||e.stop(),(s=this.indexBackfillerScheduler)===null||s===void 0||s.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OnlineComponentProvider{async initialize(e,s){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(s),this.remoteStore=this.createRemoteStore(s),this.eventManager=this.createEventManager(s),this.syncEngine=this.createSyncEngine(s,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=o=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,o,1),this.remoteStore.remoteSyncer.handleCredentialChange=__PRIVATE_syncEngineHandleCredentialChange.bind(null,this.syncEngine),await __PRIVATE_remoteStoreApplyPrimaryState(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new __PRIVATE_EventManagerImpl}()}createDatastore(e){const s=__PRIVATE_newSerializer(e.databaseInfo.databaseId),o=function(c){return new __PRIVATE_WebChannelConnection(c)}(e.databaseInfo);return function(c,h,_,$){return new __PRIVATE_DatastoreImpl(c,h,_,$)}(e.authCredentials,e.appCheckCredentials,o,s)}createRemoteStore(e){return function(o,a,c,h,_){return new __PRIVATE_RemoteStoreImpl(o,a,c,h,_)}(this.localStore,this.datastore,e.asyncQueue,s=>__PRIVATE_syncEngineApplyOnlineStateChange(this.syncEngine,s,0),function(){return __PRIVATE_BrowserConnectivityMonitor.D()?new __PRIVATE_BrowserConnectivityMonitor:new __PRIVATE_NoopConnectivityMonitor}())}createSyncEngine(e,s){return function(a,c,h,_,$,g,d){const j=new __PRIVATE_SyncEngineImpl(a,c,h,_,$,g);return d&&(j.Fa=!0),j}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,s)}async terminate(){var e;await async function(o){const a=__PRIVATE_debugCast(o);__PRIVATE_logDebug("RemoteStore","RemoteStore shutting down."),a.v_.add(5),await __PRIVATE_disableNetworkInternal(a),a.M_.shutdown(),a.x_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncObserver{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ba(this.observer.next,e)}error(e){this.observer.error?this.Ba(this.observer.error,e):__PRIVATE_logError("Uncaught Error in snapshot listener:",e.toString())}La(){this.muted=!0}Ba(e,s){this.muted||setTimeout(()=>{this.muted||e(s)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreClient{constructor(e,s,o,a){this.authCredentials=e,this.appCheckCredentials=s,this.asyncQueue=o,this.databaseInfo=a,this.user=User.UNAUTHENTICATED,this.clientId=__PRIVATE_AutoId.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,async c=>{__PRIVATE_logDebug("FirestoreClient","Received user=",c.uid),await this.authCredentialListener(c),this.user=c}),this.appCheckCredentials.start(o,c=>(__PRIVATE_logDebug("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new FirestoreError(D.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new __PRIVATE_Deferred;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(s){const o=__PRIVATE_wrapInUserErrorIfRecoverable(s,"Failed to shutdown persistence");e.reject(o)}}),e.promise}}async function __PRIVATE_setOfflineComponentProvider(i,e){i.asyncQueue.verifyOperationInProgress(),__PRIVATE_logDebug("FirestoreClient","Initializing OfflineComponentProvider");const s=i.configuration;await e.initialize(s);let o=s.initialUser;i.setCredentialChangeListener(async a=>{o.isEqual(a)||(await __PRIVATE_localStoreHandleUserChange(e.localStore,a),o=a)}),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=e}async function __PRIVATE_setOnlineComponentProvider(i,e){i.asyncQueue.verifyOperationInProgress();const s=await __PRIVATE_ensureOfflineComponents(i);__PRIVATE_logDebug("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(s,i.configuration),i.setCredentialChangeListener(o=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,o)),i.setAppCheckTokenChangeListener((o,a)=>__PRIVATE_remoteStoreHandleCredentialChange(e.remoteStore,a)),i._onlineComponents=e}function __PRIVATE_canFallbackFromIndexedDbError(i){return i.name==="FirebaseError"?i.code===D.FAILED_PRECONDITION||i.code===D.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}async function __PRIVATE_ensureOfflineComponents(i){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){__PRIVATE_logDebug("FirestoreClient","Using user provided OfflineComponentProvider");try{await __PRIVATE_setOfflineComponentProvider(i,i._uninitializedComponentsProvider._offline)}catch(e){const s=e;if(!__PRIVATE_canFallbackFromIndexedDbError(s))throw s;__PRIVATE_logWarn("Error using user provided cache. Falling back to memory cache: "+s),await __PRIVATE_setOfflineComponentProvider(i,new MemoryOfflineComponentProvider)}}else __PRIVATE_logDebug("FirestoreClient","Using default OfflineComponentProvider"),await __PRIVATE_setOfflineComponentProvider(i,new MemoryOfflineComponentProvider);return i._offlineComponents}async function __PRIVATE_ensureOnlineComponents(i){return i._onlineComponents||(i._uninitializedComponentsProvider?(__PRIVATE_logDebug("FirestoreClient","Using user provided OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(i,i._uninitializedComponentsProvider._online)):(__PRIVATE_logDebug("FirestoreClient","Using default OnlineComponentProvider"),await __PRIVATE_setOnlineComponentProvider(i,new OnlineComponentProvider))),i._onlineComponents}function __PRIVATE_getSyncEngine(i){return __PRIVATE_ensureOnlineComponents(i).then(e=>e.syncEngine)}async function __PRIVATE_getEventManager(i){const e=await __PRIVATE_ensureOnlineComponents(i),s=e.eventManager;return s.onListen=__PRIVATE_syncEngineListen.bind(null,e.syncEngine),s.onUnlisten=__PRIVATE_syncEngineUnlisten.bind(null,e.syncEngine),s}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_cloneLongPollingOptions(i){const e={};return i.timeoutSeconds!==void 0&&(e.timeoutSeconds=i.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const me=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateNonEmptyArgument(i,e,s){if(!s)throw new FirestoreError(D.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function __PRIVATE_validateIsNotUsedTogether(i,e,s,o){if(e===!0&&o===!0)throw new FirestoreError(D.INVALID_ARGUMENT,`${i} and ${s} cannot be used together.`)}function __PRIVATE_validateDocumentPath(i){if(!DocumentKey.isDocumentKey(i))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function __PRIVATE_validateCollectionPath(i){if(DocumentKey.isDocumentKey(i))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function __PRIVATE_valueDescription(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{const e=function(o){return o.constructor?o.constructor.name:null}(i);return e?`a custom ${e} object`:"an object"}}return typeof i=="function"?"a function":fail()}function __PRIVATE_cast(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new FirestoreError(D.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const s=__PRIVATE_valueDescription(i);throw new FirestoreError(D.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${s}`)}}return i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FirestoreSettingsImpl{constructor(e){var s,o;if(e.host===void 0){if(e.ssl!==void 0)throw new FirestoreError(D.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(s=e.ssl)===null||s===void 0||s;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new FirestoreError(D.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}__PRIVATE_validateIsNotUsedTogether("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=__PRIVATE_cloneLongPollingOptions((o=e.experimentalLongPollingOptions)!==null&&o!==void 0?o:{}),function(c){if(c.timeoutSeconds!==void 0){if(isNaN(c.timeoutSeconds))throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (must not be NaN)`);if(c.timeoutSeconds<5)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (minimum allowed value is 5)`);if(c.timeoutSeconds>30)throw new FirestoreError(D.INVALID_ARGUMENT,`invalid long polling timeout: ${c.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(o,a){return o.timeoutSeconds===a.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Firestore$1{constructor(e,s,o,a){this._authCredentials=e,this._appCheckCredentials=s,this._databaseId=o,this._app=a,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new FirestoreSettingsImpl({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new FirestoreError(D.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new FirestoreSettingsImpl(e),e.credentials!==void 0&&(this._authCredentials=function(o){if(!o)return new __PRIVATE_EmptyAuthCredentialsProvider;switch(o.type){case"firstParty":return new __PRIVATE_FirstPartyAuthCredentialsProvider(o.sessionIndex||"0",o.iamToken||null,o.authTokenFactory||null);case"provider":return o.client;default:throw new FirestoreError(D.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(s){const o=me.get(s);o&&(__PRIVATE_logDebug("ComponentProvider","Removing Datastore"),me.delete(s),o.terminate())}(this),Promise.resolve()}}function connectFirestoreEmulator(i,e,s,o={}){var a;const c=(i=__PRIVATE_cast(i,Firestore$1))._getSettings(),h=`${e}:${s}`;if(c.host!=="firestore.googleapis.com"&&c.host!==h&&__PRIVATE_logWarn("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},c),{host:h,ssl:!1})),o.mockUserToken){let _,$;if(typeof o.mockUserToken=="string")_=o.mockUserToken,$=User.MOCK_USER;else{_=createMockUserToken(o.mockUserToken,(a=i._app)===null||a===void 0?void 0:a.options.projectId);const g=o.mockUserToken.sub||o.mockUserToken.user_id;if(!g)throw new FirestoreError(D.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");$=new User(g)}i._authCredentials=new __PRIVATE_EmulatorAuthCredentialsProvider(new __PRIVATE_OAuthToken(_,$))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Query{constructor(e,s,o){this.converter=s,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Query(this.firestore,e,this._query)}}class DocumentReference{constructor(e,s,o){this.converter=s,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new CollectionReference(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new DocumentReference(this.firestore,e,this._key)}}class CollectionReference extends Query{constructor(e,s,o){super(e,s,__PRIVATE_newQueryForPath(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new DocumentReference(this.firestore,null,new DocumentKey(e))}withConverter(e){return new CollectionReference(this.firestore,e,this._path)}}function collection(i,e,...s){if(i=getModularInstance(i),__PRIVATE_validateNonEmptyArgument("collection","path",e),i instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateCollectionPath(o),new CollectionReference(i,null,o)}{if(!(i instanceof DocumentReference||i instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateCollectionPath(o),new CollectionReference(i.firestore,null,o)}}function doc(i,e,...s){if(i=getModularInstance(i),arguments.length===1&&(e=__PRIVATE_AutoId.newId()),__PRIVATE_validateNonEmptyArgument("doc","path",e),i instanceof Firestore$1){const o=ResourcePath.fromString(e,...s);return __PRIVATE_validateDocumentPath(o),new DocumentReference(i,null,new DocumentKey(o))}{if(!(i instanceof DocumentReference||i instanceof CollectionReference))throw new FirestoreError(D.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(ResourcePath.fromString(e,...s));return __PRIVATE_validateDocumentPath(o),new DocumentReference(i.firestore,i instanceof CollectionReference?i.converter:null,new DocumentKey(o))}}function queryEqual(i,e){return i=getModularInstance(i),e=getModularInstance(e),i instanceof Query&&e instanceof Query&&i.firestore===e.firestore&&__PRIVATE_queryEquals(i._query,e._query)&&i.converter===e.converter}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class __PRIVATE_AsyncQueueImpl{constructor(){this.Xa=Promise.resolve(),this.eu=[],this.tu=!1,this.nu=[],this.ru=null,this.iu=!1,this.su=!1,this.ou=[],this.jo=new __PRIVATE_ExponentialBackoff(this,"async_queue_retry"),this._u=()=>{const s=getDocument();s&&__PRIVATE_logDebug("AsyncQueue","Visibility state changed to "+s.visibilityState),this.jo.Ko()};const e=getDocument();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this._u)}get isShuttingDown(){return this.tu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.au(),this.uu(e)}enterRestrictedMode(e){if(!this.tu){this.tu=!0,this.su=e||!1;const s=getDocument();s&&typeof s.removeEventListener=="function"&&s.removeEventListener("visibilitychange",this._u)}}enqueue(e){if(this.au(),this.tu)return new Promise(()=>{});const s=new __PRIVATE_Deferred;return this.uu(()=>this.tu&&this.su?Promise.resolve():(e().then(s.resolve,s.reject),s.promise)).then(()=>s.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.eu.push(e),this.cu()))}async cu(){if(this.eu.length!==0){try{await this.eu[0](),this.eu.shift(),this.jo.reset()}catch(e){if(!__PRIVATE_isIndexedDbTransactionError(e))throw e;__PRIVATE_logDebug("AsyncQueue","Operation failed with retryable error: "+e)}this.eu.length>0&&this.jo.qo(()=>this.cu())}}uu(e){const s=this.Xa.then(()=>(this.iu=!0,e().catch(o=>{this.ru=o,this.iu=!1;const a=function(h){let _=h.message||"";return h.stack&&(_=h.stack.includes(h.message)?h.stack:h.message+`
`+h.stack),_}(o);throw __PRIVATE_logError("INTERNAL UNHANDLED ERROR: ",a),o}).then(o=>(this.iu=!1,o))));return this.Xa=s,s}enqueueAfterDelay(e,s,o){this.au(),this.ou.indexOf(e)>-1&&(s=0);const a=DelayedOperation.createAndSchedule(this,e,s,o,c=>this.lu(c));return this.nu.push(a),a}au(){this.ru&&fail()}verifyOperationInProgress(){}async hu(){let e;do e=this.Xa,await e;while(e!==this.Xa)}Pu(e){for(const s of this.nu)if(s.timerId===e)return!0;return!1}Iu(e){return this.hu().then(()=>{this.nu.sort((s,o)=>s.targetTimeMs-o.targetTimeMs);for(const s of this.nu)if(s.skipDelay(),e!=="all"&&s.timerId===e)break;return this.hu()})}Tu(e){this.ou.push(e)}lu(e){const s=this.nu.indexOf(e);this.nu.splice(s,1)}}function __PRIVATE_isPartialObserver(i){return function(s,o){if(typeof s!="object"||s===null)return!1;const a=s;for(const c of o)if(c in a&&typeof a[c]=="function")return!0;return!1}(i,["next","error","complete"])}class Firestore extends Firestore$1{constructor(e,s,o,a){super(e,s,o,a),this.type="firestore",this._queue=function(){return new __PRIVATE_AsyncQueueImpl}(),this._persistenceKey=a?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||__PRIVATE_configureFirestore(this),this._firestoreClient.terminate()}}function getFirestore(i,e){const s=typeof i=="object"?i:getApp(),o=typeof i=="string"?i:e||"(default)",a=_getProvider(s,"firestore").getImmediate({identifier:o});if(!a._initialized){const c=getDefaultEmulatorHostnameAndPort("firestore");c&&connectFirestoreEmulator(a,...c)}return a}function ensureFirestoreConfigured(i){return i._firestoreClient||__PRIVATE_configureFirestore(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function __PRIVATE_configureFirestore(i){var e,s,o;const a=i._freezeSettings(),c=function(_,$,g,d){return new DatabaseInfo(_,$,g,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,__PRIVATE_cloneLongPollingOptions(d.experimentalLongPollingOptions),d.useFetchStreams)}(i._databaseId,((e=i._app)===null||e===void 0?void 0:e.options.appId)||"",i._persistenceKey,a);i._firestoreClient=new FirestoreClient(i._authCredentials,i._appCheckCredentials,i._queue,c),!((s=a.localCache)===null||s===void 0)&&s._offlineComponentProvider&&(!((o=a.localCache)===null||o===void 0)&&o._onlineComponentProvider)&&(i._firestoreClient._uninitializedComponentsProvider={_offlineKind:a.localCache.kind,_offline:a.localCache._offlineComponentProvider,_online:a.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bytes{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Bytes(ByteString.fromBase64String(e))}catch(s){throw new FirestoreError(D.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+s)}}static fromUint8Array(e){return new Bytes(ByteString.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldPath{constructor(...e){for(let s=0;s<e.length;++s)if(e[s].length===0)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new FieldPath$1(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FieldValue{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GeoPoint{constructor(e,s){if(!isFinite(e)||e<-90||e>90)throw new FirestoreError(D.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(s)||s<-180||s>180)throw new FirestoreError(D.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+s);this._lat=e,this._long=s}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return __PRIVATE_primitiveComparator(this._lat,e._lat)||__PRIVATE_primitiveComparator(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=/^__.*__$/;class ParsedSetData{constructor(e,s,o){this.data=e,this.fieldMask=s,this.fieldTransforms=o}toMutation(e,s){return this.fieldMask!==null?new __PRIVATE_PatchMutation(e,this.data,this.fieldMask,s,this.fieldTransforms):new __PRIVATE_SetMutation(e,this.data,s,this.fieldTransforms)}}function __PRIVATE_isWrite(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw fail()}}class __PRIVATE_ParseContextImpl{constructor(e,s,o,a,c,h){this.settings=e,this.databaseId=s,this.serializer=o,this.ignoreUndefinedProperties=a,c===void 0&&this.Eu(),this.fieldTransforms=c||[],this.fieldMask=h||[]}get path(){return this.settings.path}get du(){return this.settings.du}Au(e){return new __PRIVATE_ParseContextImpl(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ru(e){var s;const o=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Au({path:o,Vu:!1});return a.mu(e),a}fu(e){var s;const o=(s=this.path)===null||s===void 0?void 0:s.child(e),a=this.Au({path:o,Vu:!1});return a.Eu(),a}gu(e){return this.Au({path:void 0,Vu:!0})}pu(e){return __PRIVATE_createError(e,this.settings.methodName,this.settings.yu||!1,this.path,this.settings.wu)}contains(e){return this.fieldMask.find(s=>e.isPrefixOf(s))!==void 0||this.fieldTransforms.find(s=>e.isPrefixOf(s.field))!==void 0}Eu(){if(this.path)for(let e=0;e<this.path.length;e++)this.mu(this.path.get(e))}mu(e){if(e.length===0)throw this.pu("Document fields must not be empty");if(__PRIVATE_isWrite(this.du)&&ge.test(e))throw this.pu('Document fields cannot begin and end with "__"')}}class __PRIVATE_UserDataReader{constructor(e,s,o){this.databaseId=e,this.ignoreUndefinedProperties=s,this.serializer=o||__PRIVATE_newSerializer(e)}Su(e,s,o,a=!1){return new __PRIVATE_ParseContextImpl({du:e,methodName:s,wu:o,path:FieldPath$1.emptyPath(),Vu:!1,yu:a},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function __PRIVATE_newUserDataReader(i){const e=i._freezeSettings(),s=__PRIVATE_newSerializer(i._databaseId);return new __PRIVATE_UserDataReader(i._databaseId,!!e.ignoreUndefinedProperties,s)}function __PRIVATE_parseSetData(i,e,s,o,a,c={}){const h=i.Su(c.merge||c.mergeFields?2:0,e,s,a);__PRIVATE_validatePlainObject("Data must be an object, but it was:",h,o);const _=__PRIVATE_parseObject(o,h);let $,g;if(c.merge)$=new FieldMask(h.fieldMask),g=h.fieldTransforms;else if(c.mergeFields){const d=[];for(const j of c.mergeFields){const tt=__PRIVATE_fieldPathFromArgument$1(e,j,s);if(!h.contains(tt))throw new FirestoreError(D.INVALID_ARGUMENT,`Field '${tt}' is specified in your field mask but missing from your input data.`);__PRIVATE_fieldMaskContains(d,tt)||d.push(tt)}$=new FieldMask(d),g=h.fieldTransforms.filter(j=>$.covers(j.field))}else $=null,g=h.fieldTransforms;return new ParsedSetData(new ObjectValue(_),$,g)}function __PRIVATE_parseQueryValue(i,e,s,o=!1){return __PRIVATE_parseData(s,i.Su(o?4:3,e))}function __PRIVATE_parseData(i,e){if(__PRIVATE_looksLikeJsonObject(i=getModularInstance(i)))return __PRIVATE_validatePlainObject("Unsupported field value:",e,i),__PRIVATE_parseObject(i,e);if(i instanceof FieldValue)return function(o,a){if(!__PRIVATE_isWrite(a.du))throw a.pu(`${o._methodName}() can only be used with update() and set()`);if(!a.path)throw a.pu(`${o._methodName}() is not currently supported inside arrays`);const c=o._toFieldTransform(a);c&&a.fieldTransforms.push(c)}(i,e),null;if(i===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.Vu&&e.du!==4)throw e.pu("Nested arrays are not supported");return function(o,a){const c=[];let h=0;for(const _ of o){let $=__PRIVATE_parseData(_,a.gu(h));$==null&&($={nullValue:"NULL_VALUE"}),c.push($),h++}return{arrayValue:{values:c}}}(i,e)}return function(o,a){if((o=getModularInstance(o))===null)return{nullValue:"NULL_VALUE"};if(typeof o=="number")return toNumber(a.serializer,o);if(typeof o=="boolean")return{booleanValue:o};if(typeof o=="string")return{stringValue:o};if(o instanceof Date){const c=Timestamp.fromDate(o);return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof Timestamp){const c=new Timestamp(o.seconds,1e3*Math.floor(o.nanoseconds/1e3));return{timestampValue:toTimestamp(a.serializer,c)}}if(o instanceof GeoPoint)return{geoPointValue:{latitude:o.latitude,longitude:o.longitude}};if(o instanceof Bytes)return{bytesValue:__PRIVATE_toBytes(a.serializer,o._byteString)};if(o instanceof DocumentReference){const c=a.databaseId,h=o.firestore._databaseId;if(!h.isEqual(c))throw a.pu(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${c.projectId}/${c.database}`);return{referenceValue:__PRIVATE_toResourceName(o.firestore._databaseId||a.databaseId,o._key.path)}}throw a.pu(`Unsupported field value: ${__PRIVATE_valueDescription(o)}`)}(i,e)}function __PRIVATE_parseObject(i,e){const s={};return isEmpty(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):forEach(i,(o,a)=>{const c=__PRIVATE_parseData(a,e.Ru(o));c!=null&&(s[o]=c)}),{mapValue:{fields:s}}}function __PRIVATE_looksLikeJsonObject(i){return!(typeof i!="object"||i===null||i instanceof Array||i instanceof Date||i instanceof Timestamp||i instanceof GeoPoint||i instanceof Bytes||i instanceof DocumentReference||i instanceof FieldValue)}function __PRIVATE_validatePlainObject(i,e,s){if(!__PRIVATE_looksLikeJsonObject(s)||!function(a){return typeof a=="object"&&a!==null&&(Object.getPrototypeOf(a)===Object.prototype||Object.getPrototypeOf(a)===null)}(s)){const o=__PRIVATE_valueDescription(s);throw o==="an object"?e.pu(i+" a custom object"):e.pu(i+" "+o)}}function __PRIVATE_fieldPathFromArgument$1(i,e,s){if((e=getModularInstance(e))instanceof FieldPath)return e._internalPath;if(typeof e=="string")return __PRIVATE_fieldPathFromDotSeparatedString(i,e);throw __PRIVATE_createError("Field path arguments must be of type string or ",i,!1,void 0,s)}const pe=new RegExp("[~\\*/\\[\\]]");function __PRIVATE_fieldPathFromDotSeparatedString(i,e,s){if(e.search(pe)>=0)throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,s);try{return new FieldPath(...e.split("."))._internalPath}catch{throw __PRIVATE_createError(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,s)}}function __PRIVATE_createError(i,e,s,o,a){const c=o&&!o.isEmpty(),h=a!==void 0;let _=`Function ${e}() called with invalid data`;s&&(_+=" (via `toFirestore()`)"),_+=". ";let $="";return(c||h)&&($+=" (found",c&&($+=` in field ${o}`),h&&($+=` in document ${a}`),$+=")"),new FirestoreError(D.INVALID_ARGUMENT,_+i+$)}function __PRIVATE_fieldMaskContains(i,e){return i.some(s=>s.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DocumentSnapshot$1{constructor(e,s,o,a,c){this._firestore=e,this._userDataWriter=s,this._key=o,this._document=a,this._converter=c}get id(){return this._key.path.lastSegment()}get ref(){return new DocumentReference(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new QueryDocumentSnapshot$1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const s=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s)}}}class QueryDocumentSnapshot$1 extends DocumentSnapshot$1{data(){return super.data()}}function __PRIVATE_fieldPathFromArgument(i,e){return typeof e=="string"?__PRIVATE_fieldPathFromDotSeparatedString(i,e):e instanceof FieldPath?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_validateHasExplicitOrderByForLimitToLast(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new FirestoreError(D.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class AppliableConstraint{}class QueryConstraint extends AppliableConstraint{}function query(i,e,...s){let o=[];e instanceof AppliableConstraint&&o.push(e),o=o.concat(s),function(c){const h=c.filter($=>$ instanceof QueryCompositeFilterConstraint).length,_=c.filter($=>$ instanceof QueryFieldFilterConstraint).length;if(h>1||h>0&&_>0)throw new FirestoreError(D.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(o);for(const a of o)i=a._apply(i);return i}class QueryFieldFilterConstraint extends QueryConstraint{constructor(e,s,o){super(),this._field=e,this._op=s,this._value=o,this.type="where"}static _create(e,s,o){return new QueryFieldFilterConstraint(e,s,o)}_apply(e){const s=this._parse(e);return __PRIVATE_validateNewFieldFilter(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s))}_parse(e){const s=__PRIVATE_newUserDataReader(e.firestore);return function(c,h,_,$,g,d,j){let tt;if(g.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){__PRIVATE_validateDisjunctiveFilterElements(j,d);const rt=[];for(const et of j)rt.push(__PRIVATE_parseDocumentIdValue($,c,et));tt={arrayValue:{values:rt}}}else tt=__PRIVATE_parseDocumentIdValue($,c,j)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||__PRIVATE_validateDisjunctiveFilterElements(j,d),tt=__PRIVATE_parseQueryValue(_,h,j,d==="in"||d==="not-in");return FieldFilter.create(g,d,tt)}(e._query,"where",s,e.firestore._databaseId,this._field,this._op,this._value)}}class QueryCompositeFilterConstraint extends AppliableConstraint{constructor(e,s){super(),this.type=e,this._queryConstraints=s}static _create(e,s){return new QueryCompositeFilterConstraint(e,s)}_parse(e){const s=this._queryConstraints.map(o=>o._parse(e)).filter(o=>o.getFilters().length>0);return s.length===1?s[0]:CompositeFilter.create(s,this._getOperator())}_apply(e){const s=this._parse(e);return s.getFilters().length===0?e:(function(a,c){let h=a;const _=c.getFlattenedFilters();for(const $ of _)__PRIVATE_validateNewFieldFilter(h,$),h=__PRIVATE_queryWithAddedFilter(h,$)}(e._query,s),new Query(e.firestore,e.converter,__PRIVATE_queryWithAddedFilter(e._query,s)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class QueryOrderByConstraint extends QueryConstraint{constructor(e,s){super(),this._field=e,this._direction=s,this.type="orderBy"}static _create(e,s){return new QueryOrderByConstraint(e,s)}_apply(e){const s=function(a,c,h){if(a.startAt!==null)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(a.endAt!==null)throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new OrderBy(c,h)}(e._query,this._field,this._direction);return new Query(e.firestore,e.converter,function(a,c){const h=a.explicitOrderBy.concat([c]);return new __PRIVATE_QueryImpl(a.path,a.collectionGroup,h,a.filters.slice(),a.limit,a.limitType,a.startAt,a.endAt)}(e._query,s))}}function orderBy(i,e="asc"){const s=e,o=__PRIVATE_fieldPathFromArgument("orderBy",i);return QueryOrderByConstraint._create(o,s)}function __PRIVATE_parseDocumentIdValue(i,e,s){if(typeof(s=getModularInstance(s))=="string"){if(s==="")throw new FirestoreError(D.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!__PRIVATE_isCollectionGroupQuery(e)&&s.indexOf("/")!==-1)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${s}' contains a '/' character.`);const o=e.path.child(ResourcePath.fromString(s));if(!DocumentKey.isDocumentKey(o))throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return __PRIVATE_refValue(i,new DocumentKey(o))}if(s instanceof DocumentReference)return __PRIVATE_refValue(i,s._key);throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${__PRIVATE_valueDescription(s)}.`)}function __PRIVATE_validateDisjunctiveFilterElements(i,e){if(!Array.isArray(i)||i.length===0)throw new FirestoreError(D.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function __PRIVATE_validateNewFieldFilter(i,e){const s=function(a,c){for(const h of a)for(const _ of h.getFlattenedFilters())if(c.indexOf(_.op)>=0)return _.op;return null}(i.filters,function(a){switch(a){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(s!==null)throw s===e.op?new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new FirestoreError(D.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${s.toString()}' filters.`)}class AbstractUserDataWriter{convertValue(e,s="none"){switch(__PRIVATE_typeOrder(e)){case 0:return null;case 1:return e.booleanValue;case 2:return __PRIVATE_normalizeNumber(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,s);case 5:return e.stringValue;case 6:return this.convertBytes(__PRIVATE_normalizeByteString(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,s);case 10:return this.convertObject(e.mapValue,s);default:throw fail()}}convertObject(e,s){return this.convertObjectMap(e.fields,s)}convertObjectMap(e,s="none"){const o={};return forEach(e,(a,c)=>{o[a]=this.convertValue(c,s)}),o}convertGeoPoint(e){return new GeoPoint(__PRIVATE_normalizeNumber(e.latitude),__PRIVATE_normalizeNumber(e.longitude))}convertArray(e,s){return(e.values||[]).map(o=>this.convertValue(o,s))}convertServerTimestamp(e,s){switch(s){case"previous":const o=__PRIVATE_getPreviousValue(e);return o==null?null:this.convertValue(o,s);case"estimate":return this.convertTimestamp(__PRIVATE_getLocalWriteTime(e));default:return null}}convertTimestamp(e){const s=__PRIVATE_normalizeTimestamp(e);return new Timestamp(s.seconds,s.nanos)}convertDocumentKey(e,s){const o=ResourcePath.fromString(e);__PRIVATE_hardAssert(__PRIVATE_isValidResourceName(o));const a=new DatabaseId(o.get(1),o.get(3)),c=new DocumentKey(o.popFirst(5));return a.isEqual(s)||__PRIVATE_logError(`Document ${c} contains a document reference within a different database (${a.projectId}/${a.database}) which is not supported. It will be treated as a reference in the current database (${s.projectId}/${s.database}) instead.`),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function __PRIVATE_applyFirestoreDataConverter(i,e,s){let o;return o=i?s&&(s.merge||s.mergeFields)?i.toFirestore(e,s):i.toFirestore(e):e,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SnapshotMetadata{constructor(e,s){this.hasPendingWrites=e,this.fromCache=s}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class DocumentSnapshot extends DocumentSnapshot$1{constructor(e,s,o,a,c,h){super(e,s,o,a,h),this._firestore=e,this._firestoreImpl=e,this.metadata=c}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const s=new QueryDocumentSnapshot(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(s,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,s={}){if(this._document){const o=this._document.data.field(__PRIVATE_fieldPathFromArgument("DocumentSnapshot.get",e));if(o!==null)return this._userDataWriter.convertValue(o,s.serverTimestamps)}}}class QueryDocumentSnapshot extends DocumentSnapshot{data(e={}){return super.data(e)}}class QuerySnapshot{constructor(e,s,o,a){this._firestore=e,this._userDataWriter=s,this._snapshot=a,this.metadata=new SnapshotMetadata(a.hasPendingWrites,a.fromCache),this.query=o}get docs(){const e=[];return this.forEach(s=>e.push(s)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,s){this._snapshot.docs.forEach(o=>{e.call(s,new QueryDocumentSnapshot(this._firestore,this._userDataWriter,o.key,o,new SnapshotMetadata(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const s=!!e.includeMetadataChanges;if(s&&this._snapshot.excludesMetadataChanges)throw new FirestoreError(D.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===s||(this._cachedChanges=function(a,c){if(a._snapshot.oldDocs.isEmpty()){let h=0;return a._snapshot.docChanges.map(_=>{const $=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,_.doc.key,_.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);return _.doc,{type:"added",doc:$,oldIndex:-1,newIndex:h++}})}{let h=a._snapshot.oldDocs;return a._snapshot.docChanges.filter(_=>c||_.type!==3).map(_=>{const $=new QueryDocumentSnapshot(a._firestore,a._userDataWriter,_.doc.key,_.doc,new SnapshotMetadata(a._snapshot.mutatedKeys.has(_.doc.key),a._snapshot.fromCache),a.query.converter);let g=-1,d=-1;return _.type!==0&&(g=h.indexOf(_.doc.key),h=h.delete(_.doc.key)),_.type!==1&&(h=h.add(_.doc),d=h.indexOf(_.doc.key)),{type:__PRIVATE_resultChangeType(_.type),doc:$,oldIndex:g,newIndex:d}})}}(this,s),this._cachedChangesIncludeMetadataChanges=s),this._cachedChanges}}function __PRIVATE_resultChangeType(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return fail()}}class __PRIVATE_ExpUserDataWriter extends AbstractUserDataWriter{constructor(e){super(),this.firestore=e}convertBytes(e){return new Bytes(e)}convertReference(e){const s=this.convertDocumentKey(e,this.firestore._databaseId);return new DocumentReference(this.firestore,null,s)}}function setDoc(i,e,s){i=__PRIVATE_cast(i,DocumentReference);const o=__PRIVATE_cast(i.firestore,Firestore),a=__PRIVATE_applyFirestoreDataConverter(i.converter,e,s);return executeWrite(o,[__PRIVATE_parseSetData(__PRIVATE_newUserDataReader(o),"setDoc",i._key,a,i.converter!==null,s).toMutation(i._key,Precondition.none())])}function onSnapshot(i,...e){var s,o,a;i=getModularInstance(i);let c={includeMetadataChanges:!1},h=0;typeof e[h]!="object"||__PRIVATE_isPartialObserver(e[h])||(c=e[h],h++);const _={includeMetadataChanges:c.includeMetadataChanges};if(__PRIVATE_isPartialObserver(e[h])){const j=e[h];e[h]=(s=j.next)===null||s===void 0?void 0:s.bind(j),e[h+1]=(o=j.error)===null||o===void 0?void 0:o.bind(j),e[h+2]=(a=j.complete)===null||a===void 0?void 0:a.bind(j)}let $,g,d;if(i instanceof DocumentReference)g=__PRIVATE_cast(i.firestore,Firestore),d=__PRIVATE_newQueryForPath(i._key.path),$={next:j=>{e[h]&&e[h](__PRIVATE_convertToDocSnapshot(g,i,j))},error:e[h+1],complete:e[h+2]};else{const j=__PRIVATE_cast(i,Query);g=__PRIVATE_cast(j.firestore,Firestore),d=j._query;const tt=new __PRIVATE_ExpUserDataWriter(g);$={next:rt=>{e[h]&&e[h](new QuerySnapshot(g,tt,j,rt))},error:e[h+1],complete:e[h+2]},__PRIVATE_validateHasExplicitOrderByForLimitToLast(i._query)}return function(tt,rt,et,it){const st=new __PRIVATE_AsyncObserver(it),nt=new __PRIVATE_QueryListener(rt,st,et);return tt.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerListen(await __PRIVATE_getEventManager(tt),nt)),()=>{st.La(),tt.asyncQueue.enqueueAndForget(async()=>__PRIVATE_eventManagerUnlisten(await __PRIVATE_getEventManager(tt),nt))}}(ensureFirestoreConfigured(g),d,_,$)}function executeWrite(i,e){return function(o,a){const c=new __PRIVATE_Deferred;return o.asyncQueue.enqueueAndForget(async()=>__PRIVATE_syncEngineWrite(await __PRIVATE_getSyncEngine(o),a,c)),c.promise}(ensureFirestoreConfigured(i),e)}function __PRIVATE_convertToDocSnapshot(i,e,s){const o=s.docs.get(e._key),a=new __PRIVATE_ExpUserDataWriter(i);return new DocumentSnapshot(i,a,e._key,o,new SnapshotMetadata(s.hasPendingWrites,s.fromCache),e.converter)}(function(e,s=!0){(function(a){S=a})(SDK_VERSION),_registerComponent(new Component("firestore",(o,{instanceIdentifier:a,options:c})=>{const h=o.getProvider("app").getImmediate(),_=new Firestore(new __PRIVATE_FirebaseAuthCredentialsProvider(o.getProvider("auth-internal")),new __PRIVATE_FirebaseAppCheckTokenProvider(o.getProvider("app-check-internal")),function(g,d){if(!Object.prototype.hasOwnProperty.apply(g.options,["projectId"]))throw new FirestoreError(D.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new DatabaseId(g.options.projectId,d)}(h,a),h);return c=Object.assign({useFetchStreams:s},c),_._setSettings(c),_},"PUBLIC").setMultipleInstances(!0)),registerVersion(w,"4.4.2",e),registerVersion(w,"4.4.2","esm2017")})();var name$1="firebase",version$1="10.8.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */registerVersion(name$1,version$1,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DEFAULT_HOST="firebasestorage.googleapis.com",CONFIG_STORAGE_BUCKET_KEY="storageBucket",DEFAULT_MAX_OPERATION_RETRY_TIME=2*60*1e3,DEFAULT_MAX_UPLOAD_RETRY_TIME=10*60*1e3,DEFAULT_MIN_SLEEP_TIME_MILLIS=1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class StorageError extends FirebaseError{constructor(e,s,o=0){super(prependCode(e),`Firebase Storage: ${s} (${prependCode(e)})`),this.status_=o,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,StorageError.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return prependCode(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var StorageErrorCode;(function(i){i.UNKNOWN="unknown",i.OBJECT_NOT_FOUND="object-not-found",i.BUCKET_NOT_FOUND="bucket-not-found",i.PROJECT_NOT_FOUND="project-not-found",i.QUOTA_EXCEEDED="quota-exceeded",i.UNAUTHENTICATED="unauthenticated",i.UNAUTHORIZED="unauthorized",i.UNAUTHORIZED_APP="unauthorized-app",i.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",i.INVALID_CHECKSUM="invalid-checksum",i.CANCELED="canceled",i.INVALID_EVENT_NAME="invalid-event-name",i.INVALID_URL="invalid-url",i.INVALID_DEFAULT_BUCKET="invalid-default-bucket",i.NO_DEFAULT_BUCKET="no-default-bucket",i.CANNOT_SLICE_BLOB="cannot-slice-blob",i.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",i.NO_DOWNLOAD_URL="no-download-url",i.INVALID_ARGUMENT="invalid-argument",i.INVALID_ARGUMENT_COUNT="invalid-argument-count",i.APP_DELETED="app-deleted",i.INVALID_ROOT_OPERATION="invalid-root-operation",i.INVALID_FORMAT="invalid-format",i.INTERNAL_ERROR="internal-error",i.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(StorageErrorCode||(StorageErrorCode={}));function prependCode(i){return"storage/"+i}function unknown(){const i="An unknown error occurred, please check the error payload for server response.";return new StorageError(StorageErrorCode.UNKNOWN,i)}function objectNotFound(i){return new StorageError(StorageErrorCode.OBJECT_NOT_FOUND,"Object '"+i+"' does not exist.")}function quotaExceeded(i){return new StorageError(StorageErrorCode.QUOTA_EXCEEDED,"Quota for bucket '"+i+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function unauthenticated(){const i="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new StorageError(StorageErrorCode.UNAUTHENTICATED,i)}function unauthorizedApp(){return new StorageError(StorageErrorCode.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function unauthorized(i){return new StorageError(StorageErrorCode.UNAUTHORIZED,"User does not have permission to access '"+i+"'.")}function retryLimitExceeded(){return new StorageError(StorageErrorCode.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function canceled(){return new StorageError(StorageErrorCode.CANCELED,"User canceled the upload/download.")}function invalidUrl(i){return new StorageError(StorageErrorCode.INVALID_URL,"Invalid URL '"+i+"'.")}function invalidDefaultBucket(i){return new StorageError(StorageErrorCode.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+i+"'.")}function noDefaultBucket(){return new StorageError(StorageErrorCode.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+CONFIG_STORAGE_BUCKET_KEY+"' property when initializing the app?")}function cannotSliceBlob(){return new StorageError(StorageErrorCode.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function serverFileWrongSize(){return new StorageError(StorageErrorCode.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}function noDownloadURL(){return new StorageError(StorageErrorCode.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function missingPolyFill(i){return new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,`${i} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function invalidArgument(i){return new StorageError(StorageErrorCode.INVALID_ARGUMENT,i)}function appDeleted(){return new StorageError(StorageErrorCode.APP_DELETED,"The Firebase app was deleted.")}function invalidRootOperation(i){return new StorageError(StorageErrorCode.INVALID_ROOT_OPERATION,"The operation '"+i+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function invalidFormat(i,e){return new StorageError(StorageErrorCode.INVALID_FORMAT,"String does not match format '"+i+"': "+e)}function internalError(i){throw new StorageError(StorageErrorCode.INTERNAL_ERROR,"Internal error: "+i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Location{constructor(e,s){this.bucket=e,this.path_=s}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,s){let o;try{o=Location.makeFromUrl(e,s)}catch{return new Location(e,"")}if(o.path==="")return o;throw invalidDefaultBucket(e)}static makeFromUrl(e,s){let o=null;const a="([A-Za-z0-9.\\-_]+)";function c(pt){pt.path.charAt(pt.path.length-1)==="/"&&(pt.path_=pt.path_.slice(0,-1))}const h="(/(.*))?$",_=new RegExp("^gs://"+a+h,"i"),$={bucket:1,path:3};function g(pt){pt.path_=decodeURIComponent(pt.path)}const d="v[A-Za-z0-9_]+",j=s.replace(/[.]/g,"\\."),tt="(/([^?#]*).*)?$",rt=new RegExp(`^https?://${j}/${d}/b/${a}/o${tt}`,"i"),et={bucket:1,path:3},it=s===DEFAULT_HOST?"(?:storage.googleapis.com|storage.cloud.google.com)":s,st="([^?#]*)",nt=new RegExp(`^https?://${it}/${a}/${st}`,"i"),ht=[{regex:_,indices:$,postModify:c},{regex:rt,indices:et,postModify:g},{regex:nt,indices:{bucket:1,path:2},postModify:g}];for(let pt=0;pt<ht.length;pt++){const lt=ht[pt],ut=lt.regex.exec(e);if(ut){const yt=ut[lt.indices.bucket];let Pt=ut[lt.indices.path];Pt||(Pt=""),o=new Location(yt,Pt),lt.postModify(o);break}}if(o==null)throw invalidUrl(e);return o}}class FailRequest{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function start(i,e,s){let o=1,a=null,c=null,h=!1,_=0;function $(){return _===2}let g=!1;function d(...st){g||(g=!0,e.apply(null,st))}function j(st){a=setTimeout(()=>{a=null,i(rt,$())},st)}function tt(){c&&clearTimeout(c)}function rt(st,...nt){if(g){tt();return}if(st){tt(),d.call(null,st,...nt);return}if($()||h){tt(),d.call(null,st,...nt);return}o<64&&(o*=2);let ht;_===1?(_=2,ht=0):ht=(o+Math.random())*1e3,j(ht)}let et=!1;function it(st){et||(et=!0,tt(),!g&&(a!==null?(st||(_=2),clearTimeout(a),j(0)):st||(_=1)))}return j(0),c=setTimeout(()=>{h=!0,it(!0)},s),it}function stop(i){i(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isJustDef(i){return i!==void 0}function isFunction(i){return typeof i=="function"}function isNonArrayObject(i){return typeof i=="object"&&!Array.isArray(i)}function isString$1(i){return typeof i=="string"||i instanceof String}function isNativeBlob(i){return isNativeBlobDefined()&&i instanceof Blob}function isNativeBlobDefined(){return typeof Blob<"u"}function validateNumber(i,e,s,o){if(o<e)throw invalidArgument(`Invalid value for '${i}'. Expected ${e} or greater.`);if(o>s)throw invalidArgument(`Invalid value for '${i}'. Expected ${s} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function makeUrl(i,e,s){let o=e;return s==null&&(o=`https://${e}`),`${s}://${o}/v0${i}`}function makeQueryString(i){const e=encodeURIComponent;let s="?";for(const o in i)if(i.hasOwnProperty(o)){const a=e(o)+"="+e(i[o]);s=s+a+"&"}return s=s.slice(0,-1),s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ErrorCode;(function(i){i[i.NO_ERROR=0]="NO_ERROR",i[i.NETWORK_ERROR=1]="NETWORK_ERROR",i[i.ABORT=2]="ABORT"})(ErrorCode||(ErrorCode={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isRetryStatusCode(i,e){const s=i>=500&&i<600,a=[408,429].indexOf(i)!==-1,c=e.indexOf(i)!==-1;return s||a||c}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NetworkRequest{constructor(e,s,o,a,c,h,_,$,g,d,j,tt=!0){this.url_=e,this.method_=s,this.headers_=o,this.body_=a,this.successCodes_=c,this.additionalRetryCodes_=h,this.callback_=_,this.errorCallback_=$,this.timeout_=g,this.progressCallback_=d,this.connectionFactory_=j,this.retry=tt,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((rt,et)=>{this.resolve_=rt,this.reject_=et,this.start_()})}start_(){const e=(o,a)=>{if(a){o(!1,new RequestEndStatus(!1,null,!0));return}const c=this.connectionFactory_();this.pendingConnection_=c;const h=_=>{const $=_.loaded,g=_.lengthComputable?_.total:-1;this.progressCallback_!==null&&this.progressCallback_($,g)};this.progressCallback_!==null&&c.addUploadProgressListener(h),c.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&c.removeUploadProgressListener(h),this.pendingConnection_=null;const _=c.getErrorCode()===ErrorCode.NO_ERROR,$=c.getStatus();if(!_||isRetryStatusCode($,this.additionalRetryCodes_)&&this.retry){const d=c.getErrorCode()===ErrorCode.ABORT;o(!1,new RequestEndStatus(!1,null,d));return}const g=this.successCodes_.indexOf($)!==-1;o(!0,new RequestEndStatus(g,c))})},s=(o,a)=>{const c=this.resolve_,h=this.reject_,_=a.connection;if(a.wasSuccessCode)try{const $=this.callback_(_,_.getResponse());isJustDef($)?c($):c()}catch($){h($)}else if(_!==null){const $=unknown();$.serverResponse=_.getErrorText(),this.errorCallback_?h(this.errorCallback_(_,$)):h($)}else if(a.canceled){const $=this.appDelete_?appDeleted():canceled();h($)}else{const $=retryLimitExceeded();h($)}};this.canceled_?s(!1,new RequestEndStatus(!1,null,!0)):this.backoffId_=start(e,s,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&stop(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class RequestEndStatus{constructor(e,s,o){this.wasSuccessCode=e,this.connection=s,this.canceled=!!o}}function addAuthHeader_(i,e){e!==null&&e.length>0&&(i.Authorization="Firebase "+e)}function addVersionHeader_(i,e){i["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function addGmpidHeader_(i,e){e&&(i["X-Firebase-GMPID"]=e)}function addAppCheckHeader_(i,e){e!==null&&(i["X-Firebase-AppCheck"]=e)}function makeRequest(i,e,s,o,a,c,h=!0){const _=makeQueryString(i.urlParams),$=i.url+_,g=Object.assign({},i.headers);return addGmpidHeader_(g,e),addAuthHeader_(g,s),addVersionHeader_(g,c),addAppCheckHeader_(g,o),new NetworkRequest($,i.method,g,i.body,i.successCodes,i.additionalRetryCodes,i.handler,i.errorHandler,i.timeout,i.progressCallback,a,h)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function getBlobBuilder(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function getBlob$1(...i){const e=getBlobBuilder();if(e!==void 0){const s=new e;for(let o=0;o<i.length;o++)s.append(i[o]);return s.getBlob()}else{if(isNativeBlobDefined())return new Blob(i);throw new StorageError(StorageErrorCode.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function sliceBlob(i,e,s){return i.webkitSlice?i.webkitSlice(e,s):i.mozSlice?i.mozSlice(e,s):i.slice?i.slice(e,s):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function decodeBase64(i){if(typeof atob>"u")throw missingPolyFill("base-64");return atob(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const StringFormat={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class StringData{constructor(e,s){this.data=e,this.contentType=s||null}}function dataFromString(i,e){switch(i){case StringFormat.RAW:return new StringData(utf8Bytes_(e));case StringFormat.BASE64:case StringFormat.BASE64URL:return new StringData(base64Bytes_(i,e));case StringFormat.DATA_URL:return new StringData(dataURLBytes_(e),dataURLContentType_(e))}throw unknown()}function utf8Bytes_(i){const e=[];for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);if(o<=127)e.push(o);else if(o<=2047)e.push(192|o>>6,128|o&63);else if((o&64512)===55296)if(!(s<i.length-1&&(i.charCodeAt(s+1)&64512)===56320))e.push(239,191,189);else{const c=o,h=i.charCodeAt(++s);o=65536|(c&1023)<<10|h&1023,e.push(240|o>>18,128|o>>12&63,128|o>>6&63,128|o&63)}else(o&64512)===56320?e.push(239,191,189):e.push(224|o>>12,128|o>>6&63,128|o&63)}return new Uint8Array(e)}function percentEncodedBytes_(i){let e;try{e=decodeURIComponent(i)}catch{throw invalidFormat(StringFormat.DATA_URL,"Malformed data URL.")}return utf8Bytes_(e)}function base64Bytes_(i,e){switch(i){case StringFormat.BASE64:{const a=e.indexOf("-")!==-1,c=e.indexOf("_")!==-1;if(a||c)throw invalidFormat(i,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case StringFormat.BASE64URL:{const a=e.indexOf("+")!==-1,c=e.indexOf("/")!==-1;if(a||c)throw invalidFormat(i,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let s;try{s=decodeBase64(e)}catch(a){throw a.message.includes("polyfill")?a:invalidFormat(i,"Invalid character found")}const o=new Uint8Array(s.length);for(let a=0;a<s.length;a++)o[a]=s.charCodeAt(a);return o}class DataURLParts{constructor(e){this.base64=!1,this.contentType=null;const s=e.match(/^data:([^,]+)?,/);if(s===null)throw invalidFormat(StringFormat.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const o=s[1]||null;o!=null&&(this.base64=endsWith(o,";base64"),this.contentType=this.base64?o.substring(0,o.length-7):o),this.rest=e.substring(e.indexOf(",")+1)}}function dataURLBytes_(i){const e=new DataURLParts(i);return e.base64?base64Bytes_(StringFormat.BASE64,e.rest):percentEncodedBytes_(e.rest)}function dataURLContentType_(i){return new DataURLParts(i).contentType}function endsWith(i,e){return i.length>=e.length?i.substring(i.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FbsBlob{constructor(e,s){let o=0,a="";isNativeBlob(e)?(this.data_=e,o=e.size,a=e.type):e instanceof ArrayBuffer?(s?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),o=this.data_.length):e instanceof Uint8Array&&(s?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),o=e.length),this.size_=o,this.type_=a}size(){return this.size_}type(){return this.type_}slice(e,s){if(isNativeBlob(this.data_)){const o=this.data_,a=sliceBlob(o,e,s);return a===null?null:new FbsBlob(a)}else{const o=new Uint8Array(this.data_.buffer,e,s-e);return new FbsBlob(o,!0)}}static getBlob(...e){if(isNativeBlobDefined()){const s=e.map(o=>o instanceof FbsBlob?o.data_:o);return new FbsBlob(getBlob$1.apply(null,s))}else{const s=e.map(h=>isString$1(h)?dataFromString(StringFormat.RAW,h).data:h.data_);let o=0;s.forEach(h=>{o+=h.byteLength});const a=new Uint8Array(o);let c=0;return s.forEach(h=>{for(let _=0;_<h.length;_++)a[c++]=h[_]}),new FbsBlob(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jsonObjectOrNull(i){let e;try{e=JSON.parse(i)}catch{return null}return isNonArrayObject(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function parent(i){if(i.length===0)return null;const e=i.lastIndexOf("/");return e===-1?"":i.slice(0,e)}function child(i,e){const s=e.split("/").filter(o=>o.length>0).join("/");return i.length===0?s:i+"/"+s}function lastComponent(i){const e=i.lastIndexOf("/",i.length-2);return e===-1?i:i.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function noXform_(i,e){return e}class Mapping{constructor(e,s,o,a){this.server=e,this.local=s||e,this.writable=!!o,this.xform=a||noXform_}}let mappings_=null;function xformPath(i){return!isString$1(i)||i.length<2?i:lastComponent(i)}function getMappings(){if(mappings_)return mappings_;const i=[];i.push(new Mapping("bucket")),i.push(new Mapping("generation")),i.push(new Mapping("metageneration")),i.push(new Mapping("name","fullPath",!0));function e(c,h){return xformPath(h)}const s=new Mapping("name");s.xform=e,i.push(s);function o(c,h){return h!==void 0?Number(h):h}const a=new Mapping("size");return a.xform=o,i.push(a),i.push(new Mapping("timeCreated")),i.push(new Mapping("updated")),i.push(new Mapping("md5Hash",null,!0)),i.push(new Mapping("cacheControl",null,!0)),i.push(new Mapping("contentDisposition",null,!0)),i.push(new Mapping("contentEncoding",null,!0)),i.push(new Mapping("contentLanguage",null,!0)),i.push(new Mapping("contentType",null,!0)),i.push(new Mapping("metadata","customMetadata",!0)),mappings_=i,mappings_}function addRef(i,e){function s(){const o=i.bucket,a=i.fullPath,c=new Location(o,a);return e._makeStorageReference(c)}Object.defineProperty(i,"ref",{get:s})}function fromResource(i,e,s){const o={};o.type="file";const a=s.length;for(let c=0;c<a;c++){const h=s[c];o[h.local]=h.xform(o,e[h.server])}return addRef(o,i),o}function fromResourceString(i,e,s){const o=jsonObjectOrNull(e);return o===null?null:fromResource(i,o,s)}function downloadUrlFromResourceString(i,e,s,o){const a=jsonObjectOrNull(e);if(a===null||!isString$1(a.downloadTokens))return null;const c=a.downloadTokens;if(c.length===0)return null;const h=encodeURIComponent;return c.split(",").map(g=>{const d=i.bucket,j=i.fullPath,tt="/b/"+h(d)+"/o/"+h(j),rt=makeUrl(tt,s,o),et=makeQueryString({alt:"media",token:g});return rt+et})[0]}function toResourceString(i,e){const s={},o=e.length;for(let a=0;a<o;a++){const c=e[a];c.writable&&(s[c.server]=i[c.local])}return JSON.stringify(s)}class RequestInfo{constructor(e,s,o,a){this.url=e,this.method=s,this.handler=o,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function handlerCheck(i){if(!i)throw unknown()}function metadataHandler(i,e){function s(o,a){const c=fromResourceString(i,a,e);return handlerCheck(c!==null),c}return s}function downloadUrlHandler(i,e){function s(o,a){const c=fromResourceString(i,a,e);return handlerCheck(c!==null),downloadUrlFromResourceString(c,a,i.host,i._protocol)}return s}function sharedErrorHandler(i){function e(s,o){let a;return s.getStatus()===401?s.getErrorText().includes("Firebase App Check token is invalid")?a=unauthorizedApp():a=unauthenticated():s.getStatus()===402?a=quotaExceeded(i.bucket):s.getStatus()===403?a=unauthorized(i.path):a=o,a.status=s.getStatus(),a.serverResponse=o.serverResponse,a}return e}function objectErrorHandler(i){const e=sharedErrorHandler(i);function s(o,a){let c=e(o,a);return o.getStatus()===404&&(c=objectNotFound(i.path)),c.serverResponse=a.serverResponse,c}return s}function getMetadata$2(i,e,s){const o=e.fullServerUrl(),a=makeUrl(o,i.host,i._protocol),c="GET",h=i.maxOperationRetryTime,_=new RequestInfo(a,c,metadataHandler(i,s),h);return _.errorHandler=objectErrorHandler(e),_}function getDownloadUrl(i,e,s){const o=e.fullServerUrl(),a=makeUrl(o,i.host,i._protocol),c="GET",h=i.maxOperationRetryTime,_=new RequestInfo(a,c,downloadUrlHandler(i,s),h);return _.errorHandler=objectErrorHandler(e),_}function determineContentType_(i,e){return i&&i.contentType||e&&e.type()||"application/octet-stream"}function metadataForUpload_(i,e,s){const o=Object.assign({},s);return o.fullPath=i.path,o.size=e.size(),o.contentType||(o.contentType=determineContentType_(null,e)),o}function multipartUpload(i,e,s,o,a){const c=e.bucketOnlyServerUrl(),h={"X-Goog-Upload-Protocol":"multipart"};function _(){let ht="";for(let pt=0;pt<2;pt++)ht=ht+Math.random().toString().slice(2);return ht}const $=_();h["Content-Type"]="multipart/related; boundary="+$;const g=metadataForUpload_(e,o,a),d=toResourceString(g,s),j="--"+$+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+$+`\r
Content-Type: `+g.contentType+`\r
\r
`,tt=`\r
--`+$+"--",rt=FbsBlob.getBlob(j,o,tt);if(rt===null)throw cannotSliceBlob();const et={name:g.fullPath},it=makeUrl(c,i.host,i._protocol),st="POST",nt=i.maxUploadRetryTime,ot=new RequestInfo(it,st,metadataHandler(i,s),nt);return ot.urlParams=et,ot.headers=h,ot.body=rt.uploadData(),ot.errorHandler=sharedErrorHandler(e),ot}class ResumableUploadStatus{constructor(e,s,o,a){this.current=e,this.total=s,this.finalized=!!o,this.metadata=a||null}}function checkResumeHeader_(i,e){let s=null;try{s=i.getResponseHeader("X-Goog-Upload-Status")}catch{handlerCheck(!1)}return handlerCheck(!!s&&(e||["active"]).indexOf(s)!==-1),s}function createResumableUpload(i,e,s,o,a){const c=e.bucketOnlyServerUrl(),h=metadataForUpload_(e,o,a),_={name:h.fullPath},$=makeUrl(c,i.host,i._protocol),g="POST",d={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${o.size()}`,"X-Goog-Upload-Header-Content-Type":h.contentType,"Content-Type":"application/json; charset=utf-8"},j=toResourceString(h,s),tt=i.maxUploadRetryTime;function rt(it){checkResumeHeader_(it);let st;try{st=it.getResponseHeader("X-Goog-Upload-URL")}catch{handlerCheck(!1)}return handlerCheck(isString$1(st)),st}const et=new RequestInfo($,g,rt,tt);return et.urlParams=_,et.headers=d,et.body=j,et.errorHandler=sharedErrorHandler(e),et}function getResumableUploadStatus(i,e,s,o){const a={"X-Goog-Upload-Command":"query"};function c(g){const d=checkResumeHeader_(g,["active","final"]);let j=null;try{j=g.getResponseHeader("X-Goog-Upload-Size-Received")}catch{handlerCheck(!1)}j||handlerCheck(!1);const tt=Number(j);return handlerCheck(!isNaN(tt)),new ResumableUploadStatus(tt,o.size(),d==="final")}const h="POST",_=i.maxUploadRetryTime,$=new RequestInfo(s,h,c,_);return $.headers=a,$.errorHandler=sharedErrorHandler(e),$}const RESUMABLE_UPLOAD_CHUNK_SIZE=256*1024;function continueResumableUpload(i,e,s,o,a,c,h,_){const $=new ResumableUploadStatus(0,0);if(h?($.current=h.current,$.total=h.total):($.current=0,$.total=o.size()),o.size()!==$.total)throw serverFileWrongSize();const g=$.total-$.current;let d=g;a>0&&(d=Math.min(d,a));const j=$.current,tt=j+d;let rt="";d===0?rt="finalize":g===d?rt="upload, finalize":rt="upload";const et={"X-Goog-Upload-Command":rt,"X-Goog-Upload-Offset":`${$.current}`},it=o.slice(j,tt);if(it===null)throw cannotSliceBlob();function st(pt,lt){const ut=checkResumeHeader_(pt,["active","final"]),yt=$.current+d,Pt=o.size();let vt;return ut==="final"?vt=metadataHandler(e,c)(pt,lt):vt=null,new ResumableUploadStatus(yt,Pt,ut==="final",vt)}const nt="POST",ot=e.maxUploadRetryTime,ht=new RequestInfo(s,nt,st,ot);return ht.headers=et,ht.body=it.uploadData(),ht.progressCallback=_||null,ht.errorHandler=sharedErrorHandler(i),ht}const TaskState={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function taskStateFromInternalTaskState(i){switch(i){case"running":case"pausing":case"canceling":return TaskState.RUNNING;case"paused":return TaskState.PAUSED;case"success":return TaskState.SUCCESS;case"canceled":return TaskState.CANCELED;case"error":return TaskState.ERROR;default:return TaskState.ERROR}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Observer{constructor(e,s,o){if(isFunction(e)||s!=null||o!=null)this.next=e,this.error=s??void 0,this.complete=o??void 0;else{const c=e;this.next=c.next,this.error=c.error,this.complete=c.complete}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function async(i){return(...e)=>{Promise.resolve().then(()=>i(...e))}}class XhrConnection{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ErrorCode.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ErrorCode.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ErrorCode.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,s,o,a){if(this.sent_)throw internalError("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(s,e,!0),a!==void 0)for(const c in a)a.hasOwnProperty(c)&&this.xhr_.setRequestHeader(c,a[c].toString());return o!==void 0?this.xhr_.send(o):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw internalError("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw internalError("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw internalError("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw internalError("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class XhrTextConnection extends XhrConnection{initXhr(){this.xhr_.responseType="text"}}function newTextConnection(){return new XhrTextConnection}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UploadTask{constructor(e,s,o=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=s,this._metadata=o,this._mappings=getMappings(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=a=>{if(this._request=void 0,this._chunkMultiplier=1,a._codeEquals(StorageErrorCode.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const c=this.isExponentialBackoffExpired();if(isRetryStatusCode(a.status,[]))if(c)a=retryLimitExceeded();else{this.sleepTime=Math.max(this.sleepTime*2,DEFAULT_MIN_SLEEP_TIME_MILLIS),this._needToFetchStatus=!0,this.completeTransitions_();return}this._error=a,this._transition("error")}},this._metadataErrorHandler=a=>{this._request=void 0,a._codeEquals(StorageErrorCode.CANCELED)?this.completeTransitions_():(this._error=a,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((a,c)=>{this._resolve=a,this._reject=c,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return s=>this._updateProgress(e+s)}_shouldDoResumable(e){return e.size()>256*1024}_start(){this._state==="running"&&this._request===void 0&&(this._resumable?this._uploadUrl===void 0?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([s,o])=>{switch(this._state){case"running":e(s,o);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused");break}})}_createResumable(){this._resolveToken((e,s)=>{const o=createResumableUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(o,newTextConnection,e,s);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._uploadUrl=c,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((s,o)=>{const a=getResumableUploadStatus(this._ref.storage,this._ref._location,e,this._blob),c=this._ref.storage._makeRequest(a,newTextConnection,s,o);this._request=c,c.getPromise().then(h=>{h=h,this._request=void 0,this._updateProgress(h.current),this._needToFetchStatus=!1,h.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier,s=new ResumableUploadStatus(this._transferred,this._blob.size()),o=this._uploadUrl;this._resolveToken((a,c)=>{let h;try{h=continueResumableUpload(this._ref._location,this._ref.storage,o,this._blob,e,this._mappings,s,this._makeProgressCallback())}catch($){this._error=$,this._transition("error");return}const _=this._ref.storage._makeRequest(h,newTextConnection,a,c,!1);this._request=_,_.getPromise().then($=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress($.current),$.finalized?(this._metadata=$.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){RESUMABLE_UPLOAD_CHUNK_SIZE*this._chunkMultiplier*2<32*1024*1024&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,s)=>{const o=getMetadata$2(this._ref.storage,this._ref._location,this._mappings),a=this._ref.storage._makeRequest(o,newTextConnection,e,s);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,s)=>{const o=multipartUpload(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),a=this._ref.storage._makeRequest(o,newTextConnection,e,s);this._request=a,a.getPromise().then(c=>{this._request=void 0,this._metadata=c,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const s=this._transferred;this._transferred=e,this._transferred!==s&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,this._request!==void 0?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const s=this._state==="paused";this._state=e,s&&(this._notifyObservers(),this._start());break;case"paused":this._state=e,this._notifyObservers();break;case"canceled":this._error=canceled(),this._state=e,this._notifyObservers();break;case"error":this._state=e,this._notifyObservers();break;case"success":this._state=e,this._notifyObservers();break}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start();break}}get snapshot(){const e=taskStateFromInternalTaskState(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,s,o,a){const c=new Observer(s||void 0,o||void 0,a||void 0);return this._addObserver(c),()=>{this._removeObserver(c)}}then(e,s){return this._promise.then(e,s)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const s=this._observers.indexOf(e);s!==-1&&this._observers.splice(s,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(s=>{this._notifyObserver(s)})}_finishPromise(){if(this._resolve!==void 0){let e=!0;switch(taskStateFromInternalTaskState(this._state)){case TaskState.SUCCESS:async(this._resolve.bind(null,this.snapshot))();break;case TaskState.CANCELED:case TaskState.ERROR:const s=this._reject;async(s.bind(null,this._error))();break;default:e=!1;break}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(taskStateFromInternalTaskState(this._state)){case TaskState.RUNNING:case TaskState.PAUSED:e.next&&async(e.next.bind(e,this.snapshot))();break;case TaskState.SUCCESS:e.complete&&async(e.complete.bind(e))();break;case TaskState.CANCELED:case TaskState.ERROR:e.error&&async(e.error.bind(e,this._error))();break;default:e.error&&async(e.error.bind(e,this._error))()}}resume(){const e=this._state==="paused"||this._state==="pausing";return e&&this._transition("running"),e}pause(){const e=this._state==="running";return e&&this._transition("pausing"),e}cancel(){const e=this._state==="running"||this._state==="pausing";return e&&this._transition("canceling"),e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Reference{constructor(e,s){this._service=e,s instanceof Location?this._location=s:this._location=Location.makeFromUrl(s,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,s){return new Reference(e,s)}get root(){const e=new Location(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return lastComponent(this._location.path)}get storage(){return this._service}get parent(){const e=parent(this._location.path);if(e===null)return null;const s=new Location(this._location.bucket,e);return new Reference(this._service,s)}_throwIfRoot(e){if(this._location.path==="")throw invalidRootOperation(e)}}function uploadBytesResumable$1(i,e,s){return i._throwIfRoot("uploadBytesResumable"),new UploadTask(i,new FbsBlob(e),s)}function getDownloadURL$1(i){i._throwIfRoot("getDownloadURL");const e=getDownloadUrl(i.storage,i._location,getMappings());return i.storage.makeRequestWithTokens(e,newTextConnection).then(s=>{if(s===null)throw noDownloadURL();return s})}function _getChild$1(i,e){const s=child(i._location.path,e),o=new Location(i._location.bucket,s);return new Reference(i.storage,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function isUrl(i){return/^[A-Za-z]+:\/\//.test(i)}function refFromURL(i,e){return new Reference(i,e)}function refFromPath(i,e){if(i instanceof FirebaseStorageImpl){const s=i;if(s._bucket==null)throw noDefaultBucket();const o=new Reference(s,s._bucket);return e!=null?refFromPath(o,e):o}else return e!==void 0?_getChild$1(i,e):i}function ref$1(i,e){if(e&&isUrl(e)){if(i instanceof FirebaseStorageImpl)return refFromURL(i,e);throw invalidArgument("To use ref(service, url), the first argument must be a Storage instance.")}else return refFromPath(i,e)}function extractBucket(i,e){const s=e?.[CONFIG_STORAGE_BUCKET_KEY];return s==null?null:Location.makeFromBucketSpec(s,i)}function connectStorageEmulator$1(i,e,s,o={}){i.host=`${e}:${s}`,i._protocol="http";const{mockUserToken:a}=o;a&&(i._overrideAuthToken=typeof a=="string"?a:createMockUserToken(a,i.app.options.projectId))}class FirebaseStorageImpl{constructor(e,s,o,a,c){this.app=e,this._authProvider=s,this._appCheckProvider=o,this._url=a,this._firebaseVersion=c,this._bucket=null,this._host=DEFAULT_HOST,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=DEFAULT_MAX_OPERATION_RETRY_TIME,this._maxUploadRetryTime=DEFAULT_MAX_UPLOAD_RETRY_TIME,this._requests=new Set,a!=null?this._bucket=Location.makeFromBucketSpec(a,this._host):this._bucket=extractBucket(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Location.makeFromBucketSpec(this._url,e):this._bucket=extractBucket(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){validateNumber("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const s=await e.getToken();if(s!==null)return s.accessToken}return null}async _getAppCheckToken(){const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Reference(this,e)}_makeRequest(e,s,o,a,c=!0){if(this._deleted)return new FailRequest(appDeleted());{const h=makeRequest(e,this._appId,o,a,s,this._firebaseVersion,c);return this._requests.add(h),h.getPromise().then(()=>this._requests.delete(h),()=>this._requests.delete(h)),h}}async makeRequestWithTokens(e,s){const[o,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,s,o,a).getPromise()}}const name="@firebase/storage",version="0.12.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const STORAGE_TYPE="storage";function uploadBytesResumable(i,e,s){return i=getModularInstance(i),uploadBytesResumable$1(i,e,s)}function getDownloadURL(i){return i=getModularInstance(i),getDownloadURL$1(i)}function ref(i,e){return i=getModularInstance(i),ref$1(i,e)}function getStorage(i=getApp(),e){i=getModularInstance(i);const o=_getProvider(i,STORAGE_TYPE).getImmediate({identifier:e}),a=getDefaultEmulatorHostnameAndPort("storage");return a&&connectStorageEmulator(o,...a),o}function connectStorageEmulator(i,e,s,o={}){connectStorageEmulator$1(i,e,s,o)}function factory(i,{instanceIdentifier:e}){const s=i.getProvider("app").getImmediate(),o=i.getProvider("auth-internal"),a=i.getProvider("app-check-internal");return new FirebaseStorageImpl(s,o,a,e,SDK_VERSION)}function registerStorage(){_registerComponent(new Component(STORAGE_TYPE,factory,"PUBLIC").setMultipleInstances(!0)),registerVersion(name,version,""),registerVersion(name,version,"esm2017")}registerStorage();const firebaseConfig={apiKey:"AIzaSyANe6FhYgb8cKaPQSlDiV-VpPI-TVmdgwc",authDomain:"crucial-binder-166413.firebaseapp.com",projectId:"crucial-binder-166413",storageBucket:"crucial-binder-166413.appspot.com",messagingSenderId:"251134816734",appId:"1:251134816734:web:a4ee50fbcb52d6c0176d4f",measurementId:"G-DFQWV78HE0"},app=initializeApp(firebaseConfig),db=getFirestore(app),storage=getStorage(app);collection(db,"documents");/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var __assign=function(){return __assign=Object.assign||function(e){for(var s,o=1,a=arguments.length;o<a;o++){s=arguments[o];for(var c in s)Object.prototype.hasOwnProperty.call(s,c)&&(e[c]=s[c])}return e},__assign.apply(this,arguments)},defaultState=function(i){return{loading:i==null,value:i}},reducer$1=function(){return function(i,e){switch(e.type){case"error":return __assign(__assign({},i),{error:e.error,loading:!1,value:void 0});case"reset":return defaultState(e.defaultValue);case"value":return __assign(__assign({},i),{error:void 0,loading:!1,value:e.value});default:return i}}},useLoadingValue=function(i){var e=i?i():void 0,s=reactExports.useReducer(reducer$1(),defaultState(e)),o=s[0],a=s[1],c=reactExports.useCallback(function(){var $=i?i():void 0;a({type:"reset",defaultValue:$})},[i]),h=reactExports.useCallback(function($){a({type:"error",error:$})},[]),_=reactExports.useCallback(function($){a({type:"value",value:$})},[]);return reactExports.useMemo(function(){return{error:o.error,loading:o.loading,reset:c,setError:h,setValue:_,value:o.value}},[o.error,o.loading,c,h,_,o.value])},useComparatorRef=function(i,e,s){var o=reactExports.useRef(i);return reactExports.useEffect(function(){e(i,o.current)||(o.current=i,s&&s())}),o},isQueryEqual=function(i,e){var s=!i&&!e,o=!!i&&!!e&&queryEqual(i,e);return s||o},useIsFirestoreQueryEqual=function(i,e){return useComparatorRef(i,isQueryEqual,e)},useCollection=function(i,e){var s=useLoadingValue(),o=s.error,a=s.loading,c=s.reset,h=s.setError,_=s.setValue,$=s.value,g=useIsFirestoreQueryEqual(i,c);return reactExports.useEffect(function(){if(!g.current){_(void 0);return}var d=e?.snapshotListenOptions?onSnapshot(g.current,e.snapshotListenOptions,_,h):onSnapshot(g.current,_,h);return function(){d()}},[g.current]),[$,a,o]},useCollectionData=function(i,e){var s=useCollection(i,e),o=s[0],a=s[1],c=s[2],h=getValuesFromSnapshots(o,e?.snapshotOptions,e?.initialValue);return[h,a,c,o]},getValuesFromSnapshots=function(i,e,s){return reactExports.useMemo(function(){var o;return(o=i?.docs.map(function(a){return a.data(e)}))!==null&&o!==void 0?o:s},[i,e])};function toDate(i){const e=Object.prototype.toString.call(i);return i instanceof Date||typeof i=="object"&&e==="[object Date]"?new i.constructor(+i):typeof i=="number"||e==="[object Number]"||typeof i=="string"||e==="[object String]"?new Date(i):new Date(NaN)}function constructFrom(i,e){return i instanceof Date?new i.constructor(e):new Date(e)}const millisecondsInWeek=6048e5,millisecondsInDay=864e5;let defaultOptions={};function getDefaultOptions(){return defaultOptions}function startOfWeek(i,e){const s=getDefaultOptions(),o=e?.weekStartsOn??e?.locale?.options?.weekStartsOn??s.weekStartsOn??s.locale?.options?.weekStartsOn??0,a=toDate(i),c=a.getDay(),h=(c<o?7:0)+c-o;return a.setDate(a.getDate()-h),a.setHours(0,0,0,0),a}function startOfISOWeek(i){return startOfWeek(i,{weekStartsOn:1})}function getISOWeekYear(i){const e=toDate(i),s=e.getFullYear(),o=constructFrom(i,0);o.setFullYear(s+1,0,4),o.setHours(0,0,0,0);const a=startOfISOWeek(o),c=constructFrom(i,0);c.setFullYear(s,0,4),c.setHours(0,0,0,0);const h=startOfISOWeek(c);return e.getTime()>=a.getTime()?s+1:e.getTime()>=h.getTime()?s:s-1}function startOfDay(i){const e=toDate(i);return e.setHours(0,0,0,0),e}function getTimezoneOffsetInMilliseconds(i){const e=toDate(i),s=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return s.setUTCFullYear(e.getFullYear()),+i-+s}function differenceInCalendarDays(i,e){const s=startOfDay(i),o=startOfDay(e),a=+s-getTimezoneOffsetInMilliseconds(s),c=+o-getTimezoneOffsetInMilliseconds(o);return Math.round((a-c)/millisecondsInDay)}function startOfISOWeekYear(i){const e=getISOWeekYear(i),s=constructFrom(i,0);return s.setFullYear(e,0,4),s.setHours(0,0,0,0),startOfISOWeek(s)}function isDate(i){return i instanceof Date||typeof i=="object"&&Object.prototype.toString.call(i)==="[object Date]"}function isValid(i){if(!isDate(i)&&typeof i!="number")return!1;const e=toDate(i);return!isNaN(Number(e))}function startOfYear(i){const e=toDate(i),s=constructFrom(i,0);return s.setFullYear(e.getFullYear(),0,1),s.setHours(0,0,0,0),s}const formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=(i,e,s)=>{let o;const a=formatDistanceLocale[i];return typeof a=="string"?o=a:e===1?o=a.one:o=a.other.replace("{{count}}",e.toString()),s?.addSuffix?s.comparison&&s.comparison>0?"in "+o:o+" ago":o};function buildFormatLongFn(i){return(e={})=>{const s=e.width?String(e.width):i.defaultWidth;return i.formats[s]||i.formats[i.defaultWidth]}}const dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})},formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=(i,e,s,o)=>formatRelativeLocale[i];function buildLocalizeFn(i){return(e,s)=>{const o=s?.context?String(s.context):"standalone";let a;if(o==="formatting"&&i.formattingValues){const h=i.defaultFormattingWidth||i.defaultWidth,_=s?.width?String(s.width):h;a=i.formattingValues[_]||i.formattingValues[h]}else{const h=i.defaultWidth,_=s?.width?String(s.width):i.defaultWidth;a=i.values[_]||i.values[h]}const c=i.argumentCallback?i.argumentCallback(e):e;return a[c]}}const eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=(i,e)=>{const s=Number(i),o=s%100;if(o>20||o<10)switch(o%10){case 1:return s+"st";case 2:return s+"nd";case 3:return s+"rd"}return s+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:i=>i-1}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};function buildMatchFn(i){return(e,s={})=>{const o=s.width,a=o&&i.matchPatterns[o]||i.matchPatterns[i.defaultMatchWidth],c=e.match(a);if(!c)return null;const h=c[0],_=o&&i.parsePatterns[o]||i.parsePatterns[i.defaultParseWidth],$=Array.isArray(_)?findIndex(_,j=>j.test(h)):findKey(_,j=>j.test(h));let g;g=i.valueCallback?i.valueCallback($):$,g=s.valueCallback?s.valueCallback(g):g;const d=e.slice(h.length);return{value:g,rest:d}}}function findKey(i,e){for(const s in i)if(Object.prototype.hasOwnProperty.call(i,s)&&e(i[s]))return s}function findIndex(i,e){for(let s=0;s<i.length;s++)if(e(i[s]))return s}function buildMatchPatternFn(i){return(e,s={})=>{const o=e.match(i.matchPattern);if(!o)return null;const a=o[0],c=e.match(i.parsePattern);if(!c)return null;let h=i.valueCallback?i.valueCallback(c[0]):c[0];h=s.valueCallback?s.valueCallback(h):h;const _=e.slice(a.length);return{value:h,rest:_}}}const matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:i=>parseInt(i,10)}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:i=>i+1}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})},enUS={code:"en-US",formatDistance,formatLong,formatRelative,localize,match,options:{weekStartsOn:0,firstWeekContainsDate:1}};function getDayOfYear(i){const e=toDate(i);return differenceInCalendarDays(e,startOfYear(e))+1}function getISOWeek(i){const e=toDate(i),s=+startOfISOWeek(e)-+startOfISOWeekYear(e);return Math.round(s/millisecondsInWeek)+1}function getWeekYear(i,e){const s=toDate(i),o=s.getFullYear(),a=getDefaultOptions(),c=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,h=constructFrom(i,0);h.setFullYear(o+1,0,c),h.setHours(0,0,0,0);const _=startOfWeek(h,e),$=constructFrom(i,0);$.setFullYear(o,0,c),$.setHours(0,0,0,0);const g=startOfWeek($,e);return s.getTime()>=_.getTime()?o+1:s.getTime()>=g.getTime()?o:o-1}function startOfWeekYear(i,e){const s=getDefaultOptions(),o=e?.firstWeekContainsDate??e?.locale?.options?.firstWeekContainsDate??s.firstWeekContainsDate??s.locale?.options?.firstWeekContainsDate??1,a=getWeekYear(i,e),c=constructFrom(i,0);return c.setFullYear(a,0,o),c.setHours(0,0,0,0),startOfWeek(c,e)}function getWeek(i,e){const s=toDate(i),o=+startOfWeek(s,e)-+startOfWeekYear(s,e);return Math.round(o/millisecondsInWeek)+1}function addLeadingZeros(i,e){const s=i<0?"-":"",o=Math.abs(i).toString().padStart(e,"0");return s+o}const lightFormatters={y(i,e){const s=i.getFullYear(),o=s>0?s:1-s;return addLeadingZeros(e==="yy"?o%100:o,e.length)},M(i,e){const s=i.getMonth();return e==="M"?String(s+1):addLeadingZeros(s+1,2)},d(i,e){return addLeadingZeros(i.getDate(),e.length)},a(i,e){const s=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.toUpperCase();case"aaa":return s;case"aaaaa":return s[0];case"aaaa":default:return s==="am"?"a.m.":"p.m."}},h(i,e){return addLeadingZeros(i.getHours()%12||12,e.length)},H(i,e){return addLeadingZeros(i.getHours(),e.length)},m(i,e){return addLeadingZeros(i.getMinutes(),e.length)},s(i,e){return addLeadingZeros(i.getSeconds(),e.length)},S(i,e){const s=e.length,o=i.getMilliseconds(),a=Math.trunc(o*Math.pow(10,s-3));return addLeadingZeros(a,e.length)}},dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters={G:function(i,e,s){const o=i.getFullYear()>0?1:0;switch(e){case"G":case"GG":case"GGG":return s.era(o,{width:"abbreviated"});case"GGGGG":return s.era(o,{width:"narrow"});case"GGGG":default:return s.era(o,{width:"wide"})}},y:function(i,e,s){if(e==="yo"){const o=i.getFullYear(),a=o>0?o:1-o;return s.ordinalNumber(a,{unit:"year"})}return lightFormatters.y(i,e)},Y:function(i,e,s,o){const a=getWeekYear(i,o),c=a>0?a:1-a;if(e==="YY"){const h=c%100;return addLeadingZeros(h,2)}return e==="Yo"?s.ordinalNumber(c,{unit:"year"}):addLeadingZeros(c,e.length)},R:function(i,e){const s=getISOWeekYear(i);return addLeadingZeros(s,e.length)},u:function(i,e){const s=i.getFullYear();return addLeadingZeros(s,e.length)},Q:function(i,e,s){const o=Math.ceil((i.getMonth()+1)/3);switch(e){case"Q":return String(o);case"QQ":return addLeadingZeros(o,2);case"Qo":return s.ordinalNumber(o,{unit:"quarter"});case"QQQ":return s.quarter(o,{width:"abbreviated",context:"formatting"});case"QQQQQ":return s.quarter(o,{width:"narrow",context:"formatting"});case"QQQQ":default:return s.quarter(o,{width:"wide",context:"formatting"})}},q:function(i,e,s){const o=Math.ceil((i.getMonth()+1)/3);switch(e){case"q":return String(o);case"qq":return addLeadingZeros(o,2);case"qo":return s.ordinalNumber(o,{unit:"quarter"});case"qqq":return s.quarter(o,{width:"abbreviated",context:"standalone"});case"qqqqq":return s.quarter(o,{width:"narrow",context:"standalone"});case"qqqq":default:return s.quarter(o,{width:"wide",context:"standalone"})}},M:function(i,e,s){const o=i.getMonth();switch(e){case"M":case"MM":return lightFormatters.M(i,e);case"Mo":return s.ordinalNumber(o+1,{unit:"month"});case"MMM":return s.month(o,{width:"abbreviated",context:"formatting"});case"MMMMM":return s.month(o,{width:"narrow",context:"formatting"});case"MMMM":default:return s.month(o,{width:"wide",context:"formatting"})}},L:function(i,e,s){const o=i.getMonth();switch(e){case"L":return String(o+1);case"LL":return addLeadingZeros(o+1,2);case"Lo":return s.ordinalNumber(o+1,{unit:"month"});case"LLL":return s.month(o,{width:"abbreviated",context:"standalone"});case"LLLLL":return s.month(o,{width:"narrow",context:"standalone"});case"LLLL":default:return s.month(o,{width:"wide",context:"standalone"})}},w:function(i,e,s,o){const a=getWeek(i,o);return e==="wo"?s.ordinalNumber(a,{unit:"week"}):addLeadingZeros(a,e.length)},I:function(i,e,s){const o=getISOWeek(i);return e==="Io"?s.ordinalNumber(o,{unit:"week"}):addLeadingZeros(o,e.length)},d:function(i,e,s){return e==="do"?s.ordinalNumber(i.getDate(),{unit:"date"}):lightFormatters.d(i,e)},D:function(i,e,s){const o=getDayOfYear(i);return e==="Do"?s.ordinalNumber(o,{unit:"dayOfYear"}):addLeadingZeros(o,e.length)},E:function(i,e,s){const o=i.getDay();switch(e){case"E":case"EE":case"EEE":return s.day(o,{width:"abbreviated",context:"formatting"});case"EEEEE":return s.day(o,{width:"narrow",context:"formatting"});case"EEEEEE":return s.day(o,{width:"short",context:"formatting"});case"EEEE":default:return s.day(o,{width:"wide",context:"formatting"})}},e:function(i,e,s,o){const a=i.getDay(),c=(a-o.weekStartsOn+8)%7||7;switch(e){case"e":return String(c);case"ee":return addLeadingZeros(c,2);case"eo":return s.ordinalNumber(c,{unit:"day"});case"eee":return s.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return s.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return s.day(a,{width:"short",context:"formatting"});case"eeee":default:return s.day(a,{width:"wide",context:"formatting"})}},c:function(i,e,s,o){const a=i.getDay(),c=(a-o.weekStartsOn+8)%7||7;switch(e){case"c":return String(c);case"cc":return addLeadingZeros(c,e.length);case"co":return s.ordinalNumber(c,{unit:"day"});case"ccc":return s.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return s.day(a,{width:"narrow",context:"standalone"});case"cccccc":return s.day(a,{width:"short",context:"standalone"});case"cccc":default:return s.day(a,{width:"wide",context:"standalone"})}},i:function(i,e,s){const o=i.getDay(),a=o===0?7:o;switch(e){case"i":return String(a);case"ii":return addLeadingZeros(a,e.length);case"io":return s.ordinalNumber(a,{unit:"day"});case"iii":return s.day(o,{width:"abbreviated",context:"formatting"});case"iiiii":return s.day(o,{width:"narrow",context:"formatting"});case"iiiiii":return s.day(o,{width:"short",context:"formatting"});case"iiii":default:return s.day(o,{width:"wide",context:"formatting"})}},a:function(i,e,s){const a=i.getHours()/12>=1?"pm":"am";switch(e){case"a":case"aa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(i,e,s){const o=i.getHours();let a;switch(o===12?a=dayPeriodEnum.noon:o===0?a=dayPeriodEnum.midnight:a=o/12>=1?"pm":"am",e){case"b":case"bb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(i,e,s){const o=i.getHours();let a;switch(o>=17?a=dayPeriodEnum.evening:o>=12?a=dayPeriodEnum.afternoon:o>=4?a=dayPeriodEnum.morning:a=dayPeriodEnum.night,e){case"B":case"BB":case"BBB":return s.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return s.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return s.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(i,e,s){if(e==="ho"){let o=i.getHours()%12;return o===0&&(o=12),s.ordinalNumber(o,{unit:"hour"})}return lightFormatters.h(i,e)},H:function(i,e,s){return e==="Ho"?s.ordinalNumber(i.getHours(),{unit:"hour"}):lightFormatters.H(i,e)},K:function(i,e,s){const o=i.getHours()%12;return e==="Ko"?s.ordinalNumber(o,{unit:"hour"}):addLeadingZeros(o,e.length)},k:function(i,e,s){let o=i.getHours();return o===0&&(o=24),e==="ko"?s.ordinalNumber(o,{unit:"hour"}):addLeadingZeros(o,e.length)},m:function(i,e,s){return e==="mo"?s.ordinalNumber(i.getMinutes(),{unit:"minute"}):lightFormatters.m(i,e)},s:function(i,e,s){return e==="so"?s.ordinalNumber(i.getSeconds(),{unit:"second"}):lightFormatters.s(i,e)},S:function(i,e){return lightFormatters.S(i,e)},X:function(i,e,s){const o=i.getTimezoneOffset();if(o===0)return"Z";switch(e){case"X":return formatTimezoneWithOptionalMinutes(o);case"XXXX":case"XX":return formatTimezone(o);case"XXXXX":case"XXX":default:return formatTimezone(o,":")}},x:function(i,e,s){const o=i.getTimezoneOffset();switch(e){case"x":return formatTimezoneWithOptionalMinutes(o);case"xxxx":case"xx":return formatTimezone(o);case"xxxxx":case"xxx":default:return formatTimezone(o,":")}},O:function(i,e,s){const o=i.getTimezoneOffset();switch(e){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(o,":");case"OOOO":default:return"GMT"+formatTimezone(o,":")}},z:function(i,e,s){const o=i.getTimezoneOffset();switch(e){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(o,":");case"zzzz":default:return"GMT"+formatTimezone(o,":")}},t:function(i,e,s){const o=Math.trunc(i.getTime()/1e3);return addLeadingZeros(o,e.length)},T:function(i,e,s){const o=i.getTime();return addLeadingZeros(o,e.length)}};function formatTimezoneShort(i,e=""){const s=i>0?"-":"+",o=Math.abs(i),a=Math.trunc(o/60),c=o%60;return c===0?s+String(a):s+String(a)+e+addLeadingZeros(c,2)}function formatTimezoneWithOptionalMinutes(i,e){return i%60===0?(i>0?"-":"+")+addLeadingZeros(Math.abs(i)/60,2):formatTimezone(i,e)}function formatTimezone(i,e=""){const s=i>0?"-":"+",o=Math.abs(i),a=addLeadingZeros(Math.trunc(o/60),2),c=addLeadingZeros(o%60,2);return s+a+e+c}const dateLongFormatter=(i,e)=>{switch(i){case"P":return e.date({width:"short"});case"PP":return e.date({width:"medium"});case"PPP":return e.date({width:"long"});case"PPPP":default:return e.date({width:"full"})}},timeLongFormatter=(i,e)=>{switch(i){case"p":return e.time({width:"short"});case"pp":return e.time({width:"medium"});case"ppp":return e.time({width:"long"});case"pppp":default:return e.time({width:"full"})}},dateTimeLongFormatter=(i,e)=>{const s=i.match(/(P+)(p+)?/)||[],o=s[1],a=s[2];if(!a)return dateLongFormatter(i,e);let c;switch(o){case"P":c=e.dateTime({width:"short"});break;case"PP":c=e.dateTime({width:"medium"});break;case"PPP":c=e.dateTime({width:"long"});break;case"PPPP":default:c=e.dateTime({width:"full"});break}return c.replace("{{date}}",dateLongFormatter(o,e)).replace("{{time}}",timeLongFormatter(a,e))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter},dayOfYearTokenRE=/^D+$/,weekYearTokenRE=/^Y+$/,throwTokens=["D","DD","YY","YYYY"];function isProtectedDayOfYearToken(i){return dayOfYearTokenRE.test(i)}function isProtectedWeekYearToken(i){return weekYearTokenRE.test(i)}function warnOrThrowProtectedError(i,e,s){const o=message(i,e,s);if(console.warn(o),throwTokens.includes(i))throw new RangeError(o)}function message(i,e,s){const o=i[0]==="Y"?"years":"days of the month";return`Use \`${i.toLowerCase()}\` instead of \`${i}\` (in \`${e}\`) for formatting ${o} to the input \`${s}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(i,e,s){const o=getDefaultOptions(),a=s?.locale??o.locale??enUS,c=s?.firstWeekContainsDate??s?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=s?.weekStartsOn??s?.locale?.options?.weekStartsOn??o.weekStartsOn??o.locale?.options?.weekStartsOn??0,_=toDate(i);if(!isValid(_))throw new RangeError("Invalid time value");let $=e.match(longFormattingTokensRegExp).map(d=>{const j=d[0];if(j==="p"||j==="P"){const tt=longFormatters[j];return tt(d,a.formatLong)}return d}).join("").match(formattingTokensRegExp).map(d=>{if(d==="''")return{isToken:!1,value:"'"};const j=d[0];if(j==="'")return{isToken:!1,value:cleanEscapedString(d)};if(formatters[j])return{isToken:!0,value:d};if(j.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return{isToken:!1,value:d}});a.localize.preprocessor&&($=a.localize.preprocessor(_,$));const g={firstWeekContainsDate:c,weekStartsOn:h,locale:a};return $.map(d=>{if(!d.isToken)return d.value;const j=d.value;(!s?.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(j)||!s?.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(j))&&warnOrThrowProtectedError(j,e,String(i));const tt=formatters[j[0]];return tt(_,j,a.localize,g)}).join("")}function cleanEscapedString(i){const e=i.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):i}function commonjsRequire(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var pdf$1={exports:{}};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$5=getAugmentedNamespace(__viteBrowserExternal$1);(function(module,exports){(function(e,s){module.exports=e.pdfjsLib=s()})(globalThis,()=>(()=>{var __webpack_modules__=[,(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.VerbosityLevel=e.Util=e.UnknownErrorException=e.UnexpectedResponseException=e.TextRenderingMode=e.RenderingIntentFlag=e.PromiseCapability=e.PermissionFlag=e.PasswordResponses=e.PasswordException=e.PageActionEventType=e.OPS=e.MissingPDFException=e.MAX_IMAGE_SIZE_TO_CACHE=e.LINE_FACTOR=e.LINE_DESCENT_FACTOR=e.InvalidPDFException=e.ImageKind=e.IDENTITY_MATRIX=e.FormatError=e.FeatureTest=e.FONT_IDENTITY_MATRIX=e.DocumentActionEventType=e.CMapCompressionType=e.BaseException=e.BASELINE_FACTOR=e.AnnotationType=e.AnnotationReplyType=e.AnnotationPrefix=e.AnnotationMode=e.AnnotationFlag=e.AnnotationFieldFlag=e.AnnotationEditorType=e.AnnotationEditorPrefix=e.AnnotationEditorParamsType=e.AnnotationBorderStyleType=e.AnnotationActionEventType=e.AbortException=void 0,e.assert=ct,e.bytesToString=Ct,e.createValidAbsoluteUrl=gt,e.getModificationDate=xn,e.getUuid=Gn,e.getVerbosityLevel=tn,e.info=Ht,e.isArrayBuffer=Rn,e.isArrayEqual=Nn,e.isNodeJS=void 0,e.normalizeUnicode=Xn,e.objectFromMap=Nt,e.objectSize=en,e.setVerbosityLevel=Kt,e.shadow=Tt,e.string32=Ut,e.stringToBytes=$t,e.stringToPDFString=mn,e.stringToUTF8String=En,e.unreachable=ft,e.utf8StringToString=vn,e.warn=St;const s=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser");e.isNodeJS=s;const o=[1,0,0,1,0,0];e.IDENTITY_MATRIX=o;const a=[.001,0,0,.001,0,0];e.FONT_IDENTITY_MATRIX=a;const c=1e7;e.MAX_IMAGE_SIZE_TO_CACHE=c;const h=1.35;e.LINE_FACTOR=h;const _=.35;e.LINE_DESCENT_FACTOR=_;const $=_/h;e.BASELINE_FACTOR=$;const g={ANY:1,DISPLAY:2,PRINT:4,SAVE:8,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,OPLIST:256};e.RenderingIntentFlag=g;const d={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3};e.AnnotationMode=d;const j="pdfjs_internal_editor_";e.AnnotationEditorPrefix=j;const tt={DISABLE:-1,NONE:0,FREETEXT:3,STAMP:13,INK:15};e.AnnotationEditorType=tt;const rt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23};e.AnnotationEditorParamsType=rt;const et={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048};e.PermissionFlag=et;const it={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_ADD_TO_PATH:4,STROKE_ADD_TO_PATH:5,FILL_STROKE_ADD_TO_PATH:6,ADD_TO_PATH:7,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4};e.TextRenderingMode=it;const st={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3};e.ImageKind=st;const nt={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26};e.AnnotationType=nt;const ot={GROUP:"Group",REPLY:"R"};e.AnnotationReplyType=ot;const ht={INVISIBLE:1,HIDDEN:2,PRINT:4,NOZOOM:8,NOROTATE:16,NOVIEW:32,READONLY:64,LOCKED:128,TOGGLENOVIEW:256,LOCKEDCONTENTS:512};e.AnnotationFlag=ht;const pt={READONLY:1,REQUIRED:2,NOEXPORT:4,MULTILINE:4096,PASSWORD:8192,NOTOGGLETOOFF:16384,RADIO:32768,PUSHBUTTON:65536,COMBO:131072,EDIT:262144,SORT:524288,FILESELECT:1048576,MULTISELECT:2097152,DONOTSPELLCHECK:4194304,DONOTSCROLL:8388608,COMB:16777216,RICHTEXT:33554432,RADIOSINUNISON:33554432,COMMITONSELCHANGE:67108864};e.AnnotationFieldFlag=pt;const lt={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5};e.AnnotationBorderStyleType=lt;const ut={E:"Mouse Enter",X:"Mouse Exit",D:"Mouse Down",U:"Mouse Up",Fo:"Focus",Bl:"Blur",PO:"PageOpen",PC:"PageClose",PV:"PageVisible",PI:"PageInvisible",K:"Keystroke",F:"Format",V:"Validate",C:"Calculate"};e.AnnotationActionEventType=ut;const yt={WC:"WillClose",WS:"WillSave",DS:"DidSave",WP:"WillPrint",DP:"DidPrint"};e.DocumentActionEventType=yt;const Pt={O:"PageOpen",C:"PageClose"};e.PageActionEventType=Pt;const vt={ERRORS:0,WARNINGS:1,INFOS:5};e.VerbosityLevel=vt;const Vt={NONE:0,BINARY:1};e.CMapCompressionType=Vt;const Dt={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91};e.OPS=Dt;const Qt={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};e.PasswordResponses=Qt;let Wt=vt.WARNINGS;function Kt(Jt){Number.isInteger(Jt)&&(Wt=Jt)}function tn(){return Wt}function Ht(Jt){Wt>=vt.INFOS&&console.log(`Info: ${Jt}`)}function St(Jt){Wt>=vt.WARNINGS&&console.log(`Warning: ${Jt}`)}function ft(Jt){throw new Error(Jt)}function ct(Jt,Lt){Jt||ft(Lt)}function dt(Jt){switch(Jt?.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function gt(Jt,Lt=null,Ot=null){if(!Jt)return null;try{if(Ot&&typeof Jt=="string"&&(Ot.addDefaultProtocol&&Jt.startsWith("www.")&&Jt.match(/\./g)?.length>=2&&(Jt=`http://${Jt}`),Ot.tryConvertEncoding))try{Jt=En(Jt)}catch{}const ln=Lt?new URL(Jt,Lt):new URL(Jt);if(dt(ln))return ln}catch{}return null}function Tt(Jt,Lt,Ot,ln=!1){return Object.defineProperty(Jt,Lt,{value:Ot,enumerable:!ln,configurable:!0,writable:!1}),Ot}const wt=function(){function Lt(Ot,ln){this.constructor===Lt&&ft("Cannot initialize BaseException."),this.message=Ot,this.name=ln}return Lt.prototype=new Error,Lt.constructor=Lt,Lt}();e.BaseException=wt;class xt extends wt{constructor(Lt,Ot){super(Lt,"PasswordException"),this.code=Ot}}e.PasswordException=xt;class At extends wt{constructor(Lt,Ot){super(Lt,"UnknownErrorException"),this.details=Ot}}e.UnknownErrorException=At;class at extends wt{constructor(Lt){super(Lt,"InvalidPDFException")}}e.InvalidPDFException=at;class mt extends wt{constructor(Lt){super(Lt,"MissingPDFException")}}e.MissingPDFException=mt;class _t extends wt{constructor(Lt,Ot){super(Lt,"UnexpectedResponseException"),this.status=Ot}}e.UnexpectedResponseException=_t;class Rt extends wt{constructor(Lt){super(Lt,"FormatError")}}e.FormatError=Rt;class bt extends wt{constructor(Lt){super(Lt,"AbortException")}}e.AbortException=bt;function Ct(Jt){(typeof Jt!="object"||Jt?.length===void 0)&&ft("Invalid argument for bytesToString");const Lt=Jt.length,Ot=8192;if(Lt<Ot)return String.fromCharCode.apply(null,Jt);const ln=[];for(let In=0;In<Lt;In+=Ot){const On=Math.min(In+Ot,Lt),Ln=Jt.subarray(In,On);ln.push(String.fromCharCode.apply(null,Ln))}return ln.join("")}function $t(Jt){typeof Jt!="string"&&ft("Invalid argument for stringToBytes");const Lt=Jt.length,Ot=new Uint8Array(Lt);for(let ln=0;ln<Lt;++ln)Ot[ln]=Jt.charCodeAt(ln)&255;return Ot}function Ut(Jt){return String.fromCharCode(Jt>>24&255,Jt>>16&255,Jt>>8&255,Jt&255)}function en(Jt){return Object.keys(Jt).length}function Nt(Jt){const Lt=Object.create(null);for(const[Ot,ln]of Jt)Lt[Ot]=ln;return Lt}function Bt(){const Jt=new Uint8Array(4);return Jt[0]=1,new Uint32Array(Jt.buffer,0,1)[0]===1}function zt(){try{return new Function(""),!0}catch{return!1}}class Gt{static get isLittleEndian(){return Tt(this,"isLittleEndian",Bt())}static get isEvalSupported(){return Tt(this,"isEvalSupported",zt())}static get isOffscreenCanvasSupported(){return Tt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get platform(){return typeof navigator>"u"?Tt(this,"platform",{isWin:!1,isMac:!1}):Tt(this,"platform",{isWin:navigator.platform.includes("Win"),isMac:navigator.platform.includes("Mac")})}static get isCSSRoundSupported(){return Tt(this,"isCSSRoundSupported",globalThis.CSS?.supports?.("width: round(1.5px, 1px)"))}}e.FeatureTest=Gt;const Xt=[...Array(256).keys()].map(Jt=>Jt.toString(16).padStart(2,"0"));class sn{static makeHexColor(Lt,Ot,ln){return`#${Xt[Lt]}${Xt[Ot]}${Xt[ln]}`}static scaleMinMax(Lt,Ot){let ln;Lt[0]?(Lt[0]<0&&(ln=Ot[0],Ot[0]=Ot[1],Ot[1]=ln),Ot[0]*=Lt[0],Ot[1]*=Lt[0],Lt[3]<0&&(ln=Ot[2],Ot[2]=Ot[3],Ot[3]=ln),Ot[2]*=Lt[3],Ot[3]*=Lt[3]):(ln=Ot[0],Ot[0]=Ot[2],Ot[2]=ln,ln=Ot[1],Ot[1]=Ot[3],Ot[3]=ln,Lt[1]<0&&(ln=Ot[2],Ot[2]=Ot[3],Ot[3]=ln),Ot[2]*=Lt[1],Ot[3]*=Lt[1],Lt[2]<0&&(ln=Ot[0],Ot[0]=Ot[1],Ot[1]=ln),Ot[0]*=Lt[2],Ot[1]*=Lt[2]),Ot[0]+=Lt[4],Ot[1]+=Lt[4],Ot[2]+=Lt[5],Ot[3]+=Lt[5]}static transform(Lt,Ot){return[Lt[0]*Ot[0]+Lt[2]*Ot[1],Lt[1]*Ot[0]+Lt[3]*Ot[1],Lt[0]*Ot[2]+Lt[2]*Ot[3],Lt[1]*Ot[2]+Lt[3]*Ot[3],Lt[0]*Ot[4]+Lt[2]*Ot[5]+Lt[4],Lt[1]*Ot[4]+Lt[3]*Ot[5]+Lt[5]]}static applyTransform(Lt,Ot){const ln=Lt[0]*Ot[0]+Lt[1]*Ot[2]+Ot[4],In=Lt[0]*Ot[1]+Lt[1]*Ot[3]+Ot[5];return[ln,In]}static applyInverseTransform(Lt,Ot){const ln=Ot[0]*Ot[3]-Ot[1]*Ot[2],In=(Lt[0]*Ot[3]-Lt[1]*Ot[2]+Ot[2]*Ot[5]-Ot[4]*Ot[3])/ln,On=(-Lt[0]*Ot[1]+Lt[1]*Ot[0]+Ot[4]*Ot[1]-Ot[5]*Ot[0])/ln;return[In,On]}static getAxialAlignedBoundingBox(Lt,Ot){const ln=this.applyTransform(Lt,Ot),In=this.applyTransform(Lt.slice(2,4),Ot),On=this.applyTransform([Lt[0],Lt[3]],Ot),Ln=this.applyTransform([Lt[2],Lt[1]],Ot);return[Math.min(ln[0],In[0],On[0],Ln[0]),Math.min(ln[1],In[1],On[1],Ln[1]),Math.max(ln[0],In[0],On[0],Ln[0]),Math.max(ln[1],In[1],On[1],Ln[1])]}static inverseTransform(Lt){const Ot=Lt[0]*Lt[3]-Lt[1]*Lt[2];return[Lt[3]/Ot,-Lt[1]/Ot,-Lt[2]/Ot,Lt[0]/Ot,(Lt[2]*Lt[5]-Lt[4]*Lt[3])/Ot,(Lt[4]*Lt[1]-Lt[5]*Lt[0])/Ot]}static singularValueDecompose2dScale(Lt){const Ot=[Lt[0],Lt[2],Lt[1],Lt[3]],ln=Lt[0]*Ot[0]+Lt[1]*Ot[2],In=Lt[0]*Ot[1]+Lt[1]*Ot[3],On=Lt[2]*Ot[0]+Lt[3]*Ot[2],Ln=Lt[2]*Ot[1]+Lt[3]*Ot[3],Qn=(ln+Ln)/2,Jn=Math.sqrt((ln+Ln)**2-4*(ln*Ln-On*In))/2,Ft=Qn+Jn||1,jt=Qn-Jn||1;return[Math.sqrt(Ft),Math.sqrt(jt)]}static normalizeRect(Lt){const Ot=Lt.slice(0);return Lt[0]>Lt[2]&&(Ot[0]=Lt[2],Ot[2]=Lt[0]),Lt[1]>Lt[3]&&(Ot[1]=Lt[3],Ot[3]=Lt[1]),Ot}static intersect(Lt,Ot){const ln=Math.max(Math.min(Lt[0],Lt[2]),Math.min(Ot[0],Ot[2])),In=Math.min(Math.max(Lt[0],Lt[2]),Math.max(Ot[0],Ot[2]));if(ln>In)return null;const On=Math.max(Math.min(Lt[1],Lt[3]),Math.min(Ot[1],Ot[3])),Ln=Math.min(Math.max(Lt[1],Lt[3]),Math.max(Ot[1],Ot[3]));return On>Ln?null:[ln,On,In,Ln]}static bezierBoundingBox(Lt,Ot,ln,In,On,Ln,Qn,Jn){const Ft=[],jt=[[],[]];let Yt,rn,hn,fn,yn,gn,pn,Pn;for(let $n=0;$n<2;++$n){if($n===0?(rn=6*Lt-12*ln+6*On,Yt=-3*Lt+9*ln-9*On+3*Qn,hn=3*ln-3*Lt):(rn=6*Ot-12*In+6*Ln,Yt=-3*Ot+9*In-9*Ln+3*Jn,hn=3*In-3*Ot),Math.abs(Yt)<1e-12){if(Math.abs(rn)<1e-12)continue;fn=-hn/rn,0<fn&&fn<1&&Ft.push(fn);continue}pn=rn*rn-4*hn*Yt,Pn=Math.sqrt(pn),!(pn<0)&&(yn=(-rn+Pn)/(2*Yt),0<yn&&yn<1&&Ft.push(yn),gn=(-rn-Pn)/(2*Yt),0<gn&&gn<1&&Ft.push(gn))}let Vn=Ft.length,_n;const wn=Vn;for(;Vn--;)fn=Ft[Vn],_n=1-fn,jt[0][Vn]=_n*_n*_n*Lt+3*_n*_n*fn*ln+3*_n*fn*fn*On+fn*fn*fn*Qn,jt[1][Vn]=_n*_n*_n*Ot+3*_n*_n*fn*In+3*_n*fn*fn*Ln+fn*fn*fn*Jn;return jt[0][wn]=Lt,jt[1][wn]=Ot,jt[0][wn+1]=Qn,jt[1][wn+1]=Jn,jt[0].length=jt[1].length=wn+2,[Math.min(...jt[0]),Math.min(...jt[1]),Math.max(...jt[0]),Math.max(...jt[1])]}}e.Util=sn;const cn=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,728,711,710,729,733,731,730,732,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,8226,8224,8225,8230,8212,8211,402,8260,8249,8250,8722,8240,8222,8220,8221,8216,8217,8218,8482,64257,64258,321,338,352,376,381,305,322,339,353,382,0,8364];function mn(Jt){if(Jt[0]>=""){let Ot;if(Jt[0]===""&&Jt[1]===""?Ot="utf-16be":Jt[0]===""&&Jt[1]===""?Ot="utf-16le":Jt[0]===""&&Jt[1]===""&&Jt[2]===""&&(Ot="utf-8"),Ot)try{const ln=new TextDecoder(Ot,{fatal:!0}),In=$t(Jt);return ln.decode(In)}catch(ln){St(`stringToPDFString: "${ln}".`)}}const Lt=[];for(let Ot=0,ln=Jt.length;Ot<ln;Ot++){const In=cn[Jt.charCodeAt(Ot)];Lt.push(In?String.fromCharCode(In):Jt.charAt(Ot))}return Lt.join("")}function En(Jt){return decodeURIComponent(escape(Jt))}function vn(Jt){return unescape(encodeURIComponent(Jt))}function Rn(Jt){return typeof Jt=="object"&&Jt?.byteLength!==void 0}function Nn(Jt,Lt){if(Jt.length!==Lt.length)return!1;for(let Ot=0,ln=Jt.length;Ot<ln;Ot++)if(Jt[Ot]!==Lt[Ot])return!1;return!0}function xn(Jt=new Date){return[Jt.getUTCFullYear().toString(),(Jt.getUTCMonth()+1).toString().padStart(2,"0"),Jt.getUTCDate().toString().padStart(2,"0"),Jt.getUTCHours().toString().padStart(2,"0"),Jt.getUTCMinutes().toString().padStart(2,"0"),Jt.getUTCSeconds().toString().padStart(2,"0")].join("")}class Kn{#e=!1;constructor(){this.promise=new Promise((Lt,Ot)=>{this.resolve=ln=>{this.#e=!0,Lt(ln)},this.reject=ln=>{this.#e=!0,Ot(ln)}})}get settled(){return this.#e}}e.PromiseCapability=Kn;let kn=null,Bn=null;function Xn(Jt){return kn||(kn=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Bn=new Map([["","t"]])),Jt.replaceAll(kn,(Lt,Ot,ln)=>Ot?Ot.normalize("NFKC"):Bn.get(ln))}function Gn(){if(typeof crypto<"u"&&typeof crypto?.randomUUID=="function")return crypto.randomUUID();const Jt=new Uint8Array(32);if(typeof crypto<"u"&&typeof crypto?.getRandomValues=="function")crypto.getRandomValues(Jt);else for(let Lt=0;Lt<32;Lt++)Jt[Lt]=Math.floor(Math.random()*255);return Ct(Jt)}const er="pdfjs_internal_id_";e.AnnotationPrefix=er},(__unused_webpack_module,exports,__w_pdfjs_require__)=>{Object.defineProperty(exports,"__esModule",{value:!0}),exports.RenderTask=exports.PDFWorkerUtil=exports.PDFWorker=exports.PDFPageProxy=exports.PDFDocumentProxy=exports.PDFDocumentLoadingTask=exports.PDFDataRangeTransport=exports.LoopbackPort=exports.DefaultStandardFontDataFactory=exports.DefaultFilterFactory=exports.DefaultCanvasFactory=exports.DefaultCMapReaderFactory=void 0,Object.defineProperty(exports,"SVGGraphics",{enumerable:!0,get:function(){return _displaySvg.SVGGraphics}}),exports.build=void 0,exports.getDocument=getDocument,exports.version=void 0;var _util=__w_pdfjs_require__(1),_annotation_storage=__w_pdfjs_require__(3),_display_utils=__w_pdfjs_require__(6),_font_loader=__w_pdfjs_require__(9),_displayNode_utils=__w_pdfjs_require__(10),_canvas=__w_pdfjs_require__(11),_worker_options=__w_pdfjs_require__(14),_message_handler=__w_pdfjs_require__(15),_metadata=__w_pdfjs_require__(16),_optional_content_config=__w_pdfjs_require__(17),_transport_stream=__w_pdfjs_require__(18),_displayFetch_stream=__w_pdfjs_require__(19),_displayNetwork=__w_pdfjs_require__(22),_displayNode_stream=__w_pdfjs_require__(23),_displaySvg=__w_pdfjs_require__(24),_xfa_text=__w_pdfjs_require__(25);const DEFAULT_RANGE_CHUNK_SIZE=65536,RENDERING_CANCELLED_TIMEOUT=100,DELAYED_CLEANUP_TIMEOUT=5e3,DefaultCanvasFactory=_util.isNodeJS?_displayNode_utils.NodeCanvasFactory:_display_utils.DOMCanvasFactory;exports.DefaultCanvasFactory=DefaultCanvasFactory;const DefaultCMapReaderFactory=_util.isNodeJS?_displayNode_utils.NodeCMapReaderFactory:_display_utils.DOMCMapReaderFactory;exports.DefaultCMapReaderFactory=DefaultCMapReaderFactory;const DefaultFilterFactory=_util.isNodeJS?_displayNode_utils.NodeFilterFactory:_display_utils.DOMFilterFactory;exports.DefaultFilterFactory=DefaultFilterFactory;const DefaultStandardFontDataFactory=_util.isNodeJS?_displayNode_utils.NodeStandardFontDataFactory:_display_utils.DOMStandardFontDataFactory;exports.DefaultStandardFontDataFactory=DefaultStandardFontDataFactory;function getDocument(i){if(typeof i=="string"||i instanceof URL?i={url:i}:(0,_util.isArrayBuffer)(i)&&(i={data:i}),typeof i!="object")throw new Error("Invalid parameter in getDocument, need parameter object.");if(!i.url&&!i.data&&!i.range)throw new Error("Invalid parameter object: need either .data, .range or .url");const e=new PDFDocumentLoadingTask,{docId:s}=e,o=i.url?getUrlProp(i.url):null,a=i.data?getDataProp(i.data):null,c=i.httpHeaders||null,h=i.withCredentials===!0,_=i.password??null,$=i.range instanceof PDFDataRangeTransport?i.range:null,g=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:DEFAULT_RANGE_CHUNK_SIZE;let d=i.worker instanceof PDFWorker?i.worker:null;const j=i.verbosity,tt=typeof i.docBaseUrl=="string"&&!(0,_display_utils.isDataScheme)(i.docBaseUrl)?i.docBaseUrl:null,rt=typeof i.cMapUrl=="string"?i.cMapUrl:null,et=i.cMapPacked!==!1,it=i.CMapReaderFactory||DefaultCMapReaderFactory,st=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,nt=i.StandardFontDataFactory||DefaultStandardFontDataFactory,ot=i.stopAtErrors!==!0,ht=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,pt=i.isEvalSupported!==!1,lt=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!_util.isNodeJS,ut=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,yt=typeof i.disableFontFace=="boolean"?i.disableFontFace:_util.isNodeJS,Pt=i.fontExtraProperties===!0,vt=i.enableXfa===!0,Vt=i.ownerDocument||globalThis.document,Dt=i.disableRange===!0,Qt=i.disableStream===!0,Wt=i.disableAutoFetch===!0,Kt=i.pdfBug===!0,tn=$?$.length:i.length??NaN,Ht=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!_util.isNodeJS&&!yt,St=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:it===_display_utils.DOMCMapReaderFactory&&nt===_display_utils.DOMStandardFontDataFactory&&rt&&st&&(0,_display_utils.isValidFetchUrl)(rt,document.baseURI)&&(0,_display_utils.isValidFetchUrl)(st,document.baseURI),ft=i.canvasFactory||new DefaultCanvasFactory({ownerDocument:Vt}),ct=i.filterFactory||new DefaultFilterFactory({docId:s,ownerDocument:Vt}),dt=null;(0,_util.setVerbosityLevel)(j);const gt={canvasFactory:ft,filterFactory:ct};if(St||(gt.cMapReaderFactory=new it({baseUrl:rt,isCompressed:et}),gt.standardFontDataFactory=new nt({baseUrl:st})),!d){const xt={verbosity:j,port:_worker_options.GlobalWorkerOptions.workerPort};d=xt.port?PDFWorker.fromPort(xt):new PDFWorker(xt),e._worker=d}const Tt={docId:s,apiVersion:"3.11.174",data:a,password:_,disableAutoFetch:Wt,rangeChunkSize:g,length:tn,docBaseUrl:tt,enableXfa:vt,evaluatorOptions:{maxImageSize:ht,disableFontFace:yt,ignoreErrors:ot,isEvalSupported:pt,isOffscreenCanvasSupported:lt,canvasMaxAreaInBytes:ut,fontExtraProperties:Pt,useSystemFonts:Ht,cMapUrl:St?rt:null,standardFontDataUrl:St?st:null}},wt={ignoreErrors:ot,isEvalSupported:pt,disableFontFace:yt,fontExtraProperties:Pt,enableXfa:vt,ownerDocument:Vt,disableAutoFetch:Wt,pdfBug:Kt,styleElement:dt};return d.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");const xt=_fetchDocument(d,Tt),At=new Promise(function(at){let mt;$?mt=new _transport_stream.PDFDataTransportStream({length:tn,initialData:$.initialData,progressiveDone:$.progressiveDone,contentDispositionFilename:$.contentDispositionFilename,disableRange:Dt,disableStream:Qt},$):a||(mt=(Rt=>_util.isNodeJS?new _displayNode_stream.PDFNodeStream(Rt):(0,_display_utils.isValidFetchUrl)(Rt.url)?new _displayFetch_stream.PDFFetchStream(Rt):new _displayNetwork.PDFNetworkStream(Rt))({url:o,length:tn,httpHeaders:c,withCredentials:h,rangeChunkSize:g,disableRange:Dt,disableStream:Qt})),at(mt)});return Promise.all([xt,At]).then(function([at,mt]){if(e.destroyed)throw new Error("Loading aborted");const _t=new _message_handler.MessageHandler(s,at,d.port),Rt=new WorkerTransport(_t,e,mt,wt,gt);e._transport=Rt,_t.send("Ready",null)})}).catch(e._capability.reject),e}async function _fetchDocument(i,e){if(i.destroyed)throw new Error("Worker was destroyed");const s=await i.messageHandler.sendWithPromise("GetDocRequest",e,e.data?[e.data.buffer]:null);if(i.destroyed)throw new Error("Worker was destroyed");return s}function getUrlProp(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(_util.isNodeJS&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function getDataProp(i){if(_util.isNodeJS&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return(0,_util.stringToBytes)(i);if(typeof i=="object"&&!isNaN(i?.length)||(0,_util.isArrayBuffer)(i))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}class PDFDocumentLoadingTask{static#e=0;constructor(){this._capability=new _util.PromiseCapability,this._transport=null,this._worker=null,this.docId=`d${PDFDocumentLoadingTask.#e++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){this.destroyed=!0;try{this._worker?.port&&(this._worker._pendingDestroy=!0),await this._transport?.destroy()}catch(e){throw this._worker?.port&&delete this._worker._pendingDestroy,e}this._transport=null,this._worker&&(this._worker.destroy(),this._worker=null)}}exports.PDFDocumentLoadingTask=PDFDocumentLoadingTask;class PDFDataRangeTransport{constructor(e,s,o=!1,a=null){this.length=e,this.initialData=s,this.progressiveDone=o,this.contentDispositionFilename=a,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=new _util.PromiseCapability}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,s){for(const o of this._rangeListeners)o(e,s)}onDataProgress(e,s){this._readyCapability.promise.then(()=>{for(const o of this._progressListeners)o(e,s)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const s of this._progressiveReadListeners)s(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,s){(0,_util.unreachable)("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}exports.PDFDataRangeTransport=PDFDataRangeTransport;class PDFDocumentProxy{constructor(e,s){this._pdfInfo=e,this._transport=s,Object.defineProperty(this,"getJavaScript",{value:()=>((0,_display_utils.deprecated)("`PDFDocumentProxy.getJavaScript`, please use `PDFDocumentProxy.getJSActions` instead."),this.getJSActions().then(o=>{if(!o)return o;const a=[];for(const c in o)a.push(...o[c]);return a}))})}get annotationStorage(){return this._transport.annotationStorage}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){return this._transport.getOptionalContentConfig()}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}exports.PDFDocumentProxy=PDFDocumentProxy;class PDFPageProxy{#e=null;#t=!1;constructor(e,s,o,a=!1){this._pageIndex=e,this._pageInfo=s,this._transport=o,this._stats=a?new _display_utils.StatTimer:null,this._pdfBug=a,this.commonObjs=o.commonObjs,this.objs=new PDFObjects,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:s=this.rotate,offsetX:o=0,offsetY:a=0,dontFlip:c=!1}={}){return new _display_utils.PageViewport({viewBox:this.view,scale:e,rotation:s,offsetX:o,offsetY:a,dontFlip:c})}getAnnotations({intent:e="display"}={}){const s=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,s.renderingIntent)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return(0,_util.shadow)(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){return this._transport._htmlForXfa?.children[this._pageIndex]||null}render({canvasContext:e,viewport:s,intent:o="display",annotationMode:a=_util.AnnotationMode.ENABLE,transform:c=null,background:h=null,optionalContentConfigPromise:_=null,annotationCanvasMap:$=null,pageColors:g=null,printAnnotationStorage:d=null}){this._stats?.time("Overall");const j=this._transport.getRenderingIntent(o,a,d);this.#t=!1,this.#r(),_||(_=this._transport.getOptionalContentConfig());let tt=this._intentStates.get(j.cacheKey);tt||(tt=Object.create(null),this._intentStates.set(j.cacheKey,tt)),tt.streamReaderCancelTimeout&&(clearTimeout(tt.streamReaderCancelTimeout),tt.streamReaderCancelTimeout=null);const rt=!!(j.renderingIntent&_util.RenderingIntentFlag.PRINT);tt.displayReadyCapability||(tt.displayReadyCapability=new _util.PromiseCapability,tt.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(j));const et=nt=>{tt.renderTasks.delete(it),(this._maybeCleanupAfterRender||rt)&&(this.#t=!0),this.#n(!rt),nt?(it.capability.reject(nt),this._abortOperatorList({intentState:tt,reason:nt instanceof Error?nt:new Error(nt)})):it.capability.resolve(),this._stats?.timeEnd("Rendering"),this._stats?.timeEnd("Overall")},it=new InternalRenderTask({callback:et,params:{canvasContext:e,viewport:s,transform:c,background:h},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:$,operatorList:tt.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!rt,pdfBug:this._pdfBug,pageColors:g});(tt.renderTasks||=new Set).add(it);const st=it.task;return Promise.all([tt.displayReadyCapability.promise,_]).then(([nt,ot])=>{if(this.destroyed){et();return}this._stats?.time("Rendering"),it.initializeGraphics({transparency:nt,optionalContentConfig:ot}),it.operatorListChanged()}).catch(et),st}getOperatorList({intent:e="display",annotationMode:s=_util.AnnotationMode.ENABLE,printAnnotationStorage:o=null}={}){function a(){h.operatorList.lastChunk&&(h.opListReadCapability.resolve(h.operatorList),h.renderTasks.delete(_))}const c=this._transport.getRenderingIntent(e,s,o,!0);let h=this._intentStates.get(c.cacheKey);h||(h=Object.create(null),this._intentStates.set(c.cacheKey,h));let _;return h.opListReadCapability||(_=Object.create(null),_.operatorListChanged=a,h.opListReadCapability=new _util.PromiseCapability,(h.renderTasks||=new Set).add(_),h.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},this._stats?.time("Page Request"),this._pumpOperatorList(c)),h.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:s=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:s===!0},{highWaterMark:100,size(a){return a.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(o=>_xfa_text.XfaText.textContent(o));const s=this.streamTextContent(e);return new Promise(function(o,a){function c(){h.read().then(function({value:$,done:g}){if(g){o(_);return}Object.assign(_.styles,$.styles),_.items.push(...$.items),c()},a)}const h=s.getReader(),_={items:[],styles:Object.create(null)};c()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const s of this._intentStates.values())if(this._abortOperatorList({intentState:s,reason:new Error("Page was destroyed."),force:!0}),!s.opListReadCapability)for(const o of s.renderTasks)e.push(o.completed),o.cancel();return this.objs.clear(),this.#t=!1,this.#r(),Promise.all(e)}cleanup(e=!1){this.#t=!0;const s=this.#n(!1);return e&&s&&(this._stats&&=new _display_utils.StatTimer),s}#n(e=!1){if(this.#r(),!this.#t||this.destroyed)return!1;if(e)return this.#e=setTimeout(()=>{this.#e=null,this.#n(!1)},DELAYED_CLEANUP_TIMEOUT),!1;for(const{renderTasks:s,operatorList:o}of this._intentStates.values())if(s.size>0||!o.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),this.#t=!1,!0}#r(){this.#e&&(clearTimeout(this.#e),this.#e=null)}_startRenderPage(e,s){const o=this._intentStates.get(s);o&&(this._stats?.timeEnd("Page Request"),o.displayReadyCapability?.resolve(e))}_renderPageChunk(e,s){for(let o=0,a=e.length;o<a;o++)s.operatorList.fnArray.push(e.fnArray[o]),s.operatorList.argsArray.push(e.argsArray[o]);s.operatorList.lastChunk=e.lastChunk,s.operatorList.separateAnnots=e.separateAnnots;for(const o of s.renderTasks)o.operatorListChanged();e.lastChunk&&this.#n(!0)}_pumpOperatorList({renderingIntent:e,cacheKey:s,annotationStorageSerializable:o}){const{map:a,transfers:c}=o,_=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:s,annotationStorage:a},c).getReader(),$=this._intentStates.get(s);$.streamReader=_;const g=()=>{_.read().then(({value:d,done:j})=>{if(j){$.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(d,$),g())},d=>{if($.streamReader=null,!this._transport.destroyed){if($.operatorList){$.operatorList.lastChunk=!0;for(const j of $.renderTasks)j.operatorListChanged();this.#n(!0)}if($.displayReadyCapability)$.displayReadyCapability.reject(d);else if($.opListReadCapability)$.opListReadCapability.reject(d);else throw d}})};g()}_abortOperatorList({intentState:e,reason:s,force:o=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!o){if(e.renderTasks.size>0)return;if(s instanceof _display_utils.RenderingCancelledException){let a=RENDERING_CANCELLED_TIMEOUT;s.extraDelay>0&&s.extraDelay<1e3&&(a+=s.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:s,force:!0})},a);return}}if(e.streamReader.cancel(new _util.AbortException(s.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[a,c]of this._intentStates)if(c===e){this._intentStates.delete(a);break}this.cleanup()}}}get stats(){return this._stats}}exports.PDFPageProxy=PDFPageProxy;class LoopbackPort{#e=new Set;#t=Promise.resolve();postMessage(e,s){const o={data:structuredClone(e,s?{transfer:s}:null)};this.#t.then(()=>{for(const a of this.#e)a.call(this,o)})}addEventListener(e,s){this.#e.add(s)}removeEventListener(e,s){this.#e.delete(s)}terminate(){this.#e.clear()}}exports.LoopbackPort=LoopbackPort;const PDFWorkerUtil={isWorkerDisabled:!1,fallbackWorkerSrc:null,fakeWorkerId:0};exports.PDFWorkerUtil=PDFWorkerUtil;{if(_util.isNodeJS&&typeof commonjsRequire=="function")PDFWorkerUtil.isWorkerDisabled=!0,PDFWorkerUtil.fallbackWorkerSrc="./pdf.worker.js";else if(typeof document=="object"){const i=document?.currentScript?.src;i&&(PDFWorkerUtil.fallbackWorkerSrc=i.replace(/(\.(?:min\.)?js)(\?.*)?$/i,".worker$1$2"))}PDFWorkerUtil.isSameOrigin=function(i,e){let s;try{if(s=new URL(i),!s.origin||s.origin==="null")return!1}catch{return!1}const o=new URL(e,s);return s.origin===o.origin},PDFWorkerUtil.createCDNWrapper=function(i){const e=`importScripts("${i}");`;return URL.createObjectURL(new Blob([e]))}}class PDFWorker{static#workerPorts;constructor({name:i=null,port:e=null,verbosity:s=(0,_util.getVerbosityLevel)()}={}){if(this.name=i,this.destroyed=!1,this.verbosity=s,this._readyCapability=new _util.PromiseCapability,this._port=null,this._webWorker=null,this._messageHandler=null,e){if(PDFWorker.#workerPorts?.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(PDFWorker.#workerPorts||=new WeakMap).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(i){this._port=i,this._messageHandler=new _message_handler.MessageHandler("main","worker",i),this._messageHandler.on("ready",function(){}),this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})}_initialize(){if(!PDFWorkerUtil.isWorkerDisabled&&!PDFWorker._mainThreadWorkerMessageHandler){let{workerSrc:i}=PDFWorker;try{PDFWorkerUtil.isSameOrigin(window.location.href,i)||(i=PDFWorkerUtil.createCDNWrapper(new URL(i,window.location).href));const e=new Worker(i),s=new _message_handler.MessageHandler("main","worker",e),o=()=>{e.removeEventListener("error",a),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},a=()=>{this._webWorker||o()};e.addEventListener("error",a),s.on("test",h=>{if(e.removeEventListener("error",a),this.destroyed){o();return}h?(this._messageHandler=s,this._port=e,this._webWorker=e,this._readyCapability.resolve(),s.send("configure",{verbosity:this.verbosity})):(this._setupFakeWorker(),s.destroy(),e.terminate())}),s.on("ready",h=>{if(e.removeEventListener("error",a),this.destroyed){o();return}try{c()}catch{this._setupFakeWorker()}});const c=()=>{const h=new Uint8Array;s.send("test",h,[h.buffer])};c();return}catch{(0,_util.info)("The worker has been disabled.")}}this._setupFakeWorker()}_setupFakeWorker(){PDFWorkerUtil.isWorkerDisabled||((0,_util.warn)("Setting up fake worker."),PDFWorkerUtil.isWorkerDisabled=!0),PDFWorker._setupFakeWorkerGlobal.then(i=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new LoopbackPort;this._port=e;const s=`fake${PDFWorkerUtil.fakeWorkerId++}`,o=new _message_handler.MessageHandler(s+"_worker",s,e);i.setup(o,e);const a=new _message_handler.MessageHandler(s,s+"_worker",e);this._messageHandler=a,this._readyCapability.resolve(),a.send("configure",{verbosity:this.verbosity})}).catch(i=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${i.message}".`))})}destroy(){this.destroyed=!0,this._webWorker&&(this._webWorker.terminate(),this._webWorker=null),PDFWorker.#workerPorts?.delete(this._port),this._port=null,this._messageHandler&&(this._messageHandler.destroy(),this._messageHandler=null)}static fromPort(i){if(!i?.port)throw new Error("PDFWorker.fromPort - invalid method signature.");const e=this.#workerPorts?.get(i.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new PDFWorker(i)}static get workerSrc(){if(_worker_options.GlobalWorkerOptions.workerSrc)return _worker_options.GlobalWorkerOptions.workerSrc;if(PDFWorkerUtil.fallbackWorkerSrc!==null)return _util.isNodeJS||(0,_display_utils.deprecated)('No "GlobalWorkerOptions.workerSrc" specified.'),PDFWorkerUtil.fallbackWorkerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _mainThreadWorkerMessageHandler(){try{return globalThis.pdfjsWorker?.WorkerMessageHandler||null}catch{return null}}static get _setupFakeWorkerGlobal(){const loader=async()=>{const mainWorkerMessageHandler=this._mainThreadWorkerMessageHandler;if(mainWorkerMessageHandler)return mainWorkerMessageHandler;if(_util.isNodeJS&&typeof commonjsRequire=="function"){const worker=eval("require")(this.workerSrc);return worker.WorkerMessageHandler}return await(0,_display_utils.loadScript)(this.workerSrc),window.pdfjsWorker.WorkerMessageHandler};return(0,_util.shadow)(this,"_setupFakeWorkerGlobal",loader())}}exports.PDFWorker=PDFWorker;class WorkerTransport{#e=new Map;#t=new Map;#n=new Map;#r=null;constructor(e,s,o,a,c){this.messageHandler=e,this.loadingTask=s,this.commonObjs=new PDFObjects,this.fontLoader=new _font_loader.FontLoader({ownerDocument:a.ownerDocument,styleElement:a.styleElement}),this._params=a,this.canvasFactory=c.canvasFactory,this.filterFactory=c.filterFactory,this.cMapReaderFactory=c.cMapReaderFactory,this.standardFontDataFactory=c.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=o,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=new _util.PromiseCapability,this.setupMessageHandler()}#a(e,s=null){const o=this.#e.get(e);if(o)return o;const a=this.messageHandler.sendWithPromise(e,s);return this.#e.set(e,a),a}get annotationStorage(){return(0,_util.shadow)(this,"annotationStorage",new _annotation_storage.AnnotationStorage)}getRenderingIntent(e,s=_util.AnnotationMode.ENABLE,o=null,a=!1){let c=_util.RenderingIntentFlag.DISPLAY,h=_annotation_storage.SerializableEmpty;switch(e){case"any":c=_util.RenderingIntentFlag.ANY;break;case"display":break;case"print":c=_util.RenderingIntentFlag.PRINT;break;default:(0,_util.warn)(`getRenderingIntent - invalid intent: ${e}`)}switch(s){case _util.AnnotationMode.DISABLE:c+=_util.RenderingIntentFlag.ANNOTATIONS_DISABLE;break;case _util.AnnotationMode.ENABLE:break;case _util.AnnotationMode.ENABLE_FORMS:c+=_util.RenderingIntentFlag.ANNOTATIONS_FORMS;break;case _util.AnnotationMode.ENABLE_STORAGE:c+=_util.RenderingIntentFlag.ANNOTATIONS_STORAGE,h=(c&_util.RenderingIntentFlag.PRINT&&o instanceof _annotation_storage.PrintAnnotationStorage?o:this.annotationStorage).serializable;break;default:(0,_util.warn)(`getRenderingIntent - invalid annotationMode: ${s}`)}return a&&(c+=_util.RenderingIntentFlag.OPLIST),{renderingIntent:c,cacheKey:`${c}_${h.hash}`,annotationStorageSerializable:h}}destroy(){if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=new _util.PromiseCapability,this.#r?.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const o of this.#t.values())e.push(o._destroy());this.#t.clear(),this.#n.clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const s=this.messageHandler.sendWithPromise("Terminate",null);return e.push(s),Promise.all(e).then(()=>{this.commonObjs.clear(),this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(),this._networkStream?.cancelAllRequests(new _util.AbortException("Worker was terminated.")),this.messageHandler&&(this.messageHandler.destroy(),this.messageHandler=null),this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:s}=this;e.on("GetReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=c=>{this._lastProgress={loaded:c.loaded,total:c.total}},a.onPull=()=>{this._fullReader.read().then(function({value:c,done:h}){if(h){a.close();return}(0,_util.assert)(c instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(c),1,[c])}).catch(c=>{a.error(c)})},a.onCancel=c=>{this._fullReader.cancel(c),a.ready.catch(h=>{if(!this.destroyed)throw h})}}),e.on("ReaderHeadersReady",o=>{const a=new _util.PromiseCapability,c=this._fullReader;return c.headersReady.then(()=>{(!c.isStreamingSupported||!c.isRangeSupported)&&(this._lastProgress&&s.onProgress?.(this._lastProgress),c.onProgress=h=>{s.onProgress?.({loaded:h.loaded,total:h.total})}),a.resolve({isStreamingSupported:c.isStreamingSupported,isRangeSupported:c.isRangeSupported,contentLength:c.contentLength})},a.reject),a.promise}),e.on("GetRangeReader",(o,a)=>{(0,_util.assert)(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const c=this._networkStream.getRangeReader(o.begin,o.end);if(!c){a.close();return}a.onPull=()=>{c.read().then(function({value:h,done:_}){if(_){a.close();return}(0,_util.assert)(h instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),a.enqueue(new Uint8Array(h),1,[h])}).catch(h=>{a.error(h)})},a.onCancel=h=>{c.cancel(h),a.ready.catch(_=>{if(!this.destroyed)throw _})}}),e.on("GetDoc",({pdfInfo:o})=>{this._numPages=o.numPages,this._htmlForXfa=o.htmlForXfa,delete o.htmlForXfa,s._capability.resolve(new PDFDocumentProxy(o,this))}),e.on("DocException",function(o){let a;switch(o.name){case"PasswordException":a=new _util.PasswordException(o.message,o.code);break;case"InvalidPDFException":a=new _util.InvalidPDFException(o.message);break;case"MissingPDFException":a=new _util.MissingPDFException(o.message);break;case"UnexpectedResponseException":a=new _util.UnexpectedResponseException(o.message,o.status);break;case"UnknownErrorException":a=new _util.UnknownErrorException(o.message,o.details);break;default:(0,_util.unreachable)("DocException - expected a valid Error.")}s._capability.reject(a)}),e.on("PasswordRequest",o=>{if(this.#r=new _util.PromiseCapability,s.onPassword){const a=c=>{c instanceof Error?this.#r.reject(c):this.#r.resolve({password:c})};try{s.onPassword(a,o.code)}catch(c){this.#r.reject(c)}}else this.#r.reject(new _util.PasswordException(o.message,o.code));return this.#r.promise}),e.on("DataLoaded",o=>{s.onProgress?.({loaded:o.length,total:o.length}),this.downloadInfoCapability.resolve(o)}),e.on("StartRenderPage",o=>{if(this.destroyed)return;this.#t.get(o.pageIndex)._startRenderPage(o.transparency,o.cacheKey)}),e.on("commonobj",([o,a,c])=>{if(!this.destroyed&&!this.commonObjs.has(o))switch(a){case"Font":const h=this._params;if("error"in c){const g=c.error;(0,_util.warn)(`Error during font loading: ${g}`),this.commonObjs.resolve(o,g);break}const _=h.pdfBug&&globalThis.FontInspector?.enabled?(g,d)=>globalThis.FontInspector.fontAdded(g,d):null,$=new _font_loader.FontFaceObject(c,{isEvalSupported:h.isEvalSupported,disableFontFace:h.disableFontFace,ignoreErrors:h.ignoreErrors,inspectFont:_});this.fontLoader.bind($).catch(g=>e.sendWithPromise("FontFallback",{id:o})).finally(()=>{!h.fontExtraProperties&&$.data&&($.data=null),this.commonObjs.resolve(o,$)});break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(o,c);break;default:throw new Error(`Got unknown common object type ${a}`)}}),e.on("obj",([o,a,c,h])=>{if(this.destroyed)return;const _=this.#t.get(a);if(!_.objs.has(o))switch(c){case"Image":if(_.objs.resolve(o,h),h){let $;if(h.bitmap){const{width:g,height:d}=h;$=g*d*4}else $=h.data?.length||0;$>_util.MAX_IMAGE_SIZE_TO_CACHE&&(_._maybeCleanupAfterRender=!0)}break;case"Pattern":_.objs.resolve(o,h);break;default:throw new Error(`Got unknown object type ${c}`)}}),e.on("DocProgress",o=>{this.destroyed||s.onProgress?.({loaded:o.loaded,total:o.total})}),e.on("FetchBuiltInCMap",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.cMapReaderFactory?this.cMapReaderFactory.fetch(o):Promise.reject(new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter."))),e.on("FetchStandardFontData",o=>this.destroyed?Promise.reject(new Error("Worker was destroyed.")):this.standardFontDataFactory?this.standardFontDataFactory.fetch(o):Promise.reject(new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.")))}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){this.annotationStorage.size<=0&&(0,_util.warn)("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfers:s}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:this._fullReader?.filename??null},s).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const s=e-1,o=this.#n.get(s);if(o)return o;const a=this.messageHandler.sendWithPromise("GetPage",{pageIndex:s}).then(c=>{if(this.destroyed)throw new Error("Transport destroyed");const h=new PDFPageProxy(s,c,this,this._params.pdfBug);return this.#t.set(s,h),h});return this.#n.set(s,a),a}getPageIndex(e){return typeof e!="object"||e===null||!Number.isInteger(e.num)||e.num<0||!Number.isInteger(e.gen)||e.gen<0?Promise.reject(new Error("Invalid pageIndex request.")):this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen})}getAnnotations(e,s){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:s})}getFieldObjects(){return this.#a("GetFieldObjects")}hasJSActions(){return this.#a("HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return this.#a("GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(){return this.messageHandler.sendWithPromise("GetOptionalContentConfig",null).then(e=>new _optional_content_config.OptionalContentConfig(e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",s=this.#e.get(e);if(s)return s;const o=this.messageHandler.sendWithPromise(e,null).then(a=>({info:a[0],metadata:a[1]?new _metadata.Metadata(a[1]):null,contentDispositionFilename:this._fullReader?.filename??null,contentLength:this._fullReader?.contentLength??null}));return this.#e.set(e,o),o}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const s of this.#t.values())if(!s.cleanup())throw new Error(`startCleanup: Page ${s.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),this.#e.clear(),this.filterFactory.destroy(!0)}}get loadingParams(){const{disableAutoFetch:e,enableXfa:s}=this._params;return(0,_util.shadow)(this,"loadingParams",{disableAutoFetch:e,enableXfa:s})}}class PDFObjects{#e=Object.create(null);#t(e){return this.#e[e]||={capability:new _util.PromiseCapability,data:null}}get(e,s=null){if(s){const a=this.#t(e);return a.capability.promise.then(()=>s(a.data)),null}const o=this.#e[e];if(!o?.capability.settled)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return o.data}has(e){return this.#e[e]?.capability.settled||!1}resolve(e,s=null){const o=this.#t(e);o.data=s,o.capability.resolve()}clear(){for(const e in this.#e){const{data:s}=this.#e[e];s?.bitmap?.close()}this.#e=Object.create(null)}}class RenderTask{#e=null;constructor(e){this.#e=e,this.onContinue=null}get promise(){return this.#e.capability.promise}cancel(e=0){this.#e.cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=this.#e.operatorList;if(!e)return!1;const{annotationCanvasMap:s}=this.#e;return e.form||e.canvas&&s?.size>0}}exports.RenderTask=RenderTask;class InternalRenderTask{static#e=new WeakSet;constructor({callback:e,params:s,objs:o,commonObjs:a,annotationCanvasMap:c,operatorList:h,pageIndex:_,canvasFactory:$,filterFactory:g,useRequestAnimationFrame:d=!1,pdfBug:j=!1,pageColors:tt=null}){this.callback=e,this.params=s,this.objs=o,this.commonObjs=a,this.annotationCanvasMap=c,this.operatorListIdx=null,this.operatorList=h,this._pageIndex=_,this.canvasFactory=$,this.filterFactory=g,this._pdfBug=j,this.pageColors=tt,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=d===!0&&typeof window<"u",this.cancelled=!1,this.capability=new _util.PromiseCapability,this.task=new RenderTask(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=s.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:s}){if(this.cancelled)return;if(this._canvas){if(InternalRenderTask.#e.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");InternalRenderTask.#e.add(this._canvas)}this._pdfBug&&globalThis.StepperManager?.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:o,viewport:a,transform:c,background:h}=this.params;this.gfx=new _canvas.CanvasGraphics(o,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:s},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:c,viewport:a,transparency:e,background:h}),this.operatorListIdx=0,this.graphicsReady=!0,this.graphicsReadyCallback?.()}cancel(e=null,s=0){this.running=!1,this.cancelled=!0,this.gfx?.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback(e||new _display_utils.RenderingCancelledException(`Rendering cancelled, page ${this._pageIndex+1}`,s))}operatorListChanged(){if(!this.graphicsReady){this.graphicsReadyCallback||=this._continueBound;return}this.stepper?.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?window.requestAnimationFrame(()=>{this._nextBound().catch(this._cancelBound)}):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),InternalRenderTask.#e.delete(this._canvas),this.callback())))}}const version="3.11.174";exports.version=version;const build="ce8716743";exports.build=build},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SerializableEmpty=e.PrintAnnotationStorage=e.AnnotationStorage=void 0;var o=s(1),a=s(4),c=s(8);const h=Object.freeze({map:null,hash:"",transfers:void 0});e.SerializableEmpty=h;class _{#e=!1;#t=new Map;constructor(){this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(d,j){const tt=this.#t.get(d);return tt===void 0?j:Object.assign(j,tt)}getRawValue(d){return this.#t.get(d)}remove(d){if(this.#t.delete(d),this.#t.size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const j of this.#t.values())if(j instanceof a.AnnotationEditor)return;this.onAnnotationEditor(null)}}setValue(d,j){const tt=this.#t.get(d);let rt=!1;if(tt!==void 0)for(const[et,it]of Object.entries(j))tt[et]!==it&&(rt=!0,tt[et]=it);else rt=!0,this.#t.set(d,j);rt&&this.#n(),j instanceof a.AnnotationEditor&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(j.constructor._type)}has(d){return this.#t.has(d)}getAll(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}setAll(d){for(const[j,tt]of Object.entries(d))this.setValue(j,tt)}get size(){return this.#t.size}#n(){this.#e||(this.#e=!0,typeof this.onSetModified=="function"&&this.onSetModified())}resetModified(){this.#e&&(this.#e=!1,typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new $(this)}get serializable(){if(this.#t.size===0)return h;const d=new Map,j=new c.MurmurHash3_64,tt=[],rt=Object.create(null);let et=!1;for(const[it,st]of this.#t){const nt=st instanceof a.AnnotationEditor?st.serialize(!1,rt):st;nt&&(d.set(it,nt),j.update(`${it}:${JSON.stringify(nt)}`),et||=!!nt.bitmap)}if(et)for(const it of d.values())it.bitmap&&tt.push(it.bitmap);return d.size>0?{map:d,hash:j.hexdigest(),transfers:tt}:h}}e.AnnotationStorage=_;class $ extends _{#e;constructor(d){super();const{map:j,hash:tt,transfers:rt}=d.serializable,et=structuredClone(j,rt?{transfer:rt}:null);this.#e={map:et,hash:tt,transfers:rt}}get print(){(0,o.unreachable)("Should not call PrintAnnotationStorage.print")}get serializable(){return this.#e}}e.PrintAnnotationStorage=$},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditor=void 0;var o=s(5),a=s(1),c=s(6);class h{#e="";#t=!1;#n=null;#r=null;#a=null;#o=!1;#s=null;#l=this.focusin.bind(this);#u=this.focusout.bind(this);#i=!1;#f=!1;#h=!1;_initialOptions=Object.create(null);_uiManager=null;_focusEventsAllowed=!0;_l10nPromise=null;#d=!1;#p=h._zIndex++;static _borderLineWidth=-1;static _colorManager=new o.ColorManager;static _zIndex=1;static SMALL_EDITOR_SIZE=0;constructor(g){this.constructor===h&&(0,a.unreachable)("Cannot initialize AnnotationEditor."),this.parent=g.parent,this.id=g.id,this.width=this.height=null,this.pageIndex=g.parent.pageIndex,this.name=g.name,this.div=null,this._uiManager=g.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=g.isCentered,this._structTreeParentId=null;const{rotation:d,rawDims:{pageWidth:j,pageHeight:tt,pageX:rt,pageY:et}}=this.parent.viewport;this.rotation=d,this.pageRotation=(360+d-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[j,tt],this.pageTranslation=[rt,et];const[it,st]=this.parentDimensions;this.x=g.x/it,this.y=g.y/st,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get _defaultLineColor(){return(0,a.shadow)(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(g){const d=new _({id:g.parent.getNextId(),parent:g.parent,uiManager:g._uiManager});d.annotationElementId=g.annotationElementId,d.deleted=!0,d._uiManager.addToAnnotationStorage(d)}static initialize(g,d=null){if(h._l10nPromise||=new Map(["editor_alt_text_button_label","editor_alt_text_edit_button_label","editor_alt_text_decorative_tooltip"].map(tt=>[tt,g.get(tt)])),d?.strings)for(const tt of d.strings)h._l10nPromise.set(tt,g.get(tt));if(h._borderLineWidth!==-1)return;const j=getComputedStyle(document.documentElement);h._borderLineWidth=parseFloat(j.getPropertyValue("--outline-width"))||0}static updateDefaultParams(g,d){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(g){return!1}static paste(g,d){(0,a.unreachable)("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return this.#d}set _isDraggable(g){this.#d=g,this.div?.classList.toggle("draggable",g)}center(){const[g,d]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*d/(g*2),this.y+=this.width*g/(d*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*d/(g*2),this.y-=this.width*g/(d*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(g){this._uiManager.addCommands(g)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=this.#p}setParent(g){g!==null&&(this.pageIndex=g.pageIndex,this.pageDimensions=g.pageDimensions),this.parent=g}focusin(g){this._focusEventsAllowed&&(this.#i?this.#i=!1:this.parent.setSelected(this))}focusout(g){!this._focusEventsAllowed||!this.isAttachedToDOM||g.relatedTarget?.closest(`#${this.id}`)||(g.preventDefault(),this.parent?.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(g,d,j,tt){const[rt,et]=this.parentDimensions;[j,tt]=this.screenToPageTranslation(j,tt),this.x=(g+j)/rt,this.y=(d+tt)/et,this.fixAndSetPosition()}#_([g,d],j,tt){[j,tt]=this.screenToPageTranslation(j,tt),this.x+=j/g,this.y+=tt/d,this.fixAndSetPosition()}translate(g,d){this.#_(this.parentDimensions,g,d)}translateInPage(g,d){this.#_(this.pageDimensions,g,d),this.div.scrollIntoView({block:"nearest"})}drag(g,d){const[j,tt]=this.parentDimensions;if(this.x+=g/j,this.y+=d/tt,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:nt,y:ot}=this.div.getBoundingClientRect();this.parent.findNewParent(this,nt,ot)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:rt,y:et}=this;const[it,st]=this.#g();rt+=it,et+=st,this.div.style.left=`${(100*rt).toFixed(2)}%`,this.div.style.top=`${(100*et).toFixed(2)}%`,this.div.scrollIntoView({block:"nearest"})}#g(){const[g,d]=this.parentDimensions,{_borderLineWidth:j}=h,tt=j/g,rt=j/d;switch(this.rotation){case 90:return[-tt,rt];case 180:return[tt,rt];case 270:return[tt,-rt];default:return[-tt,-rt]}}fixAndSetPosition(){const[g,d]=this.pageDimensions;let{x:j,y:tt,width:rt,height:et}=this;switch(rt*=g,et*=d,j*=g,tt*=d,this.rotation){case 0:j=Math.max(0,Math.min(g-rt,j)),tt=Math.max(0,Math.min(d-et,tt));break;case 90:j=Math.max(0,Math.min(g-et,j)),tt=Math.min(d,Math.max(rt,tt));break;case 180:j=Math.min(g,Math.max(rt,j)),tt=Math.min(d,Math.max(et,tt));break;case 270:j=Math.min(g,Math.max(et,j)),tt=Math.max(0,Math.min(d-rt,tt));break}this.x=j/=g,this.y=tt/=d;const[it,st]=this.#g();j+=it,tt+=st;const{style:nt}=this.div;nt.left=`${(100*j).toFixed(2)}%`,nt.top=`${(100*tt).toFixed(2)}%`,this.moveInDOM()}static#m(g,d,j){switch(j){case 90:return[d,-g];case 180:return[-g,-d];case 270:return[-d,g];default:return[g,d]}}screenToPageTranslation(g,d){return h.#m(g,d,this.parentRotation)}pageTranslationToScreen(g,d){return h.#m(g,d,360-this.parentRotation)}#c(g){switch(g){case 90:{const[d,j]=this.pageDimensions;return[0,-d/j,j/d,0]}case 180:return[-1,0,0,-1];case 270:{const[d,j]=this.pageDimensions;return[0,d/j,-j/d,0]}default:return[1,0,0,1]}}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:g,pageDimensions:[d,j]}=this,tt=d*g,rt=j*g;return a.FeatureTest.isCSSRoundSupported?[Math.round(tt),Math.round(rt)]:[tt,rt]}setDims(g,d){const[j,tt]=this.parentDimensions;this.div.style.width=`${(100*g/j).toFixed(2)}%`,this.#o||(this.div.style.height=`${(100*d/tt).toFixed(2)}%`),this.#n?.classList.toggle("small",g<h.SMALL_EDITOR_SIZE||d<h.SMALL_EDITOR_SIZE)}fixDims(){const{style:g}=this.div,{height:d,width:j}=g,tt=j.endsWith("%"),rt=!this.#o&&d.endsWith("%");if(tt&&rt)return;const[et,it]=this.parentDimensions;tt||(g.width=`${(100*parseFloat(j)/et).toFixed(2)}%`),!this.#o&&!rt&&(g.height=`${(100*parseFloat(d)/it).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}#y(){if(this.#s)return;this.#s=document.createElement("div"),this.#s.classList.add("resizers");const g=["topLeft","topRight","bottomRight","bottomLeft"];this._willKeepAspectRatio||g.push("topMiddle","middleRight","bottomMiddle","middleLeft");for(const d of g){const j=document.createElement("div");this.#s.append(j),j.classList.add("resizer",d),j.addEventListener("pointerdown",this.#P.bind(this,d)),j.addEventListener("contextmenu",c.noContextMenu)}this.div.prepend(this.#s)}#P(g,d){d.preventDefault();const{isMac:j}=a.FeatureTest.platform;if(d.button!==0||d.ctrlKey&&j)return;const tt=this.#T.bind(this,g),rt=this._isDraggable;this._isDraggable=!1;const et={passive:!0,capture:!0};window.addEventListener("pointermove",tt,et);const it=this.x,st=this.y,nt=this.width,ot=this.height,ht=this.parent.div.style.cursor,pt=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(d.target).cursor;const lt=()=>{this._isDraggable=rt,window.removeEventListener("pointerup",lt),window.removeEventListener("blur",lt),window.removeEventListener("pointermove",tt,et),this.parent.div.style.cursor=ht,this.div.style.cursor=pt;const ut=this.x,yt=this.y,Pt=this.width,vt=this.height;ut===it&&yt===st&&Pt===nt&&vt===ot||this.addCommands({cmd:()=>{this.width=Pt,this.height=vt,this.x=ut,this.y=yt;const[Vt,Dt]=this.parentDimensions;this.setDims(Vt*Pt,Dt*vt),this.fixAndSetPosition()},undo:()=>{this.width=nt,this.height=ot,this.x=it,this.y=st;const[Vt,Dt]=this.parentDimensions;this.setDims(Vt*nt,Dt*ot),this.fixAndSetPosition()},mustExec:!0})};window.addEventListener("pointerup",lt),window.addEventListener("blur",lt)}#T(g,d){const[j,tt]=this.parentDimensions,rt=this.x,et=this.y,it=this.width,st=this.height,nt=h.MIN_SIZE/j,ot=h.MIN_SIZE/tt,ht=At=>Math.round(At*1e4)/1e4,pt=this.#c(this.rotation),lt=(At,at)=>[pt[0]*At+pt[2]*at,pt[1]*At+pt[3]*at],ut=this.#c(360-this.rotation),yt=(At,at)=>[ut[0]*At+ut[2]*at,ut[1]*At+ut[3]*at];let Pt,vt,Vt=!1,Dt=!1;switch(g){case"topLeft":Vt=!0,Pt=(At,at)=>[0,0],vt=(At,at)=>[At,at];break;case"topMiddle":Pt=(At,at)=>[At/2,0],vt=(At,at)=>[At/2,at];break;case"topRight":Vt=!0,Pt=(At,at)=>[At,0],vt=(At,at)=>[0,at];break;case"middleRight":Dt=!0,Pt=(At,at)=>[At,at/2],vt=(At,at)=>[0,at/2];break;case"bottomRight":Vt=!0,Pt=(At,at)=>[At,at],vt=(At,at)=>[0,0];break;case"bottomMiddle":Pt=(At,at)=>[At/2,at],vt=(At,at)=>[At/2,0];break;case"bottomLeft":Vt=!0,Pt=(At,at)=>[0,at],vt=(At,at)=>[At,0];break;case"middleLeft":Dt=!0,Pt=(At,at)=>[0,at/2],vt=(At,at)=>[At,at/2];break}const Qt=Pt(it,st),Wt=vt(it,st);let Kt=lt(...Wt);const tn=ht(rt+Kt[0]),Ht=ht(et+Kt[1]);let St=1,ft=1,[ct,dt]=this.screenToPageTranslation(d.movementX,d.movementY);if([ct,dt]=yt(ct/j,dt/tt),Vt){const At=Math.hypot(it,st);St=ft=Math.max(Math.min(Math.hypot(Wt[0]-Qt[0]-ct,Wt[1]-Qt[1]-dt)/At,1/it,1/st),nt/it,ot/st)}else Dt?St=Math.max(nt,Math.min(1,Math.abs(Wt[0]-Qt[0]-ct)))/it:ft=Math.max(ot,Math.min(1,Math.abs(Wt[1]-Qt[1]-dt)))/st;const gt=ht(it*St),Tt=ht(st*ft);Kt=lt(...vt(gt,Tt));const wt=tn-Kt[0],xt=Ht-Kt[1];this.width=gt,this.height=Tt,this.x=wt,this.y=xt,this.setDims(j*gt,tt*Tt),this.fixAndSetPosition()}async addAltTextButton(){if(this.#n)return;const g=this.#n=document.createElement("button");g.className="altText";const d=await h._l10nPromise.get("editor_alt_text_button_label");g.textContent=d,g.setAttribute("aria-label",d),g.tabIndex="0",g.addEventListener("contextmenu",c.noContextMenu),g.addEventListener("pointerdown",j=>j.stopPropagation()),g.addEventListener("click",j=>{j.preventDefault(),this._uiManager.editAltText(this)},{capture:!0}),g.addEventListener("keydown",j=>{j.target===g&&j.key==="Enter"&&(j.preventDefault(),this._uiManager.editAltText(this))}),this.#w(),this.div.append(g),h.SMALL_EDITOR_SIZE||(h.SMALL_EDITOR_SIZE=Math.min(128,Math.round(g.getBoundingClientRect().width*1.4)))}async#w(){const g=this.#n;if(!g)return;if(!this.#e&&!this.#t){g.classList.remove("done"),this.#r?.remove();return}h._l10nPromise.get("editor_alt_text_edit_button_label").then(j=>{g.setAttribute("aria-label",j)});let d=this.#r;if(!d){this.#r=d=document.createElement("span"),d.className="tooltip",d.setAttribute("role","tooltip");const j=d.id=`alt-text-tooltip-${this.id}`;g.setAttribute("aria-describedby",j);const tt=100;g.addEventListener("mouseenter",()=>{this.#a=setTimeout(()=>{this.#a=null,this.#r.classList.add("show"),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"alt_text_tooltip"}}})},tt)}),g.addEventListener("mouseleave",()=>{clearTimeout(this.#a),this.#a=null,this.#r?.classList.remove("show")})}g.classList.add("done"),d.innerText=this.#t?await h._l10nPromise.get("editor_alt_text_decorative_tooltip"):this.#e,d.parentNode||g.append(d)}getClientDimensions(){return this.div.getBoundingClientRect()}get altTextData(){return{altText:this.#e,decorative:this.#t}}set altTextData({altText:g,decorative:d}){this.#e===g&&this.#t===d||(this.#e=g,this.#t=d,this.#w())}render(){this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.setAttribute("tabIndex",0),this.setInForeground(),this.div.addEventListener("focusin",this.#l),this.div.addEventListener("focusout",this.#u);const[g,d]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*d/g).toFixed(2)}%`,this.div.style.maxHeight=`${(100*g/d).toFixed(2)}%`);const[j,tt]=this.getInitialTranslation();return this.translate(j,tt),(0,o.bindEvents)(this,this.div,["pointerdown"]),this.div}pointerdown(g){const{isMac:d}=a.FeatureTest.platform;if(g.button!==0||g.ctrlKey&&d){g.preventDefault();return}this.#i=!0,this.#I(g)}#I(g){if(!this._isDraggable)return;const d=this._uiManager.isSelected(this);this._uiManager.setUpDragSession();let j,tt;d&&(j={passive:!0,capture:!0},tt=et=>{const[it,st]=this.screenToPageTranslation(et.movementX,et.movementY);this._uiManager.dragSelectedEditors(it,st)},window.addEventListener("pointermove",tt,j));const rt=()=>{if(window.removeEventListener("pointerup",rt),window.removeEventListener("blur",rt),d&&window.removeEventListener("pointermove",tt,j),this.#i=!1,!this._uiManager.endDragSession()){const{isMac:et}=a.FeatureTest.platform;g.ctrlKey&&!et||g.shiftKey||g.metaKey&&et?this.parent.toggleSelected(this):this.parent.setSelected(this)}};window.addEventListener("pointerup",rt),window.addEventListener("blur",rt)}moveInDOM(){this.parent?.moveEditorInDOM(this)}_setParentAndPosition(g,d,j){g.changeParent(this),this.x=d,this.y=j,this.fixAndSetPosition()}getRect(g,d){const j=this.parentScale,[tt,rt]=this.pageDimensions,[et,it]=this.pageTranslation,st=g/j,nt=d/j,ot=this.x*tt,ht=this.y*rt,pt=this.width*tt,lt=this.height*rt;switch(this.rotation){case 0:return[ot+st+et,rt-ht-nt-lt+it,ot+st+pt+et,rt-ht-nt+it];case 90:return[ot+nt+et,rt-ht+st+it,ot+nt+lt+et,rt-ht+st+pt+it];case 180:return[ot-st-pt+et,rt-ht+nt+it,ot-st+et,rt-ht+nt+lt+it];case 270:return[ot-nt-lt+et,rt-ht-st-pt+it,ot-nt+et,rt-ht-st+it];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(g,d){const[j,tt,rt,et]=g,it=rt-j,st=et-tt;switch(this.rotation){case 0:return[j,d-et,it,st];case 90:return[j,d-tt,st,it];case 180:return[rt,d-tt,it,st];case 270:return[rt,d-et,st,it];default:throw new Error("Invalid rotation")}}onceAdded(){}isEmpty(){return!1}enableEditMode(){this.#h=!0}disableEditMode(){this.#h=!1}isInEditMode(){return this.#h}shouldGetKeyboardEvents(){return!1}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}rebuild(){this.div?.addEventListener("focusin",this.#l),this.div?.addEventListener("focusout",this.#u)}serialize(g=!1,d=null){(0,a.unreachable)("An editor must be serializable")}static deserialize(g,d,j){const tt=new this.prototype.constructor({parent:d,id:d.getNextId(),uiManager:j});tt.rotation=g.rotation;const[rt,et]=tt.pageDimensions,[it,st,nt,ot]=tt.getRectInCurrentCoords(g.rect,et);return tt.x=it/rt,tt.y=st/et,tt.width=nt/rt,tt.height=ot/et,tt}remove(){this.div.removeEventListener("focusin",this.#l),this.div.removeEventListener("focusout",this.#u),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),this.#n?.remove(),this.#n=null,this.#r=null}get isResizable(){return!1}makeResizable(){this.isResizable&&(this.#y(),this.#s.classList.remove("hidden"))}select(){this.makeResizable(),this.div?.classList.add("selectedEditor")}unselect(){this.#s?.classList.add("hidden"),this.div?.classList.remove("selectedEditor"),this.div?.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus()}updateParams(g,d){}disableEditing(){this.#n&&(this.#n.hidden=!0)}enableEditing(){this.#n&&(this.#n.hidden=!1)}enterInEditMode(){}get contentDiv(){return this.div}get isEditing(){return this.#f}set isEditing(g){this.#f=g,this.parent&&(g?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(g,d){this.#o=!0;const j=g/d,{style:tt}=this.div;tt.aspectRatio=j,tt.height="auto"}static get MIN_SIZE(){return 16}}e.AnnotationEditor=h;class _ extends h{constructor(g){super(g),this.annotationElementId=g.annotationElementId,this.deleted=!0}serialize(){return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex}}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.KeyboardManager=e.CommandManager=e.ColorManager=e.AnnotationEditorUIManager=void 0,e.bindEvents=c,e.opacityToHex=h;var o=s(1),a=s(6);function c(rt,et,it){for(const st of it)et.addEventListener(st,rt[st].bind(rt))}function h(rt){return Math.round(Math.min(255,Math.max(1,255*rt))).toString(16).padStart(2,"0")}class _{#e=0;getId(){return`${o.AnnotationEditorPrefix}${this.#e++}`}}class ${#e=(0,o.getUuid)();#t=0;#n=null;static get _isSVGFittingCanvas(){const et='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',st=new OffscreenCanvas(1,3).getContext("2d"),nt=new Image;nt.src=et;const ot=nt.decode().then(()=>(st.drawImage(nt,0,0,1,1,0,0,1,3),new Uint32Array(st.getImageData(0,0,1,1).data.buffer)[0]===0));return(0,o.shadow)(this,"_isSVGFittingCanvas",ot)}async#r(et,it){this.#n||=new Map;let st=this.#n.get(et);if(st===null)return null;if(st?.bitmap)return st.refCounter+=1,st;try{st||={bitmap:null,id:`image_${this.#e}_${this.#t++}`,refCounter:0,isSvg:!1};let nt;if(typeof it=="string"){st.url=it;const ot=await fetch(it);if(!ot.ok)throw new Error(ot.statusText);nt=await ot.blob()}else nt=st.file=it;if(nt.type==="image/svg+xml"){const ot=$._isSVGFittingCanvas,ht=new FileReader,pt=new Image,lt=new Promise((ut,yt)=>{pt.onload=()=>{st.bitmap=pt,st.isSvg=!0,ut()},ht.onload=async()=>{const Pt=st.svgUrl=ht.result;pt.src=await ot?`${Pt}#svgView(preserveAspectRatio(none))`:Pt},pt.onerror=ht.onerror=yt});ht.readAsDataURL(nt),await lt}else st.bitmap=await createImageBitmap(nt);st.refCounter=1}catch(nt){console.error(nt),st=null}return this.#n.set(et,st),st&&this.#n.set(st.id,st),st}async getFromFile(et){const{lastModified:it,name:st,size:nt,type:ot}=et;return this.#r(`${it}_${st}_${nt}_${ot}`,et)}async getFromUrl(et){return this.#r(et,et)}async getFromId(et){this.#n||=new Map;const it=this.#n.get(et);return it?it.bitmap?(it.refCounter+=1,it):it.file?this.getFromFile(it.file):this.getFromUrl(it.url):null}getSvgUrl(et){const it=this.#n.get(et);return it?.isSvg?it.svgUrl:null}deleteId(et){this.#n||=new Map;const it=this.#n.get(et);it&&(it.refCounter-=1,it.refCounter===0&&(it.bitmap=null))}isValidId(et){return et.startsWith(`image_${this.#e}_`)}}class g{#e=[];#t=!1;#n;#r=-1;constructor(et=128){this.#n=et}add({cmd:et,undo:it,mustExec:st,type:nt=NaN,overwriteIfSameType:ot=!1,keepUndo:ht=!1}){if(st&&et(),this.#t)return;const pt={cmd:et,undo:it,type:nt};if(this.#r===-1){this.#e.length>0&&(this.#e.length=0),this.#r=0,this.#e.push(pt);return}if(ot&&this.#e[this.#r].type===nt){ht&&(pt.undo=this.#e[this.#r].undo),this.#e[this.#r]=pt;return}const lt=this.#r+1;lt===this.#n?this.#e.splice(0,1):(this.#r=lt,lt<this.#e.length&&this.#e.splice(lt)),this.#e.push(pt)}undo(){this.#r!==-1&&(this.#t=!0,this.#e[this.#r].undo(),this.#t=!1,this.#r-=1)}redo(){this.#r<this.#e.length-1&&(this.#r+=1,this.#t=!0,this.#e[this.#r].cmd(),this.#t=!1)}hasSomethingToUndo(){return this.#r!==-1}hasSomethingToRedo(){return this.#r<this.#e.length-1}destroy(){this.#e=null}}e.CommandManager=g;class d{constructor(et){this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:it}=o.FeatureTest.platform;for(const[st,nt,ot={}]of et)for(const ht of st){const pt=ht.startsWith("mac+");it&&pt?(this.callbacks.set(ht.slice(4),{callback:nt,options:ot}),this.allKeys.add(ht.split("+").at(-1))):!it&&!pt&&(this.callbacks.set(ht,{callback:nt,options:ot}),this.allKeys.add(ht.split("+").at(-1)))}}#e(et){et.altKey&&this.buffer.push("alt"),et.ctrlKey&&this.buffer.push("ctrl"),et.metaKey&&this.buffer.push("meta"),et.shiftKey&&this.buffer.push("shift"),this.buffer.push(et.key);const it=this.buffer.join("+");return this.buffer.length=0,it}exec(et,it){if(!this.allKeys.has(it.key))return;const st=this.callbacks.get(this.#e(it));if(!st)return;const{callback:nt,options:{bubbles:ot=!1,args:ht=[],checker:pt=null}}=st;pt&&!pt(et,it)||(nt.bind(et,...ht)(),ot||(it.stopPropagation(),it.preventDefault()))}}e.KeyboardManager=d;class j{static _colorsMapping=new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]);get _colors(){const et=new Map([["CanvasText",null],["Canvas",null]]);return(0,a.getColorValues)(et),(0,o.shadow)(this,"_colors",et)}convert(et){const it=(0,a.getRGB)(et);if(!window.matchMedia("(forced-colors: active)").matches)return it;for(const[st,nt]of this._colors)if(nt.every((ot,ht)=>ot===it[ht]))return j._colorsMapping.get(st);return it}getHexCode(et){const it=this._colors.get(et);return it?o.Util.makeHexColor(...it):et}}e.ColorManager=j;class tt{#e=null;#t=new Map;#n=new Map;#r=null;#a=null;#o=new g;#s=0;#l=new Set;#u=null;#i=null;#f=new Set;#h=null;#d=new _;#p=!1;#_=!1;#g=null;#m=o.AnnotationEditorType.NONE;#c=new Set;#y=null;#P=this.blur.bind(this);#T=this.focus.bind(this);#w=this.copy.bind(this);#I=this.cut.bind(this);#M=this.paste.bind(this);#$=this.keydown.bind(this);#F=this.onEditingAction.bind(this);#E=this.onPageChanging.bind(this);#V=this.onScaleChanging.bind(this);#C=this.onRotationChanging.bind(this);#x={isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1};#v=[0,0];#b=null;#R=null;#O=null;static TRANSLATE_SMALL=1;static TRANSLATE_BIG=10;static get _keyboardManager(){const et=tt.prototype,it=ot=>{const{activeElement:ht}=document;return ht&&ot.#R.contains(ht)&&ot.hasSomethingToControl()},st=this.TRANSLATE_SMALL,nt=this.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new d([[["ctrl+a","mac+meta+a"],et.selectAll],[["ctrl+z","mac+meta+z"],et.undo],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],et.redo],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],et.delete],[["Escape","mac+Escape"],et.unselectAll],[["ArrowLeft","mac+ArrowLeft"],et.translateSelectedEditors,{args:[-st,0],checker:it}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],et.translateSelectedEditors,{args:[-nt,0],checker:it}],[["ArrowRight","mac+ArrowRight"],et.translateSelectedEditors,{args:[st,0],checker:it}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],et.translateSelectedEditors,{args:[nt,0],checker:it}],[["ArrowUp","mac+ArrowUp"],et.translateSelectedEditors,{args:[0,-st],checker:it}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],et.translateSelectedEditors,{args:[0,-nt],checker:it}],[["ArrowDown","mac+ArrowDown"],et.translateSelectedEditors,{args:[0,st],checker:it}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],et.translateSelectedEditors,{args:[0,nt],checker:it}]]))}constructor(et,it,st,nt,ot,ht){this.#R=et,this.#O=it,this.#r=st,this._eventBus=nt,this._eventBus._on("editingaction",this.#F),this._eventBus._on("pagechanging",this.#E),this._eventBus._on("scalechanging",this.#V),this._eventBus._on("rotationchanging",this.#C),this.#a=ot.annotationStorage,this.#h=ot.filterFactory,this.#y=ht,this.viewParameters={realScale:a.PixelsPerInch.PDF_TO_CSS_UNITS,rotation:0}}destroy(){this.#k(),this.#N(),this._eventBus._off("editingaction",this.#F),this._eventBus._off("pagechanging",this.#E),this._eventBus._off("scalechanging",this.#V),this._eventBus._off("rotationchanging",this.#C);for(const et of this.#n.values())et.destroy();this.#n.clear(),this.#t.clear(),this.#f.clear(),this.#e=null,this.#c.clear(),this.#o.destroy(),this.#r.destroy()}get hcmFilter(){return(0,o.shadow)(this,"hcmFilter",this.#y?this.#h.addHCMFilter(this.#y.foreground,this.#y.background):"none")}get direction(){return(0,o.shadow)(this,"direction",getComputedStyle(this.#R).direction)}editAltText(et){this.#r?.editAltText(this,et)}onPageChanging({pageNumber:et}){this.#s=et-1}focusMainContainer(){this.#R.focus()}findParent(et,it){for(const st of this.#n.values()){const{x:nt,y:ot,width:ht,height:pt}=st.div.getBoundingClientRect();if(et>=nt&&et<=nt+ht&&it>=ot&&it<=ot+pt)return st}return null}disableUserSelect(et=!1){this.#O.classList.toggle("noUserSelect",et)}addShouldRescale(et){this.#f.add(et)}removeShouldRescale(et){this.#f.delete(et)}onScaleChanging({scale:et}){this.commitOrRemove(),this.viewParameters.realScale=et*a.PixelsPerInch.PDF_TO_CSS_UNITS;for(const it of this.#f)it.onScaleChanging()}onRotationChanging({pagesRotation:et}){this.commitOrRemove(),this.viewParameters.rotation=et}addToAnnotationStorage(et){!et.isEmpty()&&this.#a&&!this.#a.has(et.id)&&this.#a.setValue(et.id,et)}#L(){window.addEventListener("focus",this.#T),window.addEventListener("blur",this.#P)}#N(){window.removeEventListener("focus",this.#T),window.removeEventListener("blur",this.#P)}blur(){if(!this.hasSelection)return;const{activeElement:et}=document;for(const it of this.#c)if(it.div.contains(et)){this.#g=[it,et],it._focusEventsAllowed=!1;break}}focus(){if(!this.#g)return;const[et,it]=this.#g;this.#g=null,it.addEventListener("focusin",()=>{et._focusEventsAllowed=!0},{once:!0}),it.focus()}#j(){window.addEventListener("keydown",this.#$,{capture:!0})}#k(){window.removeEventListener("keydown",this.#$,{capture:!0})}#D(){document.addEventListener("copy",this.#w),document.addEventListener("cut",this.#I),document.addEventListener("paste",this.#M)}#S(){document.removeEventListener("copy",this.#w),document.removeEventListener("cut",this.#I),document.removeEventListener("paste",this.#M)}addEditListeners(){this.#j(),this.#D()}removeEditListeners(){this.#k(),this.#S()}copy(et){if(et.preventDefault(),this.#e?.commitOrRemove(),!this.hasSelection)return;const it=[];for(const st of this.#c){const nt=st.serialize(!0);nt&&it.push(nt)}it.length!==0&&et.clipboardData.setData("application/pdfjs",JSON.stringify(it))}cut(et){this.copy(et),this.delete()}paste(et){et.preventDefault();const{clipboardData:it}=et;for(const ot of it.items)for(const ht of this.#i)if(ht.isHandlingMimeForPasting(ot.type)){ht.paste(ot,this.currentLayer);return}let st=it.getData("application/pdfjs");if(!st)return;try{st=JSON.parse(st)}catch(ot){(0,o.warn)(`paste: "${ot.message}".`);return}if(!Array.isArray(st))return;this.unselectAll();const nt=this.currentLayer;try{const ot=[];for(const lt of st){const ut=nt.deserialize(lt);if(!ut)return;ot.push(ut)}const ht=()=>{for(const lt of ot)this.#z(lt);this.#W(ot)},pt=()=>{for(const lt of ot)lt.remove()};this.addCommands({cmd:ht,undo:pt,mustExec:!0})}catch(ot){(0,o.warn)(`paste: "${ot.message}".`)}}keydown(et){this.getActive()?.shouldGetKeyboardEvents()||tt._keyboardManager.exec(this,et)}onEditingAction(et){["undo","redo","delete","selectAll"].includes(et.name)&&this[et.name]()}#A(et){Object.entries(et).some(([st,nt])=>this.#x[st]!==nt)&&this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(this.#x,et)})}#U(et){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:et})}setEditingState(et){et?(this.#L(),this.#j(),this.#D(),this.#A({isEditing:this.#m!==o.AnnotationEditorType.NONE,isEmpty:this.#B(),hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:this.#o.hasSomethingToRedo(),hasSelectedEditor:!1})):(this.#N(),this.#k(),this.#S(),this.#A({isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(et){if(!this.#i){this.#i=et;for(const it of this.#i)this.#U(it.defaultPropertiesToUpdate)}}getId(){return this.#d.getId()}get currentLayer(){return this.#n.get(this.#s)}getLayer(et){return this.#n.get(et)}get currentPageIndex(){return this.#s}addLayer(et){this.#n.set(et.pageIndex,et),this.#p?et.enable():et.disable()}removeLayer(et){this.#n.delete(et.pageIndex)}updateMode(et,it=null){if(this.#m!==et){if(this.#m=et,et===o.AnnotationEditorType.NONE){this.setEditingState(!1),this.#H();return}this.setEditingState(!0),this.#q(),this.unselectAll();for(const st of this.#n.values())st.updateMode(et);if(it){for(const st of this.#t.values())if(st.annotationElementId===it){this.setSelected(st),st.enterInEditMode();break}}}}updateToolbar(et){et!==this.#m&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:et})}updateParams(et,it){if(this.#i){if(et===o.AnnotationEditorParamsType.CREATE){this.currentLayer.addNewEditor(et);return}for(const st of this.#c)st.updateParams(et,it);for(const st of this.#i)st.updateDefaultParams(et,it)}}enableWaiting(et=!1){if(this.#_!==et){this.#_=et;for(const it of this.#n.values())et?it.disableClick():it.enableClick(),it.div.classList.toggle("waiting",et)}}#q(){if(!this.#p){this.#p=!0;for(const et of this.#n.values())et.enable()}}#H(){if(this.unselectAll(),this.#p){this.#p=!1;for(const et of this.#n.values())et.disable()}}getEditors(et){const it=[];for(const st of this.#t.values())st.pageIndex===et&&it.push(st);return it}getEditor(et){return this.#t.get(et)}addEditor(et){this.#t.set(et.id,et)}removeEditor(et){this.#t.delete(et.id),this.unselect(et),(!et.annotationElementId||!this.#l.has(et.annotationElementId))&&this.#a?.remove(et.id)}addDeletedAnnotationElement(et){this.#l.add(et.annotationElementId),et.deleted=!0}isDeletedAnnotationElement(et){return this.#l.has(et)}removeDeletedAnnotationElement(et){this.#l.delete(et.annotationElementId),et.deleted=!1}#z(et){const it=this.#n.get(et.pageIndex);it?it.addOrRebuild(et):this.addEditor(et)}setActiveEditor(et){this.#e!==et&&(this.#e=et,et&&this.#U(et.propertiesToUpdate))}toggleSelected(et){if(this.#c.has(et)){this.#c.delete(et),et.unselect(),this.#A({hasSelectedEditor:this.hasSelection});return}this.#c.add(et),et.select(),this.#U(et.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}setSelected(et){for(const it of this.#c)it!==et&&it.unselect();this.#c.clear(),this.#c.add(et),et.select(),this.#U(et.propertiesToUpdate),this.#A({hasSelectedEditor:!0})}isSelected(et){return this.#c.has(et)}unselect(et){et.unselect(),this.#c.delete(et),this.#A({hasSelectedEditor:this.hasSelection})}get hasSelection(){return this.#c.size!==0}undo(){this.#o.undo(),this.#A({hasSomethingToUndo:this.#o.hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:this.#B()})}redo(){this.#o.redo(),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:this.#o.hasSomethingToRedo(),isEmpty:this.#B()})}addCommands(et){this.#o.add(et),this.#A({hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:this.#B()})}#B(){if(this.#t.size===0)return!0;if(this.#t.size===1)for(const et of this.#t.values())return et.isEmpty();return!1}delete(){if(this.commitOrRemove(),!this.hasSelection)return;const et=[...this.#c],it=()=>{for(const nt of et)nt.remove()},st=()=>{for(const nt of et)this.#z(nt)};this.addCommands({cmd:it,undo:st,mustExec:!0})}commitOrRemove(){this.#e?.commitOrRemove()}hasSomethingToControl(){return this.#e||this.hasSelection}#W(et){this.#c.clear();for(const it of et)it.isEmpty()||(this.#c.add(it),it.select());this.#A({hasSelectedEditor:!0})}selectAll(){for(const et of this.#c)et.commit();this.#W(this.#t.values())}unselectAll(){if(this.#e){this.#e.commitOrRemove();return}if(this.hasSelection){for(const et of this.#c)et.unselect();this.#c.clear(),this.#A({hasSelectedEditor:!1})}}translateSelectedEditors(et,it,st=!1){if(st||this.commitOrRemove(),!this.hasSelection)return;this.#v[0]+=et,this.#v[1]+=it;const[nt,ot]=this.#v,ht=[...this.#c],pt=1e3;this.#b&&clearTimeout(this.#b),this.#b=setTimeout(()=>{this.#b=null,this.#v[0]=this.#v[1]=0,this.addCommands({cmd:()=>{for(const lt of ht)this.#t.has(lt.id)&&lt.translateInPage(nt,ot)},undo:()=>{for(const lt of ht)this.#t.has(lt.id)&&lt.translateInPage(-nt,-ot)},mustExec:!1})},pt);for(const lt of ht)lt.translateInPage(et,it)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),this.#u=new Map;for(const et of this.#c)this.#u.set(et,{savedX:et.x,savedY:et.y,savedPageIndex:et.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!this.#u)return!1;this.disableUserSelect(!1);const et=this.#u;this.#u=null;let it=!1;for(const[{x:nt,y:ot,pageIndex:ht},pt]of et)pt.newX=nt,pt.newY=ot,pt.newPageIndex=ht,it||=nt!==pt.savedX||ot!==pt.savedY||ht!==pt.savedPageIndex;if(!it)return!1;const st=(nt,ot,ht,pt)=>{if(this.#t.has(nt.id)){const lt=this.#n.get(pt);lt?nt._setParentAndPosition(lt,ot,ht):(nt.pageIndex=pt,nt.x=ot,nt.y=ht)}};return this.addCommands({cmd:()=>{for(const[nt,{newX:ot,newY:ht,newPageIndex:pt}]of et)st(nt,ot,ht,pt)},undo:()=>{for(const[nt,{savedX:ot,savedY:ht,savedPageIndex:pt}]of et)st(nt,ot,ht,pt)},mustExec:!0}),!0}dragSelectedEditors(et,it){if(this.#u)for(const st of this.#u.keys())st.drag(et,it)}rebuild(et){if(et.parent===null){const it=this.getLayer(et.pageIndex);it?(it.changeParent(et),it.addOrRebuild(et)):(this.addEditor(et),this.addToAnnotationStorage(et),et.rebuild())}else et.parent.addOrRebuild(et)}isActive(et){return this.#e===et}getActive(){return this.#e}getMode(){return this.#m}get imageManager(){return(0,o.shadow)(this,"imageManager",new $)}}e.AnnotationEditorUIManager=tt},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StatTimer=e.RenderingCancelledException=e.PixelsPerInch=e.PageViewport=e.PDFDateString=e.DOMStandardFontDataFactory=e.DOMSVGFactory=e.DOMFilterFactory=e.DOMCanvasFactory=e.DOMCMapReaderFactory=void 0,e.deprecated=yt,e.getColorValues=Qt,e.getCurrentTransform=Wt,e.getCurrentTransformInverse=Kt,e.getFilenameFromUrl=nt,e.getPdfFilenameFromUrl=ot,e.getRGB=Dt,e.getXfaPageViewport=Vt,e.isDataScheme=it,e.isPdfFile=st,e.isValidFetchUrl=pt,e.loadScript=ut,e.noContextMenu=lt,e.setLayerDimensions=tn;var o=s(7),a=s(1);const c="http://www.w3.org/2000/svg";class h{static CSS=96;static PDF=72;static PDF_TO_CSS_UNITS=this.CSS/this.PDF}e.PixelsPerInch=h;class _ extends o.BaseFilterFactory{#e;#t;#n;#r;#a;#o;#s;#l;#u;#i;#f=0;constructor({docId:St,ownerDocument:ft=globalThis.document}={}){super(),this.#n=St,this.#r=ft}get#h(){return this.#e||=new Map}get#d(){if(!this.#t){const St=this.#r.createElement("div"),{style:ft}=St;ft.visibility="hidden",ft.contain="strict",ft.width=ft.height=0,ft.position="absolute",ft.top=ft.left=0,ft.zIndex=-1;const ct=this.#r.createElementNS(c,"svg");ct.setAttribute("width",0),ct.setAttribute("height",0),this.#t=this.#r.createElementNS(c,"defs"),St.append(ct),ct.append(this.#t),this.#r.body.append(St)}return this.#t}addFilter(St){if(!St)return"none";let ft=this.#h.get(St);if(ft)return ft;let ct,dt,gt,Tt;if(St.length===1){const at=St[0],mt=new Array(256);for(let _t=0;_t<256;_t++)mt[_t]=at[_t]/255;Tt=ct=dt=gt=mt.join(",")}else{const[at,mt,_t]=St,Rt=new Array(256),bt=new Array(256),Ct=new Array(256);for(let $t=0;$t<256;$t++)Rt[$t]=at[$t]/255,bt[$t]=mt[$t]/255,Ct[$t]=_t[$t]/255;ct=Rt.join(","),dt=bt.join(","),gt=Ct.join(","),Tt=`${ct}${dt}${gt}`}if(ft=this.#h.get(Tt),ft)return this.#h.set(St,ft),ft;const wt=`g_${this.#n}_transfer_map_${this.#f++}`,xt=`url(#${wt})`;this.#h.set(St,xt),this.#h.set(Tt,xt);const At=this.#_(wt);return this.#m(ct,dt,gt,At),xt}addHCMFilter(St,ft){const ct=`${St}-${ft}`;if(this.#o===ct)return this.#s;if(this.#o=ct,this.#s="none",this.#a?.remove(),!St||!ft)return this.#s;const dt=this.#c(St);St=a.Util.makeHexColor(...dt);const gt=this.#c(ft);if(ft=a.Util.makeHexColor(...gt),this.#d.style.color="",St==="#000000"&&ft==="#ffffff"||St===ft)return this.#s;const Tt=new Array(256);for(let mt=0;mt<=255;mt++){const _t=mt/255;Tt[mt]=_t<=.03928?_t/12.92:((_t+.055)/1.055)**2.4}const wt=Tt.join(","),xt=`g_${this.#n}_hcm_filter`,At=this.#l=this.#_(xt);this.#m(wt,wt,wt,At),this.#p(At);const at=(mt,_t)=>{const Rt=dt[mt]/255,bt=gt[mt]/255,Ct=new Array(_t+1);for(let $t=0;$t<=_t;$t++)Ct[$t]=Rt+$t/_t*(bt-Rt);return Ct.join(",")};return this.#m(at(0,5),at(1,5),at(2,5),At),this.#s=`url(#${xt})`,this.#s}addHighlightHCMFilter(St,ft,ct,dt){const gt=`${St}-${ft}-${ct}-${dt}`;if(this.#u===gt)return this.#i;if(this.#u=gt,this.#i="none",this.#l?.remove(),!St||!ft)return this.#i;const[Tt,wt]=[St,ft].map(this.#c.bind(this));let xt=Math.round(.2126*Tt[0]+.7152*Tt[1]+.0722*Tt[2]),At=Math.round(.2126*wt[0]+.7152*wt[1]+.0722*wt[2]),[at,mt]=[ct,dt].map(this.#c.bind(this));At<xt&&([xt,At,at,mt]=[At,xt,mt,at]),this.#d.style.color="";const _t=(Ct,$t,Ut)=>{const en=new Array(256),Nt=(At-xt)/Ut,Bt=Ct/255,zt=($t-Ct)/(255*Ut);let Gt=0;for(let Xt=0;Xt<=Ut;Xt++){const sn=Math.round(xt+Xt*Nt),cn=Bt+Xt*zt;for(let mn=Gt;mn<=sn;mn++)en[mn]=cn;Gt=sn+1}for(let Xt=Gt;Xt<256;Xt++)en[Xt]=en[Gt-1];return en.join(",")},Rt=`g_${this.#n}_hcm_highlight_filter`,bt=this.#l=this.#_(Rt);return this.#p(bt),this.#m(_t(at[0],mt[0],5),_t(at[1],mt[1],5),_t(at[2],mt[2],5),bt),this.#i=`url(#${Rt})`,this.#i}destroy(St=!1){St&&(this.#s||this.#i)||(this.#t&&(this.#t.parentNode.parentNode.remove(),this.#t=null),this.#e&&(this.#e.clear(),this.#e=null),this.#f=0)}#p(St){const ft=this.#r.createElementNS(c,"feColorMatrix");ft.setAttribute("type","matrix"),ft.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),St.append(ft)}#_(St){const ft=this.#r.createElementNS(c,"filter");return ft.setAttribute("color-interpolation-filters","sRGB"),ft.setAttribute("id",St),this.#d.append(ft),ft}#g(St,ft,ct){const dt=this.#r.createElementNS(c,ft);dt.setAttribute("type","discrete"),dt.setAttribute("tableValues",ct),St.append(dt)}#m(St,ft,ct,dt){const gt=this.#r.createElementNS(c,"feComponentTransfer");dt.append(gt),this.#g(gt,"feFuncR",St),this.#g(gt,"feFuncG",ft),this.#g(gt,"feFuncB",ct)}#c(St){return this.#d.style.color=St,Dt(getComputedStyle(this.#d).getPropertyValue("color"))}}e.DOMFilterFactory=_;class $ extends o.BaseCanvasFactory{constructor({ownerDocument:St=globalThis.document}={}){super(),this._document=St}_createCanvas(St,ft){const ct=this._document.createElement("canvas");return ct.width=St,ct.height=ft,ct}}e.DOMCanvasFactory=$;async function g(Ht,St=!1){if(pt(Ht,document.baseURI)){const ft=await fetch(Ht);if(!ft.ok)throw new Error(ft.statusText);return St?new Uint8Array(await ft.arrayBuffer()):(0,a.stringToBytes)(await ft.text())}return new Promise((ft,ct)=>{const dt=new XMLHttpRequest;dt.open("GET",Ht,!0),St&&(dt.responseType="arraybuffer"),dt.onreadystatechange=()=>{if(dt.readyState===XMLHttpRequest.DONE){if(dt.status===200||dt.status===0){let gt;if(St&&dt.response?gt=new Uint8Array(dt.response):!St&&dt.responseText&&(gt=(0,a.stringToBytes)(dt.responseText)),gt){ft(gt);return}}ct(new Error(dt.statusText))}},dt.send(null)})}class d extends o.BaseCMapReaderFactory{_fetchData(St,ft){return g(St,this.isCompressed).then(ct=>({cMapData:ct,compressionType:ft}))}}e.DOMCMapReaderFactory=d;class j extends o.BaseStandardFontDataFactory{_fetchData(St){return g(St,!0)}}e.DOMStandardFontDataFactory=j;class tt extends o.BaseSVGFactory{_createSVG(St){return document.createElementNS(c,St)}}e.DOMSVGFactory=tt;class rt{constructor({viewBox:St,scale:ft,rotation:ct,offsetX:dt=0,offsetY:gt=0,dontFlip:Tt=!1}){this.viewBox=St,this.scale=ft,this.rotation=ct,this.offsetX=dt,this.offsetY=gt;const wt=(St[2]+St[0])/2,xt=(St[3]+St[1])/2;let At,at,mt,_t;switch(ct%=360,ct<0&&(ct+=360),ct){case 180:At=-1,at=0,mt=0,_t=1;break;case 90:At=0,at=1,mt=1,_t=0;break;case 270:At=0,at=-1,mt=-1,_t=0;break;case 0:At=1,at=0,mt=0,_t=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}Tt&&(mt=-mt,_t=-_t);let Rt,bt,Ct,$t;At===0?(Rt=Math.abs(xt-St[1])*ft+dt,bt=Math.abs(wt-St[0])*ft+gt,Ct=(St[3]-St[1])*ft,$t=(St[2]-St[0])*ft):(Rt=Math.abs(wt-St[0])*ft+dt,bt=Math.abs(xt-St[1])*ft+gt,Ct=(St[2]-St[0])*ft,$t=(St[3]-St[1])*ft),this.transform=[At*ft,at*ft,mt*ft,_t*ft,Rt-At*ft*wt-mt*ft*xt,bt-at*ft*wt-_t*ft*xt],this.width=Ct,this.height=$t}get rawDims(){const{viewBox:St}=this;return(0,a.shadow)(this,"rawDims",{pageWidth:St[2]-St[0],pageHeight:St[3]-St[1],pageX:St[0],pageY:St[1]})}clone({scale:St=this.scale,rotation:ft=this.rotation,offsetX:ct=this.offsetX,offsetY:dt=this.offsetY,dontFlip:gt=!1}={}){return new rt({viewBox:this.viewBox.slice(),scale:St,rotation:ft,offsetX:ct,offsetY:dt,dontFlip:gt})}convertToViewportPoint(St,ft){return a.Util.applyTransform([St,ft],this.transform)}convertToViewportRectangle(St){const ft=a.Util.applyTransform([St[0],St[1]],this.transform),ct=a.Util.applyTransform([St[2],St[3]],this.transform);return[ft[0],ft[1],ct[0],ct[1]]}convertToPdfPoint(St,ft){return a.Util.applyInverseTransform([St,ft],this.transform)}}e.PageViewport=rt;class et extends a.BaseException{constructor(St,ft=0){super(St,"RenderingCancelledException"),this.extraDelay=ft}}e.RenderingCancelledException=et;function it(Ht){const St=Ht.length;let ft=0;for(;ft<St&&Ht[ft].trim()==="";)ft++;return Ht.substring(ft,ft+5).toLowerCase()==="data:"}function st(Ht){return typeof Ht=="string"&&/\.pdf$/i.test(Ht)}function nt(Ht,St=!1){return St||([Ht]=Ht.split(/[#?]/,1)),Ht.substring(Ht.lastIndexOf("/")+1)}function ot(Ht,St="document.pdf"){if(typeof Ht!="string")return St;if(it(Ht))return(0,a.warn)('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),St;const ft=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,ct=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,dt=ft.exec(Ht);let gt=ct.exec(dt[1])||ct.exec(dt[2])||ct.exec(dt[3]);if(gt&&(gt=gt[0],gt.includes("%")))try{gt=ct.exec(decodeURIComponent(gt))[0]}catch{}return gt||St}class ht{started=Object.create(null);times=[];time(St){St in this.started&&(0,a.warn)(`Timer is already running for ${St}`),this.started[St]=Date.now()}timeEnd(St){St in this.started||(0,a.warn)(`Timer has not been started for ${St}`),this.times.push({name:St,start:this.started[St],end:Date.now()}),delete this.started[St]}toString(){const St=[];let ft=0;for(const{name:ct}of this.times)ft=Math.max(ct.length,ft);for(const{name:ct,start:dt,end:gt}of this.times)St.push(`${ct.padEnd(ft)} ${gt-dt}ms
`);return St.join("")}}e.StatTimer=ht;function pt(Ht,St){try{const{protocol:ft}=St?new URL(Ht,St):new URL(Ht);return ft==="http:"||ft==="https:"}catch{return!1}}function lt(Ht){Ht.preventDefault()}function ut(Ht,St=!1){return new Promise((ft,ct)=>{const dt=document.createElement("script");dt.src=Ht,dt.onload=function(gt){St&&dt.remove(),ft(gt)},dt.onerror=function(){ct(new Error(`Cannot load script at: ${dt.src}`))},(document.head||document.documentElement).append(dt)})}function yt(Ht){console.log("Deprecated API usage: "+Ht)}let Pt;class vt{static toDateObject(St){if(!St||typeof St!="string")return null;Pt||=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?");const ft=Pt.exec(St);if(!ft)return null;const ct=parseInt(ft[1],10);let dt=parseInt(ft[2],10);dt=dt>=1&&dt<=12?dt-1:0;let gt=parseInt(ft[3],10);gt=gt>=1&&gt<=31?gt:1;let Tt=parseInt(ft[4],10);Tt=Tt>=0&&Tt<=23?Tt:0;let wt=parseInt(ft[5],10);wt=wt>=0&&wt<=59?wt:0;let xt=parseInt(ft[6],10);xt=xt>=0&&xt<=59?xt:0;const At=ft[7]||"Z";let at=parseInt(ft[8],10);at=at>=0&&at<=23?at:0;let mt=parseInt(ft[9],10)||0;return mt=mt>=0&&mt<=59?mt:0,At==="-"?(Tt+=at,wt+=mt):At==="+"&&(Tt-=at,wt-=mt),new Date(Date.UTC(ct,dt,gt,Tt,wt,xt))}}e.PDFDateString=vt;function Vt(Ht,{scale:St=1,rotation:ft=0}){const{width:ct,height:dt}=Ht.attributes.style,gt=[0,0,parseInt(ct),parseInt(dt)];return new rt({viewBox:gt,scale:St,rotation:ft})}function Dt(Ht){if(Ht.startsWith("#")){const St=parseInt(Ht.slice(1),16);return[(St&16711680)>>16,(St&65280)>>8,St&255]}return Ht.startsWith("rgb(")?Ht.slice(4,-1).split(",").map(St=>parseInt(St)):Ht.startsWith("rgba(")?Ht.slice(5,-1).split(",").map(St=>parseInt(St)).slice(0,3):((0,a.warn)(`Not a valid color format: "${Ht}"`),[0,0,0])}function Qt(Ht){const St=document.createElement("span");St.style.visibility="hidden",document.body.append(St);for(const ft of Ht.keys()){St.style.color=ft;const ct=window.getComputedStyle(St).color;Ht.set(ft,Dt(ct))}St.remove()}function Wt(Ht){const{a:St,b:ft,c:ct,d:dt,e:gt,f:Tt}=Ht.getTransform();return[St,ft,ct,dt,gt,Tt]}function Kt(Ht){const{a:St,b:ft,c:ct,d:dt,e:gt,f:Tt}=Ht.getTransform().invertSelf();return[St,ft,ct,dt,gt,Tt]}function tn(Ht,St,ft=!1,ct=!0){if(St instanceof rt){const{pageWidth:dt,pageHeight:gt}=St.rawDims,{style:Tt}=Ht,wt=a.FeatureTest.isCSSRoundSupported,xt=`var(--scale-factor) * ${dt}px`,At=`var(--scale-factor) * ${gt}px`,at=wt?`round(${xt}, 1px)`:`calc(${xt})`,mt=wt?`round(${At}, 1px)`:`calc(${At})`;!ft||St.rotation%180===0?(Tt.width=at,Tt.height=mt):(Tt.width=mt,Tt.height=at)}ct&&Ht.setAttribute("data-main-rotation",St.rotation)}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.BaseStandardFontDataFactory=e.BaseSVGFactory=e.BaseFilterFactory=e.BaseCanvasFactory=e.BaseCMapReaderFactory=void 0;var o=s(1);class a{constructor(){this.constructor===a&&(0,o.unreachable)("Cannot initialize BaseFilterFactory.")}addFilter(d){return"none"}addHCMFilter(d,j){return"none"}addHighlightHCMFilter(d,j,tt,rt){return"none"}destroy(d=!1){}}e.BaseFilterFactory=a;class c{constructor(){this.constructor===c&&(0,o.unreachable)("Cannot initialize BaseCanvasFactory.")}create(d,j){if(d<=0||j<=0)throw new Error("Invalid canvas size");const tt=this._createCanvas(d,j);return{canvas:tt,context:tt.getContext("2d")}}reset(d,j,tt){if(!d.canvas)throw new Error("Canvas is not specified");if(j<=0||tt<=0)throw new Error("Invalid canvas size");d.canvas.width=j,d.canvas.height=tt}destroy(d){if(!d.canvas)throw new Error("Canvas is not specified");d.canvas.width=0,d.canvas.height=0,d.canvas=null,d.context=null}_createCanvas(d,j){(0,o.unreachable)("Abstract method `_createCanvas` called.")}}e.BaseCanvasFactory=c;class h{constructor({baseUrl:d=null,isCompressed:j=!0}){this.constructor===h&&(0,o.unreachable)("Cannot initialize BaseCMapReaderFactory."),this.baseUrl=d,this.isCompressed=j}async fetch({name:d}){if(!this.baseUrl)throw new Error('The CMap "baseUrl" parameter must be specified, ensure that the "cMapUrl" and "cMapPacked" API parameters are provided.');if(!d)throw new Error("CMap name must be specified.");const j=this.baseUrl+d+(this.isCompressed?".bcmap":""),tt=this.isCompressed?o.CMapCompressionType.BINARY:o.CMapCompressionType.NONE;return this._fetchData(j,tt).catch(rt=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${j}`)})}_fetchData(d,j){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseCMapReaderFactory=h;class _{constructor({baseUrl:d=null}){this.constructor===_&&(0,o.unreachable)("Cannot initialize BaseStandardFontDataFactory."),this.baseUrl=d}async fetch({filename:d}){if(!this.baseUrl)throw new Error('The standard font "baseUrl" parameter must be specified, ensure that the "standardFontDataUrl" API parameter is provided.');if(!d)throw new Error("Font filename must be specified.");const j=`${this.baseUrl}${d}`;return this._fetchData(j).catch(tt=>{throw new Error(`Unable to load font data at: ${j}`)})}_fetchData(d){(0,o.unreachable)("Abstract method `_fetchData` called.")}}e.BaseStandardFontDataFactory=_;class ${constructor(){this.constructor===$&&(0,o.unreachable)("Cannot initialize BaseSVGFactory.")}create(d,j,tt=!1){if(d<=0||j<=0)throw new Error("Invalid SVG dimensions");const rt=this._createSVG("svg:svg");return rt.setAttribute("version","1.1"),tt||(rt.setAttribute("width",`${d}px`),rt.setAttribute("height",`${j}px`)),rt.setAttribute("preserveAspectRatio","none"),rt.setAttribute("viewBox",`0 0 ${d} ${j}`),rt}createElement(d){if(typeof d!="string")throw new Error("Invalid SVG element type");return this._createSVG(d)}_createSVG(d){(0,o.unreachable)("Abstract method `_createSVG` called.")}}e.BaseSVGFactory=$},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MurmurHash3_64=void 0;var o=s(1);const a=3285377520,c=4294901760,h=65535;class _{constructor(g){this.h1=g?g&4294967295:a,this.h2=g?g&4294967295:a}update(g){let d,j;if(typeof g=="string"){d=new Uint8Array(g.length*2),j=0;for(let yt=0,Pt=g.length;yt<Pt;yt++){const vt=g.charCodeAt(yt);vt<=255?d[j++]=vt:(d[j++]=vt>>>8,d[j++]=vt&255)}}else if((0,o.isArrayBuffer)(g))d=g.slice(),j=d.byteLength;else throw new Error("Wrong data format in MurmurHash3_64_update. Input must be a string or array.");const tt=j>>2,rt=j-tt*4,et=new Uint32Array(d.buffer,0,tt);let it=0,st=0,nt=this.h1,ot=this.h2;const ht=3432918353,pt=461845907,lt=ht&h,ut=pt&h;for(let yt=0;yt<tt;yt++)yt&1?(it=et[yt],it=it*ht&c|it*lt&h,it=it<<15|it>>>17,it=it*pt&c|it*ut&h,nt^=it,nt=nt<<13|nt>>>19,nt=nt*5+3864292196):(st=et[yt],st=st*ht&c|st*lt&h,st=st<<15|st>>>17,st=st*pt&c|st*ut&h,ot^=st,ot=ot<<13|ot>>>19,ot=ot*5+3864292196);switch(it=0,rt){case 3:it^=d[tt*4+2]<<16;case 2:it^=d[tt*4+1]<<8;case 1:it^=d[tt*4],it=it*ht&c|it*lt&h,it=it<<15|it>>>17,it=it*pt&c|it*ut&h,tt&1?nt^=it:ot^=it}this.h1=nt,this.h2=ot}hexdigest(){let g=this.h1,d=this.h2;return g^=d>>>1,g=g*3981806797&c|g*36045&h,d=d*4283543511&c|((d<<16|g>>>16)*2950163797&c)>>>16,g^=d>>>1,g=g*444984403&c|g*60499&h,d=d*3301882366&c|((d<<16|g>>>16)*3120437893&c)>>>16,g^=d>>>1,(g>>>0).toString(16).padStart(8,"0")+(d>>>0).toString(16).padStart(8,"0")}}e.MurmurHash3_64=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FontLoader=e.FontFaceObject=void 0;var o=s(1);class a{#e=new Set;constructor({ownerDocument:_=globalThis.document,styleElement:$=null}){this._document=_,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(_){this.nativeFontFaces.add(_),this._document.fonts.add(_)}removeNativeFontFace(_){this.nativeFontFaces.delete(_),this._document.fonts.delete(_)}insertRule(_){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const $=this.styleElement.sheet;$.insertRule(_,$.cssRules.length)}clear(){for(const _ of this.nativeFontFaces)this._document.fonts.delete(_);this.nativeFontFaces.clear(),this.#e.clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(_){if(!(!_||this.#e.has(_.loadedName))){if((0,o.assert)(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:$,src:g,style:d}=_,j=new FontFace($,g,d);this.addNativeFontFace(j);try{await j.load(),this.#e.add($)}catch{(0,o.warn)(`Cannot load system font: ${_.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(j)}return}(0,o.unreachable)("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(_){if(_.attached||_.missingFile&&!_.systemFontInfo)return;if(_.attached=!0,_.systemFontInfo){await this.loadSystemFont(_.systemFontInfo);return}if(this.isFontLoadingAPISupported){const g=_.createNativeFontFace();if(g){this.addNativeFontFace(g);try{await g.loaded}catch(d){throw(0,o.warn)(`Failed to load font '${g.family}': '${d}'.`),_.disableFontFace=!0,d}}return}const $=_.createFontFaceRule();if($){if(this.insertRule($),this.isSyncFontLoadingSupported)return;await new Promise(g=>{const d=this._queueLoadingCallback(g);this._prepareFontLoadEvent(_,d)})}}get isFontLoadingAPISupported(){const _=!!this._document?.fonts;return(0,o.shadow)(this,"isFontLoadingAPISupported",_)}get isSyncFontLoadingSupported(){let _=!1;return(o.isNodeJS||typeof navigator<"u"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(_=!0),(0,o.shadow)(this,"isSyncFontLoadingSupported",_)}_queueLoadingCallback(_){function $(){for((0,o.assert)(!d.done,"completeRequest() cannot be called twice."),d.done=!0;g.length>0&&g[0].done;){const j=g.shift();setTimeout(j.callback,0)}}const{loadingRequests:g}=this,d={done:!1,complete:$,callback:_};return g.push(d),d}get _loadTestFont(){const _=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return(0,o.shadow)(this,"_loadTestFont",_)}_prepareFontLoadEvent(_,$){function g(Vt,Dt){return Vt.charCodeAt(Dt)<<24|Vt.charCodeAt(Dt+1)<<16|Vt.charCodeAt(Dt+2)<<8|Vt.charCodeAt(Dt+3)&255}function d(Vt,Dt,Qt,Wt){const Kt=Vt.substring(0,Dt),tn=Vt.substring(Dt+Qt);return Kt+Wt+tn}let j,tt;const rt=this._document.createElement("canvas");rt.width=1,rt.height=1;const et=rt.getContext("2d");let it=0;function st(Vt,Dt){if(++it>30){(0,o.warn)("Load test font never loaded."),Dt();return}if(et.font="30px "+Vt,et.fillText(".",0,20),et.getImageData(0,0,1,1).data[3]>0){Dt();return}setTimeout(st.bind(null,Vt,Dt))}const nt=`lt${Date.now()}${this.loadTestFontId++}`;let ot=this._loadTestFont;ot=d(ot,976,nt.length,nt);const pt=16,lt=1482184792;let ut=g(ot,pt);for(j=0,tt=nt.length-3;j<tt;j+=4)ut=ut-lt+g(nt,j)|0;j<nt.length&&(ut=ut-lt+g(nt+"XXX",j)|0),ot=d(ot,pt,4,(0,o.string32)(ut));const yt=`url(data:font/opentype;base64,${btoa(ot)});`,Pt=`@font-face {font-family:"${nt}";src:${yt}}`;this.insertRule(Pt);const vt=this._document.createElement("div");vt.style.visibility="hidden",vt.style.width=vt.style.height="10px",vt.style.position="absolute",vt.style.top=vt.style.left="0px";for(const Vt of[_.loadedName,nt]){const Dt=this._document.createElement("span");Dt.textContent="Hi",Dt.style.fontFamily=Vt,vt.append(Dt)}this._document.body.append(vt),st(nt,()=>{vt.remove(),$.complete()})}}e.FontLoader=a;class c{constructor(_,{isEvalSupported:$=!0,disableFontFace:g=!1,ignoreErrors:d=!1,inspectFont:j=null}){this.compiledGlyphs=Object.create(null);for(const tt in _)this[tt]=_[tt];this.isEvalSupported=$!==!1,this.disableFontFace=g===!0,this.ignoreErrors=d===!0,this._inspectFont=j}createNativeFontFace(){if(!this.data||this.disableFontFace)return null;let _;if(!this.cssFontInfo)_=new FontFace(this.loadedName,this.data,{});else{const $={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&($.style=`oblique ${this.cssFontInfo.italicAngle}deg`),_=new FontFace(this.cssFontInfo.fontFamily,this.data,$)}return this._inspectFont?.(this),_}createFontFaceRule(){if(!this.data||this.disableFontFace)return null;const _=(0,o.bytesToString)(this.data),$=`url(data:${this.mimetype};base64,${btoa(_)});`;let g;if(!this.cssFontInfo)g=`@font-face {font-family:"${this.loadedName}";src:${$}}`;else{let d=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(d+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),g=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${d}src:${$}}`}return this._inspectFont?.(this,$),g}getPathGenerator(_,$){if(this.compiledGlyphs[$]!==void 0)return this.compiledGlyphs[$];let g;try{g=_.get(this.loadedName+"_path_"+$)}catch(d){if(!this.ignoreErrors)throw d;return(0,o.warn)(`getPathGenerator - ignoring character: "${d}".`),this.compiledGlyphs[$]=function(j,tt){}}if(this.isEvalSupported&&o.FeatureTest.isEvalSupported){const d=[];for(const j of g){const tt=j.args!==void 0?j.args.join(","):"";d.push("c.",j.cmd,"(",tt,`);
`)}return this.compiledGlyphs[$]=new Function("c","size",d.join(""))}return this.compiledGlyphs[$]=function(d,j){for(const tt of g)tt.cmd==="scale"&&(tt.args=[j,-j]),d[tt.cmd].apply(d,tt.args)}}}e.FontFaceObject=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NodeStandardFontDataFactory=e.NodeFilterFactory=e.NodeCanvasFactory=e.NodeCMapReaderFactory=void 0;var o=s(7);s(1);const a=function(g){return new Promise((d,j)=>{require$$5.readFile(g,(rt,et)=>{if(rt||!et){j(new Error(rt));return}d(new Uint8Array(et))})})};class c extends o.BaseFilterFactory{}e.NodeFilterFactory=c;class h extends o.BaseCanvasFactory{_createCanvas(d,j){return require$$5.createCanvas(d,j)}}e.NodeCanvasFactory=h;class _ extends o.BaseCMapReaderFactory{_fetchData(d,j){return a(d).then(tt=>({cMapData:tt,compressionType:j}))}}e.NodeCMapReaderFactory=_;class $ extends o.BaseStandardFontDataFactory{_fetchData(d){return a(d)}}e.NodeStandardFontDataFactory=$},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.CanvasGraphics=void 0;var o=s(1),a=s(6),c=s(12),h=s(13);const _=16,$=100,g=4096,d=15,j=10,tt=1e3,rt=16;function et(ft,ct){if(ft._removeMirroring)throw new Error("Context is already forwarding operations.");ft.__originalSave=ft.save,ft.__originalRestore=ft.restore,ft.__originalRotate=ft.rotate,ft.__originalScale=ft.scale,ft.__originalTranslate=ft.translate,ft.__originalTransform=ft.transform,ft.__originalSetTransform=ft.setTransform,ft.__originalResetTransform=ft.resetTransform,ft.__originalClip=ft.clip,ft.__originalMoveTo=ft.moveTo,ft.__originalLineTo=ft.lineTo,ft.__originalBezierCurveTo=ft.bezierCurveTo,ft.__originalRect=ft.rect,ft.__originalClosePath=ft.closePath,ft.__originalBeginPath=ft.beginPath,ft._removeMirroring=()=>{ft.save=ft.__originalSave,ft.restore=ft.__originalRestore,ft.rotate=ft.__originalRotate,ft.scale=ft.__originalScale,ft.translate=ft.__originalTranslate,ft.transform=ft.__originalTransform,ft.setTransform=ft.__originalSetTransform,ft.resetTransform=ft.__originalResetTransform,ft.clip=ft.__originalClip,ft.moveTo=ft.__originalMoveTo,ft.lineTo=ft.__originalLineTo,ft.bezierCurveTo=ft.__originalBezierCurveTo,ft.rect=ft.__originalRect,ft.closePath=ft.__originalClosePath,ft.beginPath=ft.__originalBeginPath,delete ft._removeMirroring},ft.save=function(){ct.save(),this.__originalSave()},ft.restore=function(){ct.restore(),this.__originalRestore()},ft.translate=function(gt,Tt){ct.translate(gt,Tt),this.__originalTranslate(gt,Tt)},ft.scale=function(gt,Tt){ct.scale(gt,Tt),this.__originalScale(gt,Tt)},ft.transform=function(gt,Tt,wt,xt,At,at){ct.transform(gt,Tt,wt,xt,At,at),this.__originalTransform(gt,Tt,wt,xt,At,at)},ft.setTransform=function(gt,Tt,wt,xt,At,at){ct.setTransform(gt,Tt,wt,xt,At,at),this.__originalSetTransform(gt,Tt,wt,xt,At,at)},ft.resetTransform=function(){ct.resetTransform(),this.__originalResetTransform()},ft.rotate=function(gt){ct.rotate(gt),this.__originalRotate(gt)},ft.clip=function(gt){ct.clip(gt),this.__originalClip(gt)},ft.moveTo=function(dt,gt){ct.moveTo(dt,gt),this.__originalMoveTo(dt,gt)},ft.lineTo=function(dt,gt){ct.lineTo(dt,gt),this.__originalLineTo(dt,gt)},ft.bezierCurveTo=function(dt,gt,Tt,wt,xt,At){ct.bezierCurveTo(dt,gt,Tt,wt,xt,At),this.__originalBezierCurveTo(dt,gt,Tt,wt,xt,At)},ft.rect=function(dt,gt,Tt,wt){ct.rect(dt,gt,Tt,wt),this.__originalRect(dt,gt,Tt,wt)},ft.closePath=function(){ct.closePath(),this.__originalClosePath()},ft.beginPath=function(){ct.beginPath(),this.__originalBeginPath()}}class it{constructor(ct){this.canvasFactory=ct,this.cache=Object.create(null)}getCanvas(ct,dt,gt){let Tt;return this.cache[ct]!==void 0?(Tt=this.cache[ct],this.canvasFactory.reset(Tt,dt,gt)):(Tt=this.canvasFactory.create(dt,gt),this.cache[ct]=Tt),Tt}delete(ct){delete this.cache[ct]}clear(){for(const ct in this.cache){const dt=this.cache[ct];this.canvasFactory.destroy(dt),delete this.cache[ct]}}}function st(ft,ct,dt,gt,Tt,wt,xt,At,at,mt){const[_t,Rt,bt,Ct,$t,Ut]=(0,a.getCurrentTransform)(ft);if(Rt===0&&bt===0){const Bt=xt*_t+$t,zt=Math.round(Bt),Gt=At*Ct+Ut,Xt=Math.round(Gt),sn=(xt+at)*_t+$t,cn=Math.abs(Math.round(sn)-zt)||1,mn=(At+mt)*Ct+Ut,En=Math.abs(Math.round(mn)-Xt)||1;return ft.setTransform(Math.sign(_t),0,0,Math.sign(Ct),zt,Xt),ft.drawImage(ct,dt,gt,Tt,wt,0,0,cn,En),ft.setTransform(_t,Rt,bt,Ct,$t,Ut),[cn,En]}if(_t===0&&Ct===0){const Bt=At*bt+$t,zt=Math.round(Bt),Gt=xt*Rt+Ut,Xt=Math.round(Gt),sn=(At+mt)*bt+$t,cn=Math.abs(Math.round(sn)-zt)||1,mn=(xt+at)*Rt+Ut,En=Math.abs(Math.round(mn)-Xt)||1;return ft.setTransform(0,Math.sign(Rt),Math.sign(bt),0,zt,Xt),ft.drawImage(ct,dt,gt,Tt,wt,0,0,En,cn),ft.setTransform(_t,Rt,bt,Ct,$t,Ut),[En,cn]}ft.drawImage(ct,dt,gt,Tt,wt,xt,At,at,mt);const en=Math.hypot(_t,Rt),Nt=Math.hypot(bt,Ct);return[en*at,Nt*mt]}function nt(ft){const{width:ct,height:dt}=ft;if(ct>tt||dt>tt)return null;const gt=1e3,Tt=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),wt=ct+1;let xt=new Uint8Array(wt*(dt+1)),At,at,mt;const _t=ct+7&-8;let Rt=new Uint8Array(_t*dt),bt=0;for(const Nt of ft.data){let Bt=128;for(;Bt>0;)Rt[bt++]=Nt&Bt?0:255,Bt>>=1}let Ct=0;for(bt=0,Rt[bt]!==0&&(xt[0]=1,++Ct),at=1;at<ct;at++)Rt[bt]!==Rt[bt+1]&&(xt[at]=Rt[bt]?2:1,++Ct),bt++;for(Rt[bt]!==0&&(xt[at]=2,++Ct),At=1;At<dt;At++){bt=At*_t,mt=At*wt,Rt[bt-_t]!==Rt[bt]&&(xt[mt]=Rt[bt]?1:8,++Ct);let Nt=(Rt[bt]?4:0)+(Rt[bt-_t]?8:0);for(at=1;at<ct;at++)Nt=(Nt>>2)+(Rt[bt+1]?4:0)+(Rt[bt-_t+1]?8:0),Tt[Nt]&&(xt[mt+at]=Tt[Nt],++Ct),bt++;if(Rt[bt-_t]!==Rt[bt]&&(xt[mt+at]=Rt[bt]?2:4,++Ct),Ct>gt)return null}for(bt=_t*(dt-1),mt=At*wt,Rt[bt]!==0&&(xt[mt]=8,++Ct),at=1;at<ct;at++)Rt[bt]!==Rt[bt+1]&&(xt[mt+at]=Rt[bt]?4:8,++Ct),bt++;if(Rt[bt]!==0&&(xt[mt+at]=4,++Ct),Ct>gt)return null;const $t=new Int32Array([0,wt,-1,0,-wt,0,0,0,1]),Ut=new Path2D;for(At=0;Ct&&At<=dt;At++){let Nt=At*wt;const Bt=Nt+ct;for(;Nt<Bt&&!xt[Nt];)Nt++;if(Nt===Bt)continue;Ut.moveTo(Nt%wt,At);const zt=Nt;let Gt=xt[Nt];do{const Xt=$t[Gt];do Nt+=Xt;while(!xt[Nt]);const sn=xt[Nt];sn!==5&&sn!==10?(Gt=sn,xt[Nt]=0):(Gt=sn&51*Gt>>4,xt[Nt]&=Gt>>2|Gt<<2),Ut.lineTo(Nt%wt,Nt/wt|0),xt[Nt]||--Ct}while(zt!==Nt);--At}return Rt=null,xt=null,function(Nt){Nt.save(),Nt.scale(1/ct,-1/dt),Nt.translate(0,-dt),Nt.fill(Ut),Nt.beginPath(),Nt.restore()}}class ot{constructor(ct,dt){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=o.IDENTITY_MATRIX,this.textMatrixScale=1,this.fontMatrix=o.FONT_IDENTITY_MATRIX,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=o.TextRenderingMode.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,ct,dt])}clone(){const ct=Object.create(this);return ct.clipBox=this.clipBox.slice(),ct}setCurrentPoint(ct,dt){this.x=ct,this.y=dt}updatePathMinMax(ct,dt,gt){[dt,gt]=o.Util.applyTransform([dt,gt],ct),this.minX=Math.min(this.minX,dt),this.minY=Math.min(this.minY,gt),this.maxX=Math.max(this.maxX,dt),this.maxY=Math.max(this.maxY,gt)}updateRectMinMax(ct,dt){const gt=o.Util.applyTransform(dt,ct),Tt=o.Util.applyTransform(dt.slice(2),ct);this.minX=Math.min(this.minX,gt[0],Tt[0]),this.minY=Math.min(this.minY,gt[1],Tt[1]),this.maxX=Math.max(this.maxX,gt[0],Tt[0]),this.maxY=Math.max(this.maxY,gt[1],Tt[1])}updateScalingPathMinMax(ct,dt){o.Util.scaleMinMax(ct,dt),this.minX=Math.min(this.minX,dt[0]),this.maxX=Math.max(this.maxX,dt[1]),this.minY=Math.min(this.minY,dt[2]),this.maxY=Math.max(this.maxY,dt[3])}updateCurvePathMinMax(ct,dt,gt,Tt,wt,xt,At,at,mt,_t){const Rt=o.Util.bezierBoundingBox(dt,gt,Tt,wt,xt,At,at,mt);if(_t){_t[0]=Math.min(_t[0],Rt[0],Rt[2]),_t[1]=Math.max(_t[1],Rt[0],Rt[2]),_t[2]=Math.min(_t[2],Rt[1],Rt[3]),_t[3]=Math.max(_t[3],Rt[1],Rt[3]);return}this.updateRectMinMax(ct,Rt)}getPathBoundingBox(ct=c.PathType.FILL,dt=null){const gt=[this.minX,this.minY,this.maxX,this.maxY];if(ct===c.PathType.STROKE){dt||(0,o.unreachable)("Stroke bounding box must include transform.");const Tt=o.Util.singularValueDecompose2dScale(dt),wt=Tt[0]*this.lineWidth/2,xt=Tt[1]*this.lineWidth/2;gt[0]-=wt,gt[1]-=xt,gt[2]+=wt,gt[3]+=xt}return gt}updateClipFromPath(){const ct=o.Util.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(ct||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(ct){this.clipBox=ct,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(ct=c.PathType.FILL,dt=null){return o.Util.intersect(this.clipBox,this.getPathBoundingBox(ct,dt))}}function ht(ft,ct){if(typeof ImageData<"u"&&ct instanceof ImageData){ft.putImageData(ct,0,0);return}const dt=ct.height,gt=ct.width,Tt=dt%rt,wt=(dt-Tt)/rt,xt=Tt===0?wt:wt+1,At=ft.createImageData(gt,rt);let at=0,mt;const _t=ct.data,Rt=At.data;let bt,Ct,$t,Ut;if(ct.kind===o.ImageKind.GRAYSCALE_1BPP){const en=_t.byteLength,Nt=new Uint32Array(Rt.buffer,0,Rt.byteLength>>2),Bt=Nt.length,zt=gt+7>>3,Gt=4294967295,Xt=o.FeatureTest.isLittleEndian?4278190080:255;for(bt=0;bt<xt;bt++){for($t=bt<wt?rt:Tt,mt=0,Ct=0;Ct<$t;Ct++){const sn=en-at;let cn=0;const mn=sn>zt?gt:sn*8-7,En=mn&-8;let vn=0,Rn=0;for(;cn<En;cn+=8)Rn=_t[at++],Nt[mt++]=Rn&128?Gt:Xt,Nt[mt++]=Rn&64?Gt:Xt,Nt[mt++]=Rn&32?Gt:Xt,Nt[mt++]=Rn&16?Gt:Xt,Nt[mt++]=Rn&8?Gt:Xt,Nt[mt++]=Rn&4?Gt:Xt,Nt[mt++]=Rn&2?Gt:Xt,Nt[mt++]=Rn&1?Gt:Xt;for(;cn<mn;cn++)vn===0&&(Rn=_t[at++],vn=128),Nt[mt++]=Rn&vn?Gt:Xt,vn>>=1}for(;mt<Bt;)Nt[mt++]=0;ft.putImageData(At,0,bt*rt)}}else if(ct.kind===o.ImageKind.RGBA_32BPP){for(Ct=0,Ut=gt*rt*4,bt=0;bt<wt;bt++)Rt.set(_t.subarray(at,at+Ut)),at+=Ut,ft.putImageData(At,0,Ct),Ct+=rt;bt<xt&&(Ut=gt*Tt*4,Rt.set(_t.subarray(at,at+Ut)),ft.putImageData(At,0,Ct))}else if(ct.kind===o.ImageKind.RGB_24BPP)for($t=rt,Ut=gt*$t,bt=0;bt<xt;bt++){for(bt>=wt&&($t=Tt,Ut=gt*$t),mt=0,Ct=Ut;Ct--;)Rt[mt++]=_t[at++],Rt[mt++]=_t[at++],Rt[mt++]=_t[at++],Rt[mt++]=255;ft.putImageData(At,0,bt*rt)}else throw new Error(`bad image kind: ${ct.kind}`)}function pt(ft,ct){if(ct.bitmap){ft.drawImage(ct.bitmap,0,0);return}const dt=ct.height,gt=ct.width,Tt=dt%rt,wt=(dt-Tt)/rt,xt=Tt===0?wt:wt+1,At=ft.createImageData(gt,rt);let at=0;const mt=ct.data,_t=At.data;for(let Rt=0;Rt<xt;Rt++){const bt=Rt<wt?rt:Tt;({srcPos:at}=(0,h.convertBlackAndWhiteToRGBA)({src:mt,srcPos:at,dest:_t,width:gt,height:bt,nonBlackColor:0})),ft.putImageData(At,0,Rt*rt)}}function lt(ft,ct){const dt=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const gt of dt)ft[gt]!==void 0&&(ct[gt]=ft[gt]);ft.setLineDash!==void 0&&(ct.setLineDash(ft.getLineDash()),ct.lineDashOffset=ft.lineDashOffset)}function ut(ft){if(ft.strokeStyle=ft.fillStyle="#000000",ft.fillRule="nonzero",ft.globalAlpha=1,ft.lineWidth=1,ft.lineCap="butt",ft.lineJoin="miter",ft.miterLimit=10,ft.globalCompositeOperation="source-over",ft.font="10px sans-serif",ft.setLineDash!==void 0&&(ft.setLineDash([]),ft.lineDashOffset=0),!o.isNodeJS){const{filter:ct}=ft;ct!=="none"&&ct!==""&&(ft.filter="none")}}function yt(ft,ct,dt,gt){const Tt=ft.length;for(let wt=3;wt<Tt;wt+=4){const xt=ft[wt];if(xt===0)ft[wt-3]=ct,ft[wt-2]=dt,ft[wt-1]=gt;else if(xt<255){const At=255-xt;ft[wt-3]=ft[wt-3]*xt+ct*At>>8,ft[wt-2]=ft[wt-2]*xt+dt*At>>8,ft[wt-1]=ft[wt-1]*xt+gt*At>>8}}}function Pt(ft,ct,dt){const gt=ft.length,Tt=1/255;for(let wt=3;wt<gt;wt+=4){const xt=dt?dt[ft[wt]]:ft[wt];ct[wt]=ct[wt]*xt*Tt|0}}function vt(ft,ct,dt){const gt=ft.length;for(let Tt=3;Tt<gt;Tt+=4){const wt=ft[Tt-3]*77+ft[Tt-2]*152+ft[Tt-1]*28;ct[Tt]=dt?ct[Tt]*dt[wt>>8]>>8:ct[Tt]*wt>>16}}function Vt(ft,ct,dt,gt,Tt,wt,xt,At,at,mt,_t){const Rt=!!wt,bt=Rt?wt[0]:0,Ct=Rt?wt[1]:0,$t=Rt?wt[2]:0,Ut=Tt==="Luminosity"?vt:Pt,Nt=Math.min(gt,Math.ceil(1048576/dt));for(let Bt=0;Bt<gt;Bt+=Nt){const zt=Math.min(Nt,gt-Bt),Gt=ft.getImageData(At-mt,Bt+(at-_t),dt,zt),Xt=ct.getImageData(At,Bt+at,dt,zt);Rt&&yt(Gt.data,bt,Ct,$t),Ut(Gt.data,Xt.data,xt),ct.putImageData(Xt,At,Bt+at)}}function Dt(ft,ct,dt,gt){const Tt=gt[0],wt=gt[1],xt=gt[2]-Tt,At=gt[3]-wt;xt===0||At===0||(Vt(ct.context,dt,xt,At,ct.subtype,ct.backdrop,ct.transferMap,Tt,wt,ct.offsetX,ct.offsetY),ft.save(),ft.globalAlpha=1,ft.globalCompositeOperation="source-over",ft.setTransform(1,0,0,1,0,0),ft.drawImage(dt.canvas,0,0),ft.restore())}function Qt(ft,ct){const dt=o.Util.singularValueDecompose2dScale(ft);dt[0]=Math.fround(dt[0]),dt[1]=Math.fround(dt[1]);const gt=Math.fround((globalThis.devicePixelRatio||1)*a.PixelsPerInch.PDF_TO_CSS_UNITS);return ct!==void 0?ct:dt[0]<=gt||dt[1]<=gt}const Wt=["butt","round","square"],Kt=["miter","round","bevel"],tn={},Ht={};class St{constructor(ct,dt,gt,Tt,wt,{optionalContentConfig:xt,markedContentStack:At=null},at,mt){this.ctx=ct,this.current=new ot(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=dt,this.objs=gt,this.canvasFactory=Tt,this.filterFactory=wt,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=At||[],this.optionalContentConfig=xt,this.cachedCanvases=new it(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=at,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=mt,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(ct,dt=null){return typeof ct=="string"?ct.startsWith("g_")?this.commonObjs.get(ct):this.objs.get(ct):dt}beginDrawing({transform:ct,viewport:dt,transparency:gt=!1,background:Tt=null}){const wt=this.ctx.canvas.width,xt=this.ctx.canvas.height,At=this.ctx.fillStyle;if(this.ctx.fillStyle=Tt||"#ffffff",this.ctx.fillRect(0,0,wt,xt),this.ctx.fillStyle=At,gt){const at=this.cachedCanvases.getCanvas("transparent",wt,xt);this.compositeCtx=this.ctx,this.transparentCanvas=at.canvas,this.ctx=at.context,this.ctx.save(),this.ctx.transform(...(0,a.getCurrentTransform)(this.compositeCtx))}this.ctx.save(),ut(this.ctx),ct&&(this.ctx.transform(...ct),this.outputScaleX=ct[0],this.outputScaleY=ct[0]),this.ctx.transform(...dt.transform),this.viewportScale=dt.scale,this.baseTransform=(0,a.getCurrentTransform)(this.ctx)}executeOperatorList(ct,dt,gt,Tt){const wt=ct.argsArray,xt=ct.fnArray;let At=dt||0;const at=wt.length;if(at===At)return At;const mt=at-At>j&&typeof gt=="function",_t=mt?Date.now()+d:0;let Rt=0;const bt=this.commonObjs,Ct=this.objs;let $t;for(;;){if(Tt!==void 0&&At===Tt.nextBreakPoint)return Tt.breakIt(At,gt),At;if($t=xt[At],$t!==o.OPS.dependency)this[$t].apply(this,wt[At]);else for(const Ut of wt[At]){const en=Ut.startsWith("g_")?bt:Ct;if(!en.has(Ut))return en.get(Ut,gt),At}if(At++,At===at)return At;if(mt&&++Rt>j){if(Date.now()>_t)return gt(),At;Rt=0}}}#e(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}endDrawing(){this.#e(),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const ct of this._cachedBitmapsMap.values()){for(const dt of ct.values())typeof HTMLCanvasElement<"u"&&dt instanceof HTMLCanvasElement&&(dt.width=dt.height=0);ct.clear()}this._cachedBitmapsMap.clear(),this.#t()}#t(){if(this.pageColors){const ct=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(ct!=="none"){const dt=this.ctx.filter;this.ctx.filter=ct,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=dt}}}_scaleImage(ct,dt){const gt=ct.width,Tt=ct.height;let wt=Math.max(Math.hypot(dt[0],dt[1]),1),xt=Math.max(Math.hypot(dt[2],dt[3]),1),At=gt,at=Tt,mt="prescale1",_t,Rt;for(;wt>2&&At>1||xt>2&&at>1;){let bt=At,Ct=at;wt>2&&At>1&&(bt=At>=16384?Math.floor(At/2)-1||1:Math.ceil(At/2),wt/=At/bt),xt>2&&at>1&&(Ct=at>=16384?Math.floor(at/2)-1||1:Math.ceil(at)/2,xt/=at/Ct),_t=this.cachedCanvases.getCanvas(mt,bt,Ct),Rt=_t.context,Rt.clearRect(0,0,bt,Ct),Rt.drawImage(ct,0,0,At,at,0,0,bt,Ct),ct=_t.canvas,At=bt,at=Ct,mt=mt==="prescale1"?"prescale2":"prescale1"}return{img:ct,paintWidth:At,paintHeight:at}}_createMaskCanvas(ct){const dt=this.ctx,{width:gt,height:Tt}=ct,wt=this.current.fillColor,xt=this.current.patternFill,At=(0,a.getCurrentTransform)(dt);let at,mt,_t,Rt;if((ct.bitmap||ct.data)&&ct.count>1){const cn=ct.bitmap||ct.data.buffer;mt=JSON.stringify(xt?At:[At.slice(0,4),wt]),at=this._cachedBitmapsMap.get(cn),at||(at=new Map,this._cachedBitmapsMap.set(cn,at));const mn=at.get(mt);if(mn&&!xt){const En=Math.round(Math.min(At[0],At[2])+At[4]),vn=Math.round(Math.min(At[1],At[3])+At[5]);return{canvas:mn,offsetX:En,offsetY:vn}}_t=mn}_t||(Rt=this.cachedCanvases.getCanvas("maskCanvas",gt,Tt),pt(Rt.context,ct));let bt=o.Util.transform(At,[1/gt,0,0,-1/Tt,0,0]);bt=o.Util.transform(bt,[1,0,0,1,0,-Tt]);const Ct=o.Util.applyTransform([0,0],bt),$t=o.Util.applyTransform([gt,Tt],bt),Ut=o.Util.normalizeRect([Ct[0],Ct[1],$t[0],$t[1]]),en=Math.round(Ut[2]-Ut[0])||1,Nt=Math.round(Ut[3]-Ut[1])||1,Bt=this.cachedCanvases.getCanvas("fillCanvas",en,Nt),zt=Bt.context,Gt=Math.min(Ct[0],$t[0]),Xt=Math.min(Ct[1],$t[1]);zt.translate(-Gt,-Xt),zt.transform(...bt),_t||(_t=this._scaleImage(Rt.canvas,(0,a.getCurrentTransformInverse)(zt)),_t=_t.img,at&&xt&&at.set(mt,_t)),zt.imageSmoothingEnabled=Qt((0,a.getCurrentTransform)(zt),ct.interpolate),st(zt,_t,0,0,_t.width,_t.height,0,0,gt,Tt),zt.globalCompositeOperation="source-in";const sn=o.Util.transform((0,a.getCurrentTransformInverse)(zt),[1,0,0,1,-Gt,-Xt]);return zt.fillStyle=xt?wt.getPattern(dt,this,sn,c.PathType.FILL):wt,zt.fillRect(0,0,gt,Tt),at&&!xt&&(this.cachedCanvases.delete("fillCanvas"),at.set(mt,Bt.canvas)),{canvas:Bt.canvas,offsetX:Math.round(Gt),offsetY:Math.round(Xt)}}setLineWidth(ct){ct!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=ct,this.ctx.lineWidth=ct}setLineCap(ct){this.ctx.lineCap=Wt[ct]}setLineJoin(ct){this.ctx.lineJoin=Kt[ct]}setMiterLimit(ct){this.ctx.miterLimit=ct}setDash(ct,dt){const gt=this.ctx;gt.setLineDash!==void 0&&(gt.setLineDash(ct),gt.lineDashOffset=dt)}setRenderingIntent(ct){}setFlatness(ct){}setGState(ct){for(const[dt,gt]of ct)switch(dt){case"LW":this.setLineWidth(gt);break;case"LC":this.setLineCap(gt);break;case"LJ":this.setLineJoin(gt);break;case"ML":this.setMiterLimit(gt);break;case"D":this.setDash(gt[0],gt[1]);break;case"RI":this.setRenderingIntent(gt);break;case"FL":this.setFlatness(gt);break;case"Font":this.setFont(gt[0],gt[1]);break;case"CA":this.current.strokeAlpha=gt;break;case"ca":this.current.fillAlpha=gt,this.ctx.globalAlpha=gt;break;case"BM":this.ctx.globalCompositeOperation=gt;break;case"SMask":this.current.activeSMask=gt?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(gt);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const ct=this.inSMaskMode;this.current.activeSMask&&!ct?this.beginSMaskMode():!this.current.activeSMask&&ct&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const ct=this.ctx.canvas.width,dt=this.ctx.canvas.height,gt="smaskGroupAt"+this.groupLevel,Tt=this.cachedCanvases.getCanvas(gt,ct,dt);this.suspendedCtx=this.ctx,this.ctx=Tt.context;const wt=this.ctx;wt.setTransform(...(0,a.getCurrentTransform)(this.suspendedCtx)),lt(this.suspendedCtx,wt),et(wt,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),lt(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(ct){if(!this.current.activeSMask)return;ct?(ct[0]=Math.floor(ct[0]),ct[1]=Math.floor(ct[1]),ct[2]=Math.ceil(ct[2]),ct[3]=Math.ceil(ct[3])):ct=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const dt=this.current.activeSMask,gt=this.suspendedCtx;Dt(gt,dt,this.ctx,ct),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}save(){this.inSMaskMode?(lt(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const ct=this.current;this.stateStack.push(ct),this.current=ct.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),lt(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(ct,dt,gt,Tt,wt,xt){this.ctx.transform(ct,dt,gt,Tt,wt,xt),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(ct,dt,gt){const Tt=this.ctx,wt=this.current;let xt=wt.x,At=wt.y,at,mt;const _t=(0,a.getCurrentTransform)(Tt),Rt=_t[0]===0&&_t[3]===0||_t[1]===0&&_t[2]===0,bt=Rt?gt.slice(0):null;for(let Ct=0,$t=0,Ut=ct.length;Ct<Ut;Ct++)switch(ct[Ct]|0){case o.OPS.rectangle:xt=dt[$t++],At=dt[$t++];const en=dt[$t++],Nt=dt[$t++],Bt=xt+en,zt=At+Nt;Tt.moveTo(xt,At),en===0||Nt===0?Tt.lineTo(Bt,zt):(Tt.lineTo(Bt,At),Tt.lineTo(Bt,zt),Tt.lineTo(xt,zt)),Rt||wt.updateRectMinMax(_t,[xt,At,Bt,zt]),Tt.closePath();break;case o.OPS.moveTo:xt=dt[$t++],At=dt[$t++],Tt.moveTo(xt,At),Rt||wt.updatePathMinMax(_t,xt,At);break;case o.OPS.lineTo:xt=dt[$t++],At=dt[$t++],Tt.lineTo(xt,At),Rt||wt.updatePathMinMax(_t,xt,At);break;case o.OPS.curveTo:at=xt,mt=At,xt=dt[$t+4],At=dt[$t+5],Tt.bezierCurveTo(dt[$t],dt[$t+1],dt[$t+2],dt[$t+3],xt,At),wt.updateCurvePathMinMax(_t,at,mt,dt[$t],dt[$t+1],dt[$t+2],dt[$t+3],xt,At,bt),$t+=6;break;case o.OPS.curveTo2:at=xt,mt=At,Tt.bezierCurveTo(xt,At,dt[$t],dt[$t+1],dt[$t+2],dt[$t+3]),wt.updateCurvePathMinMax(_t,at,mt,xt,At,dt[$t],dt[$t+1],dt[$t+2],dt[$t+3],bt),xt=dt[$t+2],At=dt[$t+3],$t+=4;break;case o.OPS.curveTo3:at=xt,mt=At,xt=dt[$t+2],At=dt[$t+3],Tt.bezierCurveTo(dt[$t],dt[$t+1],xt,At,xt,At),wt.updateCurvePathMinMax(_t,at,mt,dt[$t],dt[$t+1],xt,At,xt,At,bt),$t+=4;break;case o.OPS.closePath:Tt.closePath();break}Rt&&wt.updateScalingPathMinMax(_t,bt),wt.setCurrentPoint(xt,At)}closePath(){this.ctx.closePath()}stroke(ct=!0){const dt=this.ctx,gt=this.current.strokeColor;dt.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof gt=="object"&&gt?.getPattern?(dt.save(),dt.strokeStyle=gt.getPattern(dt,this,(0,a.getCurrentTransformInverse)(dt),c.PathType.STROKE),this.rescaleAndStroke(!1),dt.restore()):this.rescaleAndStroke(!0)),ct&&this.consumePath(this.current.getClippedPathBoundingBox()),dt.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(ct=!0){const dt=this.ctx,gt=this.current.fillColor,Tt=this.current.patternFill;let wt=!1;Tt&&(dt.save(),dt.fillStyle=gt.getPattern(dt,this,(0,a.getCurrentTransformInverse)(dt),c.PathType.FILL),wt=!0);const xt=this.current.getClippedPathBoundingBox();this.contentVisible&&xt!==null&&(this.pendingEOFill?(dt.fill("evenodd"),this.pendingEOFill=!1):dt.fill()),wt&&dt.restore(),ct&&this.consumePath(xt)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=tn}eoClip(){this.pendingClip=Ht}beginText(){this.current.textMatrix=o.IDENTITY_MATRIX,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const ct=this.pendingTextPaths,dt=this.ctx;if(ct===void 0){dt.beginPath();return}dt.save(),dt.beginPath();for(const gt of ct)dt.setTransform(...gt.transform),dt.translate(gt.x,gt.y),gt.addToPath(dt,gt.fontSize);dt.restore(),dt.clip(),dt.beginPath(),delete this.pendingTextPaths}setCharSpacing(ct){this.current.charSpacing=ct}setWordSpacing(ct){this.current.wordSpacing=ct}setHScale(ct){this.current.textHScale=ct/100}setLeading(ct){this.current.leading=-ct}setFont(ct,dt){const gt=this.commonObjs.get(ct),Tt=this.current;if(!gt)throw new Error(`Can't find font for ${ct}`);if(Tt.fontMatrix=gt.fontMatrix||o.FONT_IDENTITY_MATRIX,(Tt.fontMatrix[0]===0||Tt.fontMatrix[3]===0)&&(0,o.warn)("Invalid font matrix for font "+ct),dt<0?(dt=-dt,Tt.fontDirection=-1):Tt.fontDirection=1,this.current.font=gt,this.current.fontSize=dt,gt.isType3Font)return;const wt=gt.loadedName||"sans-serif",xt=gt.systemFontInfo?.css||`"${wt}", ${gt.fallbackName}`;let At="normal";gt.black?At="900":gt.bold&&(At="bold");const at=gt.italic?"italic":"normal";let mt=dt;dt<_?mt=_:dt>$&&(mt=$),this.current.fontSizeScale=dt/mt,this.ctx.font=`${at} ${At} ${mt}px ${xt}`}setTextRenderingMode(ct){this.current.textRenderingMode=ct}setTextRise(ct){this.current.textRise=ct}moveText(ct,dt){this.current.x=this.current.lineX+=ct,this.current.y=this.current.lineY+=dt}setLeadingMoveText(ct,dt){this.setLeading(-dt),this.moveText(ct,dt)}setTextMatrix(ct,dt,gt,Tt,wt,xt){this.current.textMatrix=[ct,dt,gt,Tt,wt,xt],this.current.textMatrixScale=Math.hypot(ct,dt),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(ct,dt,gt,Tt){const wt=this.ctx,xt=this.current,At=xt.font,at=xt.textRenderingMode,mt=xt.fontSize/xt.fontSizeScale,_t=at&o.TextRenderingMode.FILL_STROKE_MASK,Rt=!!(at&o.TextRenderingMode.ADD_TO_PATH_FLAG),bt=xt.patternFill&&!At.missingFile;let Ct;(At.disableFontFace||Rt||bt)&&(Ct=At.getPathGenerator(this.commonObjs,ct)),At.disableFontFace||bt?(wt.save(),wt.translate(dt,gt),wt.beginPath(),Ct(wt,mt),Tt&&wt.setTransform(...Tt),(_t===o.TextRenderingMode.FILL||_t===o.TextRenderingMode.FILL_STROKE)&&wt.fill(),(_t===o.TextRenderingMode.STROKE||_t===o.TextRenderingMode.FILL_STROKE)&&wt.stroke(),wt.restore()):((_t===o.TextRenderingMode.FILL||_t===o.TextRenderingMode.FILL_STROKE)&&wt.fillText(ct,dt,gt),(_t===o.TextRenderingMode.STROKE||_t===o.TextRenderingMode.FILL_STROKE)&&wt.strokeText(ct,dt,gt)),Rt&&(this.pendingTextPaths||=[]).push({transform:(0,a.getCurrentTransform)(wt),x:dt,y:gt,fontSize:mt,addToPath:Ct})}get isFontSubpixelAAEnabled(){const{context:ct}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);ct.scale(1.5,1),ct.fillText("I",0,10);const dt=ct.getImageData(0,0,10,10).data;let gt=!1;for(let Tt=3;Tt<dt.length;Tt+=4)if(dt[Tt]>0&&dt[Tt]<255){gt=!0;break}return(0,o.shadow)(this,"isFontSubpixelAAEnabled",gt)}showText(ct){const dt=this.current,gt=dt.font;if(gt.isType3Font)return this.showType3Text(ct);const Tt=dt.fontSize;if(Tt===0)return;const wt=this.ctx,xt=dt.fontSizeScale,At=dt.charSpacing,at=dt.wordSpacing,mt=dt.fontDirection,_t=dt.textHScale*mt,Rt=ct.length,bt=gt.vertical,Ct=bt?1:-1,$t=gt.defaultVMetrics,Ut=Tt*dt.fontMatrix[0],en=dt.textRenderingMode===o.TextRenderingMode.FILL&&!gt.disableFontFace&&!dt.patternFill;wt.save(),wt.transform(...dt.textMatrix),wt.translate(dt.x,dt.y+dt.textRise),mt>0?wt.scale(_t,-1):wt.scale(_t,1);let Nt;if(dt.patternFill){wt.save();const sn=dt.fillColor.getPattern(wt,this,(0,a.getCurrentTransformInverse)(wt),c.PathType.FILL);Nt=(0,a.getCurrentTransform)(wt),wt.restore(),wt.fillStyle=sn}let Bt=dt.lineWidth;const zt=dt.textMatrixScale;if(zt===0||Bt===0){const sn=dt.textRenderingMode&o.TextRenderingMode.FILL_STROKE_MASK;(sn===o.TextRenderingMode.STROKE||sn===o.TextRenderingMode.FILL_STROKE)&&(Bt=this.getSinglePixelWidth())}else Bt/=zt;if(xt!==1&&(wt.scale(xt,xt),Bt/=xt),wt.lineWidth=Bt,gt.isInvalidPDFjsFont){const sn=[];let cn=0;for(const mn of ct)sn.push(mn.unicode),cn+=mn.width;wt.fillText(sn.join(""),0,0),dt.x+=cn*Ut*_t,wt.restore(),this.compose();return}let Gt=0,Xt;for(Xt=0;Xt<Rt;++Xt){const sn=ct[Xt];if(typeof sn=="number"){Gt+=Ct*sn*Tt/1e3;continue}let cn=!1;const mn=(sn.isSpace?at:0)+At,En=sn.fontChar,vn=sn.accent;let Rn,Nn,xn=sn.width;if(bt){const kn=sn.vmetric||$t,Bn=-(sn.vmetric?kn[1]:xn*.5)*Ut,Xn=kn[2]*Ut;xn=kn?-kn[0]:xn,Rn=Bn/xt,Nn=(Gt+Xn)/xt}else Rn=Gt/xt,Nn=0;if(gt.remeasure&&xn>0){const kn=wt.measureText(En).width*1e3/Tt*xt;if(xn<kn&&this.isFontSubpixelAAEnabled){const Bn=xn/kn;cn=!0,wt.save(),wt.scale(Bn,1),Rn/=Bn}else xn!==kn&&(Rn+=(xn-kn)/2e3*Tt/xt)}if(this.contentVisible&&(sn.isInFont||gt.missingFile)){if(en&&!vn)wt.fillText(En,Rn,Nn);else if(this.paintChar(En,Rn,Nn,Nt),vn){const kn=Rn+Tt*vn.offset.x/xt,Bn=Nn-Tt*vn.offset.y/xt;this.paintChar(vn.fontChar,kn,Bn,Nt)}}const Kn=bt?xn*Ut-mn*mt:xn*Ut+mn*mt;Gt+=Kn,cn&&wt.restore()}bt?dt.y-=Gt:dt.x+=Gt*_t,wt.restore(),this.compose()}showType3Text(ct){const dt=this.ctx,gt=this.current,Tt=gt.font,wt=gt.fontSize,xt=gt.fontDirection,At=Tt.vertical?1:-1,at=gt.charSpacing,mt=gt.wordSpacing,_t=gt.textHScale*xt,Rt=gt.fontMatrix||o.FONT_IDENTITY_MATRIX,bt=ct.length,Ct=gt.textRenderingMode===o.TextRenderingMode.INVISIBLE;let $t,Ut,en,Nt;if(!(Ct||wt===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,dt.save(),dt.transform(...gt.textMatrix),dt.translate(gt.x,gt.y),dt.scale(_t,xt),$t=0;$t<bt;++$t){if(Ut=ct[$t],typeof Ut=="number"){Nt=At*Ut*wt/1e3,this.ctx.translate(Nt,0),gt.x+=Nt*_t;continue}const Bt=(Ut.isSpace?mt:0)+at,zt=Tt.charProcOperatorList[Ut.operatorListId];if(!zt){(0,o.warn)(`Type3 character "${Ut.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=Ut,this.save(),dt.scale(wt,wt),dt.transform(...Rt),this.executeOperatorList(zt),this.restore()),en=o.Util.applyTransform([Ut.width,0],Rt)[0]*wt+Bt,dt.translate(en,0),gt.x+=en*_t}dt.restore(),this.processingType3=null}}setCharWidth(ct,dt){}setCharWidthAndBounds(ct,dt,gt,Tt,wt,xt){this.ctx.rect(gt,Tt,wt-gt,xt-Tt),this.ctx.clip(),this.endPath()}getColorN_Pattern(ct){let dt;if(ct[0]==="TilingPattern"){const gt=ct[1],Tt=this.baseTransform||(0,a.getCurrentTransform)(this.ctx),wt={createCanvasGraphics:xt=>new St(xt,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};dt=new c.TilingPattern(ct,gt,this.ctx,wt,Tt)}else dt=this._getPattern(ct[1],ct[2]);return dt}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments)}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(ct,dt,gt){const Tt=o.Util.makeHexColor(ct,dt,gt);this.ctx.strokeStyle=Tt,this.current.strokeColor=Tt}setFillRGBColor(ct,dt,gt){const Tt=o.Util.makeHexColor(ct,dt,gt);this.ctx.fillStyle=Tt,this.current.fillColor=Tt,this.current.patternFill=!1}_getPattern(ct,dt=null){let gt;return this.cachedPatterns.has(ct)?gt=this.cachedPatterns.get(ct):(gt=(0,c.getShadingPattern)(this.getObject(ct)),this.cachedPatterns.set(ct,gt)),dt&&(gt.matrix=dt),gt}shadingFill(ct){if(!this.contentVisible)return;const dt=this.ctx;this.save();const gt=this._getPattern(ct);dt.fillStyle=gt.getPattern(dt,this,(0,a.getCurrentTransformInverse)(dt),c.PathType.SHADING);const Tt=(0,a.getCurrentTransformInverse)(dt);if(Tt){const{width:wt,height:xt}=dt.canvas,[At,at,mt,_t]=o.Util.getAxialAlignedBoundingBox([0,0,wt,xt],Tt);this.ctx.fillRect(At,at,mt-At,_t-at)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){(0,o.unreachable)("Should not call beginInlineImage")}beginImageData(){(0,o.unreachable)("Should not call beginImageData")}paintFormXObjectBegin(ct,dt){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),Array.isArray(ct)&&ct.length===6&&this.transform(...ct),this.baseTransform=(0,a.getCurrentTransform)(this.ctx),dt)){const gt=dt[2]-dt[0],Tt=dt[3]-dt[1];this.ctx.rect(dt[0],dt[1],gt,Tt),this.current.updateRectMinMax((0,a.getCurrentTransform)(this.ctx),dt),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(ct){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const dt=this.ctx;ct.isolated||(0,o.info)("TODO: Support non-isolated groups."),ct.knockout&&(0,o.warn)("Knockout groups not supported.");const gt=(0,a.getCurrentTransform)(dt);if(ct.matrix&&dt.transform(...ct.matrix),!ct.bbox)throw new Error("Bounding box is required.");let Tt=o.Util.getAxialAlignedBoundingBox(ct.bbox,(0,a.getCurrentTransform)(dt));const wt=[0,0,dt.canvas.width,dt.canvas.height];Tt=o.Util.intersect(Tt,wt)||[0,0,0,0];const xt=Math.floor(Tt[0]),At=Math.floor(Tt[1]);let at=Math.max(Math.ceil(Tt[2])-xt,1),mt=Math.max(Math.ceil(Tt[3])-At,1),_t=1,Rt=1;at>g&&(_t=at/g,at=g),mt>g&&(Rt=mt/g,mt=g),this.current.startNewPathAndClipBox([0,0,at,mt]);let bt="groupAt"+this.groupLevel;ct.smask&&(bt+="_smask_"+this.smaskCounter++%2);const Ct=this.cachedCanvases.getCanvas(bt,at,mt),$t=Ct.context;$t.scale(1/_t,1/Rt),$t.translate(-xt,-At),$t.transform(...gt),ct.smask?this.smaskStack.push({canvas:Ct.canvas,context:$t,offsetX:xt,offsetY:At,scaleX:_t,scaleY:Rt,subtype:ct.smask.subtype,backdrop:ct.smask.backdrop,transferMap:ct.smask.transferMap||null,startTransformInverse:null}):(dt.setTransform(1,0,0,1,0,0),dt.translate(xt,At),dt.scale(_t,Rt),dt.save()),lt(dt,$t),this.ctx=$t,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(dt),this.groupLevel++}endGroup(ct){if(!this.contentVisible)return;this.groupLevel--;const dt=this.ctx,gt=this.groupStack.pop();if(this.ctx=gt,this.ctx.imageSmoothingEnabled=!1,ct.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const Tt=(0,a.getCurrentTransform)(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...Tt);const wt=o.Util.getAxialAlignedBoundingBox([0,0,dt.canvas.width,dt.canvas.height],Tt);this.ctx.drawImage(dt.canvas,0,0),this.ctx.restore(),this.compose(wt)}}beginAnnotation(ct,dt,gt,Tt,wt){if(this.#e(),ut(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),Array.isArray(dt)&&dt.length===4){const xt=dt[2]-dt[0],At=dt[3]-dt[1];if(wt&&this.annotationCanvasMap){gt=gt.slice(),gt[4]-=dt[0],gt[5]-=dt[1],dt=dt.slice(),dt[0]=dt[1]=0,dt[2]=xt,dt[3]=At;const[at,mt]=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(this.ctx)),{viewportScale:_t}=this,Rt=Math.ceil(xt*this.outputScaleX*_t),bt=Math.ceil(At*this.outputScaleY*_t);this.annotationCanvas=this.canvasFactory.create(Rt,bt);const{canvas:Ct,context:$t}=this.annotationCanvas;this.annotationCanvasMap.set(ct,Ct),this.annotationCanvas.savedCtx=this.ctx,this.ctx=$t,this.ctx.save(),this.ctx.setTransform(at,0,0,-mt,0,At*mt),ut(this.ctx)}else ut(this.ctx),this.ctx.rect(dt[0],dt[1],xt,At),this.ctx.clip(),this.endPath()}this.current=new ot(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...gt),this.transform(...Tt)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),this.#t(),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(ct){if(!this.contentVisible)return;const dt=ct.count;ct=this.getObject(ct.data,ct),ct.count=dt;const gt=this.ctx,Tt=this.processingType3;if(Tt&&(Tt.compiled===void 0&&(Tt.compiled=nt(ct)),Tt.compiled)){Tt.compiled(gt);return}const wt=this._createMaskCanvas(ct),xt=wt.canvas;gt.save(),gt.setTransform(1,0,0,1,0,0),gt.drawImage(xt,wt.offsetX,wt.offsetY),gt.restore(),this.compose()}paintImageMaskXObjectRepeat(ct,dt,gt=0,Tt=0,wt,xt){if(!this.contentVisible)return;ct=this.getObject(ct.data,ct);const At=this.ctx;At.save();const at=(0,a.getCurrentTransform)(At);At.transform(dt,gt,Tt,wt,0,0);const mt=this._createMaskCanvas(ct);At.setTransform(1,0,0,1,mt.offsetX-at[4],mt.offsetY-at[5]);for(let _t=0,Rt=xt.length;_t<Rt;_t+=2){const bt=o.Util.transform(at,[dt,gt,Tt,wt,xt[_t],xt[_t+1]]),[Ct,$t]=o.Util.applyTransform([0,0],bt);At.drawImage(mt.canvas,Ct,$t)}At.restore(),this.compose()}paintImageMaskXObjectGroup(ct){if(!this.contentVisible)return;const dt=this.ctx,gt=this.current.fillColor,Tt=this.current.patternFill;for(const wt of ct){const{data:xt,width:At,height:at,transform:mt}=wt,_t=this.cachedCanvases.getCanvas("maskCanvas",At,at),Rt=_t.context;Rt.save();const bt=this.getObject(xt,wt);pt(Rt,bt),Rt.globalCompositeOperation="source-in",Rt.fillStyle=Tt?gt.getPattern(Rt,this,(0,a.getCurrentTransformInverse)(dt),c.PathType.FILL):gt,Rt.fillRect(0,0,At,at),Rt.restore(),dt.save(),dt.transform(...mt),dt.scale(1,-1),st(dt,_t.canvas,0,0,At,at,0,-1,1,1),dt.restore()}this.compose()}paintImageXObject(ct){if(!this.contentVisible)return;const dt=this.getObject(ct);if(!dt){(0,o.warn)("Dependent image isn't ready yet");return}this.paintInlineImageXObject(dt)}paintImageXObjectRepeat(ct,dt,gt,Tt){if(!this.contentVisible)return;const wt=this.getObject(ct);if(!wt){(0,o.warn)("Dependent image isn't ready yet");return}const xt=wt.width,At=wt.height,at=[];for(let mt=0,_t=Tt.length;mt<_t;mt+=2)at.push({transform:[dt,0,0,gt,Tt[mt],Tt[mt+1]],x:0,y:0,w:xt,h:At});this.paintInlineImageXObjectGroup(wt,at)}applyTransferMapsToCanvas(ct){return this.current.transferMaps!=="none"&&(ct.filter=this.current.transferMaps,ct.drawImage(ct.canvas,0,0),ct.filter="none"),ct.canvas}applyTransferMapsToBitmap(ct){if(this.current.transferMaps==="none")return ct.bitmap;const{bitmap:dt,width:gt,height:Tt}=ct,wt=this.cachedCanvases.getCanvas("inlineImage",gt,Tt),xt=wt.context;return xt.filter=this.current.transferMaps,xt.drawImage(dt,0,0),xt.filter="none",wt.canvas}paintInlineImageXObject(ct){if(!this.contentVisible)return;const dt=ct.width,gt=ct.height,Tt=this.ctx;if(this.save(),!o.isNodeJS){const{filter:At}=Tt;At!=="none"&&At!==""&&(Tt.filter="none")}Tt.scale(1/dt,-1/gt);let wt;if(ct.bitmap)wt=this.applyTransferMapsToBitmap(ct);else if(typeof HTMLElement=="function"&&ct instanceof HTMLElement||!ct.data)wt=ct;else{const at=this.cachedCanvases.getCanvas("inlineImage",dt,gt).context;ht(at,ct),wt=this.applyTransferMapsToCanvas(at)}const xt=this._scaleImage(wt,(0,a.getCurrentTransformInverse)(Tt));Tt.imageSmoothingEnabled=Qt((0,a.getCurrentTransform)(Tt),ct.interpolate),st(Tt,xt.img,0,0,xt.paintWidth,xt.paintHeight,0,-gt,dt,gt),this.compose(),this.restore()}paintInlineImageXObjectGroup(ct,dt){if(!this.contentVisible)return;const gt=this.ctx;let Tt;if(ct.bitmap)Tt=ct.bitmap;else{const wt=ct.width,xt=ct.height,at=this.cachedCanvases.getCanvas("inlineImage",wt,xt).context;ht(at,ct),Tt=this.applyTransferMapsToCanvas(at)}for(const wt of dt)gt.save(),gt.transform(...wt.transform),gt.scale(1,-1),st(gt,Tt,wt.x,wt.y,wt.w,wt.h,0,-1,1,1),gt.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(ct){}markPointProps(ct,dt){}beginMarkedContent(ct){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(ct,dt){ct==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(dt)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(ct){const dt=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(ct);const gt=this.ctx;this.pendingClip&&(dt||(this.pendingClip===Ht?gt.clip("evenodd"):gt.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),gt.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const ct=(0,a.getCurrentTransform)(this.ctx);if(ct[1]===0&&ct[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(ct[0]),Math.abs(ct[3]));else{const dt=Math.abs(ct[0]*ct[3]-ct[2]*ct[1]),gt=Math.hypot(ct[0],ct[2]),Tt=Math.hypot(ct[1],ct[3]);this._cachedGetSinglePixelWidth=Math.max(gt,Tt)/dt}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:ct}=this.current,{a:dt,b:gt,c:Tt,d:wt}=this.ctx.getTransform();let xt,At;if(gt===0&&Tt===0){const at=Math.abs(dt),mt=Math.abs(wt);if(at===mt)if(ct===0)xt=At=1/at;else{const _t=at*ct;xt=At=_t<1?1/_t:1}else if(ct===0)xt=1/at,At=1/mt;else{const _t=at*ct,Rt=mt*ct;xt=_t<1?1/_t:1,At=Rt<1?1/Rt:1}}else{const at=Math.abs(dt*wt-gt*Tt),mt=Math.hypot(dt,gt),_t=Math.hypot(Tt,wt);if(ct===0)xt=_t/at,At=mt/at;else{const Rt=ct*at;xt=_t>Rt?_t/Rt:1,At=mt>Rt?mt/Rt:1}}this._cachedScaleForStroking[0]=xt,this._cachedScaleForStroking[1]=At}return this._cachedScaleForStroking}rescaleAndStroke(ct){const{ctx:dt}=this,{lineWidth:gt}=this.current,[Tt,wt]=this.getScaleForStroking();if(dt.lineWidth=gt||1,Tt===1&&wt===1){dt.stroke();return}const xt=dt.getLineDash();if(ct&&dt.save(),dt.scale(Tt,wt),xt.length>0){const At=Math.max(Tt,wt);dt.setLineDash(xt.map(at=>at/At)),dt.lineDashOffset/=At}dt.stroke(),ct&&dt.restore()}isContentVisible(){for(let ct=this.markedContentStack.length-1;ct>=0;ct--)if(!this.markedContentStack[ct].visible)return!1;return!0}}e.CanvasGraphics=St;for(const ft in o.OPS)St.prototype[ft]!==void 0&&(St.prototype[o.OPS[ft]]=St.prototype[ft])},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TilingPattern=e.PathType=void 0,e.getShadingPattern=rt;var o=s(1),a=s(6);const c={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};e.PathType=c;function h(st,nt){if(!nt)return;const ot=nt[2]-nt[0],ht=nt[3]-nt[1],pt=new Path2D;pt.rect(nt[0],nt[1],ot,ht),st.clip(pt)}class _{constructor(){this.constructor===_&&(0,o.unreachable)("Cannot initialize BaseShadingPattern.")}getPattern(){(0,o.unreachable)("Abstract method `getPattern` called.")}}class $ extends _{constructor(nt){super(),this._type=nt[1],this._bbox=nt[2],this._colorStops=nt[3],this._p0=nt[4],this._p1=nt[5],this._r0=nt[6],this._r1=nt[7],this.matrix=null}_createGradient(nt){let ot;this._type==="axial"?ot=nt.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(ot=nt.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const ht of this._colorStops)ot.addColorStop(ht[0],ht[1]);return ot}getPattern(nt,ot,ht,pt){let lt;if(pt===c.STROKE||pt===c.FILL){const ut=ot.current.getClippedPathBoundingBox(pt,(0,a.getCurrentTransform)(nt))||[0,0,0,0],yt=Math.ceil(ut[2]-ut[0])||1,Pt=Math.ceil(ut[3]-ut[1])||1,vt=ot.cachedCanvases.getCanvas("pattern",yt,Pt,!0),Vt=vt.context;Vt.clearRect(0,0,Vt.canvas.width,Vt.canvas.height),Vt.beginPath(),Vt.rect(0,0,Vt.canvas.width,Vt.canvas.height),Vt.translate(-ut[0],-ut[1]),ht=o.Util.transform(ht,[1,0,0,1,ut[0],ut[1]]),Vt.transform(...ot.baseTransform),this.matrix&&Vt.transform(...this.matrix),h(Vt,this._bbox),Vt.fillStyle=this._createGradient(Vt),Vt.fill(),lt=nt.createPattern(vt.canvas,"no-repeat");const Dt=new DOMMatrix(ht);lt.setTransform(Dt)}else h(nt,this._bbox),lt=this._createGradient(nt);return lt}}function g(st,nt,ot,ht,pt,lt,ut,yt){const Pt=nt.coords,vt=nt.colors,Vt=st.data,Dt=st.width*4;let Qt;Pt[ot+1]>Pt[ht+1]&&(Qt=ot,ot=ht,ht=Qt,Qt=lt,lt=ut,ut=Qt),Pt[ht+1]>Pt[pt+1]&&(Qt=ht,ht=pt,pt=Qt,Qt=ut,ut=yt,yt=Qt),Pt[ot+1]>Pt[ht+1]&&(Qt=ot,ot=ht,ht=Qt,Qt=lt,lt=ut,ut=Qt);const Wt=(Pt[ot]+nt.offsetX)*nt.scaleX,Kt=(Pt[ot+1]+nt.offsetY)*nt.scaleY,tn=(Pt[ht]+nt.offsetX)*nt.scaleX,Ht=(Pt[ht+1]+nt.offsetY)*nt.scaleY,St=(Pt[pt]+nt.offsetX)*nt.scaleX,ft=(Pt[pt+1]+nt.offsetY)*nt.scaleY;if(Kt>=ft)return;const ct=vt[lt],dt=vt[lt+1],gt=vt[lt+2],Tt=vt[ut],wt=vt[ut+1],xt=vt[ut+2],At=vt[yt],at=vt[yt+1],mt=vt[yt+2],_t=Math.round(Kt),Rt=Math.round(ft);let bt,Ct,$t,Ut,en,Nt,Bt,zt;for(let Gt=_t;Gt<=Rt;Gt++){if(Gt<Ht){const En=Gt<Kt?0:(Kt-Gt)/(Kt-Ht);bt=Wt-(Wt-tn)*En,Ct=ct-(ct-Tt)*En,$t=dt-(dt-wt)*En,Ut=gt-(gt-xt)*En}else{let En;Gt>ft?En=1:Ht===ft?En=0:En=(Ht-Gt)/(Ht-ft),bt=tn-(tn-St)*En,Ct=Tt-(Tt-At)*En,$t=wt-(wt-at)*En,Ut=xt-(xt-mt)*En}let Xt;Gt<Kt?Xt=0:Gt>ft?Xt=1:Xt=(Kt-Gt)/(Kt-ft),en=Wt-(Wt-St)*Xt,Nt=ct-(ct-At)*Xt,Bt=dt-(dt-at)*Xt,zt=gt-(gt-mt)*Xt;const sn=Math.round(Math.min(bt,en)),cn=Math.round(Math.max(bt,en));let mn=Dt*Gt+sn*4;for(let En=sn;En<=cn;En++)Xt=(bt-En)/(bt-en),Xt<0?Xt=0:Xt>1&&(Xt=1),Vt[mn++]=Ct-(Ct-Nt)*Xt|0,Vt[mn++]=$t-($t-Bt)*Xt|0,Vt[mn++]=Ut-(Ut-zt)*Xt|0,Vt[mn++]=255}}function d(st,nt,ot){const ht=nt.coords,pt=nt.colors;let lt,ut;switch(nt.type){case"lattice":const yt=nt.verticesPerRow,Pt=Math.floor(ht.length/yt)-1,vt=yt-1;for(lt=0;lt<Pt;lt++){let Vt=lt*yt;for(let Dt=0;Dt<vt;Dt++,Vt++)g(st,ot,ht[Vt],ht[Vt+1],ht[Vt+yt],pt[Vt],pt[Vt+1],pt[Vt+yt]),g(st,ot,ht[Vt+yt+1],ht[Vt+1],ht[Vt+yt],pt[Vt+yt+1],pt[Vt+1],pt[Vt+yt])}break;case"triangles":for(lt=0,ut=ht.length;lt<ut;lt+=3)g(st,ot,ht[lt],ht[lt+1],ht[lt+2],pt[lt],pt[lt+1],pt[lt+2]);break;default:throw new Error("illegal figure")}}class j extends _{constructor(nt){super(),this._coords=nt[2],this._colors=nt[3],this._figures=nt[4],this._bounds=nt[5],this._bbox=nt[7],this._background=nt[8],this.matrix=null}_createMeshCanvas(nt,ot,ht){const yt=Math.floor(this._bounds[0]),Pt=Math.floor(this._bounds[1]),vt=Math.ceil(this._bounds[2])-yt,Vt=Math.ceil(this._bounds[3])-Pt,Dt=Math.min(Math.ceil(Math.abs(vt*nt[0]*1.1)),3e3),Qt=Math.min(Math.ceil(Math.abs(Vt*nt[1]*1.1)),3e3),Wt=vt/Dt,Kt=Vt/Qt,tn={coords:this._coords,colors:this._colors,offsetX:-yt,offsetY:-Pt,scaleX:1/Wt,scaleY:1/Kt},Ht=Dt+2*2,St=Qt+2*2,ft=ht.getCanvas("mesh",Ht,St,!1),ct=ft.context,dt=ct.createImageData(Dt,Qt);if(ot){const Tt=dt.data;for(let wt=0,xt=Tt.length;wt<xt;wt+=4)Tt[wt]=ot[0],Tt[wt+1]=ot[1],Tt[wt+2]=ot[2],Tt[wt+3]=255}for(const Tt of this._figures)d(dt,Tt,tn);return ct.putImageData(dt,2,2),{canvas:ft.canvas,offsetX:yt-2*Wt,offsetY:Pt-2*Kt,scaleX:Wt,scaleY:Kt}}getPattern(nt,ot,ht,pt){h(nt,this._bbox);let lt;if(pt===c.SHADING)lt=o.Util.singularValueDecompose2dScale((0,a.getCurrentTransform)(nt));else if(lt=o.Util.singularValueDecompose2dScale(ot.baseTransform),this.matrix){const yt=o.Util.singularValueDecompose2dScale(this.matrix);lt=[lt[0]*yt[0],lt[1]*yt[1]]}const ut=this._createMeshCanvas(lt,pt===c.SHADING?null:this._background,ot.cachedCanvases);return pt!==c.SHADING&&(nt.setTransform(...ot.baseTransform),this.matrix&&nt.transform(...this.matrix)),nt.translate(ut.offsetX,ut.offsetY),nt.scale(ut.scaleX,ut.scaleY),nt.createPattern(ut.canvas,"no-repeat")}}class tt extends _{getPattern(){return"hotpink"}}function rt(st){switch(st[0]){case"RadialAxial":return new $(st);case"Mesh":return new j(st);case"Dummy":return new tt}throw new Error(`Unknown IR type: ${st[0]}`)}const et={COLORED:1,UNCOLORED:2};class it{static MAX_PATTERN_SIZE=3e3;constructor(nt,ot,ht,pt,lt){this.operatorList=nt[2],this.matrix=nt[3]||[1,0,0,1,0,0],this.bbox=nt[4],this.xstep=nt[5],this.ystep=nt[6],this.paintType=nt[7],this.tilingType=nt[8],this.color=ot,this.ctx=ht,this.canvasGraphicsFactory=pt,this.baseTransform=lt}createPatternCanvas(nt){const ot=this.operatorList,ht=this.bbox,pt=this.xstep,lt=this.ystep,ut=this.paintType,yt=this.tilingType,Pt=this.color,vt=this.canvasGraphicsFactory;(0,o.info)("TilingType: "+yt);const Vt=ht[0],Dt=ht[1],Qt=ht[2],Wt=ht[3],Kt=o.Util.singularValueDecompose2dScale(this.matrix),tn=o.Util.singularValueDecompose2dScale(this.baseTransform),Ht=[Kt[0]*tn[0],Kt[1]*tn[1]],St=this.getSizeAndScale(pt,this.ctx.canvas.width,Ht[0]),ft=this.getSizeAndScale(lt,this.ctx.canvas.height,Ht[1]),ct=nt.cachedCanvases.getCanvas("pattern",St.size,ft.size,!0),dt=ct.context,gt=vt.createCanvasGraphics(dt);gt.groupLevel=nt.groupLevel,this.setFillAndStrokeStyleToContext(gt,ut,Pt);let Tt=Vt,wt=Dt,xt=Qt,At=Wt;return Vt<0&&(Tt=0,xt+=Math.abs(Vt)),Dt<0&&(wt=0,At+=Math.abs(Dt)),dt.translate(-(St.scale*Tt),-(ft.scale*wt)),gt.transform(St.scale,0,0,ft.scale,0,0),dt.save(),this.clipBbox(gt,Tt,wt,xt,At),gt.baseTransform=(0,a.getCurrentTransform)(gt.ctx),gt.executeOperatorList(ot),gt.endDrawing(),{canvas:ct.canvas,scaleX:St.scale,scaleY:ft.scale,offsetX:Tt,offsetY:wt}}getSizeAndScale(nt,ot,ht){nt=Math.abs(nt);const pt=Math.max(it.MAX_PATTERN_SIZE,ot);let lt=Math.ceil(nt*ht);return lt>=pt?lt=pt:ht=lt/nt,{scale:ht,size:lt}}clipBbox(nt,ot,ht,pt,lt){const ut=pt-ot,yt=lt-ht;nt.ctx.rect(ot,ht,ut,yt),nt.current.updateRectMinMax((0,a.getCurrentTransform)(nt.ctx),[ot,ht,pt,lt]),nt.clip(),nt.endPath()}setFillAndStrokeStyleToContext(nt,ot,ht){const pt=nt.ctx,lt=nt.current;switch(ot){case et.COLORED:const ut=this.ctx;pt.fillStyle=ut.fillStyle,pt.strokeStyle=ut.strokeStyle,lt.fillColor=ut.fillStyle,lt.strokeColor=ut.strokeStyle;break;case et.UNCOLORED:const yt=o.Util.makeHexColor(ht[0],ht[1],ht[2]);pt.fillStyle=yt,pt.strokeStyle=yt,lt.fillColor=yt,lt.strokeColor=yt;break;default:throw new o.FormatError(`Unsupported paint type: ${ot}`)}}getPattern(nt,ot,ht,pt){let lt=ht;pt!==c.SHADING&&(lt=o.Util.transform(lt,ot.baseTransform),this.matrix&&(lt=o.Util.transform(lt,this.matrix)));const ut=this.createPatternCanvas(ot);let yt=new DOMMatrix(lt);yt=yt.translate(ut.offsetX,ut.offsetY),yt=yt.scale(1/ut.scaleX,1/ut.scaleY);const Pt=nt.createPattern(ut.canvas,"repeat");return Pt.setTransform(yt),Pt}}e.TilingPattern=it},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.convertBlackAndWhiteToRGBA=c,e.convertToRGBA=a,e.grayToRGBA=_;var o=s(1);function a($){switch($.kind){case o.ImageKind.GRAYSCALE_1BPP:return c($);case o.ImageKind.RGB_24BPP:return h($)}return null}function c({src:$,srcPos:g=0,dest:d,width:j,height:tt,nonBlackColor:rt=4294967295,inverseDecode:et=!1}){const it=o.FeatureTest.isLittleEndian?4278190080:255,[st,nt]=et?[rt,it]:[it,rt],ot=j>>3,ht=j&7,pt=$.length;d=new Uint32Array(d.buffer);let lt=0;for(let ut=0;ut<tt;ut++){for(const Pt=g+ot;g<Pt;g++){const vt=g<pt?$[g]:255;d[lt++]=vt&128?nt:st,d[lt++]=vt&64?nt:st,d[lt++]=vt&32?nt:st,d[lt++]=vt&16?nt:st,d[lt++]=vt&8?nt:st,d[lt++]=vt&4?nt:st,d[lt++]=vt&2?nt:st,d[lt++]=vt&1?nt:st}if(ht===0)continue;const yt=g<pt?$[g++]:255;for(let Pt=0;Pt<ht;Pt++)d[lt++]=yt&1<<7-Pt?nt:st}return{srcPos:g,destPos:lt}}function h({src:$,srcPos:g=0,dest:d,destPos:j=0,width:tt,height:rt}){let et=0;const it=$.length>>2,st=new Uint32Array($.buffer,g,it);if(o.FeatureTest.isLittleEndian){for(;et<it-2;et+=3,j+=4){const nt=st[et],ot=st[et+1],ht=st[et+2];d[j]=nt|4278190080,d[j+1]=nt>>>24|ot<<8|4278190080,d[j+2]=ot>>>16|ht<<16|4278190080,d[j+3]=ht>>>8|4278190080}for(let nt=et*4,ot=$.length;nt<ot;nt+=3)d[j++]=$[nt]|$[nt+1]<<8|$[nt+2]<<16|4278190080}else{for(;et<it-2;et+=3,j+=4){const nt=st[et],ot=st[et+1],ht=st[et+2];d[j]=nt|255,d[j+1]=nt<<24|ot>>>8|255,d[j+2]=ot<<16|ht>>>16|255,d[j+3]=ht<<8|255}for(let nt=et*4,ot=$.length;nt<ot;nt+=3)d[j++]=$[nt]<<24|$[nt+1]<<16|$[nt+2]<<8|255}return{srcPos:g,destPos:j}}function _($,g){if(o.FeatureTest.isLittleEndian)for(let d=0,j=$.length;d<j;d++)g[d]=$[d]*65793|4278190080;else for(let d=0,j=$.length;d<j;d++)g[d]=$[d]*16843008|255}},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.GlobalWorkerOptions=void 0;const s=Object.create(null);e.GlobalWorkerOptions=s,s.workerPort=null,s.workerSrc=""},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var o=s(1);const a={UNKNOWN:0,DATA:1,ERROR:2},c={UNKNOWN:0,CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function h($){switch($ instanceof Error||typeof $=="object"&&$!==null||(0,o.unreachable)('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),$.name){case"AbortException":return new o.AbortException($.message);case"MissingPDFException":return new o.MissingPDFException($.message);case"PasswordException":return new o.PasswordException($.message,$.code);case"UnexpectedResponseException":return new o.UnexpectedResponseException($.message,$.status);case"UnknownErrorException":return new o.UnknownErrorException($.message,$.details);default:return new o.UnknownErrorException($.message,$.toString())}}class _{constructor(g,d,j){this.sourceName=g,this.targetName=d,this.comObj=j,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),this._onComObjOnMessage=tt=>{const rt=tt.data;if(rt.targetName!==this.sourceName)return;if(rt.stream){this.#t(rt);return}if(rt.callback){const it=rt.callbackId,st=this.callbackCapabilities[it];if(!st)throw new Error(`Cannot resolve callback ${it}`);if(delete this.callbackCapabilities[it],rt.callback===a.DATA)st.resolve(rt.data);else if(rt.callback===a.ERROR)st.reject(h(rt.reason));else throw new Error("Unexpected callback case");return}const et=this.actionHandler[rt.action];if(!et)throw new Error(`Unknown action from worker: ${rt.action}`);if(rt.callbackId){const it=this.sourceName,st=rt.sourceName;new Promise(function(nt){nt(et(rt.data))}).then(function(nt){j.postMessage({sourceName:it,targetName:st,callback:a.DATA,callbackId:rt.callbackId,data:nt})},function(nt){j.postMessage({sourceName:it,targetName:st,callback:a.ERROR,callbackId:rt.callbackId,reason:h(nt)})});return}if(rt.streamId){this.#e(rt);return}et(rt.data)},j.addEventListener("message",this._onComObjOnMessage)}on(g,d){const j=this.actionHandler;if(j[g])throw new Error(`There is already an actionName called "${g}"`);j[g]=d}send(g,d,j){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,data:d},j)}sendWithPromise(g,d,j){const tt=this.callbackId++,rt=new o.PromiseCapability;this.callbackCapabilities[tt]=rt;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:g,callbackId:tt,data:d},j)}catch(et){rt.reject(et)}return rt.promise}sendWithStream(g,d,j,tt){const rt=this.streamId++,et=this.sourceName,it=this.targetName,st=this.comObj;return new ReadableStream({start:nt=>{const ot=new o.PromiseCapability;return this.streamControllers[rt]={controller:nt,startCall:ot,pullCall:null,cancelCall:null,isClosed:!1},st.postMessage({sourceName:et,targetName:it,action:g,streamId:rt,data:d,desiredSize:nt.desiredSize},tt),ot.promise},pull:nt=>{const ot=new o.PromiseCapability;return this.streamControllers[rt].pullCall=ot,st.postMessage({sourceName:et,targetName:it,stream:c.PULL,streamId:rt,desiredSize:nt.desiredSize}),ot.promise},cancel:nt=>{(0,o.assert)(nt instanceof Error,"cancel must have a valid reason");const ot=new o.PromiseCapability;return this.streamControllers[rt].cancelCall=ot,this.streamControllers[rt].isClosed=!0,st.postMessage({sourceName:et,targetName:it,stream:c.CANCEL,streamId:rt,reason:h(nt)}),ot.promise}},j)}#e(g){const d=g.streamId,j=this.sourceName,tt=g.sourceName,rt=this.comObj,et=this,it=this.actionHandler[g.action],st={enqueue(nt,ot=1,ht){if(this.isCancelled)return;const pt=this.desiredSize;this.desiredSize-=ot,pt>0&&this.desiredSize<=0&&(this.sinkCapability=new o.PromiseCapability,this.ready=this.sinkCapability.promise),rt.postMessage({sourceName:j,targetName:tt,stream:c.ENQUEUE,streamId:d,chunk:nt},ht)},close(){this.isCancelled||(this.isCancelled=!0,rt.postMessage({sourceName:j,targetName:tt,stream:c.CLOSE,streamId:d}),delete et.streamSinks[d])},error(nt){(0,o.assert)(nt instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,rt.postMessage({sourceName:j,targetName:tt,stream:c.ERROR,streamId:d,reason:h(nt)}))},sinkCapability:new o.PromiseCapability,onPull:null,onCancel:null,isCancelled:!1,desiredSize:g.desiredSize,ready:null};st.sinkCapability.resolve(),st.ready=st.sinkCapability.promise,this.streamSinks[d]=st,new Promise(function(nt){nt(it(g.data,st))}).then(function(){rt.postMessage({sourceName:j,targetName:tt,stream:c.START_COMPLETE,streamId:d,success:!0})},function(nt){rt.postMessage({sourceName:j,targetName:tt,stream:c.START_COMPLETE,streamId:d,reason:h(nt)})})}#t(g){const d=g.streamId,j=this.sourceName,tt=g.sourceName,rt=this.comObj,et=this.streamControllers[d],it=this.streamSinks[d];switch(g.stream){case c.START_COMPLETE:g.success?et.startCall.resolve():et.startCall.reject(h(g.reason));break;case c.PULL_COMPLETE:g.success?et.pullCall.resolve():et.pullCall.reject(h(g.reason));break;case c.PULL:if(!it){rt.postMessage({sourceName:j,targetName:tt,stream:c.PULL_COMPLETE,streamId:d,success:!0});break}it.desiredSize<=0&&g.desiredSize>0&&it.sinkCapability.resolve(),it.desiredSize=g.desiredSize,new Promise(function(st){st(it.onPull?.())}).then(function(){rt.postMessage({sourceName:j,targetName:tt,stream:c.PULL_COMPLETE,streamId:d,success:!0})},function(st){rt.postMessage({sourceName:j,targetName:tt,stream:c.PULL_COMPLETE,streamId:d,reason:h(st)})});break;case c.ENQUEUE:if((0,o.assert)(et,"enqueue should have stream controller"),et.isClosed)break;et.controller.enqueue(g.chunk);break;case c.CLOSE:if((0,o.assert)(et,"close should have stream controller"),et.isClosed)break;et.isClosed=!0,et.controller.close(),this.#n(et,d);break;case c.ERROR:(0,o.assert)(et,"error should have stream controller"),et.controller.error(h(g.reason)),this.#n(et,d);break;case c.CANCEL_COMPLETE:g.success?et.cancelCall.resolve():et.cancelCall.reject(h(g.reason)),this.#n(et,d);break;case c.CANCEL:if(!it)break;new Promise(function(st){st(it.onCancel?.(h(g.reason)))}).then(function(){rt.postMessage({sourceName:j,targetName:tt,stream:c.CANCEL_COMPLETE,streamId:d,success:!0})},function(st){rt.postMessage({sourceName:j,targetName:tt,stream:c.CANCEL_COMPLETE,streamId:d,reason:h(st)})}),it.sinkCapability.reject(h(g.reason)),it.isCancelled=!0,delete this.streamSinks[d];break;default:throw new Error("Unexpected stream case")}}async#n(g,d){await Promise.allSettled([g.startCall?.promise,g.pullCall?.promise,g.cancelCall?.promise]),delete this.streamControllers[d]}destroy(){this.comObj.removeEventListener("message",this._onComObjOnMessage)}}e.MessageHandler=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Metadata=void 0;var o=s(1);class a{#e;#t;constructor({parsedData:h,rawData:_}){this.#e=h,this.#t=_}getRaw(){return this.#t}get(h){return this.#e.get(h)??null}getAll(){return(0,o.objectFromMap)(this.#e)}has(h){return this.#e.has(h)}}e.Metadata=a},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.OptionalContentConfig=void 0;var o=s(1),a=s(8);const c=Symbol("INTERNAL");class h{#e=!0;constructor(g,d){this.name=g,this.intent=d}get visible(){return this.#e}_setVisible(g,d){g!==c&&(0,o.unreachable)("Internal method `_setVisible` called."),this.#e=d}}class _{#e=null;#t=new Map;#n=null;#r=null;constructor(g){if(this.name=null,this.creator=null,g!==null){this.name=g.name,this.creator=g.creator,this.#r=g.order;for(const d of g.groups)this.#t.set(d.id,new h(d.name,d.intent));if(g.baseState==="OFF")for(const d of this.#t.values())d._setVisible(c,!1);for(const d of g.on)this.#t.get(d)._setVisible(c,!0);for(const d of g.off)this.#t.get(d)._setVisible(c,!1);this.#n=this.getHash()}}#a(g){const d=g.length;if(d<2)return!0;const j=g[0];for(let tt=1;tt<d;tt++){const rt=g[tt];let et;if(Array.isArray(rt))et=this.#a(rt);else if(this.#t.has(rt))et=this.#t.get(rt).visible;else return(0,o.warn)(`Optional content group not found: ${rt}`),!0;switch(j){case"And":if(!et)return!1;break;case"Or":if(et)return!0;break;case"Not":return!et;default:return!0}}return j==="And"}isVisible(g){if(this.#t.size===0)return!0;if(!g)return(0,o.warn)("Optional content group not defined."),!0;if(g.type==="OCG")return this.#t.has(g.id)?this.#t.get(g.id).visible:((0,o.warn)(`Optional content group not found: ${g.id}`),!0);if(g.type==="OCMD"){if(g.expression)return this.#a(g.expression);if(!g.policy||g.policy==="AnyOn"){for(const d of g.ids){if(!this.#t.has(d))return(0,o.warn)(`Optional content group not found: ${d}`),!0;if(this.#t.get(d).visible)return!0}return!1}else if(g.policy==="AllOn"){for(const d of g.ids){if(!this.#t.has(d))return(0,o.warn)(`Optional content group not found: ${d}`),!0;if(!this.#t.get(d).visible)return!1}return!0}else if(g.policy==="AnyOff"){for(const d of g.ids){if(!this.#t.has(d))return(0,o.warn)(`Optional content group not found: ${d}`),!0;if(!this.#t.get(d).visible)return!0}return!1}else if(g.policy==="AllOff"){for(const d of g.ids){if(!this.#t.has(d))return(0,o.warn)(`Optional content group not found: ${d}`),!0;if(this.#t.get(d).visible)return!1}return!0}return(0,o.warn)(`Unknown optional content policy ${g.policy}.`),!0}return(0,o.warn)(`Unknown group type ${g.type}.`),!0}setVisibility(g,d=!0){if(!this.#t.has(g)){(0,o.warn)(`Optional content group not found: ${g}`);return}this.#t.get(g)._setVisible(c,!!d),this.#e=null}get hasInitialVisibility(){return this.#n===null||this.getHash()===this.#n}getOrder(){return this.#t.size?this.#r?this.#r.slice():[...this.#t.keys()]:null}getGroups(){return this.#t.size>0?(0,o.objectFromMap)(this.#t):null}getGroup(g){return this.#t.get(g)||null}getHash(){if(this.#e!==null)return this.#e;const g=new a.MurmurHash3_64;for(const[d,j]of this.#t)g.update(`${d}:${j.visible}`);return this.#e=g.hexdigest()}}e.OptionalContentConfig=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFDataTransportStream=void 0;var o=s(1),a=s(6);class c{constructor({length:g,initialData:d,progressiveDone:j=!1,contentDispositionFilename:tt=null,disableRange:rt=!1,disableStream:et=!1},it){if((0,o.assert)(it,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.'),this._queuedChunks=[],this._progressiveDone=j,this._contentDispositionFilename=tt,d?.length>0){const st=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;this._queuedChunks.push(st)}this._pdfDataRangeTransport=it,this._isStreamingSupported=!et,this._isRangeSupported=!rt,this._contentLength=g,this._fullRequestReader=null,this._rangeReaders=[],this._pdfDataRangeTransport.addRangeListener((st,nt)=>{this._onReceiveData({begin:st,chunk:nt})}),this._pdfDataRangeTransport.addProgressListener((st,nt)=>{this._onProgress({loaded:st,total:nt})}),this._pdfDataRangeTransport.addProgressiveReadListener(st=>{this._onReceiveData({chunk:st})}),this._pdfDataRangeTransport.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),this._pdfDataRangeTransport.transportReady()}_onReceiveData({begin:g,chunk:d}){const j=d instanceof Uint8Array&&d.byteLength===d.buffer.byteLength?d.buffer:new Uint8Array(d).buffer;if(g===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(j):this._queuedChunks.push(j);else{const tt=this._rangeReaders.some(function(rt){return rt._begin!==g?!1:(rt._enqueue(j),!0)});(0,o.assert)(tt,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}_onProgress(g){g.total===void 0?this._rangeReaders[0]?.onProgress?.({loaded:g.loaded}):this._fullRequestReader?.onProgress?.({loaded:g.loaded,total:g.total})}_onProgressiveDone(){this._fullRequestReader?.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(g){const d=this._rangeReaders.indexOf(g);d>=0&&this._rangeReaders.splice(d,1)}getFullReader(){(0,o.assert)(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const g=this._queuedChunks;return this._queuedChunks=null,new h(this,g,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(g,d){if(d<=this._progressiveDataLength)return null;const j=new _(this,g,d);return this._pdfDataRangeTransport.requestDataRange(g,d),this._rangeReaders.push(j),j}cancelAllRequests(g){this._fullRequestReader?.cancel(g);for(const d of this._rangeReaders.slice(0))d.cancel(g);this._pdfDataRangeTransport.abort()}}e.PDFDataTransportStream=c;class h{constructor(g,d,j=!1,tt=null){this._stream=g,this._done=j||!1,this._filename=(0,a.isPdfFile)(tt)?tt:null,this._queuedChunks=d||[],this._loaded=0;for(const rt of this._queuedChunks)this._loaded+=rt.byteLength;this._requests=[],this._headersReady=Promise.resolve(),g._fullRequestReader=this,this.onProgress=null}_enqueue(g){this._done||(this._requests.length>0?this._requests.shift().resolve({value:g,done:!1}):this._queuedChunks.push(g),this._loaded+=g.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const g=new o.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class _{constructor(g,d,j){this._stream=g,this._begin=d,this._end=j,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(g){if(!this._done){if(this._requests.length===0)this._queuedChunk=g;else{this._requests.shift().resolve({value:g,done:!1});for(const j of this._requests)j.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const d=this._queuedChunk;return this._queuedChunk=null,{value:d,done:!1}}if(this._done)return{value:void 0,done:!0};const g=new o.PromiseCapability;return this._requests.push(g),g.promise}cancel(g){this._done=!0;for(const d of this._requests)d.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFFetchStream=void 0;var o=s(1),a=s(20);function c(j,tt,rt){return{method:"GET",headers:j,signal:rt.signal,mode:"cors",credentials:tt?"include":"same-origin",redirect:"follow"}}function h(j){const tt=new Headers;for(const rt in j){const et=j[rt];et!==void 0&&tt.append(rt,et)}return tt}function _(j){return j instanceof Uint8Array?j.buffer:j instanceof ArrayBuffer?j:((0,o.warn)(`getArrayBuffer - unexpected data format: ${j}`),new Uint8Array(j).buffer)}class ${constructor(tt){this.source=tt,this.isHttp=/^https?:/i.test(tt.url),this.httpHeaders=this.isHttp&&tt.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new g(this),this._fullRequestReader}getRangeReader(tt,rt){if(rt<=this._progressiveDataLength)return null;const et=new d(this,tt,rt);return this._rangeRequestReaders.push(et),et}cancelAllRequests(tt){this._fullRequestReader?.cancel(tt);for(const rt of this._rangeRequestReaders.slice(0))rt.cancel(tt)}}e.PDFFetchStream=$;class g{constructor(tt){this._stream=tt,this._reader=null,this._loaded=0,this._filename=null;const rt=tt.source;this._withCredentials=rt.withCredentials||!1,this._contentLength=rt.length,this._headersCapability=new o.PromiseCapability,this._disableRange=rt.disableRange||!1,this._rangeChunkSize=rt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!rt.disableStream,this._isRangeSupported=!rt.disableRange,this._headers=h(this._stream.httpHeaders);const et=rt.url;fetch(et,c(this._headers,this._withCredentials,this._abortController)).then(it=>{if(!(0,a.validateResponseStatus)(it.status))throw(0,a.createResponseStatusError)(it.status,et);this._reader=it.body.getReader(),this._headersCapability.resolve();const st=ht=>it.headers.get(ht),{allowRangeRequests:nt,suggestedLength:ot}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:st,isHttp:this._stream.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=nt,this._contentLength=ot||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(st),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new o.AbortException("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._headersCapability.promise;const{value:tt,done:rt}=await this._reader.read();return rt?{value:tt,done:rt}:(this._loaded+=tt.byteLength,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:_(tt),done:!1})}cancel(tt){this._reader?.cancel(tt),this._abortController.abort()}}class d{constructor(tt,rt,et){this._stream=tt,this._reader=null,this._loaded=0;const it=tt.source;this._withCredentials=it.withCredentials||!1,this._readCapability=new o.PromiseCapability,this._isStreamingSupported=!it.disableStream,this._abortController=new AbortController,this._headers=h(this._stream.httpHeaders),this._headers.append("Range",`bytes=${rt}-${et-1}`);const st=it.url;fetch(st,c(this._headers,this._withCredentials,this._abortController)).then(nt=>{if(!(0,a.validateResponseStatus)(nt.status))throw(0,a.createResponseStatusError)(nt.status,st);this._readCapability.resolve(),this._reader=nt.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){await this._readCapability.promise;const{value:tt,done:rt}=await this._reader.read();return rt?{value:tt,done:rt}:(this._loaded+=tt.byteLength,this.onProgress?.({loaded:this._loaded}),{value:_(tt),done:!1})}cancel(tt){this._reader?.cancel(tt),this._abortController.abort()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.createResponseStatusError=$,e.extractFilenameFromHeader=_,e.validateRangeRequestCapabilities=h,e.validateResponseStatus=g;var o=s(1),a=s(21),c=s(6);function h({getResponseHeader:d,isHttp:j,rangeChunkSize:tt,disableRange:rt}){const et={allowRangeRequests:!1,suggestedLength:void 0},it=parseInt(d("Content-Length"),10);return!Number.isInteger(it)||(et.suggestedLength=it,it<=2*tt)||rt||!j||d("Accept-Ranges")!=="bytes"||(d("Content-Encoding")||"identity")!=="identity"||(et.allowRangeRequests=!0),et}function _(d){const j=d("Content-Disposition");if(j){let tt=(0,a.getFilenameFromContentDispositionHeader)(j);if(tt.includes("%"))try{tt=decodeURIComponent(tt)}catch{}if((0,c.isPdfFile)(tt))return tt}return null}function $(d,j){return d===404||d===0&&j.startsWith("file:")?new o.MissingPDFException('Missing PDF "'+j+'".'):new o.UnexpectedResponseException(`Unexpected server response (${d}) while retrieving PDF "${j}".`,d)}function g(d){return d===200||d===206}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.getFilenameFromContentDispositionHeader=a;var o=s(1);function a(c){let h=!0,_=$("filename\\*","i").exec(c);if(_){_=_[1];let it=tt(_);return it=unescape(it),it=rt(it),it=et(it),d(it)}if(_=j(c),_){const it=et(_);return d(it)}if(_=$("filename","i").exec(c),_){_=_[1];let it=tt(_);return it=et(it),d(it)}function $(it,st){return new RegExp("(?:^|;)\\s*"+it+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',st)}function g(it,st){if(it){if(!/^[\x00-\xFF]+$/.test(st))return st;try{const nt=new TextDecoder(it,{fatal:!0}),ot=(0,o.stringToBytes)(st);st=nt.decode(ot),h=!1}catch{}}return st}function d(it){return h&&/[\x80-\xff]/.test(it)&&(it=g("utf-8",it),h&&(it=g("iso-8859-1",it))),it}function j(it){const st=[];let nt;const ot=$("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(nt=ot.exec(it))!==null;){let[,pt,lt,ut]=nt;if(pt=parseInt(pt,10),pt in st){if(pt===0)break;continue}st[pt]=[lt,ut]}const ht=[];for(let pt=0;pt<st.length&&pt in st;++pt){let[lt,ut]=st[pt];ut=tt(ut),lt&&(ut=unescape(ut),pt===0&&(ut=rt(ut))),ht.push(ut)}return ht.join("")}function tt(it){if(it.startsWith('"')){const st=it.slice(1).split('\\"');for(let nt=0;nt<st.length;++nt){const ot=st[nt].indexOf('"');ot!==-1&&(st[nt]=st[nt].slice(0,ot),st.length=nt+1),st[nt]=st[nt].replaceAll(/\\(.)/g,"$1")}it=st.join('"')}return it}function rt(it){const st=it.indexOf("'");if(st===-1)return it;const nt=it.slice(0,st),ht=it.slice(st+1).replace(/^[^']*'/,"");return g(nt,ht)}function et(it){return!it.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(it)?it:it.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(st,nt,ot,ht){if(ot==="q"||ot==="Q")return ht=ht.replaceAll("_"," "),ht=ht.replaceAll(/=([0-9a-fA-F]{2})/g,function(pt,lt){return String.fromCharCode(parseInt(lt,16))}),g(nt,ht);try{ht=atob(ht)}catch{}return g(nt,ht)})}return""}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNetworkStream=void 0;var o=s(1),a=s(20);const c=200,h=206;function _(tt){const rt=tt.response;return typeof rt!="string"?rt:(0,o.stringToBytes)(rt).buffer}class ${constructor(rt,et={}){this.url=rt,this.isHttp=/^https?:/i.test(rt),this.httpHeaders=this.isHttp&&et.httpHeaders||Object.create(null),this.withCredentials=et.withCredentials||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}requestRange(rt,et,it){const st={begin:rt,end:et};for(const nt in it)st[nt]=it[nt];return this.request(st)}requestFull(rt){return this.request(rt)}request(rt){const et=new XMLHttpRequest,it=this.currXhrId++,st=this.pendingRequests[it]={xhr:et};et.open("GET",this.url),et.withCredentials=this.withCredentials;for(const nt in this.httpHeaders){const ot=this.httpHeaders[nt];ot!==void 0&&et.setRequestHeader(nt,ot)}return this.isHttp&&"begin"in rt&&"end"in rt?(et.setRequestHeader("Range",`bytes=${rt.begin}-${rt.end-1}`),st.expectedStatus=h):st.expectedStatus=c,et.responseType="arraybuffer",rt.onError&&(et.onerror=function(nt){rt.onError(et.status)}),et.onreadystatechange=this.onStateChange.bind(this,it),et.onprogress=this.onProgress.bind(this,it),st.onHeadersReceived=rt.onHeadersReceived,st.onDone=rt.onDone,st.onError=rt.onError,st.onProgress=rt.onProgress,et.send(null),it}onProgress(rt,et){const it=this.pendingRequests[rt];it&&it.onProgress?.(et)}onStateChange(rt,et){const it=this.pendingRequests[rt];if(!it)return;const st=it.xhr;if(st.readyState>=2&&it.onHeadersReceived&&(it.onHeadersReceived(),delete it.onHeadersReceived),st.readyState!==4||!(rt in this.pendingRequests))return;if(delete this.pendingRequests[rt],st.status===0&&this.isHttp){it.onError?.(st.status);return}const nt=st.status||c;if(!(nt===c&&it.expectedStatus===h)&&nt!==it.expectedStatus){it.onError?.(st.status);return}const ht=_(st);if(nt===h){const pt=st.getResponseHeader("Content-Range"),lt=/bytes (\d+)-(\d+)\/(\d+)/.exec(pt);it.onDone({begin:parseInt(lt[1],10),chunk:ht})}else ht?it.onDone({begin:0,chunk:ht}):it.onError?.(st.status)}getRequestXhr(rt){return this.pendingRequests[rt].xhr}isPendingRequest(rt){return rt in this.pendingRequests}abortRequest(rt){const et=this.pendingRequests[rt].xhr;delete this.pendingRequests[rt],et.abort()}}class g{constructor(rt){this._source=rt,this._manager=new $(rt.url,{httpHeaders:rt.httpHeaders,withCredentials:rt.withCredentials}),this._rangeChunkSize=rt.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(rt){const et=this._rangeRequestReaders.indexOf(rt);et>=0&&this._rangeRequestReaders.splice(et,1)}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new d(this._manager,this._source),this._fullRequestReader}getRangeReader(rt,et){const it=new j(this._manager,rt,et);return it.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(it),it}cancelAllRequests(rt){this._fullRequestReader?.cancel(rt);for(const et of this._rangeRequestReaders.slice(0))et.cancel(rt)}}e.PDFNetworkStream=g;class d{constructor(rt,et){this._manager=rt;const it={onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=et.url,this._fullRequestId=rt.requestFull(it),this._headersReceivedCapability=new o.PromiseCapability,this._disableRange=et.disableRange||!1,this._contentLength=et.length,this._rangeChunkSize=et.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const rt=this._fullRequestId,et=this._manager.getRequestXhr(rt),it=ot=>et.getResponseHeader(ot),{allowRangeRequests:st,suggestedLength:nt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:it,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});st&&(this._isRangeSupported=!0),this._contentLength=nt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(it),this._isRangeSupported&&this._manager.abortRequest(rt),this._headersReceivedCapability.resolve()}_onDone(rt){if(rt&&(this._requests.length>0?this._requests.shift().resolve({value:rt.chunk,done:!1}):this._cachedChunks.push(rt.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(rt){this._storedError=(0,a.createResponseStatusError)(rt,this._url),this._headersReceivedCapability.reject(this._storedError);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(rt){this.onProgress?.({loaded:rt.loaded,total:rt.lengthComputable?rt.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersReceivedCapability.promise}async read(){if(this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const rt=new o.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0,this._headersReceivedCapability.reject(rt);for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class j{constructor(rt,et,it){this._manager=rt;const st={onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)};this._url=rt.url,this._requestId=rt.requestRange(et,it,st),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_close(){this.onClosed?.(this)}_onDone(rt){const et=rt.chunk;this._requests.length>0?this._requests.shift().resolve({value:et,done:!1}):this._queuedChunk=et,this._done=!0;for(const it of this._requests)it.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(rt){this._storedError=(0,a.createResponseStatusError)(rt,this._url);for(const et of this._requests)et.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(rt){this.isStreamingSupported||this.onProgress?.({loaded:rt.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const et=this._queuedChunk;return this._queuedChunk=null,{value:et,done:!1}}if(this._done)return{value:void 0,done:!0};const rt=new o.PromiseCapability;return this._requests.push(rt),rt.promise}cancel(rt){this._done=!0;for(const et of this._requests)et.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PDFNodeStream=void 0;var o=s(1),a=s(20);const c=/^file:\/\/\/[a-zA-Z]:\//;function h(it){const st=require$$5,nt=st.parse(it);return nt.protocol==="file:"||nt.host?nt:/^[a-z]:[/\\]/i.test(it)?st.parse(`file:///${it}`):(nt.host||(nt.protocol="file:"),nt)}class _{constructor(st){this.source=st,this.url=h(st.url),this.isHttp=this.url.protocol==="http:"||this.url.protocol==="https:",this.isFsUrl=this.url.protocol==="file:",this.httpHeaders=this.isHttp&&st.httpHeaders||{},this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){return this._fullRequestReader?._loaded??0}getFullReader(){return(0,o.assert)(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=this.isFsUrl?new rt(this):new j(this),this._fullRequestReader}getRangeReader(st,nt){if(nt<=this._progressiveDataLength)return null;const ot=this.isFsUrl?new et(this,st,nt):new tt(this,st,nt);return this._rangeRequestReaders.push(ot),ot}cancelAllRequests(st){this._fullRequestReader?.cancel(st);for(const nt of this._rangeRequestReaders.slice(0))nt.cancel(st)}}e.PDFNodeStream=_;class ${constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null;const nt=st.source;this._contentLength=nt.length,this._loaded=0,this._filename=null,this._disableRange=nt.disableRange||!1,this._rangeChunkSize=nt.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!nt.disableStream,this._isRangeSupported=!nt.disableRange,this._readableStream=null,this._readCapability=new o.PromiseCapability,this._headersCapability=new o.PromiseCapability}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=st.length,this.onProgress?.({loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",nt=>{this._error(nt)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new o.AbortException("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class g{constructor(st){this._url=st.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=new o.PromiseCapability;const nt=st.source;this._isStreamingSupported=!nt.disableStream}get isStreamingSupported(){return this._isStreamingSupported}async read(){if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const st=this._readableStream.read();return st===null?(this._readCapability=new o.PromiseCapability,this.read()):(this._loaded+=st.length,this.onProgress?.({loaded:this._loaded}),{value:new Uint8Array(st).buffer,done:!1})}cancel(st){if(!this._readableStream){this._error(st);return}this._readableStream.destroy(st)}_error(st){this._storedError=st,this._readCapability.resolve()}_setReadableStream(st){this._readableStream=st,st.on("readable",()=>{this._readCapability.resolve()}),st.on("end",()=>{st.destroy(),this._done=!0,this._readCapability.resolve()}),st.on("error",nt=>{this._error(nt)}),this._storedError&&this._readableStream.destroy(this._storedError)}}function d(it,st){return{protocol:it.protocol,auth:it.auth,host:it.hostname,port:it.port,path:it.path,method:"GET",headers:st}}class j extends ${constructor(st){super(st);const nt=ot=>{if(ot.statusCode===404){const ut=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=ut,this._headersCapability.reject(ut);return}this._headersCapability.resolve(),this._setReadableStream(ot);const ht=ut=>this._readableStream.headers[ut.toLowerCase()],{allowRangeRequests:pt,suggestedLength:lt}=(0,a.validateRangeRequestCapabilities)({getResponseHeader:ht,isHttp:st.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=pt,this._contentLength=lt||this._contentLength,this._filename=(0,a.extractFilenameFromHeader)(ht)};if(this._request=null,this._url.protocol==="http:"){const ot=require$$5;this._request=ot.request(d(this._url,st.httpHeaders),nt)}else{const ot=require$$5;this._request=ot.request(d(this._url,st.httpHeaders),nt)}this._request.on("error",ot=>{this._storedError=ot,this._headersCapability.reject(ot)}),this._request.end()}}class tt extends g{constructor(st,nt,ot){super(st),this._httpHeaders={};for(const pt in st.httpHeaders){const lt=st.httpHeaders[pt];lt!==void 0&&(this._httpHeaders[pt]=lt)}this._httpHeaders.Range=`bytes=${nt}-${ot-1}`;const ht=pt=>{if(pt.statusCode===404){const lt=new o.MissingPDFException(`Missing PDF "${this._url}".`);this._storedError=lt;return}this._setReadableStream(pt)};if(this._request=null,this._url.protocol==="http:"){const pt=require$$5;this._request=pt.request(d(this._url,this._httpHeaders),ht)}else{const pt=require$$5;this._request=pt.request(d(this._url,this._httpHeaders),ht)}this._request.on("error",pt=>{this._storedError=pt}),this._request.end()}}class rt extends ${constructor(st){super(st);let nt=decodeURIComponent(this._url.path);c.test(this._url.href)&&(nt=nt.replace(/^\//,""));const ot=require$$5;ot.lstat(nt,(ht,pt)=>{if(ht){ht.code==="ENOENT"&&(ht=new o.MissingPDFException(`Missing PDF "${nt}".`)),this._storedError=ht,this._headersCapability.reject(ht);return}this._contentLength=pt.size,this._setReadableStream(ot.createReadStream(nt)),this._headersCapability.resolve()})}}class et extends g{constructor(st,nt,ot){super(st);let ht=decodeURIComponent(this._url.path);c.test(this._url.href)&&(ht=ht.replace(/^\//,""));const pt=require$$5;this._setReadableStream(pt.createReadStream(ht,{start:nt,end:ot-1}))}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.SVGGraphics=void 0;var o=s(6),a=s(1);const c={fontStyle:"normal",fontWeight:"normal",fillColor:"#000000"},h="http://www.w3.org/XML/1998/namespace",_="http://www.w3.org/1999/xlink",$=["butt","round","square"],g=["miter","round","bevel"],d=function(pt,lt="",ut=!1){if(URL.createObjectURL&&typeof Blob<"u"&&!ut)return URL.createObjectURL(new Blob([pt],{type:lt}));const yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let Pt=`data:${lt};base64,`;for(let vt=0,Vt=pt.length;vt<Vt;vt+=3){const Dt=pt[vt]&255,Qt=pt[vt+1]&255,Wt=pt[vt+2]&255,Kt=Dt>>2,tn=(Dt&3)<<4|Qt>>4,Ht=vt+1<Vt?(Qt&15)<<2|Wt>>6:64,St=vt+2<Vt?Wt&63:64;Pt+=yt[Kt]+yt[tn]+yt[Ht]+yt[St]}return Pt},j=function(){const pt=new Uint8Array([137,80,78,71,13,10,26,10]),lt=12,ut=new Int32Array(256);for(let Wt=0;Wt<256;Wt++){let Kt=Wt;for(let tn=0;tn<8;tn++)Kt=Kt&1?3988292384^Kt>>1&2147483647:Kt>>1&2147483647;ut[Wt]=Kt}function yt(Wt,Kt,tn){let Ht=-1;for(let St=Kt;St<tn;St++){const ft=(Ht^Wt[St])&255,ct=ut[ft];Ht=Ht>>>8^ct}return Ht^-1}function Pt(Wt,Kt,tn,Ht){let St=Ht;const ft=Kt.length;tn[St]=ft>>24&255,tn[St+1]=ft>>16&255,tn[St+2]=ft>>8&255,tn[St+3]=ft&255,St+=4,tn[St]=Wt.charCodeAt(0)&255,tn[St+1]=Wt.charCodeAt(1)&255,tn[St+2]=Wt.charCodeAt(2)&255,tn[St+3]=Wt.charCodeAt(3)&255,St+=4,tn.set(Kt,St),St+=Kt.length;const ct=yt(tn,Ht+4,St);tn[St]=ct>>24&255,tn[St+1]=ct>>16&255,tn[St+2]=ct>>8&255,tn[St+3]=ct&255}function vt(Wt,Kt,tn){let Ht=1,St=0;for(let ft=Kt;ft<tn;++ft)Ht=(Ht+(Wt[ft]&255))%65521,St=(St+Ht)%65521;return St<<16|Ht}function Vt(Wt){if(!a.isNodeJS)return Dt(Wt);try{const Kt=parseInt(process.versions.node)>=8?Wt:Buffer.from(Wt),tn=require$$5.deflateSync(Kt,{level:9});return tn instanceof Uint8Array?tn:new Uint8Array(tn)}catch(Kt){(0,a.warn)("Not compressing PNG because zlib.deflateSync is unavailable: "+Kt)}return Dt(Wt)}function Dt(Wt){let Kt=Wt.length;const tn=65535,Ht=Math.ceil(Kt/tn),St=new Uint8Array(2+Kt+Ht*5+4);let ft=0;St[ft++]=120,St[ft++]=156;let ct=0;for(;Kt>tn;)St[ft++]=0,St[ft++]=255,St[ft++]=255,St[ft++]=0,St[ft++]=0,St.set(Wt.subarray(ct,ct+tn),ft),ft+=tn,ct+=tn,Kt-=tn;St[ft++]=1,St[ft++]=Kt&255,St[ft++]=Kt>>8&255,St[ft++]=~Kt&65535&255,St[ft++]=(~Kt&65535)>>8&255,St.set(Wt.subarray(ct),ft),ft+=Wt.length-ct;const dt=vt(Wt,0,Wt.length);return St[ft++]=dt>>24&255,St[ft++]=dt>>16&255,St[ft++]=dt>>8&255,St[ft++]=dt&255,St}function Qt(Wt,Kt,tn,Ht){const St=Wt.width,ft=Wt.height;let ct,dt,gt;const Tt=Wt.data;switch(Kt){case a.ImageKind.GRAYSCALE_1BPP:dt=0,ct=1,gt=St+7>>3;break;case a.ImageKind.RGB_24BPP:dt=2,ct=8,gt=St*3;break;case a.ImageKind.RGBA_32BPP:dt=6,ct=8,gt=St*4;break;default:throw new Error("invalid format")}const wt=new Uint8Array((1+gt)*ft);let xt=0,At=0;for(let Ct=0;Ct<ft;++Ct)wt[xt++]=0,wt.set(Tt.subarray(At,At+gt),xt),At+=gt,xt+=gt;if(Kt===a.ImageKind.GRAYSCALE_1BPP&&Ht){xt=0;for(let Ct=0;Ct<ft;Ct++){xt++;for(let $t=0;$t<gt;$t++)wt[xt++]^=255}}const at=new Uint8Array([St>>24&255,St>>16&255,St>>8&255,St&255,ft>>24&255,ft>>16&255,ft>>8&255,ft&255,ct,dt,0,0,0]),mt=Vt(wt),_t=pt.length+lt*3+at.length+mt.length,Rt=new Uint8Array(_t);let bt=0;return Rt.set(pt,bt),bt+=pt.length,Pt("IHDR",at,Rt,bt),bt+=lt+at.length,Pt("IDATA",mt,Rt,bt),bt+=lt+mt.length,Pt("IEND",new Uint8Array(0),Rt,bt),d(Rt,"image/png",tn)}return function(Kt,tn,Ht){const St=Kt.kind===void 0?a.ImageKind.GRAYSCALE_1BPP:Kt.kind;return Qt(Kt,St,tn,Ht)}}();class tt{constructor(){this.fontSizeScale=1,this.fontWeight=c.fontWeight,this.fontSize=0,this.textMatrix=a.IDENTITY_MATRIX,this.fontMatrix=a.FONT_IDENTITY_MATRIX,this.leading=0,this.textRenderingMode=a.TextRenderingMode.FILL,this.textMatrixScale=1,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRise=0,this.fillColor=c.fillColor,this.strokeColor="#000000",this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.lineJoin="",this.lineCap="",this.miterLimit=0,this.dashArray=[],this.dashPhase=0,this.dependencies=[],this.activeClipUrl=null,this.clipGroup=null,this.maskId=""}clone(){return Object.create(this)}setCurrentPoint(lt,ut){this.x=lt,this.y=ut}}function rt(pt){let lt=[];const ut=[];for(const yt of pt){if(yt.fn==="save"){lt.push({fnId:92,fn:"group",items:[]}),ut.push(lt),lt=lt.at(-1).items;continue}yt.fn==="restore"?lt=ut.pop():lt.push(yt)}return lt}function et(pt){if(Number.isInteger(pt))return pt.toString();const lt=pt.toFixed(10);let ut=lt.length-1;if(lt[ut]!=="0")return lt;do ut--;while(lt[ut]==="0");return lt.substring(0,lt[ut]==="."?ut:ut+1)}function it(pt){if(pt[4]===0&&pt[5]===0){if(pt[1]===0&&pt[2]===0)return pt[0]===1&&pt[3]===1?"":`scale(${et(pt[0])} ${et(pt[3])})`;if(pt[0]===pt[3]&&pt[1]===-pt[2]){const lt=Math.acos(pt[0])*180/Math.PI;return`rotate(${et(lt)})`}}else if(pt[0]===1&&pt[1]===0&&pt[2]===0&&pt[3]===1)return`translate(${et(pt[4])} ${et(pt[5])})`;return`matrix(${et(pt[0])} ${et(pt[1])} ${et(pt[2])} ${et(pt[3])} ${et(pt[4])} ${et(pt[5])})`}let st=0,nt=0,ot=0;class ht{constructor(lt,ut,yt=!1){(0,o.deprecated)("The SVG back-end is no longer maintained and *may* be removed in the future."),this.svgFactory=new o.DOMSVGFactory,this.current=new tt,this.transformMatrix=a.IDENTITY_MATRIX,this.transformStack=[],this.extraStack=[],this.commonObjs=lt,this.objs=ut,this.pendingClip=null,this.pendingEOFill=!1,this.embedFonts=!1,this.embeddedFonts=Object.create(null),this.cssStyle=null,this.forceDataSchema=!!yt,this._operatorIdMapping=[];for(const Pt in a.OPS)this._operatorIdMapping[a.OPS[Pt]]=Pt}getObject(lt,ut=null){return typeof lt=="string"?lt.startsWith("g_")?this.commonObjs.get(lt):this.objs.get(lt):ut}save(){this.transformStack.push(this.transformMatrix);const lt=this.current;this.extraStack.push(lt),this.current=lt.clone()}restore(){this.transformMatrix=this.transformStack.pop(),this.current=this.extraStack.pop(),this.pendingClip=null,this.tgrp=null}group(lt){this.save(),this.executeOpTree(lt),this.restore()}loadDependencies(lt){const ut=lt.fnArray,yt=lt.argsArray;for(let Pt=0,vt=ut.length;Pt<vt;Pt++)if(ut[Pt]===a.OPS.dependency)for(const Vt of yt[Pt]){const Dt=Vt.startsWith("g_")?this.commonObjs:this.objs,Qt=new Promise(Wt=>{Dt.get(Vt,Wt)});this.current.dependencies.push(Qt)}return Promise.all(this.current.dependencies)}transform(lt,ut,yt,Pt,vt,Vt){const Dt=[lt,ut,yt,Pt,vt,Vt];this.transformMatrix=a.Util.transform(this.transformMatrix,Dt),this.tgrp=null}getSVG(lt,ut){this.viewport=ut;const yt=this._initialize(ut);return this.loadDependencies(lt).then(()=>(this.transformMatrix=a.IDENTITY_MATRIX,this.executeOpTree(this.convertOpList(lt)),yt))}convertOpList(lt){const ut=this._operatorIdMapping,yt=lt.argsArray,Pt=lt.fnArray,vt=[];for(let Vt=0,Dt=Pt.length;Vt<Dt;Vt++){const Qt=Pt[Vt];vt.push({fnId:Qt,fn:ut[Qt],args:yt[Vt]})}return rt(vt)}executeOpTree(lt){for(const ut of lt){const yt=ut.fn,Pt=ut.fnId,vt=ut.args;switch(Pt|0){case a.OPS.beginText:this.beginText();break;case a.OPS.dependency:break;case a.OPS.setLeading:this.setLeading(vt);break;case a.OPS.setLeadingMoveText:this.setLeadingMoveText(vt[0],vt[1]);break;case a.OPS.setFont:this.setFont(vt);break;case a.OPS.showText:this.showText(vt[0]);break;case a.OPS.showSpacedText:this.showText(vt[0]);break;case a.OPS.endText:this.endText();break;case a.OPS.moveText:this.moveText(vt[0],vt[1]);break;case a.OPS.setCharSpacing:this.setCharSpacing(vt[0]);break;case a.OPS.setWordSpacing:this.setWordSpacing(vt[0]);break;case a.OPS.setHScale:this.setHScale(vt[0]);break;case a.OPS.setTextMatrix:this.setTextMatrix(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5]);break;case a.OPS.setTextRise:this.setTextRise(vt[0]);break;case a.OPS.setTextRenderingMode:this.setTextRenderingMode(vt[0]);break;case a.OPS.setLineWidth:this.setLineWidth(vt[0]);break;case a.OPS.setLineJoin:this.setLineJoin(vt[0]);break;case a.OPS.setLineCap:this.setLineCap(vt[0]);break;case a.OPS.setMiterLimit:this.setMiterLimit(vt[0]);break;case a.OPS.setFillRGBColor:this.setFillRGBColor(vt[0],vt[1],vt[2]);break;case a.OPS.setStrokeRGBColor:this.setStrokeRGBColor(vt[0],vt[1],vt[2]);break;case a.OPS.setStrokeColorN:this.setStrokeColorN(vt);break;case a.OPS.setFillColorN:this.setFillColorN(vt);break;case a.OPS.shadingFill:this.shadingFill(vt[0]);break;case a.OPS.setDash:this.setDash(vt[0],vt[1]);break;case a.OPS.setRenderingIntent:this.setRenderingIntent(vt[0]);break;case a.OPS.setFlatness:this.setFlatness(vt[0]);break;case a.OPS.setGState:this.setGState(vt[0]);break;case a.OPS.fill:this.fill();break;case a.OPS.eoFill:this.eoFill();break;case a.OPS.stroke:this.stroke();break;case a.OPS.fillStroke:this.fillStroke();break;case a.OPS.eoFillStroke:this.eoFillStroke();break;case a.OPS.clip:this.clip("nonzero");break;case a.OPS.eoClip:this.clip("evenodd");break;case a.OPS.paintSolidColorImageMask:this.paintSolidColorImageMask();break;case a.OPS.paintImageXObject:this.paintImageXObject(vt[0]);break;case a.OPS.paintInlineImageXObject:this.paintInlineImageXObject(vt[0]);break;case a.OPS.paintImageMaskXObject:this.paintImageMaskXObject(vt[0]);break;case a.OPS.paintFormXObjectBegin:this.paintFormXObjectBegin(vt[0],vt[1]);break;case a.OPS.paintFormXObjectEnd:this.paintFormXObjectEnd();break;case a.OPS.closePath:this.closePath();break;case a.OPS.closeStroke:this.closeStroke();break;case a.OPS.closeFillStroke:this.closeFillStroke();break;case a.OPS.closeEOFillStroke:this.closeEOFillStroke();break;case a.OPS.nextLine:this.nextLine();break;case a.OPS.transform:this.transform(vt[0],vt[1],vt[2],vt[3],vt[4],vt[5]);break;case a.OPS.constructPath:this.constructPath(vt[0],vt[1]);break;case a.OPS.endPath:this.endPath();break;case 92:this.group(ut.items);break;default:(0,a.warn)(`Unimplemented operator ${yt}`);break}}}setWordSpacing(lt){this.current.wordSpacing=lt}setCharSpacing(lt){this.current.charSpacing=lt}nextLine(){this.moveText(0,this.current.leading)}setTextMatrix(lt,ut,yt,Pt,vt,Vt){const Dt=this.current;Dt.textMatrix=Dt.lineMatrix=[lt,ut,yt,Pt,vt,Vt],Dt.textMatrixScale=Math.hypot(lt,ut),Dt.x=Dt.lineX=0,Dt.y=Dt.lineY=0,Dt.xcoords=[],Dt.ycoords=[],Dt.tspan=this.svgFactory.createElement("svg:tspan"),Dt.tspan.setAttributeNS(null,"font-family",Dt.fontFamily),Dt.tspan.setAttributeNS(null,"font-size",`${et(Dt.fontSize)}px`),Dt.tspan.setAttributeNS(null,"y",et(-Dt.y)),Dt.txtElement=this.svgFactory.createElement("svg:text"),Dt.txtElement.append(Dt.tspan)}beginText(){const lt=this.current;lt.x=lt.lineX=0,lt.y=lt.lineY=0,lt.textMatrix=a.IDENTITY_MATRIX,lt.lineMatrix=a.IDENTITY_MATRIX,lt.textMatrixScale=1,lt.tspan=this.svgFactory.createElement("svg:tspan"),lt.txtElement=this.svgFactory.createElement("svg:text"),lt.txtgrp=this.svgFactory.createElement("svg:g"),lt.xcoords=[],lt.ycoords=[]}moveText(lt,ut){const yt=this.current;yt.x=yt.lineX+=lt,yt.y=yt.lineY+=ut,yt.xcoords=[],yt.ycoords=[],yt.tspan=this.svgFactory.createElement("svg:tspan"),yt.tspan.setAttributeNS(null,"font-family",yt.fontFamily),yt.tspan.setAttributeNS(null,"font-size",`${et(yt.fontSize)}px`),yt.tspan.setAttributeNS(null,"y",et(-yt.y))}showText(lt){const ut=this.current,yt=ut.font,Pt=ut.fontSize;if(Pt===0)return;const vt=ut.fontSizeScale,Vt=ut.charSpacing,Dt=ut.wordSpacing,Qt=ut.fontDirection,Wt=ut.textHScale*Qt,Kt=yt.vertical,tn=Kt?1:-1,Ht=yt.defaultVMetrics,St=Pt*ut.fontMatrix[0];let ft=0;for(const gt of lt){if(gt===null){ft+=Qt*Dt;continue}else if(typeof gt=="number"){ft+=tn*gt*Pt/1e3;continue}const Tt=(gt.isSpace?Dt:0)+Vt,wt=gt.fontChar;let xt,At,at=gt.width;if(Kt){let _t;const Rt=gt.vmetric||Ht;_t=gt.vmetric?Rt[1]:at*.5,_t=-_t*St;const bt=Rt[2]*St;at=Rt?-Rt[0]:at,xt=_t/vt,At=(ft+bt)/vt}else xt=ft/vt,At=0;(gt.isInFont||yt.missingFile)&&(ut.xcoords.push(ut.x+xt),Kt&&ut.ycoords.push(-ut.y+At),ut.tspan.textContent+=wt);const mt=Kt?at*St-Tt*Qt:at*St+Tt*Qt;ft+=mt}ut.tspan.setAttributeNS(null,"x",ut.xcoords.map(et).join(" ")),Kt?ut.tspan.setAttributeNS(null,"y",ut.ycoords.map(et).join(" ")):ut.tspan.setAttributeNS(null,"y",et(-ut.y)),Kt?ut.y-=ft:ut.x+=ft*Wt,ut.tspan.setAttributeNS(null,"font-family",ut.fontFamily),ut.tspan.setAttributeNS(null,"font-size",`${et(ut.fontSize)}px`),ut.fontStyle!==c.fontStyle&&ut.tspan.setAttributeNS(null,"font-style",ut.fontStyle),ut.fontWeight!==c.fontWeight&&ut.tspan.setAttributeNS(null,"font-weight",ut.fontWeight);const ct=ut.textRenderingMode&a.TextRenderingMode.FILL_STROKE_MASK;if(ct===a.TextRenderingMode.FILL||ct===a.TextRenderingMode.FILL_STROKE?(ut.fillColor!==c.fillColor&&ut.tspan.setAttributeNS(null,"fill",ut.fillColor),ut.fillAlpha<1&&ut.tspan.setAttributeNS(null,"fill-opacity",ut.fillAlpha)):ut.textRenderingMode===a.TextRenderingMode.ADD_TO_PATH?ut.tspan.setAttributeNS(null,"fill","transparent"):ut.tspan.setAttributeNS(null,"fill","none"),ct===a.TextRenderingMode.STROKE||ct===a.TextRenderingMode.FILL_STROKE){const gt=1/(ut.textMatrixScale||1);this._setStrokeAttributes(ut.tspan,gt)}let dt=ut.textMatrix;ut.textRise!==0&&(dt=dt.slice(),dt[5]+=ut.textRise),ut.txtElement.setAttributeNS(null,"transform",`${it(dt)} scale(${et(Wt)}, -1)`),ut.txtElement.setAttributeNS(h,"xml:space","preserve"),ut.txtElement.append(ut.tspan),ut.txtgrp.append(ut.txtElement),this._ensureTransformGroup().append(ut.txtElement)}setLeadingMoveText(lt,ut){this.setLeading(-ut),this.moveText(lt,ut)}addFontStyle(lt){if(!lt.data)throw new Error('addFontStyle: No font data available, ensure that the "fontExtraProperties" API parameter is set.');this.cssStyle||(this.cssStyle=this.svgFactory.createElement("svg:style"),this.cssStyle.setAttributeNS(null,"type","text/css"),this.defs.append(this.cssStyle));const ut=d(lt.data,lt.mimetype,this.forceDataSchema);this.cssStyle.textContent+=`@font-face { font-family: "${lt.loadedName}"; src: url(${ut}); }
`}setFont(lt){const ut=this.current,yt=this.commonObjs.get(lt[0]);let Pt=lt[1];ut.font=yt,this.embedFonts&&!yt.missingFile&&!this.embeddedFonts[yt.loadedName]&&(this.addFontStyle(yt),this.embeddedFonts[yt.loadedName]=yt),ut.fontMatrix=yt.fontMatrix||a.FONT_IDENTITY_MATRIX;let vt="normal";yt.black?vt="900":yt.bold&&(vt="bold");const Vt=yt.italic?"italic":"normal";Pt<0?(Pt=-Pt,ut.fontDirection=-1):ut.fontDirection=1,ut.fontSize=Pt,ut.fontFamily=yt.loadedName,ut.fontWeight=vt,ut.fontStyle=Vt,ut.tspan=this.svgFactory.createElement("svg:tspan"),ut.tspan.setAttributeNS(null,"y",et(-ut.y)),ut.xcoords=[],ut.ycoords=[]}endText(){const lt=this.current;lt.textRenderingMode&a.TextRenderingMode.ADD_TO_PATH_FLAG&&lt.txtElement?.hasChildNodes()&&(lt.element=lt.txtElement,this.clip("nonzero"),this.endPath())}setLineWidth(lt){lt>0&&(this.current.lineWidth=lt)}setLineCap(lt){this.current.lineCap=$[lt]}setLineJoin(lt){this.current.lineJoin=g[lt]}setMiterLimit(lt){this.current.miterLimit=lt}setStrokeAlpha(lt){this.current.strokeAlpha=lt}setStrokeRGBColor(lt,ut,yt){this.current.strokeColor=a.Util.makeHexColor(lt,ut,yt)}setFillAlpha(lt){this.current.fillAlpha=lt}setFillRGBColor(lt,ut,yt){this.current.fillColor=a.Util.makeHexColor(lt,ut,yt),this.current.tspan=this.svgFactory.createElement("svg:tspan"),this.current.xcoords=[],this.current.ycoords=[]}setStrokeColorN(lt){this.current.strokeColor=this._makeColorN_Pattern(lt)}setFillColorN(lt){this.current.fillColor=this._makeColorN_Pattern(lt)}shadingFill(lt){const{width:ut,height:yt}=this.viewport,Pt=a.Util.inverseTransform(this.transformMatrix),[vt,Vt,Dt,Qt]=a.Util.getAxialAlignedBoundingBox([0,0,ut,yt],Pt),Wt=this.svgFactory.createElement("svg:rect");Wt.setAttributeNS(null,"x",vt),Wt.setAttributeNS(null,"y",Vt),Wt.setAttributeNS(null,"width",Dt-vt),Wt.setAttributeNS(null,"height",Qt-Vt),Wt.setAttributeNS(null,"fill",this._makeShadingPattern(lt)),this.current.fillAlpha<1&&Wt.setAttributeNS(null,"fill-opacity",this.current.fillAlpha),this._ensureTransformGroup().append(Wt)}_makeColorN_Pattern(lt){return lt[0]==="TilingPattern"?this._makeTilingPattern(lt):this._makeShadingPattern(lt)}_makeTilingPattern(lt){const ut=lt[1],yt=lt[2],Pt=lt[3]||a.IDENTITY_MATRIX,[vt,Vt,Dt,Qt]=lt[4],Wt=lt[5],Kt=lt[6],tn=lt[7],Ht=`shading${ot++}`,[St,ft,ct,dt]=a.Util.normalizeRect([...a.Util.applyTransform([vt,Vt],Pt),...a.Util.applyTransform([Dt,Qt],Pt)]),[gt,Tt]=a.Util.singularValueDecompose2dScale(Pt),wt=Wt*gt,xt=Kt*Tt,At=this.svgFactory.createElement("svg:pattern");At.setAttributeNS(null,"id",Ht),At.setAttributeNS(null,"patternUnits","userSpaceOnUse"),At.setAttributeNS(null,"width",wt),At.setAttributeNS(null,"height",xt),At.setAttributeNS(null,"x",`${St}`),At.setAttributeNS(null,"y",`${ft}`);const at=this.svg,mt=this.transformMatrix,_t=this.current.fillColor,Rt=this.current.strokeColor,bt=this.svgFactory.create(ct-St,dt-ft);if(this.svg=bt,this.transformMatrix=Pt,tn===2){const Ct=a.Util.makeHexColor(...ut);this.current.fillColor=Ct,this.current.strokeColor=Ct}return this.executeOpTree(this.convertOpList(yt)),this.svg=at,this.transformMatrix=mt,this.current.fillColor=_t,this.current.strokeColor=Rt,At.append(bt.childNodes[0]),this.defs.append(At),`url(#${Ht})`}_makeShadingPattern(lt){switch(typeof lt=="string"&&(lt=this.objs.get(lt)),lt[0]){case"RadialAxial":const ut=`shading${ot++}`,yt=lt[3];let Pt;switch(lt[1]){case"axial":const vt=lt[4],Vt=lt[5];Pt=this.svgFactory.createElement("svg:linearGradient"),Pt.setAttributeNS(null,"id",ut),Pt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Pt.setAttributeNS(null,"x1",vt[0]),Pt.setAttributeNS(null,"y1",vt[1]),Pt.setAttributeNS(null,"x2",Vt[0]),Pt.setAttributeNS(null,"y2",Vt[1]);break;case"radial":const Dt=lt[4],Qt=lt[5],Wt=lt[6],Kt=lt[7];Pt=this.svgFactory.createElement("svg:radialGradient"),Pt.setAttributeNS(null,"id",ut),Pt.setAttributeNS(null,"gradientUnits","userSpaceOnUse"),Pt.setAttributeNS(null,"cx",Qt[0]),Pt.setAttributeNS(null,"cy",Qt[1]),Pt.setAttributeNS(null,"r",Kt),Pt.setAttributeNS(null,"fx",Dt[0]),Pt.setAttributeNS(null,"fy",Dt[1]),Pt.setAttributeNS(null,"fr",Wt);break;default:throw new Error(`Unknown RadialAxial type: ${lt[1]}`)}for(const vt of yt){const Vt=this.svgFactory.createElement("svg:stop");Vt.setAttributeNS(null,"offset",vt[0]),Vt.setAttributeNS(null,"stop-color",vt[1]),Pt.append(Vt)}return this.defs.append(Pt),`url(#${ut})`;case"Mesh":return(0,a.warn)("Unimplemented pattern Mesh"),null;case"Dummy":return"hotpink";default:throw new Error(`Unknown IR type: ${lt[0]}`)}}setDash(lt,ut){this.current.dashArray=lt,this.current.dashPhase=ut}constructPath(lt,ut){const yt=this.current;let Pt=yt.x,vt=yt.y,Vt=[],Dt=0;for(const Qt of lt)switch(Qt|0){case a.OPS.rectangle:Pt=ut[Dt++],vt=ut[Dt++];const Wt=ut[Dt++],Kt=ut[Dt++],tn=Pt+Wt,Ht=vt+Kt;Vt.push("M",et(Pt),et(vt),"L",et(tn),et(vt),"L",et(tn),et(Ht),"L",et(Pt),et(Ht),"Z");break;case a.OPS.moveTo:Pt=ut[Dt++],vt=ut[Dt++],Vt.push("M",et(Pt),et(vt));break;case a.OPS.lineTo:Pt=ut[Dt++],vt=ut[Dt++],Vt.push("L",et(Pt),et(vt));break;case a.OPS.curveTo:Pt=ut[Dt+4],vt=ut[Dt+5],Vt.push("C",et(ut[Dt]),et(ut[Dt+1]),et(ut[Dt+2]),et(ut[Dt+3]),et(Pt),et(vt)),Dt+=6;break;case a.OPS.curveTo2:Vt.push("C",et(Pt),et(vt),et(ut[Dt]),et(ut[Dt+1]),et(ut[Dt+2]),et(ut[Dt+3])),Pt=ut[Dt+2],vt=ut[Dt+3],Dt+=4;break;case a.OPS.curveTo3:Pt=ut[Dt+2],vt=ut[Dt+3],Vt.push("C",et(ut[Dt]),et(ut[Dt+1]),et(Pt),et(vt),et(Pt),et(vt)),Dt+=4;break;case a.OPS.closePath:Vt.push("Z");break}Vt=Vt.join(" "),yt.path&&lt.length>0&&lt[0]!==a.OPS.rectangle&&lt[0]!==a.OPS.moveTo?Vt=yt.path.getAttributeNS(null,"d")+Vt:(yt.path=this.svgFactory.createElement("svg:path"),this._ensureTransformGroup().append(yt.path)),yt.path.setAttributeNS(null,"d",Vt),yt.path.setAttributeNS(null,"fill","none"),yt.element=yt.path,yt.setCurrentPoint(Pt,vt)}endPath(){const lt=this.current;if(lt.path=null,!this.pendingClip)return;if(!lt.element){this.pendingClip=null;return}const ut=`clippath${st++}`,yt=this.svgFactory.createElement("svg:clipPath");yt.setAttributeNS(null,"id",ut),yt.setAttributeNS(null,"transform",it(this.transformMatrix));const Pt=lt.element.cloneNode(!0);if(this.pendingClip==="evenodd"?Pt.setAttributeNS(null,"clip-rule","evenodd"):Pt.setAttributeNS(null,"clip-rule","nonzero"),this.pendingClip=null,yt.append(Pt),this.defs.append(yt),lt.activeClipUrl){lt.clipGroup=null;for(const vt of this.extraStack)vt.clipGroup=null;yt.setAttributeNS(null,"clip-path",lt.activeClipUrl)}lt.activeClipUrl=`url(#${ut})`,this.tgrp=null}clip(lt){this.pendingClip=lt}closePath(){const lt=this.current;if(lt.path){const ut=`${lt.path.getAttributeNS(null,"d")}Z`;lt.path.setAttributeNS(null,"d",ut)}}setLeading(lt){this.current.leading=-lt}setTextRise(lt){this.current.textRise=lt}setTextRenderingMode(lt){this.current.textRenderingMode=lt}setHScale(lt){this.current.textHScale=lt/100}setRenderingIntent(lt){}setFlatness(lt){}setGState(lt){for(const[ut,yt]of lt)switch(ut){case"LW":this.setLineWidth(yt);break;case"LC":this.setLineCap(yt);break;case"LJ":this.setLineJoin(yt);break;case"ML":this.setMiterLimit(yt);break;case"D":this.setDash(yt[0],yt[1]);break;case"RI":this.setRenderingIntent(yt);break;case"FL":this.setFlatness(yt);break;case"Font":this.setFont(yt);break;case"CA":this.setStrokeAlpha(yt);break;case"ca":this.setFillAlpha(yt);break;default:(0,a.warn)(`Unimplemented graphic state operator ${ut}`);break}}fill(){const lt=this.current;lt.element&&(lt.element.setAttributeNS(null,"fill",lt.fillColor),lt.element.setAttributeNS(null,"fill-opacity",lt.fillAlpha),this.endPath())}stroke(){const lt=this.current;lt.element&&(this._setStrokeAttributes(lt.element),lt.element.setAttributeNS(null,"fill","none"),this.endPath())}_setStrokeAttributes(lt,ut=1){const yt=this.current;let Pt=yt.dashArray;ut!==1&&Pt.length>0&&(Pt=Pt.map(function(vt){return ut*vt})),lt.setAttributeNS(null,"stroke",yt.strokeColor),lt.setAttributeNS(null,"stroke-opacity",yt.strokeAlpha),lt.setAttributeNS(null,"stroke-miterlimit",et(yt.miterLimit)),lt.setAttributeNS(null,"stroke-linecap",yt.lineCap),lt.setAttributeNS(null,"stroke-linejoin",yt.lineJoin),lt.setAttributeNS(null,"stroke-width",et(ut*yt.lineWidth)+"px"),lt.setAttributeNS(null,"stroke-dasharray",Pt.map(et).join(" ")),lt.setAttributeNS(null,"stroke-dashoffset",et(ut*yt.dashPhase)+"px")}eoFill(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fill()}fillStroke(){this.stroke(),this.fill()}eoFillStroke(){this.current.element?.setAttributeNS(null,"fill-rule","evenodd"),this.fillStroke()}closeStroke(){this.closePath(),this.stroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.closePath(),this.eoFillStroke()}paintSolidColorImageMask(){const lt=this.svgFactory.createElement("svg:rect");lt.setAttributeNS(null,"x","0"),lt.setAttributeNS(null,"y","0"),lt.setAttributeNS(null,"width","1px"),lt.setAttributeNS(null,"height","1px"),lt.setAttributeNS(null,"fill",this.current.fillColor),this._ensureTransformGroup().append(lt)}paintImageXObject(lt){const ut=this.getObject(lt);if(!ut){(0,a.warn)(`Dependent image with object ID ${lt} is not ready yet`);return}this.paintInlineImageXObject(ut)}paintInlineImageXObject(lt,ut){const yt=lt.width,Pt=lt.height,vt=j(lt,this.forceDataSchema,!!ut),Vt=this.svgFactory.createElement("svg:rect");Vt.setAttributeNS(null,"x","0"),Vt.setAttributeNS(null,"y","0"),Vt.setAttributeNS(null,"width",et(yt)),Vt.setAttributeNS(null,"height",et(Pt)),this.current.element=Vt,this.clip("nonzero");const Dt=this.svgFactory.createElement("svg:image");Dt.setAttributeNS(_,"xlink:href",vt),Dt.setAttributeNS(null,"x","0"),Dt.setAttributeNS(null,"y",et(-Pt)),Dt.setAttributeNS(null,"width",et(yt)+"px"),Dt.setAttributeNS(null,"height",et(Pt)+"px"),Dt.setAttributeNS(null,"transform",`scale(${et(1/yt)} ${et(-1/Pt)})`),ut?ut.append(Dt):this._ensureTransformGroup().append(Dt)}paintImageMaskXObject(lt){const ut=this.getObject(lt.data,lt);if(ut.bitmap){(0,a.warn)("paintImageMaskXObject: ImageBitmap support is not implemented, ensure that the `isOffscreenCanvasSupported` API parameter is disabled.");return}const yt=this.current,Pt=ut.width,vt=ut.height,Vt=yt.fillColor;yt.maskId=`mask${nt++}`;const Dt=this.svgFactory.createElement("svg:mask");Dt.setAttributeNS(null,"id",yt.maskId);const Qt=this.svgFactory.createElement("svg:rect");Qt.setAttributeNS(null,"x","0"),Qt.setAttributeNS(null,"y","0"),Qt.setAttributeNS(null,"width",et(Pt)),Qt.setAttributeNS(null,"height",et(vt)),Qt.setAttributeNS(null,"fill",Vt),Qt.setAttributeNS(null,"mask",`url(#${yt.maskId})`),this.defs.append(Dt),this._ensureTransformGroup().append(Qt),this.paintInlineImageXObject(ut,Dt)}paintFormXObjectBegin(lt,ut){if(Array.isArray(lt)&&lt.length===6&&this.transform(lt[0],lt[1],lt[2],lt[3],lt[4],lt[5]),ut){const yt=ut[2]-ut[0],Pt=ut[3]-ut[1],vt=this.svgFactory.createElement("svg:rect");vt.setAttributeNS(null,"x",ut[0]),vt.setAttributeNS(null,"y",ut[1]),vt.setAttributeNS(null,"width",et(yt)),vt.setAttributeNS(null,"height",et(Pt)),this.current.element=vt,this.clip("nonzero"),this.endPath()}}paintFormXObjectEnd(){}_initialize(lt){const ut=this.svgFactory.create(lt.width,lt.height),yt=this.svgFactory.createElement("svg:defs");ut.append(yt),this.defs=yt;const Pt=this.svgFactory.createElement("svg:g");return Pt.setAttributeNS(null,"transform",it(lt.transform)),ut.append(Pt),this.svg=Pt,ut}_ensureClipGroup(){if(!this.current.clipGroup){const lt=this.svgFactory.createElement("svg:g");lt.setAttributeNS(null,"clip-path",this.current.activeClipUrl),this.svg.append(lt),this.current.clipGroup=lt}return this.current.clipGroup}_ensureTransformGroup(){return this.tgrp||(this.tgrp=this.svgFactory.createElement("svg:g"),this.tgrp.setAttributeNS(null,"transform",it(this.transformMatrix)),this.current.activeClipUrl?this._ensureClipGroup().append(this.tgrp):this.svg.append(this.tgrp)),this.tgrp}}e.SVGGraphics=ht},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaText=void 0;class s{static textContent(a){const c=[],h={items:c,styles:Object.create(null)};function _($){if(!$)return;let g=null;const d=$.name;if(d==="#text")g=$.value;else if(s.shouldBuildText(d))$?.attributes?.textContent?g=$.attributes.textContent:$.value&&(g=$.value);else return;if(g!==null&&c.push({str:g}),!!$.children)for(const j of $.children)_(j)}return _(a),h}static shouldBuildText(a){return!(a==="textarea"||a==="input"||a==="option"||a==="select")}}e.XfaText=s},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.TextLayerRenderTask=void 0,e.renderTextLayer=it,e.updateTextLayer=st;var o=s(1),a=s(6);const c=1e5,h=30,_=.8,$=new Map;function g(nt,ot){let ht;if(ot&&o.FeatureTest.isOffscreenCanvasSupported)ht=new OffscreenCanvas(nt,nt).getContext("2d",{alpha:!1});else{const pt=document.createElement("canvas");pt.width=pt.height=nt,ht=pt.getContext("2d",{alpha:!1})}return ht}function d(nt,ot){const ht=$.get(nt);if(ht)return ht;const pt=g(h,ot);pt.font=`${h}px ${nt}`;const lt=pt.measureText("");let ut=lt.fontBoundingBoxAscent,yt=Math.abs(lt.fontBoundingBoxDescent);if(ut){const vt=ut/(ut+yt);return $.set(nt,vt),pt.canvas.width=pt.canvas.height=0,vt}pt.strokeStyle="red",pt.clearRect(0,0,h,h),pt.strokeText("g",0,0);let Pt=pt.getImageData(0,0,h,h).data;yt=0;for(let vt=Pt.length-1-3;vt>=0;vt-=4)if(Pt[vt]>0){yt=Math.ceil(vt/4/h);break}pt.clearRect(0,0,h,h),pt.strokeText("A",0,h),Pt=pt.getImageData(0,0,h,h).data,ut=0;for(let vt=0,Vt=Pt.length;vt<Vt;vt+=4)if(Pt[vt]>0){ut=h-Math.floor(vt/4/h);break}if(pt.canvas.width=pt.canvas.height=0,ut){const vt=ut/(ut+yt);return $.set(nt,vt),vt}return $.set(nt,_),_}function j(nt,ot,ht){const pt=document.createElement("span"),lt={angle:0,canvasWidth:0,hasText:ot.str!=="",hasEOL:ot.hasEOL,fontSize:0};nt._textDivs.push(pt);const ut=o.Util.transform(nt._transform,ot.transform);let yt=Math.atan2(ut[1],ut[0]);const Pt=ht[ot.fontName];Pt.vertical&&(yt+=Math.PI/2);const vt=Math.hypot(ut[2],ut[3]),Vt=vt*d(Pt.fontFamily,nt._isOffscreenCanvasSupported);let Dt,Qt;yt===0?(Dt=ut[4],Qt=ut[5]-Vt):(Dt=ut[4]+Vt*Math.sin(yt),Qt=ut[5]-Vt*Math.cos(yt));const Wt="calc(var(--scale-factor)*",Kt=pt.style;nt._container===nt._rootContainer?(Kt.left=`${(100*Dt/nt._pageWidth).toFixed(2)}%`,Kt.top=`${(100*Qt/nt._pageHeight).toFixed(2)}%`):(Kt.left=`${Wt}${Dt.toFixed(2)}px)`,Kt.top=`${Wt}${Qt.toFixed(2)}px)`),Kt.fontSize=`${Wt}${vt.toFixed(2)}px)`,Kt.fontFamily=Pt.fontFamily,lt.fontSize=vt,pt.setAttribute("role","presentation"),pt.textContent=ot.str,pt.dir=ot.dir,nt._fontInspectorEnabled&&(pt.dataset.fontName=ot.fontName),yt!==0&&(lt.angle=yt*(180/Math.PI));let tn=!1;if(ot.str.length>1)tn=!0;else if(ot.str!==" "&&ot.transform[0]!==ot.transform[3]){const Ht=Math.abs(ot.transform[0]),St=Math.abs(ot.transform[3]);Ht!==St&&Math.max(Ht,St)/Math.min(Ht,St)>1.5&&(tn=!0)}tn&&(lt.canvasWidth=Pt.vertical?ot.height:ot.width),nt._textDivProperties.set(pt,lt),nt._isReadableStream&&nt._layoutText(pt)}function tt(nt){const{div:ot,scale:ht,properties:pt,ctx:lt,prevFontSize:ut,prevFontFamily:yt}=nt,{style:Pt}=ot;let vt="";if(pt.canvasWidth!==0&&pt.hasText){const{fontFamily:Vt}=Pt,{canvasWidth:Dt,fontSize:Qt}=pt;(ut!==Qt||yt!==Vt)&&(lt.font=`${Qt*ht}px ${Vt}`,nt.prevFontSize=Qt,nt.prevFontFamily=Vt);const{width:Wt}=lt.measureText(ot.textContent);Wt>0&&(vt=`scaleX(${Dt*ht/Wt})`)}pt.angle!==0&&(vt=`rotate(${pt.angle}deg) ${vt}`),vt.length>0&&(Pt.transform=vt)}function rt(nt){if(nt._canceled)return;const ot=nt._textDivs,ht=nt._capability;if(ot.length>c){ht.resolve();return}if(!nt._isReadableStream)for(const lt of ot)nt._layoutText(lt);ht.resolve()}class et{constructor({textContentSource:ot,container:ht,viewport:pt,textDivs:lt,textDivProperties:ut,textContentItemsStr:yt,isOffscreenCanvasSupported:Pt}){this._textContentSource=ot,this._isReadableStream=ot instanceof ReadableStream,this._container=this._rootContainer=ht,this._textDivs=lt||[],this._textContentItemsStr=yt||[],this._isOffscreenCanvasSupported=Pt,this._fontInspectorEnabled=!!globalThis.FontInspector?.enabled,this._reader=null,this._textDivProperties=ut||new WeakMap,this._canceled=!1,this._capability=new o.PromiseCapability,this._layoutTextParams={prevFontSize:null,prevFontFamily:null,div:null,scale:pt.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:g(0,Pt)};const{pageWidth:vt,pageHeight:Vt,pageX:Dt,pageY:Qt}=pt.rawDims;this._transform=[1,0,0,-1,-Dt,Qt+Vt],this._pageWidth=vt,this._pageHeight=Vt,(0,a.setLayerDimensions)(ht,pt),this._capability.promise.finally(()=>{this._layoutTextParams=null}).catch(()=>{})}get promise(){return this._capability.promise}cancel(){this._canceled=!0,this._reader&&(this._reader.cancel(new o.AbortException("TextLayer task cancelled.")).catch(()=>{}),this._reader=null),this._capability.reject(new o.AbortException("TextLayer task cancelled."))}_processItems(ot,ht){for(const pt of ot){if(pt.str===void 0){if(pt.type==="beginMarkedContentProps"||pt.type==="beginMarkedContent"){const lt=this._container;this._container=document.createElement("span"),this._container.classList.add("markedContent"),pt.id!==null&&this._container.setAttribute("id",`${pt.id}`),lt.append(this._container)}else pt.type==="endMarkedContent"&&(this._container=this._container.parentNode);continue}this._textContentItemsStr.push(pt.str),j(this,pt,ht)}}_layoutText(ot){const ht=this._layoutTextParams.properties=this._textDivProperties.get(ot);if(this._layoutTextParams.div=ot,tt(this._layoutTextParams),ht.hasText&&this._container.append(ot),ht.hasEOL){const pt=document.createElement("br");pt.setAttribute("role","presentation"),this._container.append(pt)}}_render(){const ot=new o.PromiseCapability;let ht=Object.create(null);if(this._isReadableStream){const pt=()=>{this._reader.read().then(({value:lt,done:ut})=>{if(ut){ot.resolve();return}Object.assign(ht,lt.styles),this._processItems(lt.items,ht),pt()},ot.reject)};this._reader=this._textContentSource.getReader(),pt()}else if(this._textContentSource){const{items:pt,styles:lt}=this._textContentSource;this._processItems(pt,lt),ot.resolve()}else throw new Error('No "textContentSource" parameter specified.');ot.promise.then(()=>{ht=null,rt(this)},this._capability.reject)}}e.TextLayerRenderTask=et;function it(nt){!nt.textContentSource&&(nt.textContent||nt.textContentStream)&&((0,a.deprecated)("The TextLayerRender `textContent`/`textContentStream` parameters will be removed in the future, please use `textContentSource` instead."),nt.textContentSource=nt.textContent||nt.textContentStream);const{container:ot,viewport:ht}=nt,pt=getComputedStyle(ot),lt=pt.getPropertyValue("visibility"),ut=parseFloat(pt.getPropertyValue("--scale-factor"));lt==="visible"&&(!ut||Math.abs(ut-ht.scale)>1e-5)&&console.error("The `--scale-factor` CSS-variable must be set, to the same value as `viewport.scale`, either on the `container`-element itself or higher up in the DOM.");const yt=new et(nt);return yt._render(),yt}function st({container:nt,viewport:ot,textDivs:ht,textDivProperties:pt,isOffscreenCanvasSupported:lt,mustRotate:ut=!0,mustRescale:yt=!0}){if(ut&&(0,a.setLayerDimensions)(nt,{rotation:ot.rotation}),yt){const Pt=g(0,lt),Vt={prevFontSize:null,prevFontFamily:null,div:null,scale:ot.scale*(globalThis.devicePixelRatio||1),properties:null,ctx:Pt};for(const Dt of ht)Vt.properties=pt.get(Dt),Vt.div=Dt,tt(Vt)}}},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.AnnotationEditorLayer=void 0;var o=s(1),a=s(4),c=s(28),h=s(33),_=s(6),$=s(34);class g{#e;#t=!1;#n=null;#r=this.pointerup.bind(this);#a=this.pointerdown.bind(this);#o=new Map;#s=!1;#l=!1;#u=!1;#i;static _initialized=!1;constructor({uiManager:j,pageIndex:tt,div:rt,accessibilityManager:et,annotationLayer:it,viewport:st,l10n:nt}){const ot=[c.FreeTextEditor,h.InkEditor,$.StampEditor];if(!g._initialized){g._initialized=!0;for(const ht of ot)ht.initialize(nt)}j.registerEditorTypes(ot),this.#i=j,this.pageIndex=tt,this.div=rt,this.#e=et,this.#n=it,this.viewport=st,this.#i.addLayer(this)}get isEmpty(){return this.#o.size===0}updateToolbar(j){this.#i.updateToolbar(j)}updateMode(j=this.#i.getMode()){this.#p(),j===o.AnnotationEditorType.INK?(this.addInkEditorIfNeeded(!1),this.disableClick()):this.enableClick(),j!==o.AnnotationEditorType.NONE&&(this.div.classList.toggle("freeTextEditing",j===o.AnnotationEditorType.FREETEXT),this.div.classList.toggle("inkEditing",j===o.AnnotationEditorType.INK),this.div.classList.toggle("stampEditing",j===o.AnnotationEditorType.STAMP),this.div.hidden=!1)}addInkEditorIfNeeded(j){if(!j&&this.#i.getMode()!==o.AnnotationEditorType.INK)return;if(!j){for(const rt of this.#o.values())if(rt.isEmpty()){rt.setInBackground();return}}this.#h({offsetX:0,offsetY:0},!1).setInBackground()}setEditingState(j){this.#i.setEditingState(j)}addCommands(j){this.#i.addCommands(j)}enable(){this.div.style.pointerEvents="auto";const j=new Set;for(const rt of this.#o.values())rt.enableEditing(),rt.annotationElementId&&j.add(rt.annotationElementId);if(!this.#n)return;const tt=this.#n.getEditableAnnotations();for(const rt of tt){if(rt.hide(),this.#i.isDeletedAnnotationElement(rt.data.id)||j.has(rt.data.id))continue;const et=this.deserialize(rt);et&&(this.addOrRebuild(et),et.enableEditing())}}disable(){this.#u=!0,this.div.style.pointerEvents="none";const j=new Set;for(const tt of this.#o.values()){if(tt.disableEditing(),!tt.annotationElementId||tt.serialize()!==null){j.add(tt.annotationElementId);continue}this.getEditableAnnotation(tt.annotationElementId)?.show(),tt.remove()}if(this.#n){const tt=this.#n.getEditableAnnotations();for(const rt of tt){const{id:et}=rt.data;j.has(et)||this.#i.isDeletedAnnotationElement(et)||rt.show()}}this.#p(),this.isEmpty&&(this.div.hidden=!0),this.#u=!1}getEditableAnnotation(j){return this.#n?.getEditableAnnotation(j)||null}setActiveEditor(j){this.#i.getActive()!==j&&this.#i.setActiveEditor(j)}enableClick(){this.div.addEventListener("pointerdown",this.#a),this.div.addEventListener("pointerup",this.#r)}disableClick(){this.div.removeEventListener("pointerdown",this.#a),this.div.removeEventListener("pointerup",this.#r)}attach(j){this.#o.set(j.id,j);const{annotationElementId:tt}=j;tt&&this.#i.isDeletedAnnotationElement(tt)&&this.#i.removeDeletedAnnotationElement(j)}detach(j){this.#o.delete(j.id),this.#e?.removePointerInTextLayer(j.contentDiv),!this.#u&&j.annotationElementId&&this.#i.addDeletedAnnotationElement(j)}remove(j){this.detach(j),this.#i.removeEditor(j),j.div.contains(document.activeElement)&&setTimeout(()=>{this.#i.focusMainContainer()},0),j.div.remove(),j.isAttachedToDOM=!1,this.#l||this.addInkEditorIfNeeded(!1)}changeParent(j){j.parent!==this&&(j.annotationElementId&&(this.#i.addDeletedAnnotationElement(j.annotationElementId),a.AnnotationEditor.deleteAnnotationElement(j),j.annotationElementId=null),this.attach(j),j.parent?.detach(j),j.setParent(this),j.div&&j.isAttachedToDOM&&(j.div.remove(),this.div.append(j.div)))}add(j){if(this.changeParent(j),this.#i.addEditor(j),this.attach(j),!j.isAttachedToDOM){const tt=j.render();this.div.append(tt),j.isAttachedToDOM=!0}j.fixAndSetPosition(),j.onceAdded(),this.#i.addToAnnotationStorage(j)}moveEditorInDOM(j){if(!j.isAttachedToDOM)return;const{activeElement:tt}=document;j.div.contains(tt)&&(j._focusEventsAllowed=!1,setTimeout(()=>{j.div.contains(document.activeElement)?j._focusEventsAllowed=!0:(j.div.addEventListener("focusin",()=>{j._focusEventsAllowed=!0},{once:!0}),tt.focus())},0)),j._structTreeParentId=this.#e?.moveElementInDOM(this.div,j.div,j.contentDiv,!0)}addOrRebuild(j){j.needsToBeRebuilt()?j.rebuild():this.add(j)}addUndoableEditor(j){const tt=()=>j._uiManager.rebuild(j),rt=()=>{j.remove()};this.addCommands({cmd:tt,undo:rt,mustExec:!1})}getNextId(){return this.#i.getId()}#f(j){switch(this.#i.getMode()){case o.AnnotationEditorType.FREETEXT:return new c.FreeTextEditor(j);case o.AnnotationEditorType.INK:return new h.InkEditor(j);case o.AnnotationEditorType.STAMP:return new $.StampEditor(j)}return null}pasteEditor(j,tt){this.#i.updateToolbar(j),this.#i.updateMode(j);const{offsetX:rt,offsetY:et}=this.#d(),it=this.getNextId(),st=this.#f({parent:this,id:it,x:rt,y:et,uiManager:this.#i,isCentered:!0,...tt});st&&this.add(st)}deserialize(j){switch(j.annotationType??j.annotationEditorType){case o.AnnotationEditorType.FREETEXT:return c.FreeTextEditor.deserialize(j,this,this.#i);case o.AnnotationEditorType.INK:return h.InkEditor.deserialize(j,this,this.#i);case o.AnnotationEditorType.STAMP:return $.StampEditor.deserialize(j,this,this.#i)}return null}#h(j,tt){const rt=this.getNextId(),et=this.#f({parent:this,id:rt,x:j.offsetX,y:j.offsetY,uiManager:this.#i,isCentered:tt});return et&&this.add(et),et}#d(){const{x:j,y:tt,width:rt,height:et}=this.div.getBoundingClientRect(),it=Math.max(0,j),st=Math.max(0,tt),nt=Math.min(window.innerWidth,j+rt),ot=Math.min(window.innerHeight,tt+et),ht=(it+nt)/2-j,pt=(st+ot)/2-tt,[lt,ut]=this.viewport.rotation%180===0?[ht,pt]:[pt,ht];return{offsetX:lt,offsetY:ut}}addNewEditor(){this.#h(this.#d(),!0)}setSelected(j){this.#i.setSelected(j)}toggleSelected(j){this.#i.toggleSelected(j)}isSelected(j){return this.#i.isSelected(j)}unselect(j){this.#i.unselect(j)}pointerup(j){const{isMac:tt}=o.FeatureTest.platform;if(!(j.button!==0||j.ctrlKey&&tt)&&j.target===this.div&&this.#s){if(this.#s=!1,!this.#t){this.#t=!0;return}if(this.#i.getMode()===o.AnnotationEditorType.STAMP){this.#i.unselectAll();return}this.#h(j,!1)}}pointerdown(j){if(this.#s){this.#s=!1;return}const{isMac:tt}=o.FeatureTest.platform;if(j.button!==0||j.ctrlKey&&tt||j.target!==this.div)return;this.#s=!0;const rt=this.#i.getActive();this.#t=!rt||rt.isEmpty()}findNewParent(j,tt,rt){const et=this.#i.findParent(tt,rt);return et===null||et===this?!1:(et.changeParent(j),!0)}destroy(){this.#i.getActive()?.parent===this&&(this.#i.commitOrRemove(),this.#i.setActiveEditor(null));for(const j of this.#o.values())this.#e?.removePointerInTextLayer(j.contentDiv),j.setParent(null),j.isAttachedToDOM=!1,j.div.remove();this.div=null,this.#o.clear(),this.#i.removeLayer(this)}#p(){this.#l=!0;for(const j of this.#o.values())j.isEmpty()&&j.remove();this.#l=!1}render({viewport:j}){this.viewport=j,(0,_.setLayerDimensions)(this.div,j);for(const tt of this.#i.getEditors(this.pageIndex))this.add(tt);this.updateMode()}update({viewport:j}){this.#i.commitOrRemove(),this.viewport=j,(0,_.setLayerDimensions)(this.div,{rotation:j.rotation}),this.updateMode()}get pageDimensions(){const{pageWidth:j,pageHeight:tt}=this.viewport.rawDims;return[j,tt]}}e.AnnotationEditorLayer=g},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.FreeTextEditor=void 0;var o=s(1),a=s(5),c=s(4),h=s(29);class _ extends c.AnnotationEditor{#e=this.editorDivBlur.bind(this);#t=this.editorDivFocus.bind(this);#n=this.editorDivInput.bind(this);#r=this.editorDivKeydown.bind(this);#a;#o="";#s=`${this.id}-editor`;#l;#u=null;static _freeTextDefaultContent="";static _internalPadding=0;static _defaultColor=null;static _defaultFontSize=10;static get _keyboardManager(){const g=_.prototype,d=rt=>rt.isEmpty(),j=a.AnnotationEditorUIManager.TRANSLATE_SMALL,tt=a.AnnotationEditorUIManager.TRANSLATE_BIG;return(0,o.shadow)(this,"_keyboardManager",new a.KeyboardManager([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],g.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],g.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],g._translateEmpty,{args:[-j,0],checker:d}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],g._translateEmpty,{args:[-tt,0],checker:d}],[["ArrowRight","mac+ArrowRight"],g._translateEmpty,{args:[j,0],checker:d}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],g._translateEmpty,{args:[tt,0],checker:d}],[["ArrowUp","mac+ArrowUp"],g._translateEmpty,{args:[0,-j],checker:d}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],g._translateEmpty,{args:[0,-tt],checker:d}],[["ArrowDown","mac+ArrowDown"],g._translateEmpty,{args:[0,j],checker:d}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],g._translateEmpty,{args:[0,tt],checker:d}]]))}static _type="freetext";constructor(g){super({...g,name:"freeTextEditor"}),this.#a=g.color||_._defaultColor||c.AnnotationEditor._defaultLineColor,this.#l=g.fontSize||_._defaultFontSize}static initialize(g){c.AnnotationEditor.initialize(g,{strings:["free_text2_default_content","editor_free_text2_aria_label"]});const d=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(d.getPropertyValue("--freetext-padding"))}static updateDefaultParams(g,d){switch(g){case o.AnnotationEditorParamsType.FREETEXT_SIZE:_._defaultFontSize=d;break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:_._defaultColor=d;break}}updateParams(g,d){switch(g){case o.AnnotationEditorParamsType.FREETEXT_SIZE:this.#i(d);break;case o.AnnotationEditorParamsType.FREETEXT_COLOR:this.#f(d);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,_._defaultFontSize],[o.AnnotationEditorParamsType.FREETEXT_COLOR,_._defaultColor||c.AnnotationEditor._defaultLineColor]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.FREETEXT_SIZE,this.#l],[o.AnnotationEditorParamsType.FREETEXT_COLOR,this.#a]]}#i(g){const d=tt=>{this.editorDiv.style.fontSize=`calc(${tt}px * var(--scale-factor))`,this.translate(0,-(tt-this.#l)*this.parentScale),this.#l=tt,this.#d()},j=this.#l;this.addCommands({cmd:()=>{d(g)},undo:()=>{d(j)},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}#f(g){const d=this.#a;this.addCommands({cmd:()=>{this.#a=this.editorDiv.style.color=g},undo:()=>{this.#a=this.editorDiv.style.color=d},mustExec:!0,type:o.AnnotationEditorParamsType.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}_translateEmpty(g,d){this._uiManager.translateSelectedEditors(g,d,!0)}getInitialTranslation(){const g=this.parentScale;return[-_._internalPadding*g,-(_._internalPadding+this.#l)*g]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){this.isInEditMode()||(this.parent.setEditingState(!1),this.parent.updateToolbar(o.AnnotationEditorType.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),this.editorDiv.addEventListener("keydown",this.#r),this.editorDiv.addEventListener("focus",this.#t),this.editorDiv.addEventListener("blur",this.#e),this.editorDiv.addEventListener("input",this.#n))}disableEditMode(){this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",this.#s),this._isDraggable=!0,this.editorDiv.removeEventListener("keydown",this.#r),this.editorDiv.removeEventListener("focus",this.#t),this.editorDiv.removeEventListener("blur",this.#e),this.editorDiv.removeEventListener("input",this.#n),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freeTextEditing"))}focusin(g){this._focusEventsAllowed&&(super.focusin(g),g.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(){if(this.width){this.#g();return}this.enableEditMode(),this.editorDiv.focus(),this._initialOptions?.isCentered&&this.center(),this._initialOptions=null}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freeTextEditing")),super.remove()}#h(){const g=this.editorDiv.getElementsByTagName("div");if(g.length===0)return this.editorDiv.innerText;const d=[];for(const j of g)d.push(j.innerText.replace(/\r\n?|\n/,""));return d.join(`
`)}#d(){const[g,d]=this.parentDimensions;let j;if(this.isAttachedToDOM)j=this.div.getBoundingClientRect();else{const{currentLayer:tt,div:rt}=this,et=rt.style.display;rt.style.display="hidden",tt.div.append(this.div),j=rt.getBoundingClientRect(),rt.remove(),rt.style.display=et}this.rotation%180===this.parentRotation%180?(this.width=j.width/g,this.height=j.height/d):(this.width=j.height/g,this.height=j.width/d),this.fixAndSetPosition()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const g=this.#o,d=this.#o=this.#h().trimEnd();if(g===d)return;const j=tt=>{if(this.#o=tt,!tt){this.remove();return}this.#p(),this._uiManager.rebuild(this),this.#d()};this.addCommands({cmd:()=>{j(d)},undo:()=>{j(g)},mustExec:!1}),this.#d()}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(g){this.enterInEditMode()}keydown(g){g.target===this.div&&g.key==="Enter"&&(this.enterInEditMode(),g.preventDefault())}editorDivKeydown(g){_._keyboardManager.exec(this,g)}editorDivFocus(g){this.isEditing=!0}editorDivBlur(g){this.isEditing=!1}editorDivInput(g){this.parent.div.classList.toggle("freeTextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let g,d;this.width&&(g=this.x,d=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",this.#s),this.enableEditing(),c.AnnotationEditor._l10nPromise.get("editor_free_text2_aria_label").then(tt=>this.editorDiv?.setAttribute("aria-label",tt)),c.AnnotationEditor._l10nPromise.get("free_text2_default_content").then(tt=>this.editorDiv?.setAttribute("default-content",tt)),this.editorDiv.contentEditable=!0;const{style:j}=this.editorDiv;if(j.fontSize=`calc(${this.#l}px * var(--scale-factor))`,j.color=this.#a,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),(0,a.bindEvents)(this,this.div,["dblclick","keydown"]),this.width){const[tt,rt]=this.parentDimensions;if(this.annotationElementId){const{position:et}=this.#u;let[it,st]=this.getInitialTranslation();[it,st]=this.pageTranslationToScreen(it,st);const[nt,ot]=this.pageDimensions,[ht,pt]=this.pageTranslation;let lt,ut;switch(this.rotation){case 0:lt=g+(et[0]-ht)/nt,ut=d+this.height-(et[1]-pt)/ot;break;case 90:lt=g+(et[0]-ht)/nt,ut=d-(et[1]-pt)/ot,[it,st]=[st,-it];break;case 180:lt=g-this.width+(et[0]-ht)/nt,ut=d-(et[1]-pt)/ot,[it,st]=[-it,-st];break;case 270:lt=g+(et[0]-ht-this.height*ot)/nt,ut=d+(et[1]-pt-this.width*nt)/ot,[it,st]=[-st,it];break}this.setAt(lt*tt,ut*rt,it,st)}else this.setAt(g*tt,d*rt,this.width*tt,this.height*rt);this.#p(),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}#p(){if(this.editorDiv.replaceChildren(),!!this.#o)for(const g of this.#o.split(`
`)){const d=document.createElement("div");d.append(g?document.createTextNode(g):document.createElement("br")),this.editorDiv.append(d)}}get contentDiv(){return this.editorDiv}static deserialize(g,d,j){let tt=null;if(g instanceof h.FreeTextAnnotationElement){const{data:{defaultAppearanceData:{fontSize:et,fontColor:it},rect:st,rotation:nt,id:ot},textContent:ht,textPosition:pt,parent:{page:{pageNumber:lt}}}=g;if(!ht||ht.length===0)return null;tt=g={annotationType:o.AnnotationEditorType.FREETEXT,color:Array.from(it),fontSize:et,value:ht.join(`
`),position:pt,pageIndex:lt-1,rect:st,rotation:nt,id:ot,deleted:!1}}const rt=super.deserialize(g,d,j);return rt.#l=g.fontSize,rt.#a=o.Util.makeHexColor(...g.color),rt.#o=g.value,rt.annotationElementId=g.id||null,rt.#u=tt,rt}serialize(g=!1){if(this.isEmpty())return null;if(this.deleted)return{pageIndex:this.pageIndex,id:this.annotationElementId,deleted:!0};const d=_._internalPadding*this.parentScale,j=this.getRect(d,d),tt=c.AnnotationEditor._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.#a),rt={annotationType:o.AnnotationEditorType.FREETEXT,color:tt,fontSize:this.#l,value:this.#o,pageIndex:this.pageIndex,rect:j,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return g?rt:this.annotationElementId&&!this.#_(rt)?null:(rt.id=this.annotationElementId,rt)}#_(g){const{value:d,fontSize:j,color:tt,rect:rt,pageIndex:et}=this.#u;return g.value!==d||g.fontSize!==j||g.rect.some((it,st)=>Math.abs(it-rt[st])>=1)||g.color.some((it,st)=>it!==tt[st])||g.pageIndex!==et}#g(g=!1){if(!this.annotationElementId)return;if(this.#d(),!g&&(this.width===0||this.height===0)){setTimeout(()=>this.#g(!0),0);return}const d=_._internalPadding*this.parentScale;this.#u.rect=this.getRect(d,d)}}e.FreeTextEditor=_},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampAnnotationElement=e.InkAnnotationElement=e.FreeTextAnnotationElement=e.AnnotationLayer=void 0;var o=s(1),a=s(6),c=s(3),h=s(30),_=s(31),$=s(32);const g=1e3,d=9,j=new WeakSet;function tt(At){return{width:At[2]-At[0],height:At[3]-At[1]}}class rt{static create(at){switch(at.data.annotationType){case o.AnnotationType.LINK:return new it(at);case o.AnnotationType.TEXT:return new st(at);case o.AnnotationType.WIDGET:switch(at.data.fieldType){case"Tx":return new ot(at);case"Btn":return at.data.radioButton?new lt(at):at.data.checkBox?new pt(at):new ut(at);case"Ch":return new yt(at);case"Sig":return new ht(at)}return new nt(at);case o.AnnotationType.POPUP:return new Pt(at);case o.AnnotationType.FREETEXT:return new Vt(at);case o.AnnotationType.LINE:return new Dt(at);case o.AnnotationType.SQUARE:return new Qt(at);case o.AnnotationType.CIRCLE:return new Wt(at);case o.AnnotationType.POLYLINE:return new Kt(at);case o.AnnotationType.CARET:return new Ht(at);case o.AnnotationType.INK:return new St(at);case o.AnnotationType.POLYGON:return new tn(at);case o.AnnotationType.HIGHLIGHT:return new ft(at);case o.AnnotationType.UNDERLINE:return new ct(at);case o.AnnotationType.SQUIGGLY:return new dt(at);case o.AnnotationType.STRIKEOUT:return new gt(at);case o.AnnotationType.STAMP:return new Tt(at);case o.AnnotationType.FILEATTACHMENT:return new wt(at);default:return new et(at)}}}class et{#e=!1;constructor(at,{isRenderable:mt=!1,ignoreBorder:_t=!1,createQuadrilaterals:Rt=!1}={}){this.isRenderable=mt,this.data=at.data,this.layer=at.layer,this.linkService=at.linkService,this.downloadManager=at.downloadManager,this.imageResourcesPath=at.imageResourcesPath,this.renderForms=at.renderForms,this.svgFactory=at.svgFactory,this.annotationStorage=at.annotationStorage,this.enableScripting=at.enableScripting,this.hasJSActions=at.hasJSActions,this._fieldObjects=at.fieldObjects,this.parent=at.parent,mt&&(this.container=this._createContainer(_t)),Rt&&this._createQuadrilaterals()}static _hasPopupData({titleObj:at,contentsObj:mt,richText:_t}){return!!(at?.str||mt?.str||_t?.str)}get hasPopupData(){return et._hasPopupData(this.data)}_createContainer(at){const{data:mt,parent:{page:_t,viewport:Rt}}=this,bt=document.createElement("section");bt.setAttribute("data-annotation-id",mt.id),this instanceof nt||(bt.tabIndex=g),bt.style.zIndex=this.parent.zIndex++,this.data.popupRef&&bt.setAttribute("aria-haspopup","dialog"),mt.noRotate&&bt.classList.add("norotate");const{pageWidth:Ct,pageHeight:$t,pageX:Ut,pageY:en}=Rt.rawDims;if(!mt.rect||this instanceof Pt){const{rotation:Xt}=mt;return!mt.hasOwnCanvas&&Xt!==0&&this.setRotation(Xt,bt),bt}const{width:Nt,height:Bt}=tt(mt.rect),zt=o.Util.normalizeRect([mt.rect[0],_t.view[3]-mt.rect[1]+_t.view[1],mt.rect[2],_t.view[3]-mt.rect[3]+_t.view[1]]);if(!at&&mt.borderStyle.width>0){bt.style.borderWidth=`${mt.borderStyle.width}px`;const Xt=mt.borderStyle.horizontalCornerRadius,sn=mt.borderStyle.verticalCornerRadius;if(Xt>0||sn>0){const mn=`calc(${Xt}px * var(--scale-factor)) / calc(${sn}px * var(--scale-factor))`;bt.style.borderRadius=mn}else if(this instanceof lt){const mn=`calc(${Nt}px * var(--scale-factor)) / calc(${Bt}px * var(--scale-factor))`;bt.style.borderRadius=mn}switch(mt.borderStyle.style){case o.AnnotationBorderStyleType.SOLID:bt.style.borderStyle="solid";break;case o.AnnotationBorderStyleType.DASHED:bt.style.borderStyle="dashed";break;case o.AnnotationBorderStyleType.BEVELED:(0,o.warn)("Unimplemented border style: beveled");break;case o.AnnotationBorderStyleType.INSET:(0,o.warn)("Unimplemented border style: inset");break;case o.AnnotationBorderStyleType.UNDERLINE:bt.style.borderBottomStyle="solid";break}const cn=mt.borderColor||null;cn?(this.#e=!0,bt.style.borderColor=o.Util.makeHexColor(cn[0]|0,cn[1]|0,cn[2]|0)):bt.style.borderWidth=0}bt.style.left=`${100*(zt[0]-Ut)/Ct}%`,bt.style.top=`${100*(zt[1]-en)/$t}%`;const{rotation:Gt}=mt;return mt.hasOwnCanvas||Gt===0?(bt.style.width=`${100*Nt/Ct}%`,bt.style.height=`${100*Bt/$t}%`):this.setRotation(Gt,bt),bt}setRotation(at,mt=this.container){if(!this.data.rect)return;const{pageWidth:_t,pageHeight:Rt}=this.parent.viewport.rawDims,{width:bt,height:Ct}=tt(this.data.rect);let $t,Ut;at%180===0?($t=100*bt/_t,Ut=100*Ct/Rt):($t=100*Ct/_t,Ut=100*bt/Rt),mt.style.width=`${$t}%`,mt.style.height=`${Ut}%`,mt.setAttribute("data-main-rotation",(360-at)%360)}get _commonActions(){const at=(mt,_t,Rt)=>{const bt=Rt.detail[mt],Ct=bt[0],$t=bt.slice(1);Rt.target.style[_t]=h.ColorConverters[`${Ct}_HTML`]($t),this.annotationStorage.setValue(this.data.id,{[_t]:h.ColorConverters[`${Ct}_rgb`]($t)})};return(0,o.shadow)(this,"_commonActions",{display:mt=>{const{display:_t}=mt.detail,Rt=_t%2===1;this.container.style.visibility=Rt?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:Rt,noPrint:_t===1||_t===2})},print:mt=>{this.annotationStorage.setValue(this.data.id,{noPrint:!mt.detail.print})},hidden:mt=>{const{hidden:_t}=mt.detail;this.container.style.visibility=_t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:_t,noView:_t})},focus:mt=>{setTimeout(()=>mt.target.focus({preventScroll:!1}),0)},userName:mt=>{mt.target.title=mt.detail.userName},readonly:mt=>{mt.target.disabled=mt.detail.readonly},required:mt=>{this._setRequired(mt.target,mt.detail.required)},bgColor:mt=>{at("bgColor","backgroundColor",mt)},fillColor:mt=>{at("fillColor","backgroundColor",mt)},fgColor:mt=>{at("fgColor","color",mt)},textColor:mt=>{at("textColor","color",mt)},borderColor:mt=>{at("borderColor","borderColor",mt)},strokeColor:mt=>{at("strokeColor","borderColor",mt)},rotation:mt=>{const _t=mt.detail.rotation;this.setRotation(_t),this.annotationStorage.setValue(this.data.id,{rotation:_t})}})}_dispatchEventFromSandbox(at,mt){const _t=this._commonActions;for(const Rt of Object.keys(mt.detail))(at[Rt]||_t[Rt])?.(mt)}_setDefaultPropertiesFromJS(at){if(!this.enableScripting)return;const mt=this.annotationStorage.getRawValue(this.data.id);if(!mt)return;const _t=this._commonActions;for(const[Rt,bt]of Object.entries(mt)){const Ct=_t[Rt];if(Ct){const $t={detail:{[Rt]:bt},target:at};Ct($t),delete mt[Rt]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:at}=this.data;if(!at)return;const[mt,_t,Rt,bt]=this.data.rect;if(at.length===1){const[,{x:sn,y:cn},{x:mn,y:En}]=at[0];if(Rt===sn&&bt===cn&&mt===mn&&_t===En)return}const{style:Ct}=this.container;let $t;if(this.#e){const{borderColor:sn,borderWidth:cn}=Ct;Ct.borderWidth=0,$t=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${sn}" stroke-width="${cn}">`],this.container.classList.add("hasBorder")}const Ut=Rt-mt,en=bt-_t,{svgFactory:Nt}=this,Bt=Nt.createElement("svg");Bt.classList.add("quadrilateralsContainer"),Bt.setAttribute("width",0),Bt.setAttribute("height",0);const zt=Nt.createElement("defs");Bt.append(zt);const Gt=Nt.createElement("clipPath"),Xt=`clippath_${this.data.id}`;Gt.setAttribute("id",Xt),Gt.setAttribute("clipPathUnits","objectBoundingBox"),zt.append(Gt);for(const[,{x:sn,y:cn},{x:mn,y:En}]of at){const vn=Nt.createElement("rect"),Rn=(mn-mt)/Ut,Nn=(bt-cn)/en,xn=(sn-mn)/Ut,Kn=(cn-En)/en;vn.setAttribute("x",Rn),vn.setAttribute("y",Nn),vn.setAttribute("width",xn),vn.setAttribute("height",Kn),Gt.append(vn),$t?.push(`<rect vector-effect="non-scaling-stroke" x="${Rn}" y="${Nn}" width="${xn}" height="${Kn}"/>`)}this.#e&&($t.push("</g></svg>')"),Ct.backgroundImage=$t.join("")),this.container.append(Bt),this.container.style.clipPath=`url(#${Xt})`}_createPopup(){const{container:at,data:mt}=this;at.setAttribute("aria-haspopup","dialog");const _t=new Pt({data:{color:mt.color,titleObj:mt.titleObj,modificationDate:mt.modificationDate,contentsObj:mt.contentsObj,richText:mt.richText,parentRect:mt.rect,borderStyle:0,id:`popup_${mt.id}`,rotation:mt.rotation},parent:this.parent,elements:[this]});this.parent.div.append(_t.render())}render(){(0,o.unreachable)("Abstract method `AnnotationElement.render` called")}_getElementsByName(at,mt=null){const _t=[];if(this._fieldObjects){const Rt=this._fieldObjects[at];if(Rt)for(const{page:bt,id:Ct,exportValues:$t}of Rt){if(bt===-1||Ct===mt)continue;const Ut=typeof $t=="string"?$t:null,en=document.querySelector(`[data-element-id="${Ct}"]`);if(en&&!j.has(en)){(0,o.warn)(`_getElementsByName - element not allowed: ${Ct}`);continue}_t.push({id:Ct,exportValue:Ut,domElement:en})}return _t}for(const Rt of document.getElementsByName(at)){const{exportValue:bt}=Rt,Ct=Rt.getAttribute("data-element-id");Ct!==mt&&j.has(Rt)&&_t.push({id:Ct,exportValue:bt,domElement:Rt})}return _t}show(){this.container&&(this.container.hidden=!1),this.popup?.maybeShow()}hide(){this.container&&(this.container.hidden=!0),this.popup?.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const at=this.getElementsToTriggerPopup();if(Array.isArray(at))for(const mt of at)mt.classList.add("highlightArea");else at.classList.add("highlightArea")}_editOnDoubleClick(){const{annotationEditorType:at,data:{id:mt}}=this;this.container.addEventListener("dblclick",()=>{this.linkService.eventBus?.dispatch("switchannotationeditormode",{source:this,mode:at,editId:mt})})}}class it extends et{constructor(at,mt=null){super(at,{isRenderable:!0,ignoreBorder:!!mt?.ignoreBorder,createQuadrilaterals:!0}),this.isTooltipOnly=at.data.isTooltipOnly}render(){const{data:at,linkService:mt}=this,_t=document.createElement("a");_t.setAttribute("data-element-id",at.id);let Rt=!1;return at.url?(mt.addLinkAttributes(_t,at.url,at.newWindow),Rt=!0):at.action?(this._bindNamedAction(_t,at.action),Rt=!0):at.attachment?(this._bindAttachment(_t,at.attachment),Rt=!0):at.setOCGState?(this.#t(_t,at.setOCGState),Rt=!0):at.dest?(this._bindLink(_t,at.dest),Rt=!0):(at.actions&&(at.actions.Action||at.actions["Mouse Up"]||at.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(_t,at),Rt=!0),at.resetForm?(this._bindResetFormAction(_t,at.resetForm),Rt=!0):this.isTooltipOnly&&!Rt&&(this._bindLink(_t,""),Rt=!0)),this.container.classList.add("linkAnnotation"),Rt&&this.container.append(_t),this.container}#e(){this.container.setAttribute("data-internal-link","")}_bindLink(at,mt){at.href=this.linkService.getDestinationHash(mt),at.onclick=()=>(mt&&this.linkService.goToDestination(mt),!1),(mt||mt==="")&&this.#e()}_bindNamedAction(at,mt){at.href=this.linkService.getAnchorUrl(""),at.onclick=()=>(this.linkService.executeNamedAction(mt),!1),this.#e()}_bindAttachment(at,mt){at.href=this.linkService.getAnchorUrl(""),at.onclick=()=>(this.downloadManager?.openOrDownloadData(this.container,mt.content,mt.filename),!1),this.#e()}#t(at,mt){at.href=this.linkService.getAnchorUrl(""),at.onclick=()=>(this.linkService.executeSetOCGState(mt),!1),this.#e()}_bindJSAction(at,mt){at.href=this.linkService.getAnchorUrl("");const _t=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const Rt of Object.keys(mt.actions)){const bt=_t.get(Rt);bt&&(at[bt]=()=>(this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt.id,name:Rt}}),!1))}at.onclick||(at.onclick=()=>!1),this.#e()}_bindResetFormAction(at,mt){const _t=at.onclick;if(_t||(at.href=this.linkService.getAnchorUrl("")),this.#e(),!this._fieldObjects){(0,o.warn)('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),_t||(at.onclick=()=>!1);return}at.onclick=()=>{_t?.();const{fields:Rt,refs:bt,include:Ct}=mt,$t=[];if(Rt.length!==0||bt.length!==0){const Nt=new Set(bt);for(const Bt of Rt){const zt=this._fieldObjects[Bt]||[];for(const{id:Gt}of zt)Nt.add(Gt)}for(const Bt of Object.values(this._fieldObjects))for(const zt of Bt)Nt.has(zt.id)===Ct&&$t.push(zt)}else for(const Nt of Object.values(this._fieldObjects))$t.push(...Nt);const Ut=this.annotationStorage,en=[];for(const Nt of $t){const{id:Bt}=Nt;switch(en.push(Bt),Nt.type){case"text":{const Gt=Nt.defaultValue||"";Ut.setValue(Bt,{value:Gt});break}case"checkbox":case"radiobutton":{const Gt=Nt.defaultValue===Nt.exportValues;Ut.setValue(Bt,{value:Gt});break}case"combobox":case"listbox":{const Gt=Nt.defaultValue||"";Ut.setValue(Bt,{value:Gt});break}default:continue}const zt=document.querySelector(`[data-element-id="${Bt}"]`);if(zt){if(!j.has(zt)){(0,o.warn)(`_bindResetFormAction - element not allowed: ${Bt}`);continue}}else continue;zt.dispatchEvent(new Event("resetform"))}return this.enableScripting&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:en,name:"ResetForm"}}),!1}}}class st extends et{constructor(at){super(at,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const at=document.createElement("img");return at.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",at.alt="[{{type}} Annotation]",at.dataset.l10nId="text_annotation_type",at.dataset.l10nArgs=JSON.stringify({type:this.data.name}),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(at),this.container}}class nt extends et{render(){return this.data.alternativeText&&(this.container.title=this.data.alternativeText),this.container}showElementAndHideCanvas(at){this.data.hasOwnCanvas&&(at.previousSibling?.nodeName==="CANVAS"&&(at.previousSibling.hidden=!0),at.hidden=!1)}_getKeyModifier(at){const{isWin:mt,isMac:_t}=o.FeatureTest.platform;return mt&&at.ctrlKey||_t&&at.metaKey}_setEventListener(at,mt,_t,Rt,bt){_t.includes("mouse")?at.addEventListener(_t,Ct=>{this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Rt,value:bt(Ct),shift:Ct.shiftKey,modifier:this._getKeyModifier(Ct)}})}):at.addEventListener(_t,Ct=>{if(_t==="blur"){if(!mt.focused||!Ct.relatedTarget)return;mt.focused=!1}else if(_t==="focus"){if(mt.focused)return;mt.focused=!0}bt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:Rt,value:bt(Ct)}})})}_setEventListeners(at,mt,_t,Rt){for(const[bt,Ct]of _t)(Ct==="Action"||this.data.actions?.[Ct])&&((Ct==="Focus"||Ct==="Blur")&&(mt||={focused:!1}),this._setEventListener(at,mt,bt,Ct,Rt),Ct==="Focus"&&!this.data.actions?.Blur?this._setEventListener(at,mt,"blur","Blur",null):Ct==="Blur"&&!this.data.actions?.Focus&&this._setEventListener(at,mt,"focus","Focus",null))}_setBackgroundColor(at){const mt=this.data.backgroundColor||null;at.style.backgroundColor=mt===null?"transparent":o.Util.makeHexColor(mt[0],mt[1],mt[2])}_setTextStyle(at){const mt=["left","center","right"],{fontColor:_t}=this.data.defaultAppearanceData,Rt=this.data.defaultAppearanceData.fontSize||d,bt=at.style;let Ct;const $t=2,Ut=en=>Math.round(10*en)/10;if(this.data.multiLine){const en=Math.abs(this.data.rect[3]-this.data.rect[1]-$t),Nt=Math.round(en/(o.LINE_FACTOR*Rt))||1,Bt=en/Nt;Ct=Math.min(Rt,Ut(Bt/o.LINE_FACTOR))}else{const en=Math.abs(this.data.rect[3]-this.data.rect[1]-$t);Ct=Math.min(Rt,Ut(en/o.LINE_FACTOR))}bt.fontSize=`calc(${Ct}px * var(--scale-factor))`,bt.color=o.Util.makeHexColor(_t[0],_t[1],_t[2]),this.data.textAlignment!==null&&(bt.textAlign=mt[this.data.textAlignment])}_setRequired(at,mt){mt?at.setAttribute("required",!0):at.removeAttribute("required"),at.setAttribute("aria-required",mt)}}class ot extends nt{constructor(at){const mt=at.renderForms||!at.data.hasAppearance&&!!at.data.fieldValue;super(at,{isRenderable:mt})}setPropertyOnSiblings(at,mt,_t,Rt){const bt=this.annotationStorage;for(const Ct of this._getElementsByName(at.name,at.id))Ct.domElement&&(Ct.domElement[mt]=_t),bt.setValue(Ct.id,{[Rt]:_t})}render(){const at=this.annotationStorage,mt=this.data.id;this.container.classList.add("textWidgetAnnotation");let _t=null;if(this.renderForms){const Rt=at.getValue(mt,{value:this.data.fieldValue});let bt=Rt.value||"";const Ct=at.getValue(mt,{charLimit:this.data.maxLen}).charLimit;Ct&&bt.length>Ct&&(bt=bt.slice(0,Ct));let $t=Rt.formattedValue||this.data.textContent?.join(`
`)||null;$t&&this.data.comb&&($t=$t.replaceAll(/\s+/g,""));const Ut={userValue:bt,formattedValue:$t,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(_t=document.createElement("textarea"),_t.textContent=$t??bt,this.data.doNotScroll&&(_t.style.overflowY="hidden")):(_t=document.createElement("input"),_t.type="text",_t.setAttribute("value",$t??bt),this.data.doNotScroll&&(_t.style.overflowX="hidden")),this.data.hasOwnCanvas&&(_t.hidden=!0),j.add(_t),_t.setAttribute("data-element-id",mt),_t.disabled=this.data.readOnly,_t.name=this.data.fieldName,_t.tabIndex=g,this._setRequired(_t,this.data.required),Ct&&(_t.maxLength=Ct),_t.addEventListener("input",Nt=>{at.setValue(mt,{value:Nt.target.value}),this.setPropertyOnSiblings(_t,"value",Nt.target.value,"value"),Ut.formattedValue=null}),_t.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue??"";_t.value=Ut.userValue=Bt,Ut.formattedValue=null});let en=Nt=>{const{formattedValue:Bt}=Ut;Bt!=null&&(Nt.target.value=Bt),Nt.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){_t.addEventListener("focus",Bt=>{if(Ut.focused)return;const{target:zt}=Bt;Ut.userValue&&(zt.value=Ut.userValue),Ut.lastCommittedValue=zt.value,Ut.commitKey=1,Ut.focused=!0}),_t.addEventListener("updatefromsandbox",Bt=>{this.showElementAndHideCanvas(Bt.target);const zt={value(Gt){Ut.userValue=Gt.detail.value??"",at.setValue(mt,{value:Ut.userValue.toString()}),Gt.target.value=Ut.userValue},formattedValue(Gt){const{formattedValue:Xt}=Gt.detail;Ut.formattedValue=Xt,Xt!=null&&Gt.target!==document.activeElement&&(Gt.target.value=Xt),at.setValue(mt,{formattedValue:Xt})},selRange(Gt){Gt.target.setSelectionRange(...Gt.detail.selRange)},charLimit:Gt=>{const{charLimit:Xt}=Gt.detail,{target:sn}=Gt;if(Xt===0){sn.removeAttribute("maxLength");return}sn.setAttribute("maxLength",Xt);let cn=Ut.userValue;!cn||cn.length<=Xt||(cn=cn.slice(0,Xt),sn.value=Ut.userValue=cn,at.setValue(mt,{value:cn}),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt,name:"Keystroke",value:cn,willCommit:!0,commitKey:1,selStart:sn.selectionStart,selEnd:sn.selectionEnd}}))}};this._dispatchEventFromSandbox(zt,Bt)}),_t.addEventListener("keydown",Bt=>{Ut.commitKey=1;let zt=-1;if(Bt.key==="Escape"?zt=0:Bt.key==="Enter"&&!this.data.multiLine?zt=2:Bt.key==="Tab"&&(Ut.commitKey=3),zt===-1)return;const{value:Gt}=Bt.target;Ut.lastCommittedValue!==Gt&&(Ut.lastCommittedValue=Gt,Ut.userValue=Gt,this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt,name:"Keystroke",value:Gt,willCommit:!0,commitKey:zt,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}))});const Nt=en;en=null,_t.addEventListener("blur",Bt=>{if(!Ut.focused||!Bt.relatedTarget)return;Ut.focused=!1;const{value:zt}=Bt.target;Ut.userValue=zt,Ut.lastCommittedValue!==zt&&this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt,name:"Keystroke",value:zt,willCommit:!0,commitKey:Ut.commitKey,selStart:Bt.target.selectionStart,selEnd:Bt.target.selectionEnd}}),Nt(Bt)}),this.data.actions?.Keystroke&&_t.addEventListener("beforeinput",Bt=>{Ut.lastCommittedValue=null;const{data:zt,target:Gt}=Bt,{value:Xt,selectionStart:sn,selectionEnd:cn}=Gt;let mn=sn,En=cn;switch(Bt.inputType){case"deleteWordBackward":{const vn=Xt.substring(0,sn).match(/\w*[^\w]*$/);vn&&(mn-=vn[0].length);break}case"deleteWordForward":{const vn=Xt.substring(sn).match(/^[^\w]*\w*/);vn&&(En+=vn[0].length);break}case"deleteContentBackward":sn===cn&&(mn-=1);break;case"deleteContentForward":sn===cn&&(En+=1);break}Bt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt,name:"Keystroke",value:Xt,change:zt||"",willCommit:!1,selStart:mn,selEnd:En}})}),this._setEventListeners(_t,Ut,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Bt=>Bt.target.value)}if(en&&_t.addEventListener("blur",en),this.data.comb){const Bt=(this.data.rect[2]-this.data.rect[0])/Ct;_t.classList.add("comb"),_t.style.letterSpacing=`calc(${Bt}px * var(--scale-factor) - 1ch)`}}else _t=document.createElement("div"),_t.textContent=this.data.fieldValue,_t.style.verticalAlign="middle",_t.style.display="table-cell";return this._setTextStyle(_t),this._setBackgroundColor(_t),this._setDefaultPropertiesFromJS(_t),this.container.append(_t),this.container}}class ht extends nt{constructor(at){super(at,{isRenderable:!!at.data.hasOwnCanvas})}}class pt extends nt{constructor(at){super(at,{isRenderable:at.renderForms})}render(){const at=this.annotationStorage,mt=this.data,_t=mt.id;let Rt=at.getValue(_t,{value:mt.exportValue===mt.fieldValue}).value;typeof Rt=="string"&&(Rt=Rt!=="Off",at.setValue(_t,{value:Rt})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const bt=document.createElement("input");return j.add(bt),bt.setAttribute("data-element-id",_t),bt.disabled=mt.readOnly,this._setRequired(bt,this.data.required),bt.type="checkbox",bt.name=mt.fieldName,Rt&&bt.setAttribute("checked",!0),bt.setAttribute("exportValue",mt.exportValue),bt.tabIndex=g,bt.addEventListener("change",Ct=>{const{name:$t,checked:Ut}=Ct.target;for(const en of this._getElementsByName($t,_t)){const Nt=Ut&&en.exportValue===mt.exportValue;en.domElement&&(en.domElement.checked=Nt),at.setValue(en.id,{value:Nt})}at.setValue(_t,{value:Ut})}),bt.addEventListener("resetform",Ct=>{const $t=mt.defaultFieldValue||"Off";Ct.target.checked=$t===mt.exportValue}),this.enableScripting&&this.hasJSActions&&(bt.addEventListener("updatefromsandbox",Ct=>{const $t={value(Ut){Ut.target.checked=Ut.detail.value!=="Off",at.setValue(_t,{value:Ut.target.checked})}};this._dispatchEventFromSandbox($t,Ct)}),this._setEventListeners(bt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],Ct=>Ct.target.checked)),this._setBackgroundColor(bt),this._setDefaultPropertiesFromJS(bt),this.container.append(bt),this.container}}class lt extends nt{constructor(at){super(at,{isRenderable:at.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const at=this.annotationStorage,mt=this.data,_t=mt.id;let Rt=at.getValue(_t,{value:mt.fieldValue===mt.buttonValue}).value;typeof Rt=="string"&&(Rt=Rt!==mt.buttonValue,at.setValue(_t,{value:Rt}));const bt=document.createElement("input");if(j.add(bt),bt.setAttribute("data-element-id",_t),bt.disabled=mt.readOnly,this._setRequired(bt,this.data.required),bt.type="radio",bt.name=mt.fieldName,Rt&&bt.setAttribute("checked",!0),bt.tabIndex=g,bt.addEventListener("change",Ct=>{const{name:$t,checked:Ut}=Ct.target;for(const en of this._getElementsByName($t,_t))at.setValue(en.id,{value:!1});at.setValue(_t,{value:Ut})}),bt.addEventListener("resetform",Ct=>{const $t=mt.defaultFieldValue;Ct.target.checked=$t!=null&&$t===mt.buttonValue}),this.enableScripting&&this.hasJSActions){const Ct=mt.buttonValue;bt.addEventListener("updatefromsandbox",$t=>{const Ut={value:en=>{const Nt=Ct===en.detail.value;for(const Bt of this._getElementsByName(en.target.name)){const zt=Nt&&Bt.id===_t;Bt.domElement&&(Bt.domElement.checked=zt),at.setValue(Bt.id,{value:zt})}}};this._dispatchEventFromSandbox(Ut,$t)}),this._setEventListeners(bt,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],$t=>$t.target.checked)}return this._setBackgroundColor(bt),this._setDefaultPropertiesFromJS(bt),this.container.append(bt),this.container}}class ut extends it{constructor(at){super(at,{ignoreBorder:at.data.hasAppearance})}render(){const at=super.render();at.classList.add("buttonWidgetAnnotation","pushButton"),this.data.alternativeText&&(at.title=this.data.alternativeText);const mt=at.lastChild;return this.enableScripting&&this.hasJSActions&&mt&&(this._setDefaultPropertiesFromJS(mt),mt.addEventListener("updatefromsandbox",_t=>{this._dispatchEventFromSandbox({},_t)})),at}}class yt extends nt{constructor(at){super(at,{isRenderable:at.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const at=this.annotationStorage,mt=this.data.id,_t=at.getValue(mt,{value:this.data.fieldValue}),Rt=document.createElement("select");j.add(Rt),Rt.setAttribute("data-element-id",mt),Rt.disabled=this.data.readOnly,this._setRequired(Rt,this.data.required),Rt.name=this.data.fieldName,Rt.tabIndex=g;let bt=this.data.combo&&this.data.options.length>0;this.data.combo||(Rt.size=this.data.options.length,this.data.multiSelect&&(Rt.multiple=!0)),Rt.addEventListener("resetform",Nt=>{const Bt=this.data.defaultFieldValue;for(const zt of Rt.options)zt.selected=zt.value===Bt});for(const Nt of this.data.options){const Bt=document.createElement("option");Bt.textContent=Nt.displayValue,Bt.value=Nt.exportValue,_t.value.includes(Nt.exportValue)&&(Bt.setAttribute("selected",!0),bt=!1),Rt.append(Bt)}let Ct=null;if(bt){const Nt=document.createElement("option");Nt.value=" ",Nt.setAttribute("hidden",!0),Nt.setAttribute("selected",!0),Rt.prepend(Nt),Ct=()=>{Nt.remove(),Rt.removeEventListener("input",Ct),Ct=null},Rt.addEventListener("input",Ct)}const $t=Nt=>{const Bt=Nt?"value":"textContent",{options:zt,multiple:Gt}=Rt;return Gt?Array.prototype.filter.call(zt,Xt=>Xt.selected).map(Xt=>Xt[Bt]):zt.selectedIndex===-1?null:zt[zt.selectedIndex][Bt]};let Ut=$t(!1);const en=Nt=>{const Bt=Nt.target.options;return Array.prototype.map.call(Bt,zt=>({displayValue:zt.textContent,exportValue:zt.value}))};return this.enableScripting&&this.hasJSActions?(Rt.addEventListener("updatefromsandbox",Nt=>{const Bt={value(zt){Ct?.();const Gt=zt.detail.value,Xt=new Set(Array.isArray(Gt)?Gt:[Gt]);for(const sn of Rt.options)sn.selected=Xt.has(sn.value);at.setValue(mt,{value:$t(!0)}),Ut=$t(!1)},multipleSelection(zt){Rt.multiple=!0},remove(zt){const Gt=Rt.options,Xt=zt.detail.remove;Gt[Xt].selected=!1,Rt.remove(Xt),Gt.length>0&&Array.prototype.findIndex.call(Gt,cn=>cn.selected)===-1&&(Gt[0].selected=!0),at.setValue(mt,{value:$t(!0),items:en(zt)}),Ut=$t(!1)},clear(zt){for(;Rt.length!==0;)Rt.remove(0);at.setValue(mt,{value:null,items:[]}),Ut=$t(!1)},insert(zt){const{index:Gt,displayValue:Xt,exportValue:sn}=zt.detail.insert,cn=Rt.children[Gt],mn=document.createElement("option");mn.textContent=Xt,mn.value=sn,cn?cn.before(mn):Rt.append(mn),at.setValue(mt,{value:$t(!0),items:en(zt)}),Ut=$t(!1)},items(zt){const{items:Gt}=zt.detail;for(;Rt.length!==0;)Rt.remove(0);for(const Xt of Gt){const{displayValue:sn,exportValue:cn}=Xt,mn=document.createElement("option");mn.textContent=sn,mn.value=cn,Rt.append(mn)}Rt.options.length>0&&(Rt.options[0].selected=!0),at.setValue(mt,{value:$t(!0),items:en(zt)}),Ut=$t(!1)},indices(zt){const Gt=new Set(zt.detail.indices);for(const Xt of zt.target.options)Xt.selected=Gt.has(Xt.index);at.setValue(mt,{value:$t(!0)}),Ut=$t(!1)},editable(zt){zt.target.disabled=!zt.detail.editable}};this._dispatchEventFromSandbox(Bt,Nt)}),Rt.addEventListener("input",Nt=>{const Bt=$t(!0);at.setValue(mt,{value:Bt}),Nt.preventDefault(),this.linkService.eventBus?.dispatch("dispatcheventinsandbox",{source:this,detail:{id:mt,name:"Keystroke",value:Ut,changeEx:Bt,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(Rt,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],Nt=>Nt.target.value)):Rt.addEventListener("input",function(Nt){at.setValue(mt,{value:$t(!0)})}),this.data.combo&&this._setTextStyle(Rt),this._setBackgroundColor(Rt),this._setDefaultPropertiesFromJS(Rt),this.container.append(Rt),this.container}}class Pt extends et{constructor(at){const{data:mt,elements:_t}=at;super(at,{isRenderable:et._hasPopupData(mt)}),this.elements=_t}render(){this.container.classList.add("popupAnnotation");const at=new vt({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),mt=[];for(const _t of this.elements)_t.popup=at,mt.push(_t.data.id),_t.addHighlightArea();return this.container.setAttribute("aria-controls",mt.map(_t=>`${o.AnnotationPrefix}${_t}`).join(",")),this.container}}class vt{#e=null;#t=this.#c.bind(this);#n=this.#T.bind(this);#r=this.#P.bind(this);#a=this.#y.bind(this);#o=null;#s=null;#l=null;#u=null;#i=null;#f=null;#h=!1;#d=null;#p=null;#_=null;#g=null;#m=!1;constructor({container:at,color:mt,elements:_t,titleObj:Rt,modificationDate:bt,contentsObj:Ct,richText:$t,parent:Ut,rect:en,parentRect:Nt,open:Bt}){this.#s=at,this.#g=Rt,this.#l=Ct,this.#_=$t,this.#i=Ut,this.#o=mt,this.#p=en,this.#f=Nt,this.#u=_t;const zt=a.PDFDateString.toDateObject(bt);zt&&(this.#e=Ut.l10n.get("annotation_date_string",{date:zt.toLocaleDateString(),time:zt.toLocaleTimeString()})),this.trigger=_t.flatMap(Gt=>Gt.getElementsToTriggerPopup());for(const Gt of this.trigger)Gt.addEventListener("click",this.#a),Gt.addEventListener("mouseenter",this.#r),Gt.addEventListener("mouseleave",this.#n),Gt.classList.add("popupTriggerArea");for(const Gt of _t)Gt.container?.addEventListener("keydown",this.#t);this.#s.hidden=!0,Bt&&this.#y()}render(){if(this.#d)return;const{page:{view:at},viewport:{rawDims:{pageWidth:mt,pageHeight:_t,pageX:Rt,pageY:bt}}}=this.#i,Ct=this.#d=document.createElement("div");if(Ct.className="popup",this.#o){const vn=Ct.style.outlineColor=o.Util.makeHexColor(...this.#o);CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?Ct.style.backgroundColor=`color-mix(in srgb, ${vn} 30%, white)`:Ct.style.backgroundColor=o.Util.makeHexColor(...this.#o.map(Nn=>Math.floor(.7*(255-Nn)+Nn)))}const $t=document.createElement("span");$t.className="header";const Ut=document.createElement("h1");if($t.append(Ut),{dir:Ut.dir,str:Ut.textContent}=this.#g,Ct.append($t),this.#e){const vn=document.createElement("span");vn.classList.add("popupDate"),this.#e.then(Rn=>{vn.textContent=Rn}),$t.append(vn)}const en=this.#l,Nt=this.#_;if(Nt?.str&&(!en?.str||en.str===Nt.str))$.XfaLayer.render({xfaHtml:Nt.html,intent:"richText",div:Ct}),Ct.lastChild.classList.add("richText","popupContent");else{const vn=this._formatContents(en);Ct.append(vn)}let Bt=!!this.#f,zt=Bt?this.#f:this.#p;for(const vn of this.#u)if(!zt||o.Util.intersect(vn.data.rect,zt)!==null){zt=vn.data.rect,Bt=!0;break}const Gt=o.Util.normalizeRect([zt[0],at[3]-zt[1]+at[1],zt[2],at[3]-zt[3]+at[1]]),sn=Bt?zt[2]-zt[0]+5:0,cn=Gt[0]+sn,mn=Gt[1],{style:En}=this.#s;En.left=`${100*(cn-Rt)/mt}%`,En.top=`${100*(mn-bt)/_t}%`,this.#s.append(Ct)}_formatContents({str:at,dir:mt}){const _t=document.createElement("p");_t.classList.add("popupContent"),_t.dir=mt;const Rt=at.split(/(?:\r\n?|\n)/);for(let bt=0,Ct=Rt.length;bt<Ct;++bt){const $t=Rt[bt];_t.append(document.createTextNode($t)),bt<Ct-1&&_t.append(document.createElement("br"))}return _t}#c(at){at.altKey||at.shiftKey||at.ctrlKey||at.metaKey||(at.key==="Enter"||at.key==="Escape"&&this.#h)&&this.#y()}#y(){this.#h=!this.#h,this.#h?(this.#P(),this.#s.addEventListener("click",this.#a),this.#s.addEventListener("keydown",this.#t)):(this.#T(),this.#s.removeEventListener("click",this.#a),this.#s.removeEventListener("keydown",this.#t))}#P(){this.#d||this.render(),this.isVisible?this.#h&&this.#s.classList.add("focused"):(this.#s.hidden=!1,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)+1e3)}#T(){this.#s.classList.remove("focused"),!(this.#h||!this.isVisible)&&(this.#s.hidden=!0,this.#s.style.zIndex=parseInt(this.#s.style.zIndex)-1e3)}forceHide(){this.#m=this.isVisible,this.#m&&(this.#s.hidden=!0)}maybeShow(){this.#m&&(this.#m=!1,this.#s.hidden=!1)}get isVisible(){return this.#s.hidden===!1}}class Vt extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0}),this.textContent=at.data.textContent,this.textPosition=at.data.textPosition,this.annotationEditorType=o.AnnotationEditorType.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const at=document.createElement("div");at.classList.add("annotationTextContent"),at.setAttribute("role","comment");for(const mt of this.textContent){const _t=document.createElement("span");_t.textContent=mt,at.append(_t)}this.container.append(at)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}e.FreeTextAnnotationElement=Vt;class Dt extends et{#e=null;constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("lineAnnotation");const at=this.data,{width:mt,height:_t}=tt(at.rect),Rt=this.svgFactory.create(mt,_t,!0),bt=this.#e=this.svgFactory.createElement("svg:line");return bt.setAttribute("x1",at.rect[2]-at.lineCoordinates[0]),bt.setAttribute("y1",at.rect[3]-at.lineCoordinates[1]),bt.setAttribute("x2",at.rect[2]-at.lineCoordinates[2]),bt.setAttribute("y2",at.rect[3]-at.lineCoordinates[3]),bt.setAttribute("stroke-width",at.borderStyle.width||1),bt.setAttribute("stroke","transparent"),bt.setAttribute("fill","transparent"),Rt.append(bt),this.container.append(Rt),!at.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Qt extends et{#e=null;constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("squareAnnotation");const at=this.data,{width:mt,height:_t}=tt(at.rect),Rt=this.svgFactory.create(mt,_t,!0),bt=at.borderStyle.width,Ct=this.#e=this.svgFactory.createElement("svg:rect");return Ct.setAttribute("x",bt/2),Ct.setAttribute("y",bt/2),Ct.setAttribute("width",mt-bt),Ct.setAttribute("height",_t-bt),Ct.setAttribute("stroke-width",bt||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),Rt.append(Ct),this.container.append(Rt),!at.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Wt extends et{#e=null;constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0})}render(){this.container.classList.add("circleAnnotation");const at=this.data,{width:mt,height:_t}=tt(at.rect),Rt=this.svgFactory.create(mt,_t,!0),bt=at.borderStyle.width,Ct=this.#e=this.svgFactory.createElement("svg:ellipse");return Ct.setAttribute("cx",mt/2),Ct.setAttribute("cy",_t/2),Ct.setAttribute("rx",mt/2-bt/2),Ct.setAttribute("ry",_t/2-bt/2),Ct.setAttribute("stroke-width",bt||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),Rt.append(Ct),this.container.append(Rt),!at.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class Kt extends et{#e=null;constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const at=this.data,{width:mt,height:_t}=tt(at.rect),Rt=this.svgFactory.create(mt,_t,!0);let bt=[];for(const $t of at.vertices){const Ut=$t.x-at.rect[0],en=at.rect[3]-$t.y;bt.push(Ut+","+en)}bt=bt.join(" ");const Ct=this.#e=this.svgFactory.createElement(this.svgElementName);return Ct.setAttribute("points",bt),Ct.setAttribute("stroke-width",at.borderStyle.width||1),Ct.setAttribute("stroke","transparent"),Ct.setAttribute("fill","transparent"),Rt.append(Ct),this.container.append(Rt),!at.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}class tn extends Kt{constructor(at){super(at),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Ht extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}class St extends et{#e=[];constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0}),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=o.AnnotationEditorType.INK}render(){this.container.classList.add(this.containerClassName);const at=this.data,{width:mt,height:_t}=tt(at.rect),Rt=this.svgFactory.create(mt,_t,!0);for(const bt of at.inkLists){let Ct=[];for(const Ut of bt){const en=Ut.x-at.rect[0],Nt=at.rect[3]-Ut.y;Ct.push(`${en},${Nt}`)}Ct=Ct.join(" ");const $t=this.svgFactory.createElement(this.svgElementName);this.#e.push($t),$t.setAttribute("points",Ct),$t.setAttribute("stroke-width",at.borderStyle.width||1),$t.setAttribute("stroke","transparent"),$t.setAttribute("fill","transparent"),!at.popupRef&&this.hasPopupData&&this._createPopup(),Rt.append($t)}return this.container.append(Rt),this.container}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}}e.InkAnnotationElement=St;class ft extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this.container}}class ct extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class dt extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class gt extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class Tt extends et{constructor(at){super(at,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("stampAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}e.StampAnnotationElement=Tt;class wt extends et{#e=null;constructor(at){super(at,{isRenderable:!0});const{filename:mt,content:_t}=this.data.file;this.filename=(0,a.getFilenameFromUrl)(mt,!0),this.content=_t,this.linkService.eventBus?.dispatch("fileattachmentannotation",{source:this,filename:mt,content:_t})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:at,data:mt}=this;let _t;mt.hasAppearance||mt.fillAlpha===0?_t=document.createElement("div"):(_t=document.createElement("img"),_t.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(mt.name)?"paperclip":"pushpin"}.svg`,mt.fillAlpha&&mt.fillAlpha<1&&(_t.style=`filter: opacity(${Math.round(mt.fillAlpha*100)}%);`)),_t.addEventListener("dblclick",this.#t.bind(this)),this.#e=_t;const{isMac:Rt}=o.FeatureTest.platform;return at.addEventListener("keydown",bt=>{bt.key==="Enter"&&(Rt?bt.metaKey:bt.ctrlKey)&&this.#t()}),!mt.popupRef&&this.hasPopupData?this._createPopup():_t.classList.add("popupTriggerArea"),at.append(_t),at}getElementsToTriggerPopup(){return this.#e}addHighlightArea(){this.container.classList.add("highlightArea")}#t(){this.downloadManager?.openOrDownloadData(this.container,this.content,this.filename)}}class xt{#e=null;#t=null;#n=new Map;constructor({div:at,accessibilityManager:mt,annotationCanvasMap:_t,l10n:Rt,page:bt,viewport:Ct}){this.div=at,this.#e=mt,this.#t=_t,this.l10n=Rt,this.page=bt,this.viewport=Ct,this.zIndex=0,this.l10n||=_.NullL10n}#r(at,mt){const _t=at.firstChild||at;_t.id=`${o.AnnotationPrefix}${mt}`,this.div.append(at),this.#e?.moveElementInDOM(this.div,at,_t,!1)}async render(at){const{annotations:mt}=at,_t=this.div;(0,a.setLayerDimensions)(_t,this.viewport);const Rt=new Map,bt={data:null,layer:_t,linkService:at.linkService,downloadManager:at.downloadManager,imageResourcesPath:at.imageResourcesPath||"",renderForms:at.renderForms!==!1,svgFactory:new a.DOMSVGFactory,annotationStorage:at.annotationStorage||new c.AnnotationStorage,enableScripting:at.enableScripting===!0,hasJSActions:at.hasJSActions,fieldObjects:at.fieldObjects,parent:this,elements:null};for(const Ct of mt){if(Ct.noHTML)continue;const $t=Ct.annotationType===o.AnnotationType.POPUP;if($t){const Nt=Rt.get(Ct.id);if(!Nt)continue;bt.elements=Nt}else{const{width:Nt,height:Bt}=tt(Ct.rect);if(Nt<=0||Bt<=0)continue}bt.data=Ct;const Ut=rt.create(bt);if(!Ut.isRenderable)continue;if(!$t&&Ct.popupRef){const Nt=Rt.get(Ct.popupRef);Nt?Nt.push(Ut):Rt.set(Ct.popupRef,[Ut])}Ut.annotationEditorType>0&&this.#n.set(Ut.data.id,Ut);const en=Ut.render();Ct.hidden&&(en.style.visibility="hidden"),this.#r(en,Ct.id)}this.#a(),await this.l10n.translate(_t)}update({viewport:at}){const mt=this.div;this.viewport=at,(0,a.setLayerDimensions)(mt,{rotation:at.rotation}),this.#a(),mt.hidden=!1}#a(){if(!this.#t)return;const at=this.div;for(const[mt,_t]of this.#t){const Rt=at.querySelector(`[data-annotation-id="${mt}"]`);if(!Rt)continue;const{firstChild:bt}=Rt;bt?bt.nodeName==="CANVAS"?bt.replaceWith(_t):bt.before(_t):Rt.append(_t)}this.#t.clear()}getEditableAnnotations(){return Array.from(this.#n.values())}getEditableAnnotation(at){return this.#n.get(at)}}e.AnnotationLayer=xt},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ColorConverters=void 0;function s(c){return Math.floor(Math.max(0,Math.min(1,c))*255).toString(16).padStart(2,"0")}function o(c){return Math.max(0,Math.min(255,255*c))}class a{static CMYK_G([h,_,$,g]){return["G",1-Math.min(1,.3*h+.59*$+.11*_+g)]}static G_CMYK([h]){return["CMYK",0,0,0,1-h]}static G_RGB([h]){return["RGB",h,h,h]}static G_rgb([h]){return h=o(h),[h,h,h]}static G_HTML([h]){const _=s(h);return`#${_}${_}${_}`}static RGB_G([h,_,$]){return["G",.3*h+.59*_+.11*$]}static RGB_rgb(h){return h.map(o)}static RGB_HTML(h){return`#${h.map(s).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([h,_,$,g]){return["RGB",1-Math.min(1,h+g),1-Math.min(1,$+g),1-Math.min(1,_+g)]}static CMYK_rgb([h,_,$,g]){return[o(1-Math.min(1,h+g)),o(1-Math.min(1,$+g)),o(1-Math.min(1,_+g))]}static CMYK_HTML(h){const _=this.CMYK_RGB(h).slice(1);return this.RGB_HTML(_)}static RGB_CMYK([h,_,$]){const g=1-h,d=1-_,j=1-$,tt=Math.min(g,d,j);return["CMYK",g,d,j,tt]}}e.ColorConverters=a},(i,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.NullL10n=void 0,e.getL10nFallback=o;const s={of_pages:"of {{pagesCount}}",page_of_pages:"({{pageNumber}} of {{pagesCount}})",document_properties_kb:"{{size_kb}} KB ({{size_b}} bytes)",document_properties_mb:"{{size_mb}} MB ({{size_b}} bytes)",document_properties_date_string:"{{date}}, {{time}}",document_properties_page_size_unit_inches:"in",document_properties_page_size_unit_millimeters:"mm",document_properties_page_size_orientation_portrait:"portrait",document_properties_page_size_orientation_landscape:"landscape",document_properties_page_size_name_a3:"A3",document_properties_page_size_name_a4:"A4",document_properties_page_size_name_letter:"Letter",document_properties_page_size_name_legal:"Legal",document_properties_page_size_dimension_string:"{{width}}  {{height}} {{unit}} ({{orientation}})",document_properties_page_size_dimension_name_string:"{{width}}  {{height}} {{unit}} ({{name}}, {{orientation}})",document_properties_linearized_yes:"Yes",document_properties_linearized_no:"No",additional_layers:"Additional Layers",page_landmark:"Page {{page}}",thumb_page_title:"Page {{page}}",thumb_page_canvas:"Thumbnail of Page {{page}}",find_reached_top:"Reached top of document, continued from bottom",find_reached_bottom:"Reached end of document, continued from top","find_match_count[one]":"{{current}} of {{total}} match","find_match_count[other]":"{{current}} of {{total}} matches","find_match_count_limit[one]":"More than {{limit}} match","find_match_count_limit[other]":"More than {{limit}} matches",find_not_found:"Phrase not found",page_scale_width:"Page Width",page_scale_fit:"Page Fit",page_scale_auto:"Automatic Zoom",page_scale_actual:"Actual Size",page_scale_percent:"{{scale}}%",loading_error:"An error occurred while loading the PDF.",invalid_file_error:"Invalid or corrupted PDF file.",missing_file_error:"Missing PDF file.",unexpected_response_error:"Unexpected server response.",rendering_error:"An error occurred while rendering the page.",annotation_date_string:"{{date}}, {{time}}",printing_not_supported:"Warning: Printing is not fully supported by this browser.",printing_not_ready:"Warning: The PDF is not fully loaded for printing.",web_fonts_disabled:"Web fonts are disabled: unable to use embedded PDF fonts.",free_text2_default_content:"Start typing",editor_free_text2_aria_label:"Text Editor",editor_ink2_aria_label:"Draw Editor",editor_ink_canvas_aria_label:"User-created image",editor_alt_text_button_label:"Alt text",editor_alt_text_edit_button_label:"Edit alt text",editor_alt_text_decorative_tooltip:"Marked as decorative"};s.print_progress_percent="{{progress}}%";function o(h,_){switch(h){case"find_match_count":h=`find_match_count[${_.total===1?"one":"other"}]`;break;case"find_match_count_limit":h=`find_match_count_limit[${_.limit===1?"one":"other"}]`;break}return s[h]||""}function a(h,_){return _?h.replaceAll(/\{\{\s*(\w+)\s*\}\}/g,($,g)=>g in _?_[g]:"{{"+g+"}}"):h}const c={async getLanguage(){return"en-us"},async getDirection(){return"ltr"},async get(h,_=null,$=o(h,_)){return a($,_)},async translate(h){}};e.NullL10n=c},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.XfaLayer=void 0;var o=s(25);class a{static setupStorage(h,_,$,g,d){const j=g.getValue(_,{value:null});switch($.name){case"textarea":if(j.value!==null&&(h.textContent=j.value),d==="print")break;h.addEventListener("input",tt=>{g.setValue(_,{value:tt.target.value})});break;case"input":if($.attributes.type==="radio"||$.attributes.type==="checkbox"){if(j.value===$.attributes.xfaOn?h.setAttribute("checked",!0):j.value===$.attributes.xfaOff&&h.removeAttribute("checked"),d==="print")break;h.addEventListener("change",tt=>{g.setValue(_,{value:tt.target.checked?tt.target.getAttribute("xfaOn"):tt.target.getAttribute("xfaOff")})})}else{if(j.value!==null&&h.setAttribute("value",j.value),d==="print")break;h.addEventListener("input",tt=>{g.setValue(_,{value:tt.target.value})})}break;case"select":if(j.value!==null){h.setAttribute("value",j.value);for(const tt of $.children)tt.attributes.value===j.value?tt.attributes.selected=!0:tt.attributes.hasOwnProperty("selected")&&delete tt.attributes.selected}h.addEventListener("input",tt=>{const rt=tt.target.options,et=rt.selectedIndex===-1?"":rt[rt.selectedIndex].value;g.setValue(_,{value:et})});break}}static setAttributes({html:h,element:_,storage:$=null,intent:g,linkService:d}){const{attributes:j}=_,tt=h instanceof HTMLAnchorElement;j.type==="radio"&&(j.name=`${j.name}-${g}`);for(const[rt,et]of Object.entries(j))if(et!=null)switch(rt){case"class":et.length&&h.setAttribute(rt,et.join(" "));break;case"dataId":break;case"id":h.setAttribute("data-element-id",et);break;case"style":Object.assign(h.style,et);break;case"textContent":h.textContent=et;break;default:(!tt||rt!=="href"&&rt!=="newWindow")&&h.setAttribute(rt,et)}tt&&d.addLinkAttributes(h,j.href,j.newWindow),$&&j.dataId&&this.setupStorage(h,j.dataId,_,$)}static render(h){const _=h.annotationStorage,$=h.linkService,g=h.xfaHtml,d=h.intent||"display",j=document.createElement(g.name);g.attributes&&this.setAttributes({html:j,element:g,intent:d,linkService:$});const tt=[[g,-1,j]],rt=h.div;if(rt.append(j),h.viewport){const it=`matrix(${h.viewport.transform.join(",")})`;rt.style.transform=it}d!=="richText"&&rt.setAttribute("class","xfaLayer xfaFont");const et=[];for(;tt.length>0;){const[it,st,nt]=tt.at(-1);if(st+1===it.children.length){tt.pop();continue}const ot=it.children[++tt.at(-1)[1]];if(ot===null)continue;const{name:ht}=ot;if(ht==="#text"){const lt=document.createTextNode(ot.value);et.push(lt),nt.append(lt);continue}const pt=ot?.attributes?.xmlns?document.createElementNS(ot.attributes.xmlns,ht):document.createElement(ht);if(nt.append(pt),ot.attributes&&this.setAttributes({html:pt,element:ot,storage:_,intent:d,linkService:$}),ot.children&&ot.children.length>0)tt.push([ot,-1,pt]);else if(ot.value){const lt=document.createTextNode(ot.value);o.XfaText.shouldBuildText(ht)&&et.push(lt),pt.append(lt)}}for(const it of rt.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))it.setAttribute("readOnly",!0);return{textDivs:et}}static update(h){const _=`matrix(${h.viewport.transform.join(",")})`;h.div.style.transform=_,h.div.hidden=!1}}e.XfaLayer=a},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.InkEditor=void 0;var o=s(1),a=s(4),c=s(29),h=s(6),_=s(5);class $ extends a.AnnotationEditor{#e=0;#t=0;#n=this.canvasPointermove.bind(this);#r=this.canvasPointerleave.bind(this);#a=this.canvasPointerup.bind(this);#o=this.canvasPointerdown.bind(this);#s=new Path2D;#l=!1;#u=!1;#i=!1;#f=null;#h=0;#d=0;#p=null;static _defaultColor=null;static _defaultOpacity=1;static _defaultThickness=1;static _type="ink";constructor(d){super({...d,name:"inkEditor"}),this.color=d.color||null,this.thickness=d.thickness||null,this.opacity=d.opacity||null,this.paths=[],this.bezierPath2D=[],this.allRawPaths=[],this.currentPath=[],this.scaleFactor=1,this.translationX=this.translationY=0,this.x=0,this.y=0,this._willKeepAspectRatio=!0}static initialize(d){a.AnnotationEditor.initialize(d,{strings:["editor_ink_canvas_aria_label","editor_ink2_aria_label"]})}static updateDefaultParams(d,j){switch(d){case o.AnnotationEditorParamsType.INK_THICKNESS:$._defaultThickness=j;break;case o.AnnotationEditorParamsType.INK_COLOR:$._defaultColor=j;break;case o.AnnotationEditorParamsType.INK_OPACITY:$._defaultOpacity=j/100;break}}updateParams(d,j){switch(d){case o.AnnotationEditorParamsType.INK_THICKNESS:this.#_(j);break;case o.AnnotationEditorParamsType.INK_COLOR:this.#g(j);break;case o.AnnotationEditorParamsType.INK_OPACITY:this.#m(j);break}}static get defaultPropertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,$._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,$._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round($._defaultOpacity*100)]]}get propertiesToUpdate(){return[[o.AnnotationEditorParamsType.INK_THICKNESS,this.thickness||$._defaultThickness],[o.AnnotationEditorParamsType.INK_COLOR,this.color||$._defaultColor||a.AnnotationEditor._defaultLineColor],[o.AnnotationEditorParamsType.INK_OPACITY,Math.round(100*(this.opacity??$._defaultOpacity))]]}#_(d){const j=this.thickness;this.addCommands({cmd:()=>{this.thickness=d,this.#S()},undo:()=>{this.thickness=j,this.#S()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0})}#g(d){const j=this.color;this.addCommands({cmd:()=>{this.color=d,this.#E()},undo:()=>{this.color=j,this.#E()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_COLOR,overwriteIfSameType:!0,keepUndo:!0})}#m(d){d/=100;const j=this.opacity;this.addCommands({cmd:()=>{this.opacity=d,this.#E()},undo:()=>{this.opacity=j,this.#E()},mustExec:!0,type:o.AnnotationEditorParamsType.INK_OPACITY,overwriteIfSameType:!0,keepUndo:!0})}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.canvas||(this.#C(),this.#x()),this.isAttachedToDOM||(this.parent.add(this),this.#v()),this.#S()))}remove(){this.canvas!==null&&(this.isEmpty()||this.commit(),this.canvas.width=this.canvas.height=0,this.canvas.remove(),this.canvas=null,this.#f.disconnect(),this.#f=null,super.remove())}setParent(d){!this.parent&&d?this._uiManager.removeShouldRescale(this):this.parent&&d===null&&this._uiManager.addShouldRescale(this),super.setParent(d)}onScaleChanging(){const[d,j]=this.parentDimensions,tt=this.width*d,rt=this.height*j;this.setDimensions(tt,rt)}enableEditMode(){this.#l||this.canvas===null||(super.enableEditMode(),this._isDraggable=!1,this.canvas.addEventListener("pointerdown",this.#o))}disableEditMode(){!this.isInEditMode()||this.canvas===null||(super.disableEditMode(),this._isDraggable=!this.isEmpty(),this.div.classList.remove("editing"),this.canvas.removeEventListener("pointerdown",this.#o))}onceAdded(){this._isDraggable=!this.isEmpty()}isEmpty(){return this.paths.length===0||this.paths.length===1&&this.paths[0].length===0}#c(){const{parentRotation:d,parentDimensions:[j,tt]}=this;switch(d){case 90:return[0,tt,tt,j];case 180:return[j,tt,j,tt];case 270:return[j,0,tt,j];default:return[0,0,j,tt]}}#y(){const{ctx:d,color:j,opacity:tt,thickness:rt,parentScale:et,scaleFactor:it}=this;d.lineWidth=rt*et/it,d.lineCap="round",d.lineJoin="round",d.miterLimit=10,d.strokeStyle=`${j}${(0,_.opacityToHex)(tt)}`}#P(d,j){this.canvas.addEventListener("contextmenu",h.noContextMenu),this.canvas.addEventListener("pointerleave",this.#r),this.canvas.addEventListener("pointermove",this.#n),this.canvas.addEventListener("pointerup",this.#a),this.canvas.removeEventListener("pointerdown",this.#o),this.isEditing=!0,this.#i||(this.#i=!0,this.#v(),this.thickness||=$._defaultThickness,this.color||=$._defaultColor||a.AnnotationEditor._defaultLineColor,this.opacity??=$._defaultOpacity),this.currentPath.push([d,j]),this.#u=!1,this.#y(),this.#p=()=>{this.#M(),this.#p&&window.requestAnimationFrame(this.#p)},window.requestAnimationFrame(this.#p)}#T(d,j){const[tt,rt]=this.currentPath.at(-1);if(this.currentPath.length>1&&d===tt&&j===rt)return;const et=this.currentPath;let it=this.#s;if(et.push([d,j]),this.#u=!0,et.length<=2){it.moveTo(...et[0]),it.lineTo(d,j);return}et.length===3&&(this.#s=it=new Path2D,it.moveTo(...et[0])),this.#$(it,...et.at(-3),...et.at(-2),d,j)}#w(){if(this.currentPath.length===0)return;const d=this.currentPath.at(-1);this.#s.lineTo(...d)}#I(d,j){this.#p=null,d=Math.min(Math.max(d,0),this.canvas.width),j=Math.min(Math.max(j,0),this.canvas.height),this.#T(d,j),this.#w();let tt;if(this.currentPath.length!==1)tt=this.#F();else{const nt=[d,j];tt=[[nt,nt.slice(),nt.slice(),nt]]}const rt=this.#s,et=this.currentPath;this.currentPath=[],this.#s=new Path2D;const it=()=>{this.allRawPaths.push(et),this.paths.push(tt),this.bezierPath2D.push(rt),this.rebuild()},st=()=>{this.allRawPaths.pop(),this.paths.pop(),this.bezierPath2D.pop(),this.paths.length===0?this.remove():(this.canvas||(this.#C(),this.#x()),this.#S())};this.addCommands({cmd:it,undo:st,mustExec:!0})}#M(){if(!this.#u)return;this.#u=!1;const d=Math.ceil(this.thickness*this.parentScale),j=this.currentPath.slice(-3),tt=j.map(it=>it[0]),rt=j.map(it=>it[1]);Math.min(...tt)-d,Math.max(...tt)+d,Math.min(...rt)-d,Math.max(...rt)+d;const{ctx:et}=this;et.save(),et.clearRect(0,0,this.canvas.width,this.canvas.height);for(const it of this.bezierPath2D)et.stroke(it);et.stroke(this.#s),et.restore()}#$(d,j,tt,rt,et,it,st){const nt=(j+rt)/2,ot=(tt+et)/2,ht=(rt+it)/2,pt=(et+st)/2;d.bezierCurveTo(nt+2*(rt-nt)/3,ot+2*(et-ot)/3,ht+2*(rt-ht)/3,pt+2*(et-pt)/3,ht,pt)}#F(){const d=this.currentPath;if(d.length<=2)return[[d[0],d[0],d.at(-1),d.at(-1)]];const j=[];let tt,[rt,et]=d[0];for(tt=1;tt<d.length-2;tt++){const[lt,ut]=d[tt],[yt,Pt]=d[tt+1],vt=(lt+yt)/2,Vt=(ut+Pt)/2,Dt=[rt+2*(lt-rt)/3,et+2*(ut-et)/3],Qt=[vt+2*(lt-vt)/3,Vt+2*(ut-Vt)/3];j.push([[rt,et],Dt,Qt,[vt,Vt]]),[rt,et]=[vt,Vt]}const[it,st]=d[tt],[nt,ot]=d[tt+1],ht=[rt+2*(it-rt)/3,et+2*(st-et)/3],pt=[nt+2*(it-nt)/3,ot+2*(st-ot)/3];return j.push([[rt,et],ht,pt,[nt,ot]]),j}#E(){if(this.isEmpty()){this.#R();return}this.#y();const{canvas:d,ctx:j}=this;j.setTransform(1,0,0,1,0,0),j.clearRect(0,0,d.width,d.height),this.#R();for(const tt of this.bezierPath2D)j.stroke(tt)}commit(){this.#l||(super.commit(),this.isEditing=!1,this.disableEditMode(),this.setInForeground(),this.#l=!0,this.div.classList.add("disabled"),this.#S(!0),this.makeResizable(),this.parent.addInkEditorIfNeeded(!0),this.moveInDOM(),this.div.focus({preventScroll:!0}))}focusin(d){this._focusEventsAllowed&&(super.focusin(d),this.enableEditMode())}canvasPointerdown(d){d.button!==0||!this.isInEditMode()||this.#l||(this.setInForeground(),d.preventDefault(),d.type!=="mouse"&&this.div.focus(),this.#P(d.offsetX,d.offsetY))}canvasPointermove(d){d.preventDefault(),this.#T(d.offsetX,d.offsetY)}canvasPointerup(d){d.preventDefault(),this.#V(d)}canvasPointerleave(d){this.#V(d)}#V(d){this.canvas.removeEventListener("pointerleave",this.#r),this.canvas.removeEventListener("pointermove",this.#n),this.canvas.removeEventListener("pointerup",this.#a),this.canvas.addEventListener("pointerdown",this.#o),setTimeout(()=>{this.canvas.removeEventListener("contextmenu",h.noContextMenu)},10),this.#I(d.offsetX,d.offsetY),this.addToAnnotationStorage(),this.setInBackground()}#C(){this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=0,this.canvas.className="inkEditorCanvas",a.AnnotationEditor._l10nPromise.get("editor_ink_canvas_aria_label").then(d=>this.canvas?.setAttribute("aria-label",d)),this.div.append(this.canvas),this.ctx=this.canvas.getContext("2d")}#x(){this.#f=new ResizeObserver(d=>{const j=d[0].contentRect;j.width&&j.height&&this.setDimensions(j.width,j.height)}),this.#f.observe(this.div)}get isResizable(){return!this.isEmpty()&&this.#l}render(){if(this.div)return this.div;let d,j;this.width&&(d=this.x,j=this.y),super.render(),a.AnnotationEditor._l10nPromise.get("editor_ink2_aria_label").then(st=>this.div?.setAttribute("aria-label",st));const[tt,rt,et,it]=this.#c();if(this.setAt(tt,rt,0,0),this.setDims(et,it),this.#C(),this.width){const[st,nt]=this.parentDimensions;this.setAspectRatio(this.width*st,this.height*nt),this.setAt(d*st,j*nt,this.width*st,this.height*nt),this.#i=!0,this.#v(),this.setDims(this.width*st,this.height*nt),this.#E(),this.div.classList.add("disabled")}else this.div.classList.add("editing"),this.enableEditMode();return this.#x(),this.div}#v(){if(!this.#i)return;const[d,j]=this.parentDimensions;this.canvas.width=Math.ceil(this.width*d),this.canvas.height=Math.ceil(this.height*j),this.#R()}setDimensions(d,j){const tt=Math.round(d),rt=Math.round(j);if(this.#h===tt&&this.#d===rt)return;this.#h=tt,this.#d=rt,this.canvas.style.visibility="hidden";const[et,it]=this.parentDimensions;this.width=d/et,this.height=j/it,this.fixAndSetPosition(),this.#l&&this.#b(d,j),this.#v(),this.#E(),this.canvas.style.visibility="visible",this.fixDims()}#b(d,j){const tt=this.#D(),rt=(d-tt)/this.#t,et=(j-tt)/this.#e;this.scaleFactor=Math.min(rt,et)}#R(){const d=this.#D()/2;this.ctx.setTransform(this.scaleFactor,0,0,this.scaleFactor,this.translationX*this.scaleFactor+d,this.translationY*this.scaleFactor+d)}static#O(d){const j=new Path2D;for(let tt=0,rt=d.length;tt<rt;tt++){const[et,it,st,nt]=d[tt];tt===0&&j.moveTo(...et),j.bezierCurveTo(it[0],it[1],st[0],st[1],nt[0],nt[1])}return j}static#L(d,j,tt){const[rt,et,it,st]=j;switch(tt){case 0:for(let nt=0,ot=d.length;nt<ot;nt+=2)d[nt]+=rt,d[nt+1]=st-d[nt+1];break;case 90:for(let nt=0,ot=d.length;nt<ot;nt+=2){const ht=d[nt];d[nt]=d[nt+1]+rt,d[nt+1]=ht+et}break;case 180:for(let nt=0,ot=d.length;nt<ot;nt+=2)d[nt]=it-d[nt],d[nt+1]+=et;break;case 270:for(let nt=0,ot=d.length;nt<ot;nt+=2){const ht=d[nt];d[nt]=it-d[nt+1],d[nt+1]=st-ht}break;default:throw new Error("Invalid rotation")}return d}static#N(d,j,tt){const[rt,et,it,st]=j;switch(tt){case 0:for(let nt=0,ot=d.length;nt<ot;nt+=2)d[nt]-=rt,d[nt+1]=st-d[nt+1];break;case 90:for(let nt=0,ot=d.length;nt<ot;nt+=2){const ht=d[nt];d[nt]=d[nt+1]-et,d[nt+1]=ht-rt}break;case 180:for(let nt=0,ot=d.length;nt<ot;nt+=2)d[nt]=it-d[nt],d[nt+1]-=et;break;case 270:for(let nt=0,ot=d.length;nt<ot;nt+=2){const ht=d[nt];d[nt]=st-d[nt+1],d[nt+1]=it-ht}break;default:throw new Error("Invalid rotation")}return d}#j(d,j,tt,rt){const et=[],it=this.thickness/2,st=d*j+it,nt=d*tt+it;for(const ot of this.paths){const ht=[],pt=[];for(let lt=0,ut=ot.length;lt<ut;lt++){const[yt,Pt,vt,Vt]=ot[lt],Dt=d*yt[0]+st,Qt=d*yt[1]+nt,Wt=d*Pt[0]+st,Kt=d*Pt[1]+nt,tn=d*vt[0]+st,Ht=d*vt[1]+nt,St=d*Vt[0]+st,ft=d*Vt[1]+nt;lt===0&&(ht.push(Dt,Qt),pt.push(Dt,Qt)),ht.push(Wt,Kt,tn,Ht,St,ft),pt.push(Wt,Kt),lt===ut-1&&pt.push(St,ft)}et.push({bezier:$.#L(ht,rt,this.rotation),points:$.#L(pt,rt,this.rotation)})}return et}#k(){let d=1/0,j=-1/0,tt=1/0,rt=-1/0;for(const et of this.paths)for(const[it,st,nt,ot]of et){const ht=o.Util.bezierBoundingBox(...it,...st,...nt,...ot);d=Math.min(d,ht[0]),tt=Math.min(tt,ht[1]),j=Math.max(j,ht[2]),rt=Math.max(rt,ht[3])}return[d,tt,j,rt]}#D(){return this.#l?Math.ceil(this.thickness*this.parentScale):0}#S(d=!1){if(this.isEmpty())return;if(!this.#l){this.#E();return}const j=this.#k(),tt=this.#D();this.#t=Math.max(a.AnnotationEditor.MIN_SIZE,j[2]-j[0]),this.#e=Math.max(a.AnnotationEditor.MIN_SIZE,j[3]-j[1]);const rt=Math.ceil(tt+this.#t*this.scaleFactor),et=Math.ceil(tt+this.#e*this.scaleFactor),[it,st]=this.parentDimensions;this.width=rt/it,this.height=et/st,this.setAspectRatio(rt,et);const nt=this.translationX,ot=this.translationY;this.translationX=-j[0],this.translationY=-j[1],this.#v(),this.#E(),this.#h=rt,this.#d=et,this.setDims(rt,et);const ht=d?tt/this.scaleFactor/2:0;this.translate(nt-this.translationX-ht,ot-this.translationY-ht)}static deserialize(d,j,tt){if(d instanceof c.InkAnnotationElement)return null;const rt=super.deserialize(d,j,tt);rt.thickness=d.thickness,rt.color=o.Util.makeHexColor(...d.color),rt.opacity=d.opacity;const[et,it]=rt.pageDimensions,st=rt.width*et,nt=rt.height*it,ot=rt.parentScale,ht=d.thickness/2;rt.#l=!0,rt.#h=Math.round(st),rt.#d=Math.round(nt);const{paths:pt,rect:lt,rotation:ut}=d;for(let{bezier:Pt}of pt){Pt=$.#N(Pt,lt,ut);const vt=[];rt.paths.push(vt);let Vt=ot*(Pt[0]-ht),Dt=ot*(Pt[1]-ht);for(let Wt=2,Kt=Pt.length;Wt<Kt;Wt+=6){const tn=ot*(Pt[Wt]-ht),Ht=ot*(Pt[Wt+1]-ht),St=ot*(Pt[Wt+2]-ht),ft=ot*(Pt[Wt+3]-ht),ct=ot*(Pt[Wt+4]-ht),dt=ot*(Pt[Wt+5]-ht);vt.push([[Vt,Dt],[tn,Ht],[St,ft],[ct,dt]]),Vt=ct,Dt=dt}const Qt=this.#O(vt);rt.bezierPath2D.push(Qt)}const yt=rt.#k();return rt.#t=Math.max(a.AnnotationEditor.MIN_SIZE,yt[2]-yt[0]),rt.#e=Math.max(a.AnnotationEditor.MIN_SIZE,yt[3]-yt[1]),rt.#b(st,nt),rt}serialize(){if(this.isEmpty())return null;const d=this.getRect(0,0),j=a.AnnotationEditor._colorManager.convert(this.ctx.strokeStyle);return{annotationType:o.AnnotationEditorType.INK,color:j,thickness:this.thickness,opacity:this.opacity,paths:this.#j(this.scaleFactor/this.parentScale,this.translationX,this.translationY,d),pageIndex:this.pageIndex,rect:d,rotation:this.rotation,structTreeParentId:this._structTreeParentId}}}e.InkEditor=$},(i,e,s)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.StampEditor=void 0;var o=s(1),a=s(4),c=s(6),h=s(29);class _ extends a.AnnotationEditor{#e=null;#t=null;#n=null;#r=null;#a=null;#o=null;#s=null;#l=null;#u=!1;#i=!1;static _type="stamp";constructor(g){super({...g,name:"stampEditor"}),this.#r=g.bitmapUrl,this.#a=g.bitmapFile}static initialize(g){a.AnnotationEditor.initialize(g)}static get supportedTypes(){const g=["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"];return(0,o.shadow)(this,"supportedTypes",g.map(d=>`image/${d}`))}static get supportedTypesStr(){return(0,o.shadow)(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(g){return this.supportedTypes.includes(g)}static paste(g,d){d.pasteEditor(o.AnnotationEditorType.STAMP,{bitmapFile:g.getAsFile()})}#f(g,d=!1){if(!g){this.remove();return}this.#e=g.bitmap,d||(this.#t=g.id,this.#u=g.isSvg),this.#p()}#h(){this.#n=null,this._uiManager.enableWaiting(!1),this.#o&&this.div.focus()}#d(){if(this.#t){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(this.#t).then(d=>this.#f(d,!0)).finally(()=>this.#h());return}if(this.#r){const d=this.#r;this.#r=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromUrl(d).then(j=>this.#f(j)).finally(()=>this.#h());return}if(this.#a){const d=this.#a;this.#a=null,this._uiManager.enableWaiting(!0),this.#n=this._uiManager.imageManager.getFromFile(d).then(j=>this.#f(j)).finally(()=>this.#h());return}const g=document.createElement("input");g.type="file",g.accept=_.supportedTypesStr,this.#n=new Promise(d=>{g.addEventListener("change",async()=>{if(!g.files||g.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const j=await this._uiManager.imageManager.getFromFile(g.files[0]);this.#f(j)}d()}),g.addEventListener("cancel",()=>{this.remove(),d()})}).finally(()=>this.#h()),g.click()}remove(){this.#t&&(this.#e=null,this._uiManager.imageManager.deleteId(this.#t),this.#o?.remove(),this.#o=null,this.#s?.disconnect(),this.#s=null),super.remove()}rebuild(){if(!this.parent){this.#t&&this.#d();return}super.rebuild(),this.div!==null&&(this.#t&&this.#d(),this.isAttachedToDOM||this.parent.add(this))}onceAdded(){this._isDraggable=!0,this.div.focus()}isEmpty(){return!(this.#n||this.#e||this.#r||this.#a)}get isResizable(){return!0}render(){if(this.div)return this.div;let g,d;if(this.width&&(g=this.x,d=this.y),super.render(),this.div.hidden=!0,this.#e?this.#p():this.#d(),this.width){const[j,tt]=this.parentDimensions;this.setAt(g*j,d*tt,this.width*j,this.height*tt)}return this.div}#p(){const{div:g}=this;let{width:d,height:j}=this.#e;const[tt,rt]=this.pageDimensions,et=.75;if(this.width)d=this.width*tt,j=this.height*rt;else if(d>et*tt||j>et*rt){const ot=Math.min(et*tt/d,et*rt/j);d*=ot,j*=ot}const[it,st]=this.parentDimensions;this.setDims(d*it/tt,j*st/rt),this._uiManager.enableWaiting(!1);const nt=this.#o=document.createElement("canvas");g.append(nt),g.hidden=!1,this.#m(d,j),this.#y(),this.#i||(this.parent.addUndoableEditor(this),this.#i=!0),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",subtype:this.editorType,data:{action:"inserted_image"}}}),this.addAltTextButton()}#_(g,d){const[j,tt]=this.parentDimensions;this.width=g/j,this.height=d/tt,this.setDims(g,d),this._initialOptions?.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this.#l!==null&&clearTimeout(this.#l);const rt=200;this.#l=setTimeout(()=>{this.#l=null,this.#m(g,d)},rt)}#g(g,d){const{width:j,height:tt}=this.#e;let rt=j,et=tt,it=this.#e;for(;rt>2*g||et>2*d;){const st=rt,nt=et;rt>2*g&&(rt=rt>=16384?Math.floor(rt/2)-1:Math.ceil(rt/2)),et>2*d&&(et=et>=16384?Math.floor(et/2)-1:Math.ceil(et/2));const ot=new OffscreenCanvas(rt,et);ot.getContext("2d").drawImage(it,0,0,st,nt,0,0,rt,et),it=ot.transferToImageBitmap()}return it}#m(g,d){g=Math.ceil(g),d=Math.ceil(d);const j=this.#o;if(!j||j.width===g&&j.height===d)return;j.width=g,j.height=d;const tt=this.#u?this.#e:this.#g(g,d),rt=j.getContext("2d");rt.filter=this._uiManager.hcmFilter,rt.drawImage(tt,0,0,tt.width,tt.height,0,0,g,d)}#c(g){if(g){if(this.#u){const tt=this._uiManager.imageManager.getSvgUrl(this.#t);if(tt)return tt}const d=document.createElement("canvas");return{width:d.width,height:d.height}=this.#e,d.getContext("2d").drawImage(this.#e,0,0),d.toDataURL()}if(this.#u){const[d,j]=this.pageDimensions,tt=Math.round(this.width*d*c.PixelsPerInch.PDF_TO_CSS_UNITS),rt=Math.round(this.height*j*c.PixelsPerInch.PDF_TO_CSS_UNITS),et=new OffscreenCanvas(tt,rt);return et.getContext("2d").drawImage(this.#e,0,0,this.#e.width,this.#e.height,0,0,tt,rt),et.transferToImageBitmap()}return structuredClone(this.#e)}#y(){this.#s=new ResizeObserver(g=>{const d=g[0].contentRect;d.width&&d.height&&this.#_(d.width,d.height)}),this.#s.observe(this.div)}static deserialize(g,d,j){if(g instanceof h.StampAnnotationElement)return null;const tt=super.deserialize(g,d,j),{rect:rt,bitmapUrl:et,bitmapId:it,isSvg:st,accessibilityData:nt}=g;it&&j.imageManager.isValidId(it)?tt.#t=it:tt.#r=et,tt.#u=st;const[ot,ht]=tt.pageDimensions;return tt.width=(rt[2]-rt[0])/ot,tt.height=(rt[3]-rt[1])/ht,nt&&(tt.altTextData=nt),tt}serialize(g=!1,d=null){if(this.isEmpty())return null;const j={annotationType:o.AnnotationEditorType.STAMP,bitmapId:this.#t,pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:this.#u,structTreeParentId:this._structTreeParentId};if(g)return j.bitmapUrl=this.#c(!0),j.accessibilityData=this.altTextData,j;const{decorative:tt,altText:rt}=this.altTextData;if(!tt&&rt&&(j.accessibilityData={type:"Figure",alt:rt}),d===null)return j;d.stamps||=new Map;const et=this.#u?(j.rect[2]-j.rect[0])*(j.rect[3]-j.rect[1]):null;if(!d.stamps.has(this.#t))d.stamps.set(this.#t,{area:et,serialized:j}),j.bitmap=this.#c(!1);else if(this.#u){const it=d.stamps.get(this.#t);et>it.area&&(it.area=et,it.serialized.bitmap.close(),it.serialized.bitmap=this.#c(!1))}return j}}e.StampEditor=_}],__webpack_module_cache__={};function __w_pdfjs_require__(i){var e=__webpack_module_cache__[i];if(e!==void 0)return e.exports;var s=__webpack_module_cache__[i]={exports:{}};return __webpack_modules__[i](s,s.exports,__w_pdfjs_require__),s.exports}var __webpack_exports__={};return(()=>{var i=__webpack_exports__;Object.defineProperty(i,"__esModule",{value:!0}),Object.defineProperty(i,"AbortException",{enumerable:!0,get:function(){return e.AbortException}}),Object.defineProperty(i,"AnnotationEditorLayer",{enumerable:!0,get:function(){return c.AnnotationEditorLayer}}),Object.defineProperty(i,"AnnotationEditorParamsType",{enumerable:!0,get:function(){return e.AnnotationEditorParamsType}}),Object.defineProperty(i,"AnnotationEditorType",{enumerable:!0,get:function(){return e.AnnotationEditorType}}),Object.defineProperty(i,"AnnotationEditorUIManager",{enumerable:!0,get:function(){return h.AnnotationEditorUIManager}}),Object.defineProperty(i,"AnnotationLayer",{enumerable:!0,get:function(){return _.AnnotationLayer}}),Object.defineProperty(i,"AnnotationMode",{enumerable:!0,get:function(){return e.AnnotationMode}}),Object.defineProperty(i,"CMapCompressionType",{enumerable:!0,get:function(){return e.CMapCompressionType}}),Object.defineProperty(i,"DOMSVGFactory",{enumerable:!0,get:function(){return o.DOMSVGFactory}}),Object.defineProperty(i,"FeatureTest",{enumerable:!0,get:function(){return e.FeatureTest}}),Object.defineProperty(i,"GlobalWorkerOptions",{enumerable:!0,get:function(){return $.GlobalWorkerOptions}}),Object.defineProperty(i,"ImageKind",{enumerable:!0,get:function(){return e.ImageKind}}),Object.defineProperty(i,"InvalidPDFException",{enumerable:!0,get:function(){return e.InvalidPDFException}}),Object.defineProperty(i,"MissingPDFException",{enumerable:!0,get:function(){return e.MissingPDFException}}),Object.defineProperty(i,"OPS",{enumerable:!0,get:function(){return e.OPS}}),Object.defineProperty(i,"PDFDataRangeTransport",{enumerable:!0,get:function(){return s.PDFDataRangeTransport}}),Object.defineProperty(i,"PDFDateString",{enumerable:!0,get:function(){return o.PDFDateString}}),Object.defineProperty(i,"PDFWorker",{enumerable:!0,get:function(){return s.PDFWorker}}),Object.defineProperty(i,"PasswordResponses",{enumerable:!0,get:function(){return e.PasswordResponses}}),Object.defineProperty(i,"PermissionFlag",{enumerable:!0,get:function(){return e.PermissionFlag}}),Object.defineProperty(i,"PixelsPerInch",{enumerable:!0,get:function(){return o.PixelsPerInch}}),Object.defineProperty(i,"PromiseCapability",{enumerable:!0,get:function(){return e.PromiseCapability}}),Object.defineProperty(i,"RenderingCancelledException",{enumerable:!0,get:function(){return o.RenderingCancelledException}}),Object.defineProperty(i,"SVGGraphics",{enumerable:!0,get:function(){return s.SVGGraphics}}),Object.defineProperty(i,"UnexpectedResponseException",{enumerable:!0,get:function(){return e.UnexpectedResponseException}}),Object.defineProperty(i,"Util",{enumerable:!0,get:function(){return e.Util}}),Object.defineProperty(i,"VerbosityLevel",{enumerable:!0,get:function(){return e.VerbosityLevel}}),Object.defineProperty(i,"XfaLayer",{enumerable:!0,get:function(){return g.XfaLayer}}),Object.defineProperty(i,"build",{enumerable:!0,get:function(){return s.build}}),Object.defineProperty(i,"createValidAbsoluteUrl",{enumerable:!0,get:function(){return e.createValidAbsoluteUrl}}),Object.defineProperty(i,"getDocument",{enumerable:!0,get:function(){return s.getDocument}}),Object.defineProperty(i,"getFilenameFromUrl",{enumerable:!0,get:function(){return o.getFilenameFromUrl}}),Object.defineProperty(i,"getPdfFilenameFromUrl",{enumerable:!0,get:function(){return o.getPdfFilenameFromUrl}}),Object.defineProperty(i,"getXfaPageViewport",{enumerable:!0,get:function(){return o.getXfaPageViewport}}),Object.defineProperty(i,"isDataScheme",{enumerable:!0,get:function(){return o.isDataScheme}}),Object.defineProperty(i,"isPdfFile",{enumerable:!0,get:function(){return o.isPdfFile}}),Object.defineProperty(i,"loadScript",{enumerable:!0,get:function(){return o.loadScript}}),Object.defineProperty(i,"noContextMenu",{enumerable:!0,get:function(){return o.noContextMenu}}),Object.defineProperty(i,"normalizeUnicode",{enumerable:!0,get:function(){return e.normalizeUnicode}}),Object.defineProperty(i,"renderTextLayer",{enumerable:!0,get:function(){return a.renderTextLayer}}),Object.defineProperty(i,"setLayerDimensions",{enumerable:!0,get:function(){return o.setLayerDimensions}}),Object.defineProperty(i,"shadow",{enumerable:!0,get:function(){return e.shadow}}),Object.defineProperty(i,"updateTextLayer",{enumerable:!0,get:function(){return a.updateTextLayer}}),Object.defineProperty(i,"version",{enumerable:!0,get:function(){return s.version}});var e=__w_pdfjs_require__(1),s=__w_pdfjs_require__(2),o=__w_pdfjs_require__(6),a=__w_pdfjs_require__(26),c=__w_pdfjs_require__(27),h=__w_pdfjs_require__(5),_=__w_pdfjs_require__(29),$=__w_pdfjs_require__(14),g=__w_pdfjs_require__(32)})(),__webpack_exports__})())})(pdf$1);var pdfExports=pdf$1.exports;const pdf=getDefaultExportFromCjs(pdfExports),pdfjsModule=_mergeNamespaces({__proto__:null,default:pdf},[pdfExports]),pdfjs="default"in pdfjsModule?pdf:pdfjsModule;var propTypes={exports:{}},ReactPropTypesSecret$1="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",ReactPropTypesSecret_1=ReactPropTypesSecret$1,ReactPropTypesSecret=ReactPropTypesSecret_1;function emptyFunction(){}function emptyFunctionWithReset(){}emptyFunctionWithReset.resetWarningCache=emptyFunction;var factoryWithThrowingShims=function(){function i(o,a,c,h,_,$){if($!==ReactPropTypesSecret){var g=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw g.name="Invariant Violation",g}}i.isRequired=i;function e(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:e,element:i,elementType:i,instanceOf:e,node:i,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:emptyFunctionWithReset,resetWarningCache:emptyFunction};return s.PropTypes=s,s};propTypes.exports=factoryWithThrowingShims();var propTypesExports=propTypes.exports;const PropTypes=getDefaultExportFromCjs(propTypesExports);var __spreadArray=function(i,e,s){if(s||arguments.length===2)for(var o=0,a=e.length,c;o<a;o++)(c||!(o in e))&&(c||(c=Array.prototype.slice.call(e,0,o)),c[o]=e[o]);return i.concat(c||Array.prototype.slice.call(e))},clipboardEvents=["onCopy","onCut","onPaste"],compositionEvents=["onCompositionEnd","onCompositionStart","onCompositionUpdate"],focusEvents=["onFocus","onBlur"],formEvents=["onInput","onInvalid","onReset","onSubmit"],imageEvents=["onLoad","onError"],keyboardEvents=["onKeyDown","onKeyPress","onKeyUp"],mediaEvents=["onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting"],mouseEvents=["onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp"],dragEvents=["onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop"],selectionEvents=["onSelect"],touchEvents=["onTouchCancel","onTouchEnd","onTouchMove","onTouchStart"],pointerEvents=["onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut"],uiEvents=["onScroll"],wheelEvents=["onWheel"],animationEvents=["onAnimationStart","onAnimationEnd","onAnimationIteration"],transitionEvents=["onTransitionEnd"],otherEvents=["onToggle"],changeEvents=["onChange"],allEvents=__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray(__spreadArray([],clipboardEvents,!0),compositionEvents,!0),focusEvents,!0),formEvents,!0),imageEvents,!0),keyboardEvents,!0),mediaEvents,!0),mouseEvents,!0),dragEvents,!0),selectionEvents,!0),touchEvents,!0),pointerEvents,!0),uiEvents,!0),wheelEvents,!0),animationEvents,!0),transitionEvents,!0),changeEvents,!0),otherEvents,!0);function makeEventProps(i,e){var s={};return allEvents.forEach(function(o){var a=i[o];a&&(e?s[o]=function(c){return a(c,e(o))}:s[o]=a)}),s}function makeCancellablePromise(i){var e=!1,s=new Promise(function(o,a){i.then(function(c){return!e&&o(c)}).catch(function(c){return!e&&a(c)})});return{promise:s,cancel:function(){e=!0}}}function r(i){var e,s,o="";if(typeof i=="string"||typeof i=="number")o+=i;else if(typeof i=="object")if(Array.isArray(i)){var a=i.length;for(e=0;e<a;e++)i[e]&&(s=r(i[e]))&&(o&&(o+=" "),o+=s)}else for(s in i)i[s]&&(o&&(o+=" "),o+=s);return o}function clsx(){for(var i,e,s=0,o="",a=arguments.length;s<a;s++)(i=arguments[s])&&(e=r(i))&&(o&&(o+=" "),o+=e);return o}var isProduction=!0,prefix="Invariant failed";function invariant(i,e){if(!i){if(isProduction)throw new Error(prefix);var s=typeof e=="function"?e():e,o=s?"".concat(prefix,": ").concat(s):prefix;throw new Error(o)}}var warning=function(){},warning_1=warning;const warning$1=getDefaultExportFromCjs(warning_1);var has=Object.prototype.hasOwnProperty;function find(i,e,s){for(s of i.keys())if(dequal(s,e))return s}function dequal(i,e){var s,o,a;if(i===e)return!0;if(i&&e&&(s=i.constructor)===e.constructor){if(s===Date)return i.getTime()===e.getTime();if(s===RegExp)return i.toString()===e.toString();if(s===Array){if((o=i.length)===e.length)for(;o--&&dequal(i[o],e[o]););return o===-1}if(s===Set){if(i.size!==e.size)return!1;for(o of i)if(a=o,a&&typeof a=="object"&&(a=find(e,a),!a)||!e.has(a))return!1;return!0}if(s===Map){if(i.size!==e.size)return!1;for(o of i)if(a=o[0],a&&typeof a=="object"&&(a=find(e,a),!a)||!dequal(o[1],e.get(a)))return!1;return!0}if(s===ArrayBuffer)i=new Uint8Array(i),e=new Uint8Array(e);else if(s===DataView){if((o=i.byteLength)===e.byteLength)for(;o--&&i.getInt8(o)===e.getInt8(o););return o===-1}if(ArrayBuffer.isView(i)){if((o=i.byteLength)===e.byteLength)for(;o--&&i[o]===e[o];);return o===-1}if(!s||typeof i=="object"){o=0;for(s in i)if(has.call(i,s)&&++o&&!has.call(e,s)||!(s in e)||!dequal(i[s],e[s]))return!1;return Object.keys(e).length===o}}return i!==i&&e!==e}const DocumentContext=reactExports.createContext(null);function Message({children:i,type:e}){return React.createElement("div",{className:`react-pdf__message react-pdf__message--${e}`},i)}const DEFAULT_LINK_REL="noopener noreferrer nofollow";class LinkService{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber||0}set page(e){invariant(this.pdfViewer,"PDF viewer is not initialized."),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}goToDestination(e){return new Promise(s=>{invariant(this.pdfDocument,"PDF document not loaded."),invariant(e,"Destination is not specified."),typeof e=="string"?this.pdfDocument.getDestination(e).then(s):Array.isArray(e)?s(e):e.then(s)}).then(s=>{invariant(Array.isArray(s),`"${s}" is not a valid destination array.`);const o=s[0];new Promise(a=>{invariant(this.pdfDocument,"PDF document not loaded."),o instanceof Object?this.pdfDocument.getPageIndex(o).then(c=>{a(c)}).catch(()=>{invariant(!1,`"${o}" is not a valid page reference.`)}):typeof o=="number"?a(o):invariant(!1,`"${o}" is not a valid destination reference.`)}).then(a=>{const c=a+1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(c>=1&&c<=this.pagesCount,`"${c}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({dest:s,pageIndex:a,pageNumber:c})})})}navigateTo(e){this.goToDestination(e)}goToPage(e){const s=e-1;invariant(this.pdfViewer,"PDF viewer is not initialized."),invariant(e>=1&&e<=this.pagesCount,`"${e}" is not a valid page number.`),this.pdfViewer.scrollPageIntoView({pageIndex:s,pageNumber:e})}addLinkAttributes(e,s,o){e.href=s,e.rel=this.externalLinkRel||DEFAULT_LINK_REL,e.target=o?"_blank":this.externalLinkTarget||""}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}setHash(){}executeNamedAction(){}cachePageRef(){}isPageVisible(){return!0}isPageCached(){return!0}executeSetOCGState(){}}const PasswordResponses={NEED_PASSWORD:1,INCORRECT_PASSWORD:2},isBrowser=typeof document<"u",isLocalFileSystem=isBrowser&&window.location.protocol==="file:";function isDefined(i){return typeof i<"u"}function isProvided(i){return isDefined(i)&&i!==null}function isString(i){return typeof i=="string"}function isArrayBuffer(i){return i instanceof ArrayBuffer}function isBlob(i){return invariant(isBrowser,"isBlob can only be used in a browser environment"),i instanceof Blob}function isDataURI(i){return isString(i)&&/^data:/.test(i)}function dataURItoByteString(i){invariant(isDataURI(i),"Invalid data URI.");const[e="",s=""]=i.split(",");return e.split(";").indexOf("base64")!==-1?atob(s):unescape(s)}function getDevicePixelRatio(){return isBrowser&&window.devicePixelRatio||1}const allowFileAccessFromFilesTip="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function displayCORSWarning(){warning$1(!isLocalFileSystem,`Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function displayWorkerWarning(){warning$1(!isLocalFileSystem,`Loading PDF.js worker may not work on protocols other than HTTP/HTTPS. ${allowFileAccessFromFilesTip}`)}function cancelRunningTask(i){i&&i.cancel&&i.cancel()}function makePageCallback(i,e){return Object.defineProperty(i,"width",{get(){return this.view[2]*e},configurable:!0}),Object.defineProperty(i,"height",{get(){return this.view[3]*e},configurable:!0}),Object.defineProperty(i,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(i,"originalHeight",{get(){return this.view[3]},configurable:!0}),i}function isCancelException(i){return i.name==="RenderingCancelledException"}function loadFromFile(i){return new Promise((e,s)=>{const o=new FileReader;o.onload=()=>{if(!o.result)return s(new Error("Error while reading a file."));e(o.result)},o.onerror=a=>{if(!a.target)return s(new Error("Error while reading a file."));const{error:c}=a.target;if(!c)return s(new Error("Error while reading a file."));switch(c.code){case c.NOT_FOUND_ERR:return s(new Error("Error while reading a file: File not found."));case c.SECURITY_ERR:return s(new Error("Error while reading a file: Security error."));case c.ABORT_ERR:return s(new Error("Error while reading a file: Aborted."));default:return s(new Error("Error while reading a file."))}},o.readAsArrayBuffer(i)})}function reducer(i,e){switch(e.type){case"RESOLVE":return{value:e.value,error:void 0};case"REJECT":return{value:!1,error:e.error};case"RESET":return{value:void 0,error:void 0};default:return i}}function useResolver(){return reactExports.useReducer(reducer,{value:void 0,error:void 0})}const{PDFDataRangeTransport:PDFDataRangeTransport$1}=pdfjs,eventProps=(()=>{const i={};return allEvents.forEach(e=>{i[e]=PropTypes.func}),i})(),isTypedArray=PropTypes.oneOfType([PropTypes.instanceOf(Int8Array),PropTypes.instanceOf(Uint8Array),PropTypes.instanceOf(Uint8ClampedArray),PropTypes.instanceOf(Int16Array),PropTypes.instanceOf(Uint16Array),PropTypes.instanceOf(Int32Array),PropTypes.instanceOf(Uint32Array),PropTypes.instanceOf(Float32Array),PropTypes.instanceOf(Float64Array)]),fileTypes=[PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.shape({data:PropTypes.oneOfType([PropTypes.string,PropTypes.instanceOf(ArrayBuffer),PropTypes.arrayOf(PropTypes.number.isRequired),isTypedArray]).isRequired}),PropTypes.shape({range:PropTypes.instanceOf(PDFDataRangeTransport$1).isRequired}),PropTypes.shape({url:PropTypes.string.isRequired})];typeof Blob<"u"&&fileTypes.push(PropTypes.instanceOf(Blob));const isClassName=PropTypes.oneOfType([PropTypes.string,PropTypes.arrayOf(PropTypes.string)]),isFile=PropTypes.oneOfType(fileTypes);PropTypes.instanceOf(LinkService);PropTypes.oneOf(["_self","_blank","_parent","_top"]);PropTypes.shape({commonObjs:PropTypes.shape({}).isRequired,getAnnotations:PropTypes.func.isRequired,getTextContent:PropTypes.func.isRequired,getViewport:PropTypes.func.isRequired,render:PropTypes.func.isRequired});const isPageIndex=function i(e,s,o){const{[s]:a,pageNumber:c,pdf:h}=e;if(!isDefined(h))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${s}\` of type \`${typeof a}\` supplied to \`${o}\`, expected \`number\`.`);if(a<0)return new Error(`Expected \`${s}\` to be greater or equal to 0.`);const{numPages:_}=h;if(a+1>_)return new Error(`Expected \`${s}\` to be less or equal to ${_-1}.`)}else if(!isDefined(c))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPageNumber=function i(e,s,o){const{[s]:a,pageIndex:c,pdf:h}=e;if(!isDefined(h))return null;if(isDefined(a)){if(typeof a!="number")return new Error(`\`${s}\` of type \`${typeof a}\` supplied to \`${o}\`, expected \`number\`.`);if(a<1)return new Error(`Expected \`${s}\` to be greater or equal to 1.`);const{numPages:_}=h;if(a>_)return new Error(`Expected \`${s}\` to be less or equal to ${_}.`)}else if(!isDefined(c))return new Error(`\`${s}\` not supplied. Either pageIndex or pageNumber must be supplied to \`${o}\`.`);return null},isPdf=PropTypes.oneOfType([PropTypes.any,PropTypes.oneOf([!1])]),isRef=PropTypes.oneOfType([PropTypes.func,PropTypes.exact({current:PropTypes.any})]),isRenderMode=PropTypes.oneOf(["canvas","custom","none","svg"]),isRotate=PropTypes.oneOf([0,90,180,270]);var __awaiter=function(i,e,s,o){function a(c){return c instanceof s?c:new s(function(h){h(c)})}return new(s||(s=Promise))(function(c,h){function _(d){try{g(o.next(d))}catch(j){h(j)}}function $(d){try{g(o.throw(d))}catch(j){h(j)}}function g(d){d.done?c(d.value):a(d.value).then(_,$)}g((o=o.apply(i,e||[])).next())})},__rest$1=function(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s};const{PDFDataRangeTransport}=pdfjs,defaultOnPassword=(i,e)=>{switch(e){case PasswordResponses.NEED_PASSWORD:{const s=prompt("Enter the password to open this PDF file.");i(s);break}case PasswordResponses.INCORRECT_PASSWORD:{const s=prompt("Invalid password. Please try again.");i(s);break}}};function isParameterObject(i){return typeof i=="object"&&i!==null&&("data"in i||"range"in i||"url"in i)}const Document=reactExports.forwardRef(function i(e,s){var{children:o,className:a,error:c="Failed to load PDF file.",externalLinkRel:h,externalLinkTarget:_,file:$,inputRef:g,imageResourcesPath:d,loading:j="Loading PDF",noData:tt="No PDF file specified.",onItemClick:rt,onLoadError:et,onLoadProgress:it,onLoadSuccess:st,onPassword:nt=defaultOnPassword,onSourceError:ot,onSourceSuccess:ht,options:pt,renderMode:lt,rotate:ut}=e,yt=__rest$1(e,["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate"]);const[Pt,vt]=useResolver(),{value:Vt,error:Dt}=Pt,[Qt,Wt]=useResolver(),{value:Kt,error:tn}=Qt,Ht=reactExports.useRef(new LinkService),St=reactExports.useRef([]),ft=reactExports.useRef(),ct=reactExports.useRef();reactExports.useEffect(()=>{$&&$!==ft.current&&isParameterObject($)&&(warning$1(!dequal($,ft.current),`File prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.`),ft.current=$)},[$]),reactExports.useEffect(()=>{pt&&pt!==ct.current&&(warning$1(!dequal(pt,ct.current),`Options prop passed to <Document /> changed, but it's equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.`),ct.current=pt)},[pt]);const dt=reactExports.useRef({scrollPageIntoView:Bt=>{const{dest:zt,pageNumber:Gt,pageIndex:Xt=Gt-1}=Bt;if(rt){rt({dest:zt,pageIndex:Xt,pageNumber:Gt});return}const sn=St.current[Xt];if(sn){sn.scrollIntoView();return}warning$1(!1,`An internal link leading to page ${Gt} was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>.`)}});reactExports.useImperativeHandle(s,()=>({linkService:Ht,pages:St,viewer:dt}),[]);function gt(){ht&&ht()}function Tt(){Dt&&(warning$1(!1,Dt.toString()),ot&&ot(Dt))}function wt(){vt({type:"RESET"})}reactExports.useEffect(wt,[$,vt]);const xt=reactExports.useCallback(()=>__awaiter(this,void 0,void 0,function*(){if(!$)return null;if(typeof $=="string")return isDataURI($)?{data:dataURItoByteString($)}:(displayCORSWarning(),{url:$});if($ instanceof PDFDataRangeTransport)return{range:$};if(isArrayBuffer($))return{data:$};if(isBrowser&&isBlob($))return{data:yield loadFromFile($)};if(invariant(typeof $=="object","Invalid parameter in file, need either Uint8Array, string or a parameter object"),invariant(isParameterObject($),"Invalid parameter object: need either .data, .range or .url"),"url"in $&&typeof $.url=="string"){if(isDataURI($.url)){const{url:Bt}=$,zt=__rest$1($,["url"]),Gt=dataURItoByteString(Bt);return Object.assign({data:Gt},zt)}displayCORSWarning()}return $}),[$]);reactExports.useEffect(()=>{const Bt=makeCancellablePromise(xt());return Bt.promise.then(zt=>{vt({type:"RESOLVE",value:zt})}).catch(zt=>{vt({type:"REJECT",error:zt})}),()=>{cancelRunningTask(Bt)}},[xt,vt]),reactExports.useEffect(()=>{if(!(typeof Vt>"u")){if(Vt===!1){Tt();return}gt()}},[Vt]);function At(){Kt&&(st&&st(Kt),St.current=new Array(Kt.numPages),Ht.current.setDocument(Kt))}function at(){tn&&(warning$1(!1,tn.toString()),et&&et(tn))}function mt(){Wt({type:"RESET"})}reactExports.useEffect(mt,[Wt,Vt]);function _t(){if(!Vt)return;const Bt=pt?Object.assign(Object.assign({},Vt),pt):Vt,zt=pdfjs.getDocument(Bt);it&&(zt.onProgress=it),nt&&(zt.onPassword=nt);const Gt=zt;return Gt.promise.then(Xt=>{Wt({type:"RESOLVE",value:Xt})}).catch(Xt=>{Gt.destroyed||Wt({type:"REJECT",error:Xt})}),()=>{Gt.destroy()}}reactExports.useEffect(_t,[pt,Wt,Vt]),reactExports.useEffect(()=>{if(!(typeof Kt>"u")){if(Kt===!1){at();return}At()}},[Kt]);function Rt(){Ht.current.setViewer(dt.current),Ht.current.setExternalLinkRel(h),Ht.current.setExternalLinkTarget(_)}reactExports.useEffect(Rt,[h,_]);function bt(Bt,zt){St.current[Bt]=zt}function Ct(Bt){delete St.current[Bt]}const $t=reactExports.useMemo(()=>({imageResourcesPath:d,linkService:Ht.current,onItemClick:rt,pdf:Kt,registerPage:bt,renderMode:lt,rotate:ut,unregisterPage:Ct}),[d,rt,Kt,lt,ut]),Ut=reactExports.useMemo(()=>makeEventProps(yt,()=>Kt),[yt,Kt]);function en(){return React.createElement(DocumentContext.Provider,{value:$t},o)}function Nt(){return $?Kt==null?React.createElement(Message,{type:"loading"},typeof j=="function"?j():j):Kt===!1?React.createElement(Message,{type:"error"},typeof c=="function"?c():c):en():React.createElement(Message,{type:"no-data"},typeof tt=="function"?tt():tt)}return React.createElement("div",Object.assign({className:clsx("react-pdf__Document",a),ref:g,style:{"--scale-factor":"1"}},Ut),Nt())}),isFunctionOrNode$1=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Document.propTypes=Object.assign(Object.assign({},eventProps),{children:PropTypes.node,className:isClassName,error:isFunctionOrNode$1,externalLinkRel:PropTypes.string,externalLinkTarget:PropTypes.oneOf(["_self","_blank","_parent","_top"]),file:isFile,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode$1,noData:isFunctionOrNode$1,onItemClick:PropTypes.func,onLoadError:PropTypes.func,onLoadProgress:PropTypes.func,onLoadSuccess:PropTypes.func,onPassword:PropTypes.func,onSourceError:PropTypes.func,onSourceSuccess:PropTypes.func,options:PropTypes.shape({canvasFactory:PropTypes.any,canvasMaxAreaInBytes:PropTypes.number,cMapPacked:PropTypes.bool,CMapReaderFactory:PropTypes.any,cMapUrl:PropTypes.string,disableAutoFetch:PropTypes.bool,disableFontFace:PropTypes.bool,disableRange:PropTypes.bool,disableStream:PropTypes.bool,docBaseUrl:PropTypes.string,enableXfa:PropTypes.bool,filterFactory:PropTypes.any,fontExtraProperties:PropTypes.bool,httpHeaders:PropTypes.object,isEvalSupported:PropTypes.bool,isOffscreenCanvasSupported:PropTypes.bool,length:PropTypes.number,maxImageSize:PropTypes.number,ownerDocument:PropTypes.any,password:PropTypes.string,pdfBug:PropTypes.bool,rangeChunkSize:PropTypes.number,StandardFontDataFactory:PropTypes.any,standardFontDataUrl:PropTypes.string,stopAtErrors:PropTypes.bool,useSystemFonts:PropTypes.bool,useWorkerFetch:PropTypes.bool,verbosity:PropTypes.number,withCredentials:PropTypes.bool,worker:PropTypes.any}),rotate:PropTypes.number});const Document$1=Document;function useDocumentContext(){return reactExports.useContext(DocumentContext)}function mergeRefs(){for(var i=[],e=0;e<arguments.length;e++)i[e]=arguments[e];var s=i.filter(Boolean);if(s.length<=1){var o=s[0];return o||null}return function(c){s.forEach(function(h){typeof h=="function"?h(c):h&&(h.current=c)})}}const PageContext=reactExports.createContext(null),PDF_ROLE_TO_HTML_ROLE={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},HEADING_PATTERN=/^H(\d+)$/;function isPdfRole(i){return i in PDF_ROLE_TO_HTML_ROLE}function isStructTreeNode(i){return"children"in i}function isStructTreeNodeWithOnlyContentChild(i){return isStructTreeNode(i)?i.children.length===1&&0 in i.children&&"id"in i.children[0]:!1}function getRoleAttributes(i){const e={};if(isStructTreeNode(i)){const{role:s}=i,o=s.match(HEADING_PATTERN);if(o)e.role="heading",e["aria-level"]=Number(o[1]);else if(isPdfRole(s)){const a=PDF_ROLE_TO_HTML_ROLE[s];a&&(e.role=a)}}return e}function getBaseAttributes(i){const e={};if(isStructTreeNode(i)){if(i.alt!==void 0&&(e["aria-label"]=i.alt),i.lang!==void 0&&(e.lang=i.lang),isStructTreeNodeWithOnlyContentChild(i)){const[s]=i.children;if(s){const o=getBaseAttributes(s);return Object.assign(Object.assign({},e),o)}}}else"id"in i&&(e["aria-owns"]=i.id);return e}function getAttributes(i){return i?Object.assign(Object.assign({},getRoleAttributes(i)),getBaseAttributes(i)):null}function StructTreeItem({className:i,node:e}){const s=reactExports.useMemo(()=>getAttributes(e),[e]),o=reactExports.useMemo(()=>!isStructTreeNode(e)||isStructTreeNodeWithOnlyContentChild(e)?null:e.children.map((a,c)=>React.createElement(StructTreeItem,{key:c,node:a})),[e]);return React.createElement("span",Object.assign({className:i},s),o)}function usePageContext(){return reactExports.useContext(PageContext)}function StructTree(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{onGetStructTreeError:e,onGetStructTreeSuccess:s}=i,[o,a]=useResolver(),{value:c,error:h}=o,{customTextRenderer:_,page:$}=i;function g(){c&&s&&s(c)}function d(){h&&(warning$1(!1,h.toString()),e&&e(h))}function j(){a({type:"RESET"})}reactExports.useEffect(j,[a,$]);function tt(){if(_||!$)return;const rt=makeCancellablePromise($.getStructTree()),et=rt;return rt.promise.then(it=>{a({type:"RESOLVE",value:it})}).catch(it=>{a({type:"REJECT",error:it})}),()=>cancelRunningTask(et)}return reactExports.useEffect(tt,[_,$,a]),reactExports.useEffect(()=>{if(c!==void 0){if(c===!1){d();return}g()}},[c]),c?React.createElement(StructTreeItem,{className:"react-pdf__Page__structTree structTree",node:c}):null}const ANNOTATION_MODE=pdfjs.AnnotationMode;function PageCanvas(i){const e=usePageContext();invariant(e,"Unable to find Page context.");const s=Object.assign(Object.assign({},e),i),{_className:o,canvasBackground:a,devicePixelRatio:c=getDevicePixelRatio(),onRenderError:h,onRenderSuccess:_,page:$,renderForms:g,renderTextLayer:d,rotate:j,scale:tt}=s,{canvasRef:rt}=i;invariant($,"Attempted to render page canvas, but no page was specified.");const et=reactExports.useRef(null);function it(){$&&_&&_(makePageCallback($,tt))}function st(lt){isCancelException(lt)||(warning$1(!1,lt.toString()),h&&h(lt))}const nt=reactExports.useMemo(()=>$.getViewport({scale:tt*c,rotation:j}),[c,$,j,tt]),ot=reactExports.useMemo(()=>$.getViewport({scale:tt,rotation:j}),[$,j,tt]);function ht(){if(!$)return;$.cleanup();const{current:lt}=et;if(!lt)return;lt.width=nt.width,lt.height=nt.height,lt.style.width=`${Math.floor(ot.width)}px`,lt.style.height=`${Math.floor(ot.height)}px`,lt.style.visibility="hidden";const ut={annotationMode:g?ANNOTATION_MODE.ENABLE_FORMS:ANNOTATION_MODE.ENABLE,canvasContext:lt.getContext("2d",{alpha:!1}),viewport:nt};a&&(ut.background=a);const yt=$.render(ut),Pt=yt;return yt.promise.then(()=>{lt.style.visibility="",it()}).catch(st),()=>cancelRunningTask(Pt)}reactExports.useEffect(ht,[a,et,c,$,g,nt,ot]);const pt=reactExports.useCallback(()=>{const{current:lt}=et;lt&&(lt.width=0,lt.height=0)},[et]);return reactExports.useEffect(()=>pt,[pt]),React.createElement("canvas",{className:`${o}__canvas`,dir:"ltr",ref:mergeRefs(rt,et),style:{display:"block",userSelect:"none"}},d?React.createElement(StructTree,null):null)}function PageSVG(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{_className:e,onRenderSuccess:s,onRenderError:o,page:a,rotate:c,scale:h}=i;invariant(a,"Attempted to render page SVG, but no page was specified.");const[_,$]=useResolver(),{value:g,error:d}=_;function j(){a&&s&&s(makePageCallback(a,h))}function tt(){d&&(isCancelException(d)||(warning$1(!1,d.toString()),o&&o(d)))}const rt=reactExports.useMemo(()=>a.getViewport({scale:h,rotation:c}),[a,c,h]);function et(){$({type:"RESET"})}reactExports.useEffect(et,[a,$,rt]);function it(){if(!a)return;const ht=makeCancellablePromise(a.getOperatorList());return ht.promise.then(pt=>{new pdfjs.SVGGraphics(a.commonObjs,a.objs).getSVG(pt,rt).then(ut=>{if(!(ut instanceof SVGElement))throw new Error("getSVG returned unexpected result.");$({type:"RESOLVE",value:ut})}).catch(ut=>{$({type:"REJECT",error:ut})})}).catch(pt=>{$({type:"REJECT",error:pt})}),()=>cancelRunningTask(ht)}reactExports.useEffect(it,[a,$,rt]),reactExports.useEffect(()=>{if(g!==void 0){if(g===!1){tt();return}j()}},[g]);function st(ht){if(!ht||!g)return;ht.firstElementChild||ht.appendChild(g);const{width:pt,height:lt}=rt;g.setAttribute("width",`${pt}`),g.setAttribute("height",`${lt}`)}const{width:nt,height:ot}=rt;return React.createElement("div",{className:`${e}__svg`,ref:ht=>st(ht),style:{display:"block",backgroundColor:"white",overflow:"hidden",width:nt,height:ot,userSelect:"none"}})}function isTextItem(i){return"str"in i}function TextLayer(){const i=usePageContext();invariant(i,"Unable to find Page context.");const{customTextRenderer:e,onGetTextError:s,onGetTextSuccess:o,onRenderTextLayerError:a,onRenderTextLayerSuccess:c,page:h,pageIndex:_,pageNumber:$,rotate:g,scale:d}=i;invariant(h,"Attempted to load page text content, but no page was specified.");const[j,tt]=useResolver(),{value:rt,error:et}=j,it=reactExports.useRef(null),st=reactExports.useRef();warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10)===1,"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer");function nt(){rt&&o&&o(rt)}function ot(){et&&(warning$1(!1,et.toString()),s&&s(et))}function ht(){tt({type:"RESET"})}reactExports.useEffect(ht,[h,tt]);function pt(){if(!h)return;const Dt=makeCancellablePromise(h.getTextContent()),Qt=Dt;return Dt.promise.then(Wt=>{tt({type:"RESOLVE",value:Wt})}).catch(Wt=>{tt({type:"REJECT",error:Wt})}),()=>cancelRunningTask(Qt)}reactExports.useEffect(pt,[h,tt]),reactExports.useEffect(()=>{if(rt!==void 0){if(rt===!1){ot();return}nt()}},[rt]);const lt=reactExports.useCallback(()=>{c&&c()},[c]),ut=reactExports.useCallback(Dt=>{warning$1(!1,Dt.toString()),a&&a(Dt)},[a]);function yt(){const Dt=st.current;Dt&&Dt.classList.add("active")}function Pt(){const Dt=st.current;Dt&&Dt.classList.remove("active")}const vt=reactExports.useMemo(()=>h.getViewport({scale:d,rotation:g}),[h,g,d]);function Vt(){if(!h||!rt)return;const{current:Dt}=it;if(!Dt)return;Dt.innerHTML="";const Qt=h.streamTextContent({includeMarkedContent:!0}),Wt={container:Dt,textContentSource:Qt,viewport:vt},Kt=pdfjs.renderTextLayer(Wt),tn=Kt;return Kt.promise.then(()=>{const Ht=document.createElement("div");Ht.className="endOfContent",Dt.append(Ht),st.current=Ht;const St=Dt.querySelectorAll('[role="presentation"]');if(e){let ft=0;rt.items.forEach((ct,dt)=>{if(!isTextItem(ct))return;const gt=St[ft];if(!gt)return;const Tt=e(Object.assign({pageIndex:_,pageNumber:$,itemIndex:dt},ct));gt.innerHTML=Tt,ft+=ct.str&&ct.hasEOL?2:1})}lt()}).catch(ut),()=>cancelRunningTask(tn)}return reactExports.useLayoutEffect(Vt,[e,ut,lt,h,_,$,rt,vt]),React.createElement("div",{className:clsx("react-pdf__Page__textContent","textLayer"),onMouseUp:Pt,onMouseDown:yt,ref:it})}function AnnotationLayer(){const i=useDocumentContext();invariant(i,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const e=usePageContext();invariant(e,"Unable to find Page context.");const s=Object.assign(Object.assign({},i),e),{imageResourcesPath:o,linkService:a,onGetAnnotationsError:c,onGetAnnotationsSuccess:h,onRenderAnnotationLayerError:_,onRenderAnnotationLayerSuccess:$,page:g,pdf:d,renderForms:j,rotate:tt,scale:rt=1}=s;invariant(g,"Attempted to load page annotations, but no page was specified.");const[et,it]=useResolver(),{value:st,error:nt}=et,ot=reactExports.useRef(null);warning$1(parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10)===1,"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations");function ht(){st&&h&&h(st)}function pt(){nt&&(warning$1(!1,nt.toString()),c&&c(nt))}function lt(){it({type:"RESET"})}reactExports.useEffect(lt,[it,g]);function ut(){if(!g)return;const Dt=makeCancellablePromise(g.getAnnotations()),Qt=Dt;return Dt.promise.then(Wt=>{it({type:"RESOLVE",value:Wt})}).catch(Wt=>{it({type:"REJECT",error:Wt})}),()=>{cancelRunningTask(Qt)}}reactExports.useEffect(ut,[it,g,j]),reactExports.useEffect(()=>{if(st!==void 0){if(st===!1){pt();return}ht()}},[st]);function yt(){$&&$()}function Pt(Dt){warning$1(!1,`${Dt}`),_&&_(Dt)}const vt=reactExports.useMemo(()=>g.getViewport({scale:rt,rotation:tt}),[g,tt,rt]);function Vt(){if(!d||!g||!st)return;const{current:Dt}=ot;if(!Dt)return;const Qt=vt.clone({dontFlip:!0}),Wt={accessibilityManager:null,annotationCanvasMap:null,div:Dt,l10n:null,page:g,viewport:Qt},Kt={annotations:st,annotationStorage:d.annotationStorage,div:Dt,downloadManager:null,imageResourcesPath:o,linkService:a,page:g,renderForms:j,viewport:Qt};Dt.innerHTML="";try{new pdfjs.AnnotationLayer(Wt).render(Kt),yt()}catch(tn){Pt(tn)}return()=>{}}return reactExports.useEffect(Vt,[st,o,a,g,j,vt]),React.createElement("div",{className:clsx("react-pdf__Page__annotations","annotationLayer"),ref:ot})}var __rest=function(i,e){var s={};for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&e.indexOf(o)<0&&(s[o]=i[o]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var a=0,o=Object.getOwnPropertySymbols(i);a<o.length;a++)e.indexOf(o[a])<0&&Object.prototype.propertyIsEnumerable.call(i,o[a])&&(s[o[a]]=i[o[a]]);return s};const defaultScale=1,Page=function i(e){const s=useDocumentContext();invariant(s,"Unable to find Document context. Did you wrap <Page /> in <Document />?");const o=Object.assign(Object.assign({},s),e),{_className:a="react-pdf__Page",_enableRegisterUnregisterPage:c=!0,canvasBackground:h,canvasRef:_,children:$,className:g,customRenderer:d,customTextRenderer:j,devicePixelRatio:tt,error:rt="Failed to load the page.",height:et,inputRef:it,loading:st="Loading page",noData:nt="No page specified.",onGetAnnotationsError:ot,onGetAnnotationsSuccess:ht,onGetStructTreeError:pt,onGetStructTreeSuccess:lt,onGetTextError:ut,onGetTextSuccess:yt,onLoadError:Pt,onLoadSuccess:vt,onRenderAnnotationLayerError:Vt,onRenderAnnotationLayerSuccess:Dt,onRenderError:Qt,onRenderSuccess:Wt,onRenderTextLayerError:Kt,onRenderTextLayerSuccess:tn,pageIndex:Ht,pageNumber:St,pdf:ft,registerPage:ct,renderAnnotationLayer:dt=!0,renderForms:gt=!1,renderMode:Tt="canvas",renderTextLayer:wt=!0,rotate:xt,scale:At=defaultScale,unregisterPage:at,width:mt}=o,_t=__rest(o,["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"]),[Rt,bt]=useResolver(),{value:Ct,error:$t}=Rt,Ut=reactExports.useRef(null);invariant(ft,"Attempted to load a page, but no document was specified.");const en=isProvided(St)?St-1:Ht??null,Nt=St??(isProvided(Ht)?Ht+1:null),Bt=xt??(Ct?Ct.rotate:null),zt=reactExports.useMemo(()=>{if(!Ct)return null;let Gn=1;const er=At??defaultScale;if(mt||et){const Jt=Ct.getViewport({scale:1,rotation:Bt});mt?Gn=mt/Jt.width:et&&(Gn=et/Jt.height)}return er*Gn},[et,Ct,Bt,At,mt]);function Gt(){return()=>{isProvided(en)&&c&&at&&at(en)}}reactExports.useEffect(Gt,[c,ft,en,at]);function Xt(){if(vt){if(!Ct||!zt)return;vt(makePageCallback(Ct,zt))}if(c&&ct){if(!isProvided(en)||!Ut.current)return;ct(en,Ut.current)}}function sn(){$t&&(warning$1(!1,$t.toString()),Pt&&Pt($t))}function cn(){bt({type:"RESET"})}reactExports.useEffect(cn,[bt,ft,en]);function mn(){if(!ft||!Nt)return;const Gn=makeCancellablePromise(ft.getPage(Nt)),er=Gn;return Gn.promise.then(Jt=>{bt({type:"RESOLVE",value:Jt})}).catch(Jt=>{bt({type:"REJECT",error:Jt})}),()=>cancelRunningTask(er)}reactExports.useEffect(mn,[bt,ft,en,Nt,ct]),reactExports.useEffect(()=>{if(Ct!==void 0){if(Ct===!1){sn();return}Xt()}},[Ct,zt]);const En=reactExports.useMemo(()=>Ct&&isProvided(en)&&Nt&&isProvided(Bt)&&isProvided(zt)?{_className:a,canvasBackground:h,customTextRenderer:j,devicePixelRatio:tt,onGetAnnotationsError:ot,onGetAnnotationsSuccess:ht,onGetStructTreeError:pt,onGetStructTreeSuccess:lt,onGetTextError:ut,onGetTextSuccess:yt,onRenderAnnotationLayerError:Vt,onRenderAnnotationLayerSuccess:Dt,onRenderError:Qt,onRenderSuccess:Wt,onRenderTextLayerError:Kt,onRenderTextLayerSuccess:tn,page:Ct,pageIndex:en,pageNumber:Nt,renderForms:gt,renderTextLayer:wt,rotate:Bt,scale:zt}:null,[a,h,j,tt,ot,ht,pt,lt,ut,yt,Vt,Dt,Qt,Wt,Kt,tn,Ct,en,Nt,gt,wt,Bt,zt]),vn=reactExports.useMemo(()=>makeEventProps(_t,()=>Ct&&(zt?makePageCallback(Ct,zt):void 0)),[_t,Ct,zt]),Rn=`${en}@${zt}/${Bt}`,Nn=`${en}/${Bt}`;function xn(){switch(Tt){case"custom":return invariant(d,'renderMode was set to "custom", but no customRenderer was passed.'),React.createElement(d,{key:`${Rn}_custom`});case"none":return null;case"svg":return React.createElement(PageSVG,{key:`${Nn}_svg`});case"canvas":default:return React.createElement(PageCanvas,{key:`${Rn}_canvas`,canvasRef:_})}}function Kn(){return wt?React.createElement(TextLayer,{key:`${Rn}_text`}):null}function kn(){return dt?React.createElement(AnnotationLayer,{key:`${Rn}_annotations`}):null}function Bn(){return React.createElement(PageContext.Provider,{value:En},xn(),Kn(),kn(),$)}function Xn(){return Nt?ft===null||Ct===void 0||Ct===null?React.createElement(Message,{type:"loading"},typeof st=="function"?st():st):ft===!1||Ct===!1?React.createElement(Message,{type:"error"},typeof rt=="function"?rt():rt):Bn():React.createElement(Message,{type:"no-data"},typeof nt=="function"?nt():nt)}return React.createElement("div",Object.assign({className:clsx(a,g),"data-page-number":Nt,ref:mergeRefs(it,Ut),style:{"--scale-factor":`${zt}`,backgroundColor:h||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},vn),Xn())},isFunctionOrNode=PropTypes.oneOfType([PropTypes.func,PropTypes.node]);Page.propTypes=Object.assign(Object.assign({},eventProps),{canvasBackground:PropTypes.string,canvasRef:isRef,children:PropTypes.node,className:isClassName,customRenderer:PropTypes.func,customTextRenderer:PropTypes.func,devicePixelRatio:PropTypes.number,error:isFunctionOrNode,height:PropTypes.number,imageResourcesPath:PropTypes.string,inputRef:isRef,loading:isFunctionOrNode,noData:isFunctionOrNode,onGetTextError:PropTypes.func,onGetTextSuccess:PropTypes.func,onLoadError:PropTypes.func,onLoadSuccess:PropTypes.func,onRenderError:PropTypes.func,onRenderSuccess:PropTypes.func,onRenderTextLayerError:PropTypes.func,onRenderTextLayerSuccess:PropTypes.func,pageIndex:isPageIndex,pageNumber:isPageNumber,pdf:isPdf,renderAnnotationLayer:PropTypes.bool,renderForms:PropTypes.bool,renderMode:isRenderMode,renderTextLayer:PropTypes.bool,rotate:isRotate,scale:PropTypes.number,width:PropTypes.number});const Page$1=Page;displayWorkerWarning();pdfjs.GlobalWorkerOptions.workerSrc="pdf.worker.js";pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;function PreviewDocument(i){const{CourseCode:e,CourseName:s,CreatedAt:o,Title:a,URL:c}=i.doc,h=c;return jsxRuntimeExports.jsxs("a",{target:"_blank",rel:"noreferrer",className:"preview",children:[jsxRuntimeExports.jsx("div",{className:"aspectwrapper",children:jsxRuntimeExports.jsx(Document$1,{file:h,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:1,width:150,renderTextLayer:!1,renderAnnotationLayer:!1})})}),jsxRuntimeExports.jsxs("div",{className:"overlay",children:[jsxRuntimeExports.jsx("h2",{className:"title",children:a}),jsxRuntimeExports.jsx("h2",{className:"course",children:"Course: "+e+"-"+s}),jsxRuntimeExports.jsx("h2",{className:"date",children:"Uploaded: "+format(o.toDate(),"MMM dd, yyyy hh:mm")})]})]})}const logo_light="/assets/logo-black-4ep0tK-H.png",logo_dark="/assets/logo-white-UKsbdbx4.png",search_icon_light="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAAAXNSR0IArs4c6QAAA7RJREFUaAXtmEloFFEQhmc8uaEmLolrPERE4sX1KEJAIeBCNERckCCIehBPCh4ED4J4cTkIKirmJCKCiGgQDMRDPAQDrhjFxDVGTXIwrqjxK+yR2FP1epkeM4gFPz39v6q//nkz3f1ep1MRor+/fwbp1WAJmAiKQQnoA90e7nG8CK6k0+mPHAcvMLwR3AFR4wwF0/66c5pWgftR3Sr5J+Dk18l/0Ggn+KGYiEs9onBKXp3T4GhcdwF1rxifmYT5tF8E4X1wu/287/w253IBPgXPwSggszkHyMU7EljRxcB8LtwXVkJkHtNrAmbsJOOzgoTJWQ8eO7RagjRCj9OkAnwymskFWh5azEukZpehJ/SpqHpqPkKNoqbEDbjRalEIktpaRTNDLQwhYaegsiKj5Ds2cz7Mrgw3gkY1+O7TltPmcApGFgItiugbuDFGSWQarb1KD6EqI4tJAYWlhuD2WIJGET2Gg26l1xGjxE0jtE0R63VXxRulzx6lV3sctSEULVUKLytcEtQlRWQ6XybyHUuMT1XEGhQuZ4qHTisi7xQhWXVGCjEuy1J/JPdU8yunUm3ZVKpM4ZyUGJ+kZMjaOl/RoQhHXnyJce1ClLVHvmKEIvxF4ZyUGH+tZExWuKQobXY1D85+YrxTyZircDlT3D2GIjJPEXqpcE5KjD9QMpYpXBKU7FW1uKmRTo5ZqFQeCkJpM+PUChpE84LSK/4SF7EeRTDRezn6C5QeQsnGJV5QfMgQXR1PMbsK/VtGD+12nC2gMQiWAG0T8QF+tlYThUPjLNDicBQdNRfVA5oyXBeQvWSsoPa4odsLPz6W6MAiRIrAQ6PJe/i6gflBn8kvBw2GntA1QRqhxxErA53ACtkAbwZFlihji8Bp4IprVn1YXns9UUFxIwj6GZvIkdcTsiCTPak8EeUWGuap+5m8g+AraGLVeJ1j7sFUyc/c4ZqymGNXjbqq3F17CjSQLZ22FzV6B9KbRJoseRGqxfLEzHuN1tGlXesUkqsn7/cOh8/HHHUrEzXvfQF5P3IO9DkaZ4Za+bAfZG0Q4FZlkoyjvMILjKyLM7CCBBou5jABjAXFQF7gvwWy0mzlYuvhaAb1GxisNxNSqRo0zjvGB28I82uB9Rr7G2PJ/22S+rqYq/uXzdcmNVGJ6wTMvPyd/ptPfNZF0Jt5DmrIzMvdqDADc1tU27/Igje/1WH+bmFOuefKmPk2+HEFbVzM+cw/4by04E1nDGJ2B3gGtLfKmbTCPGJaNip/xE+n1KTrzKWnrAAAAABJRU5ErkJggg==",search_icon_dark="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAC4AAAAuCAYAAABXuSs3AAAAAXNSR0IArs4c6QAABcJJREFUaAXNmltoHFUYx93dXMSVFrIx3iLNbRNKfamtUsFq+2AUL2ltWlu0aiu+6LNYEAQfqrZSEOtdvGBUqihqkFYKrULpQ8GElpSSNtlk0zWmqTUxhWTJPf6+dWeZOXNmZ2Z3Y/bAZOb7n+/yn2/OnPOd2QSu8dHq6uqipaWlWxYWFpoxu5mjIhAI3Mh5nGNEDvrOcbRPTEz8MjQ0lARblBbw4rWxsfEZCL6I7u1e9A0dbqBtdnb2lf7+/oSBFeqclTiEHyLQAUivzCcgN/BJMpncMzg4OJqPH7OtI/GmpqaXCLgP0o46Zkdu1/iKzc/Pb4zFYoNuul76taQg/T7Gz3tx4FPnEvobL9B82tnUbcQZHq+R5JdtmiaA7HVxtAeDwYtzc3N/0LUsFApVg63Gdgvy9SZ1yyU6l8n82nwzbyEO6R0EPmSJZBU+I+iB3t7ebitslXhiOyH4Kr7qrT0ZqZOkr81IOVxkiDc0NKwigx0Eu1b1A4luMtvS19cXU/uyydzAHvr3Oeh8DvlnHfpc4aChwaN+14H0Saa0u/2SFr8Q289N7zBiKOfdPOG7FMyzmCJOZjZhsUG1IugpprFm5uGrap9Xuaen51uGVyu+5jU2b2swT1BItCorK7/mdIvZgkBXpqen1yUSCVkV82qjo6PdkUgkxBO9z+wIuRr85MjISNyMe7kO1tTU3ITiGlUZ4nsHBgbGVDxXeXx8fD+2ugVInrbvFiwrK5Ppy9IgPcbMcdAC5ilI3YJf29Ag64/m4jqI4QOqIdhhFSuEzFj/WeOnpr6+vkGDZ4WCZOE2VQPsqIoVQmbROY3vv1VfzGhRFXOTJeNSlloaWEHqCYvTtIDvHhXnZlaomJss06FlNkkbSG29WG1AdczCV61ibrIQ/0dVIgPLVKxQMr7DGl9TGiwrJGN8WKNxqwYrCMRQsWXXgUPWeJJxKTUtDed3WIACCawZUgfZ1gywP/2GEOK2So8M5DS3ugUvLy+XvaqtUVacsoEugBD/UdUh4yuZW3WZUVV9ySRkl8agM5ctXZAi6DjObC9oSUnJ65ogOUNUgneSkMdUB9xMTmuGZFxa238ny99mavStFiQ/4SOdOTfzng53w1LEqQLf4M4nVWVWtC8YMr4+Sag+RCbb30BwtabvIDX7kAZ3hVLE4/H4ZRy/o9G+DvLHybwuqEbdDkH6Y3xvV3tI1Bi7qr0q7lVO1eOiHA6HO/hKJWMwYjYmaJiV7cmKioph6uoz5r5s11I4VVVVHcL+cZ0e+NNUoL/r+rxgmT2nKNfW1q6gzJWpSWp0WyNLfYBvTk5OfscGw/ZCi0E0Gr0XUrs5domsa/g5xqRwv67PK2YhLkbpTfNvBL4hmxOCn6D/IocUZMvRl88Tazi7rrroyfv0Fsc0+icY579y7avZiIu1PGamw2Nc+q7aXKLL1Ger/7mRh3kCR1xsLd2pl9OCIMiOfmpqah2XnWpfHvJzZPZBSLapPsj6YTbsLSqeTdYSFwP2m8MEko82O0XkyKlB9Es+b0Tx9WnagW3aTePtzECbvQbRDhWdMU63k5lW+uQLrq40zZhBVmafozMzMx8w1cp7kGm8vK3MUt9nAOVCPmUw2/ygwDbRM3GzJS/wBub3KrAIgeTjfpLjCoQvUTCddqs9SMJT6NuGjBGD+X0b2zzHmxO9nIgbAfI5k/knIP8Vh40DCZjD91Ze2J+cYmQWICeFxcJZzM6yqCXw36KSR5Z3bxsfi7r4WHRex2HJiAsZWYk9kL8A+XMq+SUl7pF8K5k/r5JfcuIeyMs7YCNfFMTN5Bnfm0Q2t/Q7IOT7yXyX9BUNcSGTHvNSYj8isrmlyW82yDuunGaj//OaxedD4r2gi5kmL79yFFfGDbIMhw5mG13me9FZT3+yqIaKQVzODBsLeRalOFvMeygA/5L+oiVukOfXkquQXkUZsJ66J6f9qfhaksY/PyxXA/8LlLBDAO1jtCgAAAAASUVORK5CYII=",toggle_icon_light="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAYAAAA5gg06AAAAAXNSR0IArs4c6QAACIlJREFUeAHtnWlsVUUUx7unhaba1oJ0sS1tEFxARMUYKSHAB6xiIogQxQgSNS5gokZjkAAaDZomEJdEUARCZIlxQUiIyyeCMSYogkqUUmppFWygfcgiXai/MZ3kpbz3vMvM3To3uZl7586cOef/nzMzd+7Me2lp5jAIGAQMAgYBg4BBwCBgEDAIGAQMAgYBg4BBwCBgEDAIGASCiEBmEJVKpVNNTc2MoqKieYWFhec7Ojr+SJU2Ks/Sw2BIbW3tNX19fQvT09MfRN8SqXNvb+/oo0eP/irvoxpmBdmwkSNHToOYp9GxnvASVTMzM28h0pB0CTIeROA5k/GcBoiZkKw4nse6u7t3JnsepfhAeVJ1dXUl3tEAwLMSec4A4Je2tLR0DIiL5O2lbYhPZjIgWAoxL1spHi86eOTIkbFW0kYhje+eVFlZWZ2dnf0hYN5qA9AlNtKGPqmvnkTzNpvmbQMoDrWB5P7GxsbxNtKHPmmGXxYwcluQkZGxnfLtEJRGU/eOXzr7Va4vJEHQEghaTx9ky5Mh6NyFCxc2+wWWX+V6ThIDhJcgaLVDgze1traed5g3tNk8HTjw/vMESK10ihae9JXTvGHO55knQdAigHrLJViGJJcAJs1OHzQVL1ibNIGFB+Q/0NTUFLOQNHJJtDd3EHQVfdDHIGdrkDAQaUjaMzBusNzrbu6yGMB9ApgFCgBtVCAjlCK0ksRIbjkk3agCGeQ0q5ATRhnaSKKZGwWwz6sChW9HhiRVYEo59ENioKCsz+vq6mqVsgdbqMWTGG7fC5CTVYKZlZXVq1JemGTpIEmM4lapBqGnpyd06zFUYaCcJPqih1CuWpWCUk5eXp5yXaXsoIfKDWewsEyH0UysZuuQGwaZSkliyD0Fkqp0GJ6Tk6PcO3XoqUOmUpIg6AEdSgqZyK7VJTvoclWSJIbbczQabEhyCy7D7juQke9WTrL8eNKoZM+iHq/Mk5gArdcJFvKn65QfZNnKSKKm36nTUORfjrcqmQfUqacO2UpIYlnWGJQr1aFgvEy8aVr8/WC5VkISUzZiTbb2A2/S2qRqN8BhAUpIouzrHZZvN1sda/XG2c0U9vRKSKKGe0VSGrPrz4QddLv6KyGJvkL0SZ4cVIj5FRUV2vs/T4yxWIgSkgCuwmJ5SpKxdvxFJYJCIiTdrZ4Mi8X6BU9X8eC5fZQ5lp0VP7nVPwz5XXsSX0yv8NpQPFdUrg+8Ltev8lyTxK4IbVNBqUCBp5v4dvVYqjRReaaCJN8+a0NUA0Pyq6NCRjI7XJN08eLF7mTCdcdD0hA8edfw4cNtbZ/RrZdq+a5JYqmVbyT1g1GTn5+/TTUwQZLnmiR2gP/tt0F4VD3906t+66GrfNdDcKEYn83PiqZHl5I25K5nq+Yi0oshemQO157Uj8SxgCCykAqzq7y8PC8g+ihRQwlJeFGzEm0UCEGXGbm5uXt5ya5RIE6pCJrkevT6gor0hp2KpIQkJgCC9uY/Hp0OAsoCpSg7FCbmGiHnIyaHdyJiOhXpWSrS21bFqSLpG6sFepUOIPIAZT21dktpaannsyLSTspfzHI0sW1nlowTIZXoyvj7VNdKSOJdKXAkSaMhay6rX48B1hpqc7mM1x1S1hzKPED5a0SFSVDe3gRxCaOUjO6EZJRqIqhOWEqAIqnBGwDtXUaB3+pQCxzmU4b4CZ5RqeTzfjmRn4H7LlUa+UwZSaKmothiKTjoIUD+ho7vc25gNv0vp/qWlJTkFxQU3IztE5H5OOH/frYhXSdlFlotUxlJdNK30weEcl8roB0G3B8J94sT8ARpMa5j1PYT2HYZNb+UtRwjSFdG816KrdfxXJBje+6QfNsh6T7PSRIF4uonCYqsFj5Y00H4TMj/3Kr9SgYOcYVtirs2l4kRaLNDkBChlCQ2eq1CZldi3UxsPwKiH7R1KCWpubn5OO31OlsaDLLE9Efv2TVZKUmicEh6hcB4UwImIGgdAwbb85yZCWS5iurs7DzDb3bnMuqpcyUoYpkh6B8wuevUqVPn7Jqm3JOEAtSWlShlu8bYVT5M6SFoNS/Q7U501kISiojm7lEnCkU0jyDnNae2KW/upCL8RUEjzd44atAYGTdYQ1qVh2ldvndqvy5P+k8fCBLTRGedKheRfDsgaJsbW7SSRBvcSi2azRmpz9lWAcdssbJXfM53dWhr7qRWotkrLi4WK4qmyrjBEkLS/XjRPrf2aidJKMiwcw/90w00f6PdKhyW/LwvvsAvXdp+cU1kn9bmLr5AJhXncf9DfFxUr/GgjRAkpsiUHMo+VVjRpqysrJivpF+TNsq79XbQF99tBQ+raTzzJKFQW1vbSZqBydQ01+20VQO9TIddWyHoHtVleupJUnkWhgzBo3bTR02ScWEPIUjMyz2iww5fSJKG8JHwM65nyvsQh8vxoBW69PdkdJdMeUZ9Wxn1HcejppAmJ1m6oMbjPb9zTseDtujU0VdPkoaJ/1Bi/cBmyLpNxgU9hJyNp0+ffrK9vf2Mbl0DQZI0khVHz3G9ErJyZVwAw0MMfp5iiC1GqZ4cgSJJWAxRw6ily1iNIzrhwPxaJDrFqDwr6HveRK8eoatXR+BIkob3N4HLAUb8t6yfh9h/Jf5YqwGCHH0Pcqt8YEmShlVVVY1my+UC7udD2AgZrzvEc05Q3uuxWGytF/1OKnsCT1K88mxiroOwuQA4FwAtrwCNl5HqGrl/8nwH525GbJ+mSuvls1CRFA8MfdcEQJ0EWXWc4qXY1s4J8op/NDtE3l8YCOyjD/yS5uzn+DKCch1akgYCyIvxtcTVAr7YUjIM8EeIa8Kh3LdxtnDfxn0LPxBymD8SFhsMzGEQMAgYBAwCBgGDgEHAIGAQMAgYBAwCBgGDgEHAIGAQMAgYBAwCBgGDgEHAIJAagX8B0ZRLy7UYZB4AAAAASUVORK5CYII=",toggle_icon_dark="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGkAAABpCAYAAAA5gg06AAAAAXNSR0IArs4c6QAACOlJREFUeAHtXO2R2zYU9GXy3+ogdAVhKjA6iFyBmQp8HVipwOrA6sByBZQrsDoQXcHJFTi7ZzKDg/BNgBLOeDPvSOJj3759BI4nau7Fi2pVgapAVaAqUBWoClQFqgJVgarAggrcLRgre6gfP36sEOT1GOjL3d3dOXvQGsBfARSohT/AJ+N5649QR2ZXAAXpp+pIxz574BrATwEURUiFUU+FH0odlVUBVKVXKyNd19WUVX0PcBTDtoqmWgkPqDoklwKoQj9VwnKsqylXAVy4KIrPKppqJ1x4tT+DAlC/nyrgcayrKUMNrJAoSsgqmmoorKC1M60CUL2flA841tWUtgxmNBQlZhVNtRRm5F+sB4qs4K/hTerUgdnDYy35agKRBv4azs8OyzCQ7eDy52hfcf0O3szNABhzVhGmP5pIwIOFYU7MbbIHnHRzsbPPB0mSJ1mTMal38CaGDOb18LkWtZoQVFcYlQtzv+0VBYIhd3pQwQKxVfHUa+Fzk2CST2GisH3iZxkDtiFFkpNzFgyDe3nCzHPjagJuTGFkOl43QJYC+IKC7VlmHHF+UTBgxBbfFv5/MTFobmGmOGW8aATb3cQ4wXEqWJ8AS4Ug5js4Y6Syne/N7Dsuy+tzZLsGgU++JJ7ZuDd4bb9PmVOWIpEgCsVl/zIl2QKwvqNAq9Q8f0sNKOElvZsk3Fs+zZJzLVLakmcpUrbtjrln3vK+IwRFOcAH+FH9Chfir9Dewhu4gK/hubbgLFsd+OY1iJTyKQ9wj7bFTwofZZgr4Dl47aIIXXsSxFjDUxmFbVLlRCx4ymJxlZZpEGLuH7aHlMVRVRyLxRhz7KziFnWNzOfcrdulkgVPbqOxtsvJ8/ec4CP2Hse3EXH+wYPAzmcelG0xjg8EQhl/wDV/oR+V9otLjLkHDsd9vOh0NzDHsg3Jh2x5HEvRrYYxAv4BfoK77IQBHCusoOjEmBYexNeFWUQ/kg7Z8jpbUqOIPY6x1mNi44jRBYDvbFjF9CHhtWfSW1tSwOBqSGUfHLG2noHWNpyi+pCwawsx7uuYu4L38NTWA3BlEhJ9e0fAs2luke1I1rXlNbrEKCI85asEVXdiawuF9kYdrFzvdJyLbENiAm4TemNKzDFP0Sz60vaWdmtBZU7CxL2IdiYA7+E2O6PTdCd/tE1M3LfViUpucHK0WY/OsopFwnAS97GNQRxiLG1aoUFi40mkxzgthi7Hq7SRIJxEQ6zRkQVAHwKSaKx22wN2G4jfY7zQ5XW1NhKCk1ioDTrSAFmHAiUcLwychogYPeZo8XQxTG2zXvqRAJx3H12Yglja94a+taF9iebOEMTE1TD8sVngJwtF5/lyxoBjYBxmmdCxBuLDLNR5kx8MnFKs7h7UtDnrYka1MQCcgVLZSiUCYMa4tl0ICUKrhKR6YF3EULWYrr22OwDyF+ecbW2K9+SIT57PTxp+XghN29JNFxwMXGN5EZ+ForcuEOerCoDwbmeBLu56F7ijn99R+NVNQAAW6pXtJvBZSR2AUhcIkC+O/KGxRtO2dJOJw5cMRKhtZ8P1KVKOAtk4LR1Px2VpDtZ4PkXa6bJI0PaHAeNoaF+y2cThz0wkdjZcZ5GwVw4AeANP/TukAWZpZr3jI5Khpvzu+GCb6ywSJwNkj0MD/xeeuliAfGKmu/jJoMwXFxzGB6hUYakhtWxGbVPh/sQhWfgGfobPNaGyA2DKv0di+V2sGACl+PuNmlG7C3xVB/naayXJE1D5M3yDtgY+d2UJYDwx4qPh85PGZS8+jxzUqEJtCLiWV87GgB8AFziUd8V4d8SsrK+6cMDr4NeyzsDJ9tLSxDVq5ejiJ2kDy9hiaZc+8AZT5hnbB50YiNcExryt4qhJIZnQYnUqBq+Bc43VNJfLbRdHFTqgWCd17nQNjAN8KTtMcdUjCJwcJMoqjiZBn5V1r87jNYTh3MEhUIpuxjBtuxtLgLKLo4qORLeWZPn+yCRSiz6KkcuI3ap8pZvE9m5Le3PpsIpogxAnh8pbUyIUEZ6jUFxB2gKNRdo6OGufTk153HT7KLIj38fuzpQIelfwow+I5xhirSzxOk+cxoRRVDuSdd2Rkx7cWox3NpNGP8XjCog1zu1sAqK/hdu2OTn2vQ2rmD5kdJKzcpxzrPEOZ9Lsh9/Dj3Bf41jO8cH2LRBjZ9/y7nJXGklwZYQmMmAOPx0+uvgBv8GYNZziMxaPtDP8OB73wBpwbrWR6ycMaqwDLztf+eBfTruRFiS+hccY7+ZuqTQYCx6yguSc7pfimSUOMjnJ2UScv89CTAIFp/cRvOQpoTuFFP3Kp8iilTOZcX7C3Lep0yEm/ARPYU1qfovgIfPYrc4k2gkds4qF+StiwE/wlJZty8v64AAF+LlcrjtsD+wDnO9/BhyNBh4NOv+GC/gansP4b3P+ygGcrUgQpgXhJffqAfHosjW4oC9lWZ7ynF+OnJFdN2NuzNQGk+jXNK7SbWoCOVdSzq0utQ6p8LJsecHfcfDJZtzqGp+xz2wMn2aT552lSBC+Syw+v5jCL3Oktm8AJHZKy/VgkpLj42drJ9xRc20PAH4KsCI7HDdzATXzuxGbj+WMxZhzbcmHJdIPN2TIJR9rTwojRwcghTzHAmvmDTL+dD7GmVuwZsK7ySOSFBpBbE3GwqgJAiTlaupUfPUa8XhjxBRMqFg3dY2kWrjLvAsjJwdQinZ2gXv0DzKuz/kY27dgjQ/mVccgoa1GqKjCqIkAN8Vq6lTckGtHwe5DsHzG5vw7qQUBPukc4Qd8ZHL2IeQaQ4EwZoC/dI019H8Dl8bQF9w88mGexOR7K+ZbbeZq6qqCCygwbjcxv5uGBeglD5Hrj9nkRGXAcevcym2e5xvPcXVYCgUiVtOQIu41MIpcSRQqYjVtriHwLx8zYDUNJYtV7Eqi6AGraVNykYrn7rGahuKTfA4JoFC2TyG655Bj8TlYVtNQfHLPKQEUag1XjR/XFG/ZPru7hjKokEBcOm2HB4vh8az+qApUBaoCVYGqQFWgKlAVqApUBaoCVYFnpcB/RUg2S4CIBygAAAAASUVORK5CYII=";var algoliasearch_umd={exports:{}};/*! algoliasearch.umd.js | 4.22.1 |  Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(i,e){(function(s,o){i.exports=o()})(commonjsGlobal$1,function(){function s(Et,It,kt){return It in Et?Object.defineProperty(Et,It,{value:kt,enumerable:!0,configurable:!0,writable:!0}):Et[It]=kt,Et}function o(Et,It){var kt=Object.keys(Et);if(Object.getOwnPropertySymbols){var Mt=Object.getOwnPropertySymbols(Et);It&&(Mt=Mt.filter(function(qt){return Object.getOwnPropertyDescriptor(Et,qt).enumerable})),kt.push.apply(kt,Mt)}return kt}function a(Et){for(var It=1;It<arguments.length;It++){var kt=arguments[It]!=null?arguments[It]:{};It%2?o(Object(kt),!0).forEach(function(Mt){s(Et,Mt,kt[Mt])}):Object.getOwnPropertyDescriptors?Object.defineProperties(Et,Object.getOwnPropertyDescriptors(kt)):o(Object(kt)).forEach(function(Mt){Object.defineProperty(Et,Mt,Object.getOwnPropertyDescriptor(kt,Mt))})}return Et}function c(Et,It){if(Et==null)return{};var kt,Mt,qt=function(an,Zt){if(an==null)return{};var on,dn,un={},Tn=Object.keys(an);for(dn=0;dn<Tn.length;dn++)on=Tn[dn],Zt.indexOf(on)>=0||(un[on]=an[on]);return un}(Et,It);if(Object.getOwnPropertySymbols){var nn=Object.getOwnPropertySymbols(Et);for(Mt=0;Mt<nn.length;Mt++)kt=nn[Mt],It.indexOf(kt)>=0||Object.prototype.propertyIsEnumerable.call(Et,kt)&&(qt[kt]=Et[kt])}return qt}function h(Et,It){return function(kt){if(Array.isArray(kt))return kt}(Et)||function(kt,Mt){if(Symbol.iterator in Object(kt)||Object.prototype.toString.call(kt)==="[object Arguments]"){var qt=[],nn=!0,an=!1,Zt=void 0;try{for(var on,dn=kt[Symbol.iterator]();!(nn=(on=dn.next()).done)&&(qt.push(on.value),!Mt||qt.length!==Mt);nn=!0);}catch(un){an=!0,Zt=un}finally{try{nn||dn.return==null||dn.return()}finally{if(an)throw Zt}}return qt}}(Et,It)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _(Et){return function(It){if(Array.isArray(It)){for(var kt=0,Mt=new Array(It.length);kt<It.length;kt++)Mt[kt]=It[kt];return Mt}}(Et)||function(It){if(Symbol.iterator in Object(It)||Object.prototype.toString.call(It)==="[object Arguments]")return Array.from(It)}(Et)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function $(Et){var It,kt="algoliasearch-client-js-".concat(Et.key),Mt=function(){return It===void 0&&(It=Et.localStorage||window.localStorage),It},qt=function(){return JSON.parse(Mt().getItem(kt)||"{}")},nn=function(Zt){Mt().setItem(kt,JSON.stringify(Zt))},an=function(){var Zt=Et.timeToLive?1e3*Et.timeToLive:null,on=qt(),dn=Object.fromEntries(Object.entries(on).filter(function(Tn){return h(Tn,2)[1].timestamp!==void 0}));if(nn(dn),Zt){var un=Object.fromEntries(Object.entries(dn).filter(function(Tn){var An=h(Tn,2)[1],bn=new Date().getTime();return!(An.timestamp+Zt<bn)}));nn(un)}};return{get:function(Zt,on){var dn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){an();var un=JSON.stringify(Zt);return qt()[un]}).then(function(un){return Promise.all([un?un.value:on(),un!==void 0])}).then(function(un){var Tn=h(un,2),An=Tn[0],bn=Tn[1];return Promise.all([An,bn||dn.miss(An)])}).then(function(un){return h(un,1)[0]})},set:function(Zt,on){return Promise.resolve().then(function(){var dn=qt();return dn[JSON.stringify(Zt)]={timestamp:new Date().getTime(),value:on},Mt().setItem(kt,JSON.stringify(dn)),on})},delete:function(Zt){return Promise.resolve().then(function(){var on=qt();delete on[JSON.stringify(Zt)],Mt().setItem(kt,JSON.stringify(on))})},clear:function(){return Promise.resolve().then(function(){Mt().removeItem(kt)})}}}function g(Et){var It=_(Et.caches),kt=It.shift();return kt===void 0?{get:function(Mt,qt){var nn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},an=qt();return an.then(function(Zt){return Promise.all([Zt,nn.miss(Zt)])}).then(function(Zt){return h(Zt,1)[0]})},set:function(Mt,qt){return Promise.resolve(qt)},delete:function(Mt){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(Mt,qt){var nn=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return kt.get(Mt,qt,nn).catch(function(){return g({caches:It}).get(Mt,qt,nn)})},set:function(Mt,qt){return kt.set(Mt,qt).catch(function(){return g({caches:It}).set(Mt,qt)})},delete:function(Mt){return kt.delete(Mt).catch(function(){return g({caches:It}).delete(Mt)})},clear:function(){return kt.clear().catch(function(){return g({caches:It}).clear()})}}}function d(){var Et=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},It={};return{get:function(kt,Mt){var qt=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},nn=JSON.stringify(kt);if(nn in It)return Promise.resolve(Et.serializable?JSON.parse(It[nn]):It[nn]);var an=Mt(),Zt=qt&&qt.miss||function(){return Promise.resolve()};return an.then(function(on){return Zt(on)}).then(function(){return an})},set:function(kt,Mt){return It[JSON.stringify(kt)]=Et.serializable?JSON.stringify(Mt):Mt,Promise.resolve(Mt)},delete:function(kt){return delete It[JSON.stringify(kt)],Promise.resolve()},clear:function(){return It={},Promise.resolve()}}}function j(Et,It,kt){var Mt={"x-algolia-api-key":kt,"x-algolia-application-id":It};return{headers:function(){return Et===nt.WithinHeaders?Mt:{}},queryParameters:function(){return Et===nt.WithinQueryParameters?Mt:{}}}}function tt(Et){var It=0;return Et(function kt(){return It++,new Promise(function(Mt){setTimeout(function(){Mt(Et(kt))},Math.min(100*It,1e3))})})}function rt(Et){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(kt,Mt){return Promise.resolve()};return Object.assign(Et,{wait:function(kt){return rt(Et.then(function(Mt){return Promise.all([It(Mt,kt),Mt])}).then(function(Mt){return Mt[1]}))}})}function et(Et){for(var It=Et.length-1;It>0;It--){var kt=Math.floor(Math.random()*(It+1)),Mt=Et[It];Et[It]=Et[kt],Et[kt]=Mt}return Et}function it(Et,It){return It&&Object.keys(It).forEach(function(kt){Et[kt]=It[kt](Et)}),Et}function st(Et){for(var It=arguments.length,kt=new Array(It>1?It-1:0),Mt=1;Mt<It;Mt++)kt[Mt-1]=arguments[Mt];var qt=0;return Et.replace(/%s/g,function(){return encodeURIComponent(kt[qt++])})}var nt={WithinQueryParameters:0,WithinHeaders:1};function ot(Et,It){var kt=Et||{},Mt=kt.data||{};return Object.keys(kt).forEach(function(qt){["timeout","headers","queryParameters","data","cacheable"].indexOf(qt)===-1&&(Mt[qt]=kt[qt])}),{data:Object.entries(Mt).length>0?Mt:void 0,timeout:kt.timeout||It,headers:kt.headers||{},queryParameters:kt.queryParameters||{},cacheable:kt.cacheable}}var ht={Read:1,Write:2,Any:3},pt=1,lt=2,ut=3;function yt(Et){var It=arguments.length>1&&arguments[1]!==void 0?arguments[1]:pt;return a(a({},Et),{},{status:It,lastUpdate:Date.now()})}function Pt(Et){return typeof Et=="string"?{protocol:"https",url:Et,accept:ht.Any}:{protocol:Et.protocol||"https",url:Et.url,accept:Et.accept||ht.Any}}var vt="DELETE",Vt="GET",Dt="POST",Qt="PUT";function Wt(Et,It){return Promise.all(It.map(function(kt){return Et.get(kt,function(){return Promise.resolve(yt(kt))})})).then(function(kt){var Mt=kt.filter(function(an){return function(Zt){return Zt.status===pt||Date.now()-Zt.lastUpdate>12e4}(an)}),qt=kt.filter(function(an){return function(Zt){return Zt.status===ut&&Date.now()-Zt.lastUpdate<=12e4}(an)}),nn=[].concat(_(Mt),_(qt));return{getTimeout:function(an,Zt){return(qt.length===0&&an===0?1:qt.length+3+an)*Zt},statelessHosts:nn.length>0?nn.map(function(an){return Pt(an)}):It}})}function Kt(Et,It,kt,Mt){var qt=[],nn=function(An,bn){if(!(An.method===Vt||An.data===void 0&&bn.data===void 0)){var Sn=Array.isArray(An.data)?An.data:a(a({},An.data),bn.data);return JSON.stringify(Sn)}}(kt,Mt),an=function(An,bn){var Sn=a(a({},An.headers),bn.headers),Mn={};return Object.keys(Sn).forEach(function(Fn){var qn=Sn[Fn];Mn[Fn.toLowerCase()]=qn}),Mn}(Et,Mt),Zt=kt.method,on=kt.method!==Vt?{}:a(a({},kt.data),Mt.data),dn=a(a(a({"x-algolia-agent":Et.userAgent.value},Et.queryParameters),on),Mt.queryParameters),un=0,Tn=function An(bn,Sn){var Mn=bn.pop();if(Mn===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:ct(qt)};var Fn={data:nn,headers:an,method:Zt,url:St(Mn,kt.path,dn),connectTimeout:Sn(un,Et.timeouts.connect),responseTimeout:Sn(un,Mt.timeout)},qn=function(Hn){var zn={request:Fn,response:Hn,host:Mn,triesLeft:bn.length};return qt.push(zn),zn},mr={onSuccess:function(Hn){return function(zn){try{return JSON.parse(zn.content)}catch(or){throw function(sr,cr){return{name:"DeserializationError",message:sr,response:cr}}(or.message,zn)}}(Hn)},onRetry:function(Hn){var zn=qn(Hn);return Hn.isTimedOut&&un++,Promise.all([Et.logger.info("Retryable failure",dt(zn)),Et.hostsCache.set(Mn,yt(Mn,Hn.isTimedOut?ut:lt))]).then(function(){return An(bn,Sn)})},onFail:function(Hn){throw qn(Hn),function(zn,or){var sr=zn.content,cr=zn.status,gr=sr;try{gr=JSON.parse(sr).message}catch{}return function(_r,Pr,Fr){return{name:"ApiError",message:_r,status:Pr,transporterStackTrace:Fr}}(gr,cr,or)}(Hn,ct(qt))}};return Et.requester.send(Fn).then(function(Hn){return function(zn,or){return function(sr){var cr=sr.status;return sr.isTimedOut||function(gr){var _r=gr.isTimedOut,Pr=gr.status;return!_r&&~~Pr==0}(sr)||~~(cr/100)!=2&&~~(cr/100)!=4}(zn)?or.onRetry(zn):~~(zn.status/100)==2?or.onSuccess(zn):or.onFail(zn)}(Hn,mr)})};return Wt(Et.hostsCache,It).then(function(An){return Tn(_(An.statelessHosts).reverse(),An.getTimeout)})}function tn(Et){var It=Et.hostsCache,kt=Et.logger,Mt=Et.requester,qt=Et.requestsCache,nn=Et.responsesCache,an=Et.timeouts,Zt=Et.userAgent,on=Et.hosts,dn=Et.queryParameters,un={hostsCache:It,logger:kt,requester:Mt,requestsCache:qt,responsesCache:nn,timeouts:an,userAgent:Zt,headers:Et.headers,queryParameters:dn,hosts:on.map(function(Tn){return Pt(Tn)}),read:function(Tn,An){var bn=ot(An,un.timeouts.read),Sn=function(){return Kt(un,un.hosts.filter(function(Fn){return(Fn.accept&ht.Read)!=0}),Tn,bn)};if((bn.cacheable!==void 0?bn.cacheable:Tn.cacheable)!==!0)return Sn();var Mn={request:Tn,mappedRequestOptions:bn,transporter:{queryParameters:un.queryParameters,headers:un.headers}};return un.responsesCache.get(Mn,function(){return un.requestsCache.get(Mn,function(){return un.requestsCache.set(Mn,Sn()).then(function(Fn){return Promise.all([un.requestsCache.delete(Mn),Fn])},function(Fn){return Promise.all([un.requestsCache.delete(Mn),Promise.reject(Fn)])}).then(function(Fn){var qn=h(Fn,2);return qn[0],qn[1]})})},{miss:function(Fn){return un.responsesCache.set(Mn,Fn)}})},write:function(Tn,An){return Kt(un,un.hosts.filter(function(bn){return(bn.accept&ht.Write)!=0}),Tn,ot(An,un.timeouts.write))}};return un}function Ht(Et){var It={value:"Algolia for JavaScript (".concat(Et,")"),add:function(kt){var Mt="; ".concat(kt.segment).concat(kt.version!==void 0?" (".concat(kt.version,")"):"");return It.value.indexOf(Mt)===-1&&(It.value="".concat(It.value).concat(Mt)),It}};return It}function St(Et,It,kt){var Mt=ft(kt),qt="".concat(Et.protocol,"://").concat(Et.url,"/").concat(It.charAt(0)==="/"?It.substr(1):It);return Mt.length&&(qt+="?".concat(Mt)),qt}function ft(Et){return Object.keys(Et).map(function(It){return st("%s=%s",It,(kt=Et[It],Object.prototype.toString.call(kt)==="[object Object]"||Object.prototype.toString.call(kt)==="[object Array]"?JSON.stringify(Et[It]):Et[It]));var kt}).join("&")}function ct(Et){return Et.map(function(It){return dt(It)})}function dt(Et){var It=Et.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return a(a({},Et),{},{request:a(a({},Et.request),{},{headers:a(a({},Et.request.headers),It)})})}var gt=function(Et){return function(It,kt){return Et.transporter.write({method:Dt,path:"2/abtests",data:It},kt)}},Tt=function(Et){return function(It,kt){return Et.transporter.write({method:vt,path:st("2/abtests/%s",It)},kt)}},wt=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("2/abtests/%s",It)},kt)}},xt=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"2/abtests"},It)}},At=function(Et){return function(It,kt){return Et.transporter.write({method:Dt,path:st("2/abtests/%s/stop",It)},kt)}},at=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/strategies/personalization"},It)}},mt=function(Et){return function(It,kt){return Et.transporter.write({method:Dt,path:"1/strategies/personalization",data:It},kt)}};function _t(Et){return function It(kt){return Et.request(kt).then(function(Mt){if(Et.batch!==void 0&&Et.batch(Mt.hits),!Et.shouldStop(Mt))return Mt.cursor?It({cursor:Mt.cursor}):It({page:(kt.page||0)+1})})}({})}var Rt=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.queryParameters,nn=c(Mt,["queryParameters"]),an=a({acl:It},qt!==void 0?{queryParameters:qt}:{});return rt(Et.transporter.write({method:Dt,path:"1/keys",data:an},nn),function(Zt,on){return tt(function(dn){return sn(Et)(Zt.key,on).catch(function(un){if(un.status!==404)throw un;return dn()})})})}},bt=function(Et){return function(It,kt,Mt){var qt=ot(Mt);return qt.queryParameters["X-Algolia-User-ID"]=It,Et.transporter.write({method:Dt,path:"1/clusters/mapping",data:{cluster:kt}},qt)}},Ct=function(Et){return function(It,kt,Mt){return Et.transporter.write({method:Dt,path:"1/clusters/mapping/batch",data:{users:It,cluster:kt}},Mt)}},$t=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Dt,path:st("/1/dictionaries/%s/batch",It),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},kt),function(Mt,qt){return Yt(Et)(Mt.taskID,qt)})}},Ut=function(Et){return function(It,kt,Mt){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/operation",It),data:{operation:"copy",destination:kt}},Mt),function(qt,nn){return xn(Et)(It,{methods:{waitTask:Un}}).waitTask(qt.taskID,nn)})}},en=function(Et){return function(It,kt,Mt){return Ut(Et)(It,kt,a(a({},Mt),{},{scope:[Tr.Rules]}))}},Nt=function(Et){return function(It,kt,Mt){return Ut(Et)(It,kt,a(a({},Mt),{},{scope:[Tr.Settings]}))}},Bt=function(Et){return function(It,kt,Mt){return Ut(Et)(It,kt,a(a({},Mt),{},{scope:[Tr.Synonyms]}))}},zt=function(Et){return function(It,kt){return It.method===Vt?Et.transporter.read(It,kt):Et.transporter.write(It,kt)}},Gt=function(Et){return function(It,kt){return rt(Et.transporter.write({method:vt,path:st("1/keys/%s",It)},kt),function(Mt,qt){return tt(function(nn){return sn(Et)(It,qt).then(nn).catch(function(an){if(an.status!==404)throw an})})})}},Xt=function(Et){return function(It,kt,Mt){var qt=kt.map(function(nn){return{action:"deleteEntry",body:{objectID:nn}}});return rt(Et.transporter.write({method:Dt,path:st("/1/dictionaries/%s/batch",It),data:{clearExistingDictionaryEntries:!1,requests:qt}},Mt),function(nn,an){return Yt(Et)(nn.taskID,an)})}},sn=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/keys/%s",It)},kt)}},cn=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/task/%s",It.toString())},kt)}},mn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"/1/dictionaries/*/settings"},It)}},En=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/logs"},It)}},vn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/clusters/mapping/top"},It)}},Rn=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/clusters/mapping/%s",It)},kt)}},Nn=function(Et){return function(It){var kt=It||{},Mt=kt.retrieveMappings,qt=c(kt,["retrieveMappings"]);return Mt===!0&&(qt.getClusters=!0),Et.transporter.read({method:Vt,path:"1/clusters/mapping/pending"},qt)}},xn=function(Et){return function(It){var kt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Mt={transporter:Et.transporter,appId:Et.appId,indexName:It};return it(Mt,kt.methods)}},Kn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/keys"},It)}},kn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/clusters"},It)}},Bn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/indexes"},It)}},Xn=function(Et){return function(It){return Et.transporter.read({method:Vt,path:"1/clusters/mapping"},It)}},Gn=function(Et){return function(It,kt,Mt){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/operation",It),data:{operation:"move",destination:kt}},Mt),function(qt,nn){return xn(Et)(It,{methods:{waitTask:Un}}).waitTask(qt.taskID,nn)})}},er=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Dt,path:"1/indexes/*/batch",data:{requests:It}},kt),function(Mt,qt){return Promise.all(Object.keys(Mt.taskID).map(function(nn){return xn(Et)(nn,{methods:{waitTask:Un}}).waitTask(Mt.taskID[nn],qt)}))})}},Jt=function(Et){return function(It,kt){return Et.transporter.read({method:Dt,path:"1/indexes/*/objects",data:{requests:It}},kt)}},Lt=function(Et){return function(It,kt){var Mt=It.map(function(qt){return a(a({},qt),{},{params:ft(qt.params||{})})});return Et.transporter.read({method:Dt,path:"1/indexes/*/queries",data:{requests:Mt},cacheable:!0},kt)}},Ot=function(Et){return function(It,kt){return Promise.all(It.map(function(Mt){var qt=Mt.params,nn=qt.facetName,an=qt.facetQuery,Zt=c(qt,["facetName","facetQuery"]);return xn(Et)(Mt.indexName,{methods:{searchForFacetValues:Sr}}).searchForFacetValues(nn,an,a(a({},kt),Zt))}))}},ln=function(Et){return function(It,kt){var Mt=ot(kt);return Mt.queryParameters["X-Algolia-User-ID"]=It,Et.transporter.write({method:vt,path:"1/clusters/mapping"},Mt)}},In=function(Et){return function(It,kt,Mt){var qt=kt.map(function(nn){return{action:"addEntry",body:nn}});return rt(Et.transporter.write({method:Dt,path:st("/1/dictionaries/%s/batch",It),data:{clearExistingDictionaryEntries:!0,requests:qt}},Mt),function(nn,an){return Yt(Et)(nn.taskID,an)})}},On=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Dt,path:st("1/keys/%s/restore",It)},kt),function(Mt,qt){return tt(function(nn){return sn(Et)(It,qt).catch(function(an){if(an.status!==404)throw an;return nn()})})})}},Ln=function(Et){return function(It,kt,Mt){var qt=kt.map(function(nn){return{action:"addEntry",body:nn}});return rt(Et.transporter.write({method:Dt,path:st("/1/dictionaries/%s/batch",It),data:{clearExistingDictionaryEntries:!1,requests:qt}},Mt),function(nn,an){return Yt(Et)(nn.taskID,an)})}},Qn=function(Et){return function(It,kt,Mt){return Et.transporter.read({method:Dt,path:st("/1/dictionaries/%s/search",It),data:{query:kt},cacheable:!0},Mt)}},Jn=function(Et){return function(It,kt){return Et.transporter.read({method:Dt,path:"1/clusters/mapping/search",data:{query:It}},kt)}},Ft=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Qt,path:"/1/dictionaries/*/settings",data:It},kt),function(Mt,qt){return Yt(Et)(Mt.taskID,qt)})}},jt=function(Et){return function(It,kt){var Mt=Object.assign({},kt),qt=kt||{},nn=qt.queryParameters,an=c(qt,["queryParameters"]),Zt=nn?{queryParameters:nn}:{},on=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return rt(Et.transporter.write({method:Qt,path:st("1/keys/%s",It),data:Zt},an),function(dn,un){return tt(function(Tn){return sn(Et)(It,un).then(function(An){return function(bn){return Object.keys(Mt).filter(function(Sn){return on.indexOf(Sn)!==-1}).every(function(Sn){if(Array.isArray(bn[Sn])&&Array.isArray(Mt[Sn])){var Mn=bn[Sn];return Mn.length===Mt[Sn].length&&Mn.every(function(Fn,qn){return Fn===Mt[Sn][qn]})}return bn[Sn]===Mt[Sn]})}(An)?Promise.resolve():Tn()})})})}},Yt=function(Et){return function(It,kt){return tt(function(Mt){return cn(Et)(It,kt).then(function(qt){return qt.status!=="published"?Mt():void 0})})}},rn=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/batch",Et.indexName),data:{requests:It}},kt),function(Mt,qt){return Un(Et)(Mt.taskID,qt)})}},hn=function(Et){return function(It){return _t(a(a({shouldStop:function(kt){return kt.cursor===void 0}},It),{},{request:function(kt){return Et.transporter.read({method:Dt,path:st("1/indexes/%s/browse",Et.indexName),data:kt},It)}}))}},fn=function(Et){return function(It){var kt=a({hitsPerPage:1e3},It);return _t(a(a({shouldStop:function(Mt){return Mt.hits.length<kt.hitsPerPage}},kt),{},{request:function(Mt){return wr(Et)("",a(a({},kt),Mt)).then(function(qt){return a(a({},qt),{},{hits:qt.hits.map(function(nn){return delete nn._highlightResult,nn})})})}}))}},yn=function(Et){return function(It){var kt=a({hitsPerPage:1e3},It);return _t(a(a({shouldStop:function(Mt){return Mt.hits.length<kt.hitsPerPage}},kt),{},{request:function(Mt){return br(Et)("",a(a({},kt),Mt)).then(function(qt){return a(a({},qt),{},{hits:qt.hits.map(function(nn){return delete nn._highlightResult,nn})})})}}))}},gn=function(Et){return function(It,kt,Mt){var qt=Mt||{},nn=qt.batchSize,an=c(qt,["batchSize"]),Zt={taskIDs:[],objectIDs:[]};return rt(function on(){var dn,un=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,Tn=[];for(dn=un;dn<It.length&&(Tn.push(It[dn]),Tn.length!==(nn||1e3));dn++);return Tn.length===0?Promise.resolve(Zt):rn(Et)(Tn.map(function(An){return{action:kt,body:An}}),an).then(function(An){return Zt.objectIDs=Zt.objectIDs.concat(An.objectIDs),Zt.taskIDs.push(An.taskID),dn++,on(dn)})}(),function(on,dn){return Promise.all(on.taskIDs.map(function(un){return Un(Et)(un,dn)}))})}},pn=function(Et){return function(It){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/clear",Et.indexName)},It),function(kt,Mt){return Un(Et)(kt.taskID,Mt)})}},Pn=function(Et){return function(It){var kt=It||{},Mt=kt.forwardToReplicas,qt=ot(c(kt,["forwardToReplicas"]));return Mt&&(qt.queryParameters.forwardToReplicas=1),rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/rules/clear",Et.indexName)},qt),function(nn,an){return Un(Et)(nn.taskID,an)})}},Vn=function(Et){return function(It){var kt=It||{},Mt=kt.forwardToReplicas,qt=ot(c(kt,["forwardToReplicas"]));return Mt&&(qt.queryParameters.forwardToReplicas=1),rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/synonyms/clear",Et.indexName)},qt),function(nn,an){return Un(Et)(nn.taskID,an)})}},_n=function(Et){return function(It,kt){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/deleteByQuery",Et.indexName),data:It},kt),function(Mt,qt){return Un(Et)(Mt.taskID,qt)})}},wn=function(Et){return function(It){return rt(Et.transporter.write({method:vt,path:st("1/indexes/%s",Et.indexName)},It),function(kt,Mt){return Un(Et)(kt.taskID,Mt)})}},$n=function(Et){return function(It,kt){return rt(Wn(Et)([It],kt).then(function(Mt){return{taskID:Mt.taskIDs[0]}}),function(Mt,qt){return Un(Et)(Mt.taskID,qt)})}},Wn=function(Et){return function(It,kt){var Mt=It.map(function(qt){return{objectID:qt}});return gn(Et)(Mt,ur.DeleteObject,kt)}},jn=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.forwardToReplicas,nn=ot(c(Mt,["forwardToReplicas"]));return qt&&(nn.queryParameters.forwardToReplicas=1),rt(Et.transporter.write({method:vt,path:st("1/indexes/%s/rules/%s",Et.indexName,It)},nn),function(an,Zt){return Un(Et)(an.taskID,Zt)})}},rr=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.forwardToReplicas,nn=ot(c(Mt,["forwardToReplicas"]));return qt&&(nn.queryParameters.forwardToReplicas=1),rt(Et.transporter.write({method:vt,path:st("1/indexes/%s/synonyms/%s",Et.indexName,It)},nn),function(an,Zt){return Un(Et)(an.taskID,Zt)})}},hr=function(Et){return function(It){return nr(Et)(It).then(function(){return!0}).catch(function(kt){if(kt.status!==404)throw kt;return!1})}},ir=function(Et){return function(It,kt,Mt){return Et.transporter.read({method:Dt,path:st("1/answers/%s/prediction",Et.indexName),data:{query:It,queryLanguages:kt},cacheable:!0},Mt)}},Zn=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.query,nn=Mt.paginate,an=c(Mt,["query","paginate"]),Zt=0;return function on(){return Rr(Et)(qt||"",a(a({},an),{},{page:Zt})).then(function(dn){for(var un=0,Tn=Object.entries(dn.hits);un<Tn.length;un++){var An=h(Tn[un],2),bn=An[0],Sn=An[1];if(It(Sn))return{object:Sn,position:parseInt(bn,10),page:Zt}}if(Zt++,nn===!1||Zt>=dn.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return on()})}()}},tr=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/indexes/%s/%s",Et.indexName,It)},kt)}},dr=function(){return function(Et,It){for(var kt=0,Mt=Object.entries(Et.hits);kt<Mt.length;kt++){var qt=h(Mt[kt],2),nn=qt[0];if(qt[1].objectID===It)return parseInt(nn,10)}return-1}},fr=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.attributesToRetrieve,nn=c(Mt,["attributesToRetrieve"]),an=It.map(function(Zt){return a({indexName:Et.indexName,objectID:Zt},qt?{attributesToRetrieve:qt}:{})});return Et.transporter.read({method:Dt,path:"1/indexes/*/objects",data:{requests:an}},nn)}},pr=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/indexes/%s/rules/%s",Et.indexName,It)},kt)}},nr=function(Et){return function(It){return Et.transporter.read({method:Vt,path:st("1/indexes/%s/settings",Et.indexName),data:{getVersion:2}},It)}},ar=function(Et){return function(It,kt){return Et.transporter.read({method:Vt,path:st("1/indexes/%s/synonyms/%s",Et.indexName,It)},kt)}},Cn=function(Et){return function(It,kt){return rt(Dn(Et)([It],kt).then(function(Mt){return{objectID:Mt.objectIDs[0],taskID:Mt.taskIDs[0]}}),function(Mt,qt){return Un(Et)(Mt.taskID,qt)})}},Dn=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.createIfNotExists,nn=c(Mt,["createIfNotExists"]),an=qt?ur.PartialUpdateObject:ur.PartialUpdateObjectNoCreate;return gn(Et)(It,an,nn)}},Yn=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.safe,nn=Mt.autoGenerateObjectIDIfNotExist,an=Mt.batchSize,Zt=c(Mt,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),on=function(Sn,Mn,Fn,qn){return rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/operation",Sn),data:{operation:Fn,destination:Mn}},qn),function(mr,Hn){return Un(Et)(mr.taskID,Hn)})},dn=Math.random().toString(36).substring(7),un="".concat(Et.indexName,"_tmp_").concat(dn),Tn=Er({appId:Et.appId,transporter:Et.transporter,indexName:un}),An=[],bn=on(Et.indexName,un,"copy",a(a({},Zt),{},{scope:["settings","synonyms","rules"]}));return An.push(bn),rt((qt?bn.wait(Zt):bn).then(function(){var Sn=Tn(It,a(a({},Zt),{},{autoGenerateObjectIDIfNotExist:nn,batchSize:an}));return An.push(Sn),qt?Sn.wait(Zt):Sn}).then(function(){var Sn=on(un,Et.indexName,"move",Zt);return An.push(Sn),qt?Sn.wait(Zt):Sn}).then(function(){return Promise.all(An)}).then(function(Sn){var Mn=h(Sn,3),Fn=Mn[0],qn=Mn[1],mr=Mn[2];return{objectIDs:qn.objectIDs,taskIDs:[Fn.taskID].concat(_(qn.taskIDs),[mr.taskID])}}),function(Sn,Mn){return Promise.all(An.map(function(Fn){return Fn.wait(Mn)}))})}},lr=function(Et){return function(It,kt){return vr(Et)(It,a(a({},kt),{},{clearExistingRules:!0}))}},yr=function(Et){return function(It,kt){return Ar(Et)(It,a(a({},kt),{},{clearExistingSynonyms:!0}))}},Cr=function(Et){return function(It,kt){return rt(Er(Et)([It],kt).then(function(Mt){return{objectID:Mt.objectIDs[0],taskID:Mt.taskIDs[0]}}),function(Mt,qt){return Un(Et)(Mt.taskID,qt)})}},Er=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.autoGenerateObjectIDIfNotExist,nn=c(Mt,["autoGenerateObjectIDIfNotExist"]),an=qt?ur.AddObject:ur.UpdateObject;if(an===ur.UpdateObject){var Zt=!0,on=!1,dn=void 0;try{for(var un,Tn=It[Symbol.iterator]();!(Zt=(un=Tn.next()).done);Zt=!0)if(un.value.objectID===void 0)return rt(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(An){on=!0,dn=An}finally{try{Zt||Tn.return==null||Tn.return()}finally{if(on)throw dn}}}return gn(Et)(It,an,nn)}},xr=function(Et){return function(It,kt){return vr(Et)([It],kt)}},vr=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.forwardToReplicas,nn=Mt.clearExistingRules,an=ot(c(Mt,["forwardToReplicas","clearExistingRules"]));return qt&&(an.queryParameters.forwardToReplicas=1),nn&&(an.queryParameters.clearExistingRules=1),rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/rules/batch",Et.indexName),data:It},an),function(Zt,on){return Un(Et)(Zt.taskID,on)})}},kr=function(Et){return function(It,kt){return Ar(Et)([It],kt)}},Ar=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.forwardToReplicas,nn=Mt.clearExistingSynonyms,an=Mt.replaceExistingSynonyms,Zt=ot(c(Mt,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return qt&&(Zt.queryParameters.forwardToReplicas=1),(an||nn)&&(Zt.queryParameters.replaceExistingSynonyms=1),rt(Et.transporter.write({method:Dt,path:st("1/indexes/%s/synonyms/batch",Et.indexName),data:It},Zt),function(on,dn){return Un(Et)(on.taskID,dn)})}},Rr=function(Et){return function(It,kt){return Et.transporter.read({method:Dt,path:st("1/indexes/%s/query",Et.indexName),data:{query:It},cacheable:!0},kt)}},Sr=function(Et){return function(It,kt,Mt){return Et.transporter.read({method:Dt,path:st("1/indexes/%s/facets/%s/query",Et.indexName,It),data:{facetQuery:kt},cacheable:!0},Mt)}},wr=function(Et){return function(It,kt){return Et.transporter.read({method:Dt,path:st("1/indexes/%s/rules/search",Et.indexName),data:{query:It}},kt)}},br=function(Et){return function(It,kt){return Et.transporter.read({method:Dt,path:st("1/indexes/%s/synonyms/search",Et.indexName),data:{query:It}},kt)}},Dr=function(Et){return function(It,kt){var Mt=kt||{},qt=Mt.forwardToReplicas,nn=ot(c(Mt,["forwardToReplicas"]));return qt&&(nn.queryParameters.forwardToReplicas=1),rt(Et.transporter.write({method:Qt,path:st("1/indexes/%s/settings",Et.indexName),data:It},nn),function(an,Zt){return Un(Et)(an.taskID,Zt)})}},Un=function(Et){return function(It,kt){return tt(function(Mt){return function(qt){return function(nn,an){return qt.transporter.read({method:Vt,path:st("1/indexes/%s/task/%s",qt.indexName,nn.toString())},an)}}(Et)(It,kt).then(function(qt){return qt.status!=="published"?Mt():void 0})})}},ur={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},Tr={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},Vr=1,Mr=2,$r=3;function Ir(Et,It,kt){var Mt,qt={appId:Et,apiKey:It,timeouts:{connect:1,read:2,write:30},requester:{send:function(Zt){return new Promise(function(on){var dn=new XMLHttpRequest;dn.open(Zt.method,Zt.url,!0),Object.keys(Zt.headers).forEach(function(bn){return dn.setRequestHeader(bn,Zt.headers[bn])});var un,Tn=function(bn,Sn){return setTimeout(function(){dn.abort(),on({status:0,content:Sn,isTimedOut:!0})},1e3*bn)},An=Tn(Zt.connectTimeout,"Connection timeout");dn.onreadystatechange=function(){dn.readyState>dn.OPENED&&un===void 0&&(clearTimeout(An),un=Tn(Zt.responseTimeout,"Socket timeout"))},dn.onerror=function(){dn.status===0&&(clearTimeout(An),clearTimeout(un),on({content:dn.responseText||"Network request failed",status:dn.status,isTimedOut:!1}))},dn.onload=function(){clearTimeout(An),clearTimeout(un),on({content:dn.responseText,status:dn.status,isTimedOut:!1})},dn.send(Zt.data)})}},logger:(Mt=$r,{debug:function(Zt,on){return Vr>=Mt&&console.debug(Zt,on),Promise.resolve()},info:function(Zt,on){return Mr>=Mt&&console.info(Zt,on),Promise.resolve()},error:function(Zt,on){return console.error(Zt,on),Promise.resolve()}}),responsesCache:d(),requestsCache:d({serializable:!1}),hostsCache:g({caches:[$({key:"".concat("4.22.1","-").concat(Et)}),d()]}),userAgent:Ht("4.22.1").add({segment:"Browser"})},nn=a(a({},qt),kt),an=function(){return function(Zt){return function(on){var dn=on.region||"us",un=j(nt.WithinHeaders,on.appId,on.apiKey),Tn=tn(a(a({hosts:[{url:"personalization.".concat(dn,".algolia.com")}]},on),{},{headers:a(a(a({},un.headers()),{"content-type":"application/json"}),on.headers),queryParameters:a(a({},un.queryParameters()),on.queryParameters)}));return it({appId:on.appId,transporter:Tn},on.methods)}(a(a(a({},qt),Zt),{},{methods:{getPersonalizationStrategy:at,setPersonalizationStrategy:mt}}))}};return function(Zt){var on=Zt.appId,dn=j(Zt.authMode!==void 0?Zt.authMode:nt.WithinHeaders,on,Zt.apiKey),un=tn(a(a({hosts:[{url:"".concat(on,"-dsn.algolia.net"),accept:ht.Read},{url:"".concat(on,".algolia.net"),accept:ht.Write}].concat(et([{url:"".concat(on,"-1.algolianet.com")},{url:"".concat(on,"-2.algolianet.com")},{url:"".concat(on,"-3.algolianet.com")}]))},Zt),{},{headers:a(a(a({},dn.headers()),{"content-type":"application/x-www-form-urlencoded"}),Zt.headers),queryParameters:a(a({},dn.queryParameters()),Zt.queryParameters)}));return it({transporter:un,appId:on,addAlgoliaAgent:function(Tn,An){un.userAgent.add({segment:Tn,version:An})},clearCache:function(){return Promise.all([un.requestsCache.clear(),un.responsesCache.clear()]).then(function(){})}},Zt.methods)}(a(a({},nn),{},{methods:{search:Lt,searchForFacetValues:Ot,multipleBatch:er,multipleGetObjects:Jt,multipleQueries:Lt,copyIndex:Ut,copySettings:Nt,copySynonyms:Bt,copyRules:en,moveIndex:Gn,listIndices:Bn,getLogs:En,listClusters:kn,multipleSearchForFacetValues:Ot,getApiKey:sn,addApiKey:Rt,listApiKeys:Kn,updateApiKey:jt,deleteApiKey:Gt,restoreApiKey:On,assignUserID:bt,assignUserIDs:Ct,getUserID:Rn,searchUserIDs:Jn,listUserIDs:Xn,getTopUserIDs:vn,removeUserID:ln,hasPendingMappings:Nn,clearDictionaryEntries:$t,deleteDictionaryEntries:Xt,getDictionarySettings:mn,getAppTask:cn,replaceDictionaryEntries:In,saveDictionaryEntries:Ln,searchDictionaryEntries:Qn,setDictionarySettings:Ft,waitAppTask:Yt,customRequest:zt,initIndex:function(Zt){return function(on){return xn(Zt)(on,{methods:{batch:rn,delete:wn,findAnswers:ir,getObject:tr,getObjects:fr,saveObject:Cr,saveObjects:Er,search:Rr,searchForFacetValues:Sr,waitTask:Un,setSettings:Dr,getSettings:nr,partialUpdateObject:Cn,partialUpdateObjects:Dn,deleteObject:$n,deleteObjects:Wn,deleteBy:_n,clearObjects:pn,browseObjects:hn,getObjectPosition:dr,findObject:Zn,exists:hr,saveSynonym:kr,saveSynonyms:Ar,getSynonym:ar,searchSynonyms:br,browseSynonyms:yn,deleteSynonym:rr,clearSynonyms:Vn,replaceAllObjects:Yn,replaceAllSynonyms:yr,searchRules:wr,getRule:pr,deleteRule:jn,saveRule:xr,saveRules:vr,replaceAllRules:lr,browseRules:fn,clearRules:Pn}})}},initAnalytics:function(){return function(Zt){return function(on){var dn=on.region||"us",un=j(nt.WithinHeaders,on.appId,on.apiKey),Tn=tn(a(a({hosts:[{url:"analytics.".concat(dn,".algolia.com")}]},on),{},{headers:a(a(a({},un.headers()),{"content-type":"application/json"}),on.headers),queryParameters:a(a({},un.queryParameters()),on.queryParameters)}));return it({appId:on.appId,transporter:Tn},on.methods)}(a(a(a({},qt),Zt),{},{methods:{addABTest:gt,getABTest:wt,getABTests:xt,stopABTest:At,deleteABTest:Tt}}))}},initPersonalization:an,initRecommendation:function(){return function(Zt){return nn.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),an()(Zt)}}}}))}return Ir.version="4.22.1",Ir})})(algoliasearch_umd);var algoliasearch_umdExports=algoliasearch_umd.exports;const algoliasearch=getDefaultExportFromCjs(algoliasearch_umdExports),APP_ID$1="E77TDAP2ZW",SEARCH_KEY="8761a5cbc3b094847852417488c43f3b",searchClient=algoliasearch(APP_ID$1,SEARCH_KEY),index=searchClient.initIndex("asu-mecha");function Search(){const[i,e]=reactExports.useState([]),[s,o]=reactExports.useState("");return reactExports.useEffect(()=>{index.search(s).then(({hits:a})=>{e(a)})},[s]),jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx("input",{type:"search",value:s,onChange:a=>o(a.target.value),placeholder:"Search"}),s.length>0&&jsxRuntimeExports.jsx("ul",{children:i.map(a=>jsxRuntimeExports.jsx("li",{className:"search-result",dangerouslySetInnerHTML:{__html:a._highlightResult.Title.value}},a.objectID))})]})}const NavbarHandler=({theme:i,setTheme:e})=>{const[s,o]=reactExports.useState(!1),a=()=>{console.log(window.scrollY),window.scrollY>=250?o(!0):o(!1)};return window.addEventListener("scroll",a),jsxRuntimeExports.jsxs("div",{className:"nav-container",children:[jsxRuntimeExports.jsx(NavbarDesktop,{theme:i,setTheme:e,navbar:s}),jsxRuntimeExports.jsx(NavbarMobile,{theme:i,setTheme:e,navbar:s})]})},Sidebar=({theme:i,setTheme:e})=>{const s=()=>{e(i==="light"?"dark":"light")},o=()=>{const a=document.querySelector(".sidebar");a.style.display="none"};return jsxRuntimeExports.jsxs("ul",{className:"sidebar",children:[jsxRuntimeExports.jsxs("div",{className:"toolbar",children:[jsxRuntimeExports.jsx("li",{className:"sidebar-item",onClick:()=>o(),children:jsxRuntimeExports.jsx("a",{children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"26",viewBox:"0 -960 960 960",width:"26",fill:i=="light"?"black":"white",children:jsxRuntimeExports.jsx("path",{d:"m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"})})})}),jsxRuntimeExports.jsx("img",{onClick:()=>s(),src:i=="light"?toggle_icon_light:toggle_icon_dark,alt:"toggle",className:"toggle"})]}),jsxRuntimeExports.jsxs("div",{className:"searchbar sidebar-item",children:[jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Search"}),jsxRuntimeExports.jsx("img",{src:i=="light"?search_icon_light:search_icon_dark,alt:"search"})]}),jsxRuntimeExports.jsx("li",{className:"sidebar-item",children:jsxRuntimeExports.jsx("a",{href:"/#",children:"Home"})}),jsxRuntimeExports.jsx("li",{className:"sidebar-item",children:jsxRuntimeExports.jsx("a",{href:"/#/courses",children:"Courses"})}),jsxRuntimeExports.jsx("li",{className:"sidebar-item",children:jsxRuntimeExports.jsx("a",{href:"/#/feedback",children:"Feedback"})}),jsxRuntimeExports.jsx("li",{className:"sidebar-item",children:jsxRuntimeExports.jsx("a",{children:"Login"})}),jsxRuntimeExports.jsx("li",{className:"sidebar-item",children:jsxRuntimeExports.jsx("a",{href:"/#/upload",children:"Upload"})})]})},NavbarDesktop=({theme:i,setTheme:e,navbar:s})=>{const o=()=>{e(i==="light"?"dark":"light")};return jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("nav",{className:"navbar desktop "+s,children:[jsxRuntimeExports.jsx("img",{src:i=="light"?logo_light:logo_dark,alt:"logo",className:"logo",onClick:()=>window.location.href="/"}),jsxRuntimeExports.jsxs("div",{className:"searchbar "+s,children:[jsxRuntimeExports.jsx(Search,{}),jsxRuntimeExports.jsx("img",{src:i=="light"?search_icon_light:search_icon_dark,alt:"search"})]}),jsxRuntimeExports.jsxs("ul",{children:[jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/#",children:"Home"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/#/courses",children:"Courses"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/#/feedback",children:"Feedback"})}),jsxRuntimeExports.jsx("li",{children:jsxRuntimeExports.jsx("a",{href:"/#/upload",children:"Upload"})})]}),jsxRuntimeExports.jsx("img",{onClick:()=>o(),src:i=="light"?toggle_icon_light:toggle_icon_dark,alt:"toggle",className:"toggle"})]})})},NavbarMobile=({theme:i,setTheme:e,navbar:s})=>{const o=()=>{const a=document.querySelector(".sidebar");console.log(a),a.style.display="flex"};return jsxRuntimeExports.jsxs(jsxRuntimeExports.Fragment,{children:[jsxRuntimeExports.jsx(Sidebar,{theme:i,setTheme:e}),jsxRuntimeExports.jsx("div",{children:jsxRuntimeExports.jsxs("nav",{className:"navbar mobile "+s,children:[jsxRuntimeExports.jsx("img",{src:i=="light"?logo_light:logo_dark,alt:"logo",className:"logo",onClick:()=>window.location.href="/"}),jsxRuntimeExports.jsxs("div",{className:"searchbar "+s,children:[jsxRuntimeExports.jsx(Search,{}),jsxRuntimeExports.jsx("img",{src:i=="light"?search_icon_light:search_icon_dark,alt:"search"})]}),jsxRuntimeExports.jsx("li",{onClick:()=>o(),className:"menu-button",children:jsxRuntimeExports.jsx("a",{children:jsxRuntimeExports.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",height:"26",viewBox:"0 -960 960 960",width:"26",fill:i=="light"?"black":"white",children:jsxRuntimeExports.jsx("path",{d:"M120-240v-80h720v80H120Zm0-200v-80h720v80H120Zm0-200v-80h720v80H120Z"})})})})]})})]})},Hero=()=>jsxRuntimeExports.jsxs("div",{className:"hero",children:[jsxRuntimeExports.jsx("h1",{children:"ASU MECHA"}),jsxRuntimeExports.jsx(Search,{})]});function RecentDocs(){let i=0;const e=collection(db,"documents"),s=query(e,orderBy("CreatedAt","desc")),[o]=useCollectionData(s);return jsxRuntimeExports.jsx("div",{children:o&&o.map(a=>jsxRuntimeExports.jsx(PreviewDocument,{doc:a},i++))})}function Home(){const i=localStorage.getItem("currentTheme"),[e,s]=reactExports.useState(i||"dark");return reactExports.useEffect(()=>{localStorage.setItem("currentTheme",e)},[e]),jsxRuntimeExports.jsx(jsxRuntimeExports.Fragment,{children:jsxRuntimeExports.jsxs("div",{className:"container "+e,children:[jsxRuntimeExports.jsx(NavbarHandler,{theme:e,setTheme:s}),jsxRuntimeExports.jsx(Hero,{}),jsxRuntimeExports.jsx("h1",{className:"title",children:"Recently Uploaded"}),jsxRuntimeExports.jsx(RecentDocs,{})]})})}pdfjs.GlobalWorkerOptions.workerSrc=`//cdnjs.cloudflare.com/ajax/libs/pdf.js/${pdfjs.version}/pdf.worker.js`;const APP_ID="E77TDAP2ZW",ADMIN_API_KEY="2016061c4660d6ecc71016602c36e34e";function Form(){const[i,e]=reactExports.useState(""),[s,o]=reactExports.useState(0),a=c=>{c.preventDefault();const h=c.target?.[0].files[0],_=c.target?.[1]?.value,$=c.target?.[2]?.value,g=$.split("-")[0],d=$.split("-")[1],j=c.target?.[3]?.value,tt=c.target?.[4]?.value,rt=c.target?.[5]?.value,et=new FileReader;if(console.log(_,$,j,tt,rt,h?.name,h?.size),!h)return;const it=ref(storage,`documents/${$}/${j}/${tt}${rt}/${h.name}`),st=uploadBytesResumable(it,h);st.on("state_changed",nt=>{const ot=Math.round(nt.bytesTransferred/nt.totalBytes*100);o(ot)},nt=>{console.log(nt)},()=>{getDownloadURL(st.snapshot.ref).then(nt=>{e(nt);const ot=doc(collection(db,"documents")),ht=["and","for","but","etc."],pt={Title:_,Name:h.name,CourseName:d,CourseCode:g,Category:j,Semester:tt,Year:rt,CreatedAt:Timestamp.now(),Type:"Document",URL:nt,Keywords:[..._.split(" "),...d.split(" ")].filter(Pt=>!ht.includes(Pt.toLowerCase()))};setDoc(ot,pt);const ut=algoliasearch(APP_ID,ADMIN_API_KEY).initIndex("asu-mecha"),yt=ot.id;ut.saveObject({...pt,objectID:yt})})}),et.readAsDataURL(h)};return jsxRuntimeExports.jsxs("div",{children:[jsxRuntimeExports.jsxs("form",{onSubmit:a,className:"uploadform",children:[jsxRuntimeExports.jsx("input",{type:"file"}),jsxRuntimeExports.jsx("input",{type:"text",placeholder:"Title"}),jsxRuntimeExports.jsx("label",{htmlFor:"course",children:"Choose a Course:"}),jsxRuntimeExports.jsxs("select",{name:"course",children:[jsxRuntimeExports.jsx("option",{value:"MDP251-Casting and Welding",children:"MDP251-Casting and Welding"}),jsxRuntimeExports.jsx("option",{value:"MDP231-Engineering Economy",children:"MDP231-Engineering Economy"}),jsxRuntimeExports.jsx("option",{value:"MDP232-Industrial Project Management",children:"MDP232-Industrial Project Management"}),jsxRuntimeExports.jsx("option",{value:"MDP212-Mechanics of Machines",children:"MDP212-Mechanics of Machines"}),jsxRuntimeExports.jsx("option",{value:"MCT232-Electronics for Instrumentation",children:"MCT232-Electronics for Instrumentation"}),jsxRuntimeExports.jsx("option",{value:"MEP221-Fluid Mechanics and Turbo-Machinery",children:"MEP221-Fluid Mechanics and Turbo-Machinery"}),jsxRuntimeExports.jsx("option",{value:"NA-Others",children:"Others"})]}),jsxRuntimeExports.jsx("label",{htmlFor:"category",children:"Choose a Category:"}),jsxRuntimeExports.jsxs("select",{name:"category",children:[jsxRuntimeExports.jsx("option",{value:"Lecture Slides",children:"Lecture Slides"}),jsxRuntimeExports.jsx("option",{value:"Assignments",children:"Assignments"}),jsxRuntimeExports.jsx("option",{value:"Final Exams",children:"Final Exams"}),jsxRuntimeExports.jsx("option",{value:"Midterm Exams",children:"Midterm Exams"}),jsxRuntimeExports.jsx("option",{value:"Quizzes",children:"Quizzes"}),jsxRuntimeExports.jsx("option",{value:"Projects",children:"Projects"}),jsxRuntimeExports.jsx("option",{value:"Labs",children:"Labs"}),jsxRuntimeExports.jsx("option",{value:"Tutorials",children:"Tutorials"}),jsxRuntimeExports.jsx("option",{value:"Solutions",children:"Solutions"}),jsxRuntimeExports.jsx("option",{value:"References",children:"References"}),jsxRuntimeExports.jsx("option",{value:"Others",children:"Others"})]}),jsxRuntimeExports.jsx("label",{htmlFor:"semester",children:"Choose a Semester:"}),jsxRuntimeExports.jsxs("select",{name:"semester",children:[jsxRuntimeExports.jsx("option",{value:"Fall",children:"Fall"}),jsxRuntimeExports.jsx("option",{value:"Spring",children:"Spring"}),jsxRuntimeExports.jsx("option",{value:"Summer",children:"Summer"})]}),jsxRuntimeExports.jsx("label",{htmlFor:"year",children:"Choose a Year:"}),jsxRuntimeExports.jsxs("select",{name:"year",children:[jsxRuntimeExports.jsx("option",{value:"2024",children:"2024"}),jsxRuntimeExports.jsx("option",{value:"2023",children:"2023"}),jsxRuntimeExports.jsx("option",{value:"2022",children:"2022"}),jsxRuntimeExports.jsx("option",{value:"2021",children:"2021"}),jsxRuntimeExports.jsx("option",{value:"2020",children:"2020"}),jsxRuntimeExports.jsx("option",{value:"2019",children:"2019"}),jsxRuntimeExports.jsx("option",{value:"2018",children:"2018"}),jsxRuntimeExports.jsx("option",{value:"2017",children:"2017"}),jsxRuntimeExports.jsx("option",{value:"2016",children:"2016"})]}),jsxRuntimeExports.jsx("button",{type:"submit",children:"Upload"})]}),!i&&jsxRuntimeExports.jsx("div",{className:"outerbar",children:jsxRuntimeExports.jsxs("div",{className:"innerbar",style:{width:`${s}%`},children:[s,"%"]})}),i&&jsxRuntimeExports.jsx("a",{href:i,target:"_blank",rel:"noreferrer",className:"aspectwrapper",children:jsxRuntimeExports.jsx(Document$1,{file:i,children:jsxRuntimeExports.jsx(Page$1,{pageNumber:1,width:200})})})]})}function UploadFiles(){const i=localStorage.getItem("currentTheme"),[e,s]=reactExports.useState(i||"dark");return reactExports.useEffect(()=>{localStorage.setItem("currentTheme",e)},[e]),jsxRuntimeExports.jsxs("div",{className:"container "+e,children:[jsxRuntimeExports.jsx(NavbarHandler,{theme:e,setTheme:s}),jsxRuntimeExports.jsx("h1",{children:"Upload Files"}),jsxRuntimeExports.jsx(Form,{})]})}function App(){return jsxRuntimeExports.jsxs(Routes,{children:[jsxRuntimeExports.jsx(Route,{path:"/",element:jsxRuntimeExports.jsx(Home,{})}),jsxRuntimeExports.jsx(Route,{path:"/upload",element:jsxRuntimeExports.jsx(UploadFiles,{})})]})}const router=createHashRouter([{path:"/*",element:jsxRuntimeExports.jsx(App,{})}]);client.createRoot(document.getElementById("root")).render(jsxRuntimeExports.jsx(React.StrictMode,{children:jsxRuntimeExports.jsx(RouterProvider,{router})}));
